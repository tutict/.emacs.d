"use strict";
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
Object.defineProperty(exports, "__esModule", { value: true });
exports.MdWorkspaceSymbolProvider = void 0;
const dispose_1 = require("../util/dispose");
const workspaceCache_1 = require("../workspaceCache");
class MdWorkspaceSymbolProvider extends dispose_1.Disposable {
    constructor(workspace, symbolProvider) {
        super();
        this._cache = this._register(new workspaceCache_1.MdWorkspaceInfoCache(workspace, doc => symbolProvider.provideDocumentSymbolInformation(doc)));
    }
    async provideWorkspaceSymbols(query, _token) {
        const allSymbols = (await this._cache.values()).flat();
        return allSymbols.filter(symbolInformation => symbolInformation.name.toLowerCase().indexOf(query.toLowerCase()) !== -1);
    }
}
exports.MdWorkspaceSymbolProvider = MdWorkspaceSymbolProvider;
//# sourceMappingURL=workspaceSymbols.js.map