"use strict";require("core-js/modules/es.reflect.construct.js");require("core-js/modules/es.reflect.get.js");require("regenerator-runtime/runtime.js");require("core-js/modules/es.object.get-own-property-descriptor.js");require("core-js/modules/es.object.get-own-property-names.js");require("core-js/modules/es.object.get-prototype-of.js");require("core-js/modules/es.object.keys.js");require("core-js/modules/es.number.max-safe-integer.js");require("core-js/modules/es.number.constructor.js");require("core-js/modules/es.regexp.exec.js");require("core-js/modules/es.array.concat.js");require("core-js/modules/es.regexp.constructor.js");require("core-js/modules/es.regexp.to-string.js");require("core-js/modules/es.object.to-string.js");require("core-js/modules/es.array.filter.js");require("core-js/modules/es.string.match.js");require("core-js/modules/es.string.trim.js");require("core-js/modules/es.array.map.js");require("core-js/modules/es.string.split.js");require("core-js/modules/es.array.join.js");require("core-js/modules/es.string.replace.js");require("core-js/modules/es.array.sort.js");require("core-js/modules/es.symbol.iterator.js");require("core-js/modules/es.array.iterator.js");require("core-js/modules/es.string.iterator.js");require("core-js/modules/web.dom-collections.iterator.js");require("core-js/modules/es.symbol.js");require("core-js/modules/es.symbol.description.js");require("core-js/modules/web.dom-collections.for-each.js");require("core-js/modules/es.promise.js");require("core-js/modules/es.array.slice.js");require("core-js/modules/es.array.splice.js");require("core-js/modules/es.map.js");require("core-js/modules/es.set.js");require("core-js/modules/es.object.freeze.js");require("core-js/modules/es.symbol.to-string-tag.js");require("core-js/modules/es.json.to-string-tag.js");require("core-js/modules/es.math.to-string-tag.js");require("core-js/modules/es.function.name.js");require("core-js/modules/es.array.includes.js");require("core-js/modules/es.string.includes.js");require("core-js/modules/es.typed-array.uint32-array.js");require("core-js/modules/es.typed-array.copy-within.js");require("core-js/modules/es.typed-array.every.js");require("core-js/modules/es.typed-array.fill.js");require("core-js/modules/es.typed-array.filter.js");require("core-js/modules/es.typed-array.find.js");require("core-js/modules/es.typed-array.find-index.js");require("core-js/modules/es.typed-array.for-each.js");require("core-js/modules/es.typed-array.includes.js");require("core-js/modules/es.typed-array.index-of.js");require("core-js/modules/es.typed-array.iterator.js");require("core-js/modules/es.typed-array.join.js");require("core-js/modules/es.typed-array.last-index-of.js");require("core-js/modules/es.typed-array.map.js");require("core-js/modules/es.typed-array.reduce.js");require("core-js/modules/es.typed-array.reduce-right.js");require("core-js/modules/es.typed-array.reverse.js");require("core-js/modules/es.typed-array.set.js");require("core-js/modules/es.typed-array.slice.js");require("core-js/modules/es.typed-array.some.js");require("core-js/modules/es.typed-array.sort.js");require("core-js/modules/es.typed-array.subarray.js");require("core-js/modules/es.typed-array.to-locale-string.js");require("core-js/modules/es.typed-array.to-string.js");require("core-js/modules/es.object.assign.js");require("core-js/modules/es.promise.finally.js");require("core-js/modules/es.array.from.js");require("core-js/modules/es.string.starts-with.js");require("core-js/modules/esnext.global-this.js");require("core-js/modules/es.object.seal.js");require("core-js/modules/es.string.ends-with.js");require("core-js/modules/es.number.to-fixed.js");require("core-js/modules/es.typed-array.uint8-array.js");require("core-js/modules/es.object.get-own-property-descriptors.js");require("core-js/modules/es.object.entries.js");require("core-js/modules/es.reflect.apply.js");require("core-js/modules/es.math.trunc.js");require("core-js/modules/es.string.repeat.js");require("core-js/modules/web.url.to-json.js");require("core-js/modules/es.string.search.js");require("core-js/modules/es.object.is-extensible.js");require("core-js/modules/es.regexp.flags.js");require("core-js/modules/web.url.js");require("core-js/modules/web.url-search-params.js");require("core-js/modules/esnext.promise.all-settled.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _get2(){if(typeof Reflect!=="undefined"&&Reflect.get){_get2=Reflect.get;}else{_get2=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get2.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}Object.defineProperty(subClass,"prototype",{value:Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}}),writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e16){throw _e16;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e17){didErr=true;err=_e17;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf;var __hasOwnProp=Object.prototype.hasOwnProperty;var __markAsModule=function __markAsModule(target){return __defProp(target,"__esModule",{value:true});};var __commonJS=function __commonJS(cb,mod){return function __require(){return mod||(0,cb[Object.keys(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports;};};var __export=function __export(target,all){__markAsModule(target);for(var name in all){__defProp(target,name,{get:all[name],enumerable:true});}};var __reExport=function __reExport(target,module2,desc){if(module2&&_typeof(module2)==="object"||typeof module2==="function"){var _iterator=_createForOfIteratorHelper(__getOwnPropNames(module2)),_step;try{var _loop=function _loop(){var key=_step.value;if(!__hasOwnProp.call(target,key)&&key!=="default")__defProp(target,key,{get:function get(){return module2[key];},enumerable:!(desc=__getOwnPropDesc(module2,key))||desc.enumerable});};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}}return target;};var __toModule=function __toModule(module2){return __reExport(__markAsModule(__defProp(module2!=null?__create(__getProtoOf(module2)):{},"default",module2&&module2.__esModule&&"default"in module2?{get:function get(){return module2.default;},enumerable:true}:{value:module2,enumerable:true})),module2);};// client/node_modules/semver/internal/constants.js
var require_constants=__commonJS({"client/node_modules/semver/internal/constants.js":function clientNode_modulesSemverInternalConstantsJs(exports,module2){var SEMVER_SPEC_VERSION="2.0.0";var MAX_LENGTH=256;var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var MAX_SAFE_COMPONENT_LENGTH=16;module2.exports={SEMVER_SPEC_VERSION:SEMVER_SPEC_VERSION,MAX_LENGTH:MAX_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,MAX_SAFE_COMPONENT_LENGTH:MAX_SAFE_COMPONENT_LENGTH};}});// client/node_modules/semver/internal/debug.js
var require_debug=__commonJS({"client/node_modules/semver/internal/debug.js":function clientNode_modulesSemverInternalDebugJs(exports,module2){var debug=(typeof process==="undefined"?"undefined":_typeof(process))==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var _console;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return(_console=console).error.apply(_console,["SEMVER"].concat(args));}:function(){};module2.exports=debug;}});// client/node_modules/semver/internal/re.js
var require_re=__commonJS({"client/node_modules/semver/internal/re.js":function clientNode_modulesSemverInternalReJs(exports,module2){var _require_constants=require_constants(),MAX_SAFE_COMPONENT_LENGTH=_require_constants.MAX_SAFE_COMPONENT_LENGTH;var debug=require_debug();exports=module2.exports={};var re=exports.re=[];var src=exports.src=[];var t=exports.t={};var R=0;var createToken=function createToken(name,value,isGlobal){var index=R++;debug(index,value);t[name]=index;src[index]=value;re[index]=new RegExp(value,isGlobal?"g":void 0);};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*");createToken("NUMERICIDENTIFIERLOOSE","[0-9]+");createToken("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");createToken("MAINVERSION","(".concat(src[t.NUMERICIDENTIFIER],")\\.(").concat(src[t.NUMERICIDENTIFIER],")\\.(").concat(src[t.NUMERICIDENTIFIER],")"));createToken("MAINVERSIONLOOSE","(".concat(src[t.NUMERICIDENTIFIERLOOSE],")\\.(").concat(src[t.NUMERICIDENTIFIERLOOSE],")\\.(").concat(src[t.NUMERICIDENTIFIERLOOSE],")"));createToken("PRERELEASEIDENTIFIER","(?:".concat(src[t.NUMERICIDENTIFIER],"|").concat(src[t.NONNUMERICIDENTIFIER],")"));createToken("PRERELEASEIDENTIFIERLOOSE","(?:".concat(src[t.NUMERICIDENTIFIERLOOSE],"|").concat(src[t.NONNUMERICIDENTIFIER],")"));createToken("PRERELEASE","(?:-(".concat(src[t.PRERELEASEIDENTIFIER],"(?:\\.").concat(src[t.PRERELEASEIDENTIFIER],")*))"));createToken("PRERELEASELOOSE","(?:-?(".concat(src[t.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(src[t.PRERELEASEIDENTIFIERLOOSE],")*))"));createToken("BUILDIDENTIFIER","[0-9A-Za-z-]+");createToken("BUILD","(?:\\+(".concat(src[t.BUILDIDENTIFIER],"(?:\\.").concat(src[t.BUILDIDENTIFIER],")*))"));createToken("FULLPLAIN","v?".concat(src[t.MAINVERSION]).concat(src[t.PRERELEASE],"?").concat(src[t.BUILD],"?"));createToken("FULL","^".concat(src[t.FULLPLAIN],"$"));createToken("LOOSEPLAIN","[v=\\s]*".concat(src[t.MAINVERSIONLOOSE]).concat(src[t.PRERELEASELOOSE],"?").concat(src[t.BUILD],"?"));createToken("LOOSE","^".concat(src[t.LOOSEPLAIN],"$"));createToken("GTLT","((?:<|>)?=?)");createToken("XRANGEIDENTIFIERLOOSE","".concat(src[t.NUMERICIDENTIFIERLOOSE],"|x|X|\\*"));createToken("XRANGEIDENTIFIER","".concat(src[t.NUMERICIDENTIFIER],"|x|X|\\*"));createToken("XRANGEPLAIN","[v=\\s]*(".concat(src[t.XRANGEIDENTIFIER],")(?:\\.(").concat(src[t.XRANGEIDENTIFIER],")(?:\\.(").concat(src[t.XRANGEIDENTIFIER],")(?:").concat(src[t.PRERELEASE],")?").concat(src[t.BUILD],"?)?)?"));createToken("XRANGEPLAINLOOSE","[v=\\s]*(".concat(src[t.XRANGEIDENTIFIERLOOSE],")(?:\\.(").concat(src[t.XRANGEIDENTIFIERLOOSE],")(?:\\.(").concat(src[t.XRANGEIDENTIFIERLOOSE],")(?:").concat(src[t.PRERELEASELOOSE],")?").concat(src[t.BUILD],"?)?)?"));createToken("XRANGE","^".concat(src[t.GTLT],"\\s*").concat(src[t.XRANGEPLAIN],"$"));createToken("XRANGELOOSE","^".concat(src[t.GTLT],"\\s*").concat(src[t.XRANGEPLAINLOOSE],"$"));createToken("COERCE","(^|[^\\d])(\\d{1,".concat(MAX_SAFE_COMPONENT_LENGTH,"})(?:\\.(\\d{1,").concat(MAX_SAFE_COMPONENT_LENGTH,"}))?(?:\\.(\\d{1,").concat(MAX_SAFE_COMPONENT_LENGTH,"}))?(?:$|[^\\d])"));createToken("COERCERTL",src[t.COERCE],true);createToken("LONETILDE","(?:~>?)");createToken("TILDETRIM","(\\s*)".concat(src[t.LONETILDE],"\\s+"),true);exports.tildeTrimReplace="$1~";createToken("TILDE","^".concat(src[t.LONETILDE]).concat(src[t.XRANGEPLAIN],"$"));createToken("TILDELOOSE","^".concat(src[t.LONETILDE]).concat(src[t.XRANGEPLAINLOOSE],"$"));createToken("LONECARET","(?:\\^)");createToken("CARETTRIM","(\\s*)".concat(src[t.LONECARET],"\\s+"),true);exports.caretTrimReplace="$1^";createToken("CARET","^".concat(src[t.LONECARET]).concat(src[t.XRANGEPLAIN],"$"));createToken("CARETLOOSE","^".concat(src[t.LONECARET]).concat(src[t.XRANGEPLAINLOOSE],"$"));createToken("COMPARATORLOOSE","^".concat(src[t.GTLT],"\\s*(").concat(src[t.LOOSEPLAIN],")$|^$"));createToken("COMPARATOR","^".concat(src[t.GTLT],"\\s*(").concat(src[t.FULLPLAIN],")$|^$"));createToken("COMPARATORTRIM","(\\s*)".concat(src[t.GTLT],"\\s*(").concat(src[t.LOOSEPLAIN],"|").concat(src[t.XRANGEPLAIN],")"),true);exports.comparatorTrimReplace="$1$2$3";createToken("HYPHENRANGE","^\\s*(".concat(src[t.XRANGEPLAIN],")\\s+-\\s+(").concat(src[t.XRANGEPLAIN],")\\s*$"));createToken("HYPHENRANGELOOSE","^\\s*(".concat(src[t.XRANGEPLAINLOOSE],")\\s+-\\s+(").concat(src[t.XRANGEPLAINLOOSE],")\\s*$"));createToken("STAR","(<|>)?=?\\s*\\*");createToken("GTE0","^\\s*>=\\s*0.0.0\\s*$");createToken("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");}});// client/node_modules/semver/internal/parse-options.js
var require_parse_options=__commonJS({"client/node_modules/semver/internal/parse-options.js":function clientNode_modulesSemverInternalParseOptionsJs(exports,module2){var opts=["includePrerelease","loose","rtl"];var parseOptions=function parseOptions(options){return!options?{}:_typeof(options)!=="object"?{loose:true}:opts.filter(function(k){return options[k];}).reduce(function(options2,k){options2[k]=true;return options2;},{});};module2.exports=parseOptions;}});// client/node_modules/semver/internal/identifiers.js
var require_identifiers=__commonJS({"client/node_modules/semver/internal/identifiers.js":function clientNode_modulesSemverInternalIdentifiersJs(exports,module2){var numeric=/^[0-9]+$/;var compareIdentifiers=function compareIdentifiers(a,b){var anum=numeric.test(a);var bnum=numeric.test(b);if(anum&&bnum){a=+a;b=+b;}return a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1;};var rcompareIdentifiers=function rcompareIdentifiers(a,b){return compareIdentifiers(b,a);};module2.exports={compareIdentifiers:compareIdentifiers,rcompareIdentifiers:rcompareIdentifiers};}});// client/node_modules/semver/classes/semver.js
var require_semver=__commonJS({"client/node_modules/semver/classes/semver.js":function clientNode_modulesSemverClassesSemverJs(exports,module2){var debug=require_debug();var _require_constants2=require_constants(),MAX_LENGTH=_require_constants2.MAX_LENGTH,MAX_SAFE_INTEGER=_require_constants2.MAX_SAFE_INTEGER;var _require_re=require_re(),re=_require_re.re,t=_require_re.t;var parseOptions=require_parse_options();var _require_identifiers=require_identifiers(),compareIdentifiers=_require_identifiers.compareIdentifiers;var SemVer=/*#__PURE__*/function(){function SemVer(version,options){_classCallCheck(this,SemVer);options=parseOptions(options);if(version instanceof SemVer){if(version.loose===!!options.loose&&version.includePrerelease===!!options.includePrerelease){return version;}else{version=version.version;}}else if(typeof version!=="string"){throw new TypeError("Invalid Version: ".concat(version));}if(version.length>MAX_LENGTH){throw new TypeError("version is longer than ".concat(MAX_LENGTH," characters"));}debug("SemVer",version,options);this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;var m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m){throw new TypeError("Invalid Version: ".concat(version));}this.raw=version;this.major=+m[1];this.minor=+m[2];this.patch=+m[3];if(this.major>MAX_SAFE_INTEGER||this.major<0){throw new TypeError("Invalid major version");}if(this.minor>MAX_SAFE_INTEGER||this.minor<0){throw new TypeError("Invalid minor version");}if(this.patch>MAX_SAFE_INTEGER||this.patch<0){throw new TypeError("Invalid patch version");}if(!m[4]){this.prerelease=[];}else{this.prerelease=m[4].split(".").map(function(id){if(/^[0-9]+$/.test(id)){var num=+id;if(num>=0&&num<MAX_SAFE_INTEGER){return num;}}return id;});}this.build=m[5]?m[5].split("."):[];this.format();}_createClass(SemVer,[{key:"format",value:function format(){this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch);if(this.prerelease.length){this.version+="-".concat(this.prerelease.join("."));}return this.version;}},{key:"toString",value:function toString(){return this.version;}},{key:"compare",value:function compare(other){debug("SemVer.compare",this.version,this.options,other);if(!(other instanceof SemVer)){if(typeof other==="string"&&other===this.version){return 0;}other=new SemVer(other,this.options);}if(other.version===this.version){return 0;}return this.compareMain(other)||this.comparePre(other);}},{key:"compareMain",value:function compareMain(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options);}return compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch);}},{key:"comparePre",value:function comparePre(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options);}if(this.prerelease.length&&!other.prerelease.length){return-1;}else if(!this.prerelease.length&&other.prerelease.length){return 1;}else if(!this.prerelease.length&&!other.prerelease.length){return 0;}var i=0;do{var a=this.prerelease[i];var b=other.prerelease[i];debug("prerelease compare",i,a,b);if(a===void 0&&b===void 0){return 0;}else if(b===void 0){return 1;}else if(a===void 0){return-1;}else if(a===b){continue;}else{return compareIdentifiers(a,b);}}while(++i);}},{key:"compareBuild",value:function compareBuild(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options);}var i=0;do{var a=this.build[i];var b=other.build[i];debug("prerelease compare",i,a,b);if(a===void 0&&b===void 0){return 0;}else if(b===void 0){return 1;}else if(a===void 0){return-1;}else if(a===b){continue;}else{return compareIdentifiers(a,b);}}while(++i);}},{key:"inc",value:function inc(release,identifier){switch(release){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0;this.inc("patch",identifier);this.inc("pre",identifier);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",identifier);}this.inc("pre",identifier);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++;}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++;}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++;}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0];}else{var i=this.prerelease.length;while(--i>=0){if(typeof this.prerelease[i]==="number"){this.prerelease[i]++;i=-2;}}if(i===-1){this.prerelease.push(0);}}if(identifier){if(this.prerelease[0]===identifier){if(isNaN(this.prerelease[1])){this.prerelease=[identifier,0];}}else{this.prerelease=[identifier,0];}}break;default:throw new Error("invalid increment argument: ".concat(release));}this.format();this.raw=this.version;return this;}}]);return SemVer;}();module2.exports=SemVer;}});// client/node_modules/semver/functions/parse.js
var require_parse=__commonJS({"client/node_modules/semver/functions/parse.js":function clientNode_modulesSemverFunctionsParseJs(exports,module2){var _require_constants3=require_constants(),MAX_LENGTH=_require_constants3.MAX_LENGTH;var _require_re2=require_re(),re=_require_re2.re,t=_require_re2.t;var SemVer=require_semver();var parseOptions=require_parse_options();var parse=function parse(version,options){options=parseOptions(options);if(version instanceof SemVer){return version;}if(typeof version!=="string"){return null;}if(version.length>MAX_LENGTH){return null;}var r=options.loose?re[t.LOOSE]:re[t.FULL];if(!r.test(version)){return null;}try{return new SemVer(version,options);}catch(er){return null;}};module2.exports=parse;}});// client/node_modules/semver/functions/valid.js
var require_valid=__commonJS({"client/node_modules/semver/functions/valid.js":function clientNode_modulesSemverFunctionsValidJs(exports,module2){var parse=require_parse();var valid=function valid(version,options){var v=parse(version,options);return v?v.version:null;};module2.exports=valid;}});// client/node_modules/semver/functions/clean.js
var require_clean=__commonJS({"client/node_modules/semver/functions/clean.js":function clientNode_modulesSemverFunctionsCleanJs(exports,module2){var parse=require_parse();var clean=function clean(version,options){var s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null;};module2.exports=clean;}});// client/node_modules/semver/functions/inc.js
var require_inc=__commonJS({"client/node_modules/semver/functions/inc.js":function clientNode_modulesSemverFunctionsIncJs(exports,module2){var SemVer=require_semver();var inc=function inc(version,release,options,identifier){if(typeof options==="string"){identifier=options;options=void 0;}try{return new SemVer(version,options).inc(release,identifier).version;}catch(er){return null;}};module2.exports=inc;}});// client/node_modules/semver/functions/compare.js
var require_compare=__commonJS({"client/node_modules/semver/functions/compare.js":function clientNode_modulesSemverFunctionsCompareJs(exports,module2){var SemVer=require_semver();var compare=function compare(a,b,loose){return new SemVer(a,loose).compare(new SemVer(b,loose));};module2.exports=compare;}});// client/node_modules/semver/functions/eq.js
var require_eq=__commonJS({"client/node_modules/semver/functions/eq.js":function clientNode_modulesSemverFunctionsEqJs(exports,module2){var compare=require_compare();var eq=function eq(a,b,loose){return compare(a,b,loose)===0;};module2.exports=eq;}});// client/node_modules/semver/functions/diff.js
var require_diff=__commonJS({"client/node_modules/semver/functions/diff.js":function clientNode_modulesSemverFunctionsDiffJs(exports,module2){var parse=require_parse();var eq=require_eq();var diff=function diff(version1,version2){if(eq(version1,version2)){return null;}else{var v1=parse(version1);var v2=parse(version2);var hasPre=v1.prerelease.length||v2.prerelease.length;var prefix=hasPre?"pre":"";var defaultResult=hasPre?"prerelease":"";for(var key in v1){if(key==="major"||key==="minor"||key==="patch"){if(v1[key]!==v2[key]){return prefix+key;}}}return defaultResult;}};module2.exports=diff;}});// client/node_modules/semver/functions/major.js
var require_major=__commonJS({"client/node_modules/semver/functions/major.js":function clientNode_modulesSemverFunctionsMajorJs(exports,module2){var SemVer=require_semver();var major=function major(a,loose){return new SemVer(a,loose).major;};module2.exports=major;}});// client/node_modules/semver/functions/minor.js
var require_minor=__commonJS({"client/node_modules/semver/functions/minor.js":function clientNode_modulesSemverFunctionsMinorJs(exports,module2){var SemVer=require_semver();var minor=function minor(a,loose){return new SemVer(a,loose).minor;};module2.exports=minor;}});// client/node_modules/semver/functions/patch.js
var require_patch=__commonJS({"client/node_modules/semver/functions/patch.js":function clientNode_modulesSemverFunctionsPatchJs(exports,module2){var SemVer=require_semver();var patch=function patch(a,loose){return new SemVer(a,loose).patch;};module2.exports=patch;}});// client/node_modules/semver/functions/prerelease.js
var require_prerelease=__commonJS({"client/node_modules/semver/functions/prerelease.js":function clientNode_modulesSemverFunctionsPrereleaseJs(exports,module2){var parse=require_parse();var prerelease=function prerelease(version,options){var parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null;};module2.exports=prerelease;}});// client/node_modules/semver/functions/rcompare.js
var require_rcompare=__commonJS({"client/node_modules/semver/functions/rcompare.js":function clientNode_modulesSemverFunctionsRcompareJs(exports,module2){var compare=require_compare();var rcompare=function rcompare(a,b,loose){return compare(b,a,loose);};module2.exports=rcompare;}});// client/node_modules/semver/functions/compare-loose.js
var require_compare_loose=__commonJS({"client/node_modules/semver/functions/compare-loose.js":function clientNode_modulesSemverFunctionsCompareLooseJs(exports,module2){var compare=require_compare();var compareLoose=function compareLoose(a,b){return compare(a,b,true);};module2.exports=compareLoose;}});// client/node_modules/semver/functions/compare-build.js
var require_compare_build=__commonJS({"client/node_modules/semver/functions/compare-build.js":function clientNode_modulesSemverFunctionsCompareBuildJs(exports,module2){var SemVer=require_semver();var compareBuild=function compareBuild(a,b,loose){var versionA=new SemVer(a,loose);var versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB);};module2.exports=compareBuild;}});// client/node_modules/semver/functions/sort.js
var require_sort=__commonJS({"client/node_modules/semver/functions/sort.js":function clientNode_modulesSemverFunctionsSortJs(exports,module2){var compareBuild=require_compare_build();var sort=function sort(list,loose){return list.sort(function(a,b){return compareBuild(a,b,loose);});};module2.exports=sort;}});// client/node_modules/semver/functions/rsort.js
var require_rsort=__commonJS({"client/node_modules/semver/functions/rsort.js":function clientNode_modulesSemverFunctionsRsortJs(exports,module2){var compareBuild=require_compare_build();var rsort=function rsort(list,loose){return list.sort(function(a,b){return compareBuild(b,a,loose);});};module2.exports=rsort;}});// client/node_modules/semver/functions/gt.js
var require_gt=__commonJS({"client/node_modules/semver/functions/gt.js":function clientNode_modulesSemverFunctionsGtJs(exports,module2){var compare=require_compare();var gt=function gt(a,b,loose){return compare(a,b,loose)>0;};module2.exports=gt;}});// client/node_modules/semver/functions/lt.js
var require_lt=__commonJS({"client/node_modules/semver/functions/lt.js":function clientNode_modulesSemverFunctionsLtJs(exports,module2){var compare=require_compare();var lt=function lt(a,b,loose){return compare(a,b,loose)<0;};module2.exports=lt;}});// client/node_modules/semver/functions/neq.js
var require_neq=__commonJS({"client/node_modules/semver/functions/neq.js":function clientNode_modulesSemverFunctionsNeqJs(exports,module2){var compare=require_compare();var neq=function neq(a,b,loose){return compare(a,b,loose)!==0;};module2.exports=neq;}});// client/node_modules/semver/functions/gte.js
var require_gte=__commonJS({"client/node_modules/semver/functions/gte.js":function clientNode_modulesSemverFunctionsGteJs(exports,module2){var compare=require_compare();var gte=function gte(a,b,loose){return compare(a,b,loose)>=0;};module2.exports=gte;}});// client/node_modules/semver/functions/lte.js
var require_lte=__commonJS({"client/node_modules/semver/functions/lte.js":function clientNode_modulesSemverFunctionsLteJs(exports,module2){var compare=require_compare();var lte=function lte(a,b,loose){return compare(a,b,loose)<=0;};module2.exports=lte;}});// client/node_modules/semver/functions/cmp.js
var require_cmp=__commonJS({"client/node_modules/semver/functions/cmp.js":function clientNode_modulesSemverFunctionsCmpJs(exports,module2){var eq=require_eq();var neq=require_neq();var gt=require_gt();var gte=require_gte();var lt=require_lt();var lte=require_lte();var cmp=function cmp(a,op,b,loose){switch(op){case"===":if(_typeof(a)==="object")a=a.version;if(_typeof(b)==="object")b=b.version;return a===b;case"!==":if(_typeof(a)==="object")a=a.version;if(_typeof(b)==="object")b=b.version;return a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError("Invalid operator: ".concat(op));}};module2.exports=cmp;}});// client/node_modules/semver/functions/coerce.js
var require_coerce=__commonJS({"client/node_modules/semver/functions/coerce.js":function clientNode_modulesSemverFunctionsCoerceJs(exports,module2){var SemVer=require_semver();var parse=require_parse();var _require_re3=require_re(),re=_require_re3.re,t=_require_re3.t;var coerce=function coerce(version,options){if(version instanceof SemVer){return version;}if(typeof version==="number"){version=String(version);}if(typeof version!=="string"){return null;}options=options||{};var match=null;if(!options.rtl){match=version.match(re[t.COERCE]);}else{var next;while((next=re[t.COERCERTL].exec(version))&&(!match||match.index+match[0].length!==version.length)){if(!match||next.index+next[0].length!==match.index+match[0].length){match=next;}re[t.COERCERTL].lastIndex=next.index+next[1].length+next[2].length;}re[t.COERCERTL].lastIndex=-1;}if(match===null)return null;return parse("".concat(match[2],".").concat(match[3]||"0",".").concat(match[4]||"0"),options);};module2.exports=coerce;}});// client/node_modules/yallist/iterator.js
var require_iterator=__commonJS({"client/node_modules/yallist/iterator.js":function clientNode_modulesYallistIteratorJs(exports,module2){"use strict";module2.exports=function(Yallist){Yallist.prototype[Symbol.iterator]=/*#__PURE__*/regeneratorRuntime.mark(function _callee(){var walker;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:walker=this.head;case 1:if(!walker){_context.next=7;break;}_context.next=4;return walker.value;case 4:walker=walker.next;_context.next=1;break;case 7:case"end":return _context.stop();}}},_callee,this);});};}});// client/node_modules/yallist/yallist.js
var require_yallist=__commonJS({"client/node_modules/yallist/yallist.js":function clientNode_modulesYallistYallistJs(exports,module2){"use strict";module2.exports=Yallist;Yallist.Node=Node;Yallist.create=Yallist;function Yallist(list){var self2=this;if(!(self2 instanceof Yallist)){self2=new Yallist();}self2.tail=null;self2.head=null;self2.length=0;if(list&&typeof list.forEach==="function"){list.forEach(function(item){self2.push(item);});}else if(arguments.length>0){for(var i=0,l=arguments.length;i<l;i++){self2.push(arguments[i]);}}return self2;}Yallist.prototype.removeNode=function(node){if(node.list!==this){throw new Error("removing node which does not belong to this list");}var next=node.next;var prev=node.prev;if(next){next.prev=prev;}if(prev){prev.next=next;}if(node===this.head){this.head=next;}if(node===this.tail){this.tail=prev;}node.list.length--;node.next=null;node.prev=null;node.list=null;return next;};Yallist.prototype.unshiftNode=function(node){if(node===this.head){return;}if(node.list){node.list.removeNode(node);}var head=this.head;node.list=this;node.next=head;if(head){head.prev=node;}this.head=node;if(!this.tail){this.tail=node;}this.length++;};Yallist.prototype.pushNode=function(node){if(node===this.tail){return;}if(node.list){node.list.removeNode(node);}var tail=this.tail;node.list=this;node.prev=tail;if(tail){tail.next=node;}this.tail=node;if(!this.head){this.head=node;}this.length++;};Yallist.prototype.push=function(){for(var i=0,l=arguments.length;i<l;i++){push(this,arguments[i]);}return this.length;};Yallist.prototype.unshift=function(){for(var i=0,l=arguments.length;i<l;i++){unshift(this,arguments[i]);}return this.length;};Yallist.prototype.pop=function(){if(!this.tail){return void 0;}var res=this.tail.value;this.tail=this.tail.prev;if(this.tail){this.tail.next=null;}else{this.head=null;}this.length--;return res;};Yallist.prototype.shift=function(){if(!this.head){return void 0;}var res=this.head.value;this.head=this.head.next;if(this.head){this.head.prev=null;}else{this.tail=null;}this.length--;return res;};Yallist.prototype.forEach=function(fn,thisp){thisp=thisp||this;for(var walker=this.head,i=0;walker!==null;i++){fn.call(thisp,walker.value,i,this);walker=walker.next;}};Yallist.prototype.forEachReverse=function(fn,thisp){thisp=thisp||this;for(var walker=this.tail,i=this.length-1;walker!==null;i--){fn.call(thisp,walker.value,i,this);walker=walker.prev;}};Yallist.prototype.get=function(n){for(var i=0,walker=this.head;walker!==null&&i<n;i++){walker=walker.next;}if(i===n&&walker!==null){return walker.value;}};Yallist.prototype.getReverse=function(n){for(var i=0,walker=this.tail;walker!==null&&i<n;i++){walker=walker.prev;}if(i===n&&walker!==null){return walker.value;}};Yallist.prototype.map=function(fn,thisp){thisp=thisp||this;var res=new Yallist();for(var walker=this.head;walker!==null;){res.push(fn.call(thisp,walker.value,this));walker=walker.next;}return res;};Yallist.prototype.mapReverse=function(fn,thisp){thisp=thisp||this;var res=new Yallist();for(var walker=this.tail;walker!==null;){res.push(fn.call(thisp,walker.value,this));walker=walker.prev;}return res;};Yallist.prototype.reduce=function(fn,initial){var acc;var walker=this.head;if(arguments.length>1){acc=initial;}else if(this.head){walker=this.head.next;acc=this.head.value;}else{throw new TypeError("Reduce of empty list with no initial value");}for(var i=0;walker!==null;i++){acc=fn(acc,walker.value,i);walker=walker.next;}return acc;};Yallist.prototype.reduceReverse=function(fn,initial){var acc;var walker=this.tail;if(arguments.length>1){acc=initial;}else if(this.tail){walker=this.tail.prev;acc=this.tail.value;}else{throw new TypeError("Reduce of empty list with no initial value");}for(var i=this.length-1;walker!==null;i--){acc=fn(acc,walker.value,i);walker=walker.prev;}return acc;};Yallist.prototype.toArray=function(){var arr=new Array(this.length);for(var i=0,walker=this.head;walker!==null;i++){arr[i]=walker.value;walker=walker.next;}return arr;};Yallist.prototype.toArrayReverse=function(){var arr=new Array(this.length);for(var i=0,walker=this.tail;walker!==null;i++){arr[i]=walker.value;walker=walker.prev;}return arr;};Yallist.prototype.slice=function(from,to){to=to||this.length;if(to<0){to+=this.length;}from=from||0;if(from<0){from+=this.length;}var ret=new Yallist();if(to<from||to<0){return ret;}if(from<0){from=0;}if(to>this.length){to=this.length;}for(var i=0,walker=this.head;walker!==null&&i<from;i++){walker=walker.next;}for(;walker!==null&&i<to;i++,walker=walker.next){ret.push(walker.value);}return ret;};Yallist.prototype.sliceReverse=function(from,to){to=to||this.length;if(to<0){to+=this.length;}from=from||0;if(from<0){from+=this.length;}var ret=new Yallist();if(to<from||to<0){return ret;}if(from<0){from=0;}if(to>this.length){to=this.length;}for(var i=this.length,walker=this.tail;walker!==null&&i>to;i--){walker=walker.prev;}for(;walker!==null&&i>from;i--,walker=walker.prev){ret.push(walker.value);}return ret;};Yallist.prototype.splice=function(start,deleteCount){if(start>this.length){start=this.length-1;}if(start<0){start=this.length+start;}for(var i=0,walker=this.head;walker!==null&&i<start;i++){walker=walker.next;}var ret=[];for(var i=0;walker&&i<deleteCount;i++){ret.push(walker.value);walker=this.removeNode(walker);}if(walker===null){walker=this.tail;}if(walker!==this.head&&walker!==this.tail){walker=walker.prev;}for(var i=0;i<(arguments.length<=2?0:arguments.length-2);i++){walker=insert(this,walker,i+2<2||arguments.length<=i+2?undefined:arguments[i+2]);}return ret;};Yallist.prototype.reverse=function(){var head=this.head;var tail=this.tail;for(var walker=head;walker!==null;walker=walker.prev){var p=walker.prev;walker.prev=walker.next;walker.next=p;}this.head=tail;this.tail=head;return this;};function insert(self2,node,value){var inserted=node===self2.head?new Node(value,null,node,self2):new Node(value,node,node.next,self2);if(inserted.next===null){self2.tail=inserted;}if(inserted.prev===null){self2.head=inserted;}self2.length++;return inserted;}function push(self2,item){self2.tail=new Node(item,self2.tail,null,self2);if(!self2.head){self2.head=self2.tail;}self2.length++;}function unshift(self2,item){self2.head=new Node(item,null,self2.head,self2);if(!self2.tail){self2.tail=self2.head;}self2.length++;}function Node(value,prev,next,list){if(!(this instanceof Node)){return new Node(value,prev,next,list);}this.list=list;this.value=value;if(prev){prev.next=this;this.prev=prev;}else{this.prev=null;}if(next){next.prev=this;this.next=next;}else{this.next=null;}}try{require_iterator()(Yallist);}catch(er){}}});// client/node_modules/lru-cache/index.js
var require_lru_cache=__commonJS({"client/node_modules/lru-cache/index.js":function clientNode_modulesLruCacheIndexJs(exports,module2){"use strict";var Yallist=require_yallist();var MAX=Symbol("max");var LENGTH=Symbol("length");var LENGTH_CALCULATOR=Symbol("lengthCalculator");var ALLOW_STALE=Symbol("allowStale");var MAX_AGE=Symbol("maxAge");var DISPOSE=Symbol("dispose");var NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet");var LRU_LIST=Symbol("lruList");var CACHE=Symbol("cache");var UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet");var naiveLength=function naiveLength(){return 1;};var LRUCache=/*#__PURE__*/function(){function LRUCache(options){_classCallCheck(this,LRUCache);if(typeof options==="number")options={max:options};if(!options)options={};if(options.max&&(typeof options.max!=="number"||options.max<0))throw new TypeError("max must be a non-negative number");var max=this[MAX]=options.max||Infinity;var lc=options.length||naiveLength;this[LENGTH_CALCULATOR]=typeof lc!=="function"?naiveLength:lc;this[ALLOW_STALE]=options.stale||false;if(options.maxAge&&typeof options.maxAge!=="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=options.maxAge||0;this[DISPOSE]=options.dispose;this[NO_DISPOSE_ON_SET]=options.noDisposeOnSet||false;this[UPDATE_AGE_ON_GET]=options.updateAgeOnGet||false;this.reset();}_createClass(LRUCache,[{key:"max",get:function get(){return this[MAX];},set:function set(mL){if(typeof mL!=="number"||mL<0)throw new TypeError("max must be a non-negative number");this[MAX]=mL||Infinity;trim(this);}},{key:"allowStale",get:function get(){return this[ALLOW_STALE];},set:function set(allowStale){this[ALLOW_STALE]=!!allowStale;}},{key:"maxAge",get:function get(){return this[MAX_AGE];},set:function set(mA){if(typeof mA!=="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=mA;trim(this);}},{key:"lengthCalculator",get:function get(){return this[LENGTH_CALCULATOR];},set:function set(lC){var _this2=this;if(typeof lC!=="function")lC=naiveLength;if(lC!==this[LENGTH_CALCULATOR]){this[LENGTH_CALCULATOR]=lC;this[LENGTH]=0;this[LRU_LIST].forEach(function(hit){hit.length=_this2[LENGTH_CALCULATOR](hit.value,hit.key);_this2[LENGTH]+=hit.length;});}trim(this);}},{key:"length",get:function get(){return this[LENGTH];}},{key:"itemCount",get:function get(){return this[LRU_LIST].length;}},{key:"rforEach",value:function rforEach(fn,thisp){thisp=thisp||this;for(var walker=this[LRU_LIST].tail;walker!==null;){var prev=walker.prev;forEachStep(this,fn,walker,thisp);walker=prev;}}},{key:"forEach",value:function forEach(fn,thisp){thisp=thisp||this;for(var walker=this[LRU_LIST].head;walker!==null;){var next=walker.next;forEachStep(this,fn,walker,thisp);walker=next;}}},{key:"keys",value:function keys(){return this[LRU_LIST].toArray().map(function(k){return k.key;});}},{key:"values",value:function values(){return this[LRU_LIST].toArray().map(function(k){return k.value;});}},{key:"reset",value:function reset(){var _this3=this;if(this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length){this[LRU_LIST].forEach(function(hit){return _this3[DISPOSE](hit.key,hit.value);});}this[CACHE]=new Map();this[LRU_LIST]=new Yallist();this[LENGTH]=0;}},{key:"dump",value:function dump(){var _this4=this;return this[LRU_LIST].map(function(hit){return isStale(_this4,hit)?false:{k:hit.key,v:hit.value,e:hit.now+(hit.maxAge||0)};}).toArray().filter(function(h){return h;});}},{key:"dumpLru",value:function dumpLru(){return this[LRU_LIST];}},{key:"set",value:function set(key,value,maxAge){maxAge=maxAge||this[MAX_AGE];if(maxAge&&typeof maxAge!=="number")throw new TypeError("maxAge must be a number");var now=maxAge?Date.now():0;var len=this[LENGTH_CALCULATOR](value,key);if(this[CACHE].has(key)){if(len>this[MAX]){_del(this,this[CACHE].get(key));return false;}var node=this[CACHE].get(key);var item=node.value;if(this[DISPOSE]){if(!this[NO_DISPOSE_ON_SET])this[DISPOSE](key,item.value);}item.now=now;item.maxAge=maxAge;item.value=value;this[LENGTH]+=len-item.length;item.length=len;this.get(key);trim(this);return true;}var hit=new Entry(key,value,len,now,maxAge);if(hit.length>this[MAX]){if(this[DISPOSE])this[DISPOSE](key,value);return false;}this[LENGTH]+=hit.length;this[LRU_LIST].unshift(hit);this[CACHE].set(key,this[LRU_LIST].head);trim(this);return true;}},{key:"has",value:function has(key){if(!this[CACHE].has(key))return false;var hit=this[CACHE].get(key).value;return!isStale(this,hit);}},{key:"get",value:function get(key){return _get(this,key,true);}},{key:"peek",value:function peek(key){return _get(this,key,false);}},{key:"pop",value:function pop(){var node=this[LRU_LIST].tail;if(!node)return null;_del(this,node);return node.value;}},{key:"del",value:function del(key){_del(this,this[CACHE].get(key));}},{key:"load",value:function load(arr){this.reset();var now=Date.now();for(var l=arr.length-1;l>=0;l--){var hit=arr[l];var expiresAt=hit.e||0;if(expiresAt===0)this.set(hit.k,hit.v);else{var maxAge=expiresAt-now;if(maxAge>0){this.set(hit.k,hit.v,maxAge);}}}}},{key:"prune",value:function prune(){var _this5=this;this[CACHE].forEach(function(value,key){return _get(_this5,key,false);});}}]);return LRUCache;}();var _get=function _get(self2,key,doUse){var node=self2[CACHE].get(key);if(node){var hit=node.value;if(isStale(self2,hit)){_del(self2,node);if(!self2[ALLOW_STALE])return void 0;}else{if(doUse){if(self2[UPDATE_AGE_ON_GET])node.value.now=Date.now();self2[LRU_LIST].unshiftNode(node);}}return hit.value;}};var isStale=function isStale(self2,hit){if(!hit||!hit.maxAge&&!self2[MAX_AGE])return false;var diff=Date.now()-hit.now;return hit.maxAge?diff>hit.maxAge:self2[MAX_AGE]&&diff>self2[MAX_AGE];};var trim=function trim(self2){if(self2[LENGTH]>self2[MAX]){for(var walker=self2[LRU_LIST].tail;self2[LENGTH]>self2[MAX]&&walker!==null;){var prev=walker.prev;_del(self2,walker);walker=prev;}}};var _del=function _del(self2,node){if(node){var hit=node.value;if(self2[DISPOSE])self2[DISPOSE](hit.key,hit.value);self2[LENGTH]-=hit.length;self2[CACHE].delete(hit.key);self2[LRU_LIST].removeNode(node);}};var Entry=/*#__PURE__*/_createClass(function Entry(key,value,length,now,maxAge){_classCallCheck(this,Entry);this.key=key;this.value=value;this.length=length;this.now=now;this.maxAge=maxAge||0;});var forEachStep=function forEachStep(self2,fn,node,thisp){var hit=node.value;if(isStale(self2,hit)){_del(self2,node);if(!self2[ALLOW_STALE])hit=void 0;}if(hit)fn.call(thisp,hit.value,hit.key,self2);};module2.exports=LRUCache;}});// client/node_modules/semver/classes/range.js
var require_range=__commonJS({"client/node_modules/semver/classes/range.js":function clientNode_modulesSemverClassesRangeJs(exports,module2){var Range=/*#__PURE__*/function(){function Range(range,options){var _this6=this;_classCallCheck(this,Range);options=parseOptions(options);if(range instanceof Range){if(range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease){return range;}else{return new Range(range.raw,options);}}if(range instanceof Comparator){this.raw=range.value;this.set=[[range]];this.format();return this;}this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;this.raw=range;this.set=range.split(/\s*\|\|\s*/).map(function(range2){return _this6.parseRange(range2.trim());}).filter(function(c){return c.length;});if(!this.set.length){throw new TypeError("Invalid SemVer Range: ".concat(range));}if(this.set.length>1){var first=this.set[0];this.set=this.set.filter(function(c){return!isNullSet(c[0]);});if(this.set.length===0)this.set=[first];else if(this.set.length>1){var _iterator2=_createForOfIteratorHelper(this.set),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var c=_step2.value;if(c.length===1&&isAny(c[0])){this.set=[c];break;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}this.format();}_createClass(Range,[{key:"format",value:function format(){this.range=this.set.map(function(comps){return comps.join(" ").trim();}).join("||").trim();return this.range;}},{key:"toString",value:function toString(){return this.range;}},{key:"parseRange",value:function parseRange(range){var _this7=this;range=range.trim();var memoOpts=Object.keys(this.options).join(",");var memoKey="parseRange:".concat(memoOpts,":").concat(range);var cached=cache.get(memoKey);if(cached)return cached;var loose=this.options.loose;var hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace(this.options.includePrerelease));debug("hyphen replace",range);range=range.replace(re[t.COMPARATORTRIM],comparatorTrimReplace);debug("comparator trim",range,re[t.COMPARATORTRIM]);range=range.replace(re[t.TILDETRIM],tildeTrimReplace);range=range.replace(re[t.CARETTRIM],caretTrimReplace);range=range.split(/\s+/).join(" ");var compRe=loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];var rangeList=range.split(" ").map(function(comp){return parseComparator(comp,_this7.options);}).join(" ").split(/\s+/).map(function(comp){return replaceGTE0(comp,_this7.options);}).filter(this.options.loose?function(comp){return!!comp.match(compRe);}:function(){return true;}).map(function(comp){return new Comparator(comp,_this7.options);});var l=rangeList.length;var rangeMap=new Map();var _iterator3=_createForOfIteratorHelper(rangeList),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var comp=_step3.value;if(isNullSet(comp))return[comp];rangeMap.set(comp.value,comp);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}if(rangeMap.size>1&&rangeMap.has(""))rangeMap.delete("");var result=_toConsumableArray(rangeMap.values());cache.set(memoKey,result);return result;}},{key:"intersects",value:function intersects(range,options){if(!(range instanceof Range)){throw new TypeError("a Range is required");}return this.set.some(function(thisComparators){return isSatisfiable(thisComparators,options)&&range.set.some(function(rangeComparators){return isSatisfiable(rangeComparators,options)&&thisComparators.every(function(thisComparator){return rangeComparators.every(function(rangeComparator){return thisComparator.intersects(rangeComparator,options);});});});});}},{key:"test",value:function test(version){if(!version){return false;}if(typeof version==="string"){try{version=new SemVer(version,this.options);}catch(er){return false;}}for(var i=0;i<this.set.length;i++){if(testSet(this.set[i],version,this.options)){return true;}}return false;}}]);return Range;}();module2.exports=Range;var LRU=require_lru_cache();var cache=new LRU({max:1e3});var parseOptions=require_parse_options();var Comparator=require_comparator();var debug=require_debug();var SemVer=require_semver();var _require_re4=require_re(),re=_require_re4.re,t=_require_re4.t,comparatorTrimReplace=_require_re4.comparatorTrimReplace,tildeTrimReplace=_require_re4.tildeTrimReplace,caretTrimReplace=_require_re4.caretTrimReplace;var isNullSet=function isNullSet(c){return c.value==="<0.0.0-0";};var isAny=function isAny(c){return c.value==="";};var isSatisfiable=function isSatisfiable(comparators,options){var result=true;var remainingComparators=comparators.slice();var testComparator=remainingComparators.pop();while(result&&remainingComparators.length){result=remainingComparators.every(function(otherComparator){return testComparator.intersects(otherComparator,options);});testComparator=remainingComparators.pop();}return result;};var parseComparator=function parseComparator(comp,options){debug("comp",comp,options);comp=replaceCarets(comp,options);debug("caret",comp);comp=replaceTildes(comp,options);debug("tildes",comp);comp=replaceXRanges(comp,options);debug("xrange",comp);comp=replaceStars(comp,options);debug("stars",comp);return comp;};var isX=function isX(id){return!id||id.toLowerCase()==="x"||id==="*";};var replaceTildes=function replaceTildes(comp,options){return comp.trim().split(/\s+/).map(function(comp2){return replaceTilde(comp2,options);}).join(" ");};var replaceTilde=function replaceTilde(comp,options){var r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,function(_,M,m,p,pr){debug("tilde",comp,_,M,m,p,pr);var ret;if(isX(M)){ret="";}else if(isX(m)){ret=">=".concat(M,".0.0 <").concat(+M+1,".0.0-0");}else if(isX(p)){ret=">=".concat(M,".").concat(m,".0 <").concat(M,".").concat(+m+1,".0-0");}else if(pr){debug("replaceTilde pr",pr);ret=">=".concat(M,".").concat(m,".").concat(p,"-").concat(pr," <").concat(M,".").concat(+m+1,".0-0");}else{ret=">=".concat(M,".").concat(m,".").concat(p," <").concat(M,".").concat(+m+1,".0-0");}debug("tilde return",ret);return ret;});};var replaceCarets=function replaceCarets(comp,options){return comp.trim().split(/\s+/).map(function(comp2){return replaceCaret(comp2,options);}).join(" ");};var replaceCaret=function replaceCaret(comp,options){debug("caret",comp,options);var r=options.loose?re[t.CARETLOOSE]:re[t.CARET];var z=options.includePrerelease?"-0":"";return comp.replace(r,function(_,M,m,p,pr){debug("caret",comp,_,M,m,p,pr);var ret;if(isX(M)){ret="";}else if(isX(m)){ret=">=".concat(M,".0.0").concat(z," <").concat(+M+1,".0.0-0");}else if(isX(p)){if(M==="0"){ret=">=".concat(M,".").concat(m,".0").concat(z," <").concat(M,".").concat(+m+1,".0-0");}else{ret=">=".concat(M,".").concat(m,".0").concat(z," <").concat(+M+1,".0.0-0");}}else if(pr){debug("replaceCaret pr",pr);if(M==="0"){if(m==="0"){ret=">=".concat(M,".").concat(m,".").concat(p,"-").concat(pr," <").concat(M,".").concat(m,".").concat(+p+1,"-0");}else{ret=">=".concat(M,".").concat(m,".").concat(p,"-").concat(pr," <").concat(M,".").concat(+m+1,".0-0");}}else{ret=">=".concat(M,".").concat(m,".").concat(p,"-").concat(pr," <").concat(+M+1,".0.0-0");}}else{debug("no pr");if(M==="0"){if(m==="0"){ret=">=".concat(M,".").concat(m,".").concat(p).concat(z," <").concat(M,".").concat(m,".").concat(+p+1,"-0");}else{ret=">=".concat(M,".").concat(m,".").concat(p).concat(z," <").concat(M,".").concat(+m+1,".0-0");}}else{ret=">=".concat(M,".").concat(m,".").concat(p," <").concat(+M+1,".0.0-0");}}debug("caret return",ret);return ret;});};var replaceXRanges=function replaceXRanges(comp,options){debug("replaceXRanges",comp,options);return comp.split(/\s+/).map(function(comp2){return replaceXRange(comp2,options);}).join(" ");};var replaceXRange=function replaceXRange(comp,options){comp=comp.trim();var r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,function(ret,gtlt,M,m,p,pr){debug("xRange",comp,ret,gtlt,M,m,p,pr);var xM=isX(M);var xm=xM||isX(m);var xp=xm||isX(p);var anyX=xp;if(gtlt==="="&&anyX){gtlt="";}pr=options.includePrerelease?"-0":"";if(xM){if(gtlt===">"||gtlt==="<"){ret="<0.0.0-0";}else{ret="*";}}else if(gtlt&&anyX){if(xm){m=0;}p=0;if(gtlt===">"){gtlt=">=";if(xm){M=+M+1;m=0;p=0;}else{m=+m+1;p=0;}}else if(gtlt==="<="){gtlt="<";if(xm){M=+M+1;}else{m=+m+1;}}if(gtlt==="<")pr="-0";ret="".concat(gtlt+M,".").concat(m,".").concat(p).concat(pr);}else if(xm){ret=">=".concat(M,".0.0").concat(pr," <").concat(+M+1,".0.0-0");}else if(xp){ret=">=".concat(M,".").concat(m,".0").concat(pr," <").concat(M,".").concat(+m+1,".0-0");}debug("xRange return",ret);return ret;});};var replaceStars=function replaceStars(comp,options){debug("replaceStars",comp,options);return comp.trim().replace(re[t.STAR],"");};var replaceGTE0=function replaceGTE0(comp,options){debug("replaceGTE0",comp,options);return comp.trim().replace(re[options.includePrerelease?t.GTE0PRE:t.GTE0],"");};var hyphenReplace=function hyphenReplace(incPr){return function($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb){if(isX(fM)){from="";}else if(isX(fm)){from=">=".concat(fM,".0.0").concat(incPr?"-0":"");}else if(isX(fp)){from=">=".concat(fM,".").concat(fm,".0").concat(incPr?"-0":"");}else if(fpr){from=">=".concat(from);}else{from=">=".concat(from).concat(incPr?"-0":"");}if(isX(tM)){to="";}else if(isX(tm)){to="<".concat(+tM+1,".0.0-0");}else if(isX(tp)){to="<".concat(tM,".").concat(+tm+1,".0-0");}else if(tpr){to="<=".concat(tM,".").concat(tm,".").concat(tp,"-").concat(tpr);}else if(incPr){to="<".concat(tM,".").concat(tm,".").concat(+tp+1,"-0");}else{to="<=".concat(to);}return"".concat(from," ").concat(to).trim();};};var testSet=function testSet(set,version,options){for(var i=0;i<set.length;i++){if(!set[i].test(version)){return false;}}if(version.prerelease.length&&!options.includePrerelease){for(var _i2=0;_i2<set.length;_i2++){debug(set[_i2].semver);if(set[_i2].semver===Comparator.ANY){continue;}if(set[_i2].semver.prerelease.length>0){var allowed=set[_i2].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch){return true;}}}return false;}return true;};}});// client/node_modules/semver/classes/comparator.js
var require_comparator=__commonJS({"client/node_modules/semver/classes/comparator.js":function clientNode_modulesSemverClassesComparatorJs(exports,module2){var ANY=Symbol("SemVer ANY");var Comparator=/*#__PURE__*/function(){function Comparator(comp,options){_classCallCheck(this,Comparator);options=parseOptions(options);if(comp instanceof Comparator){if(comp.loose===!!options.loose){return comp;}else{comp=comp.value;}}debug("comparator",comp,options);this.options=options;this.loose=!!options.loose;this.parse(comp);if(this.semver===ANY){this.value="";}else{this.value=this.operator+this.semver.version;}debug("comp",this);}_createClass(Comparator,[{key:"parse",value:function parse(comp){var r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];var m=comp.match(r);if(!m){throw new TypeError("Invalid comparator: ".concat(comp));}this.operator=m[1]!==void 0?m[1]:"";if(this.operator==="="){this.operator="";}if(!m[2]){this.semver=ANY;}else{this.semver=new SemVer(m[2],this.options.loose);}}},{key:"toString",value:function toString(){return this.value;}},{key:"test",value:function test(version){debug("Comparator.test",version,this.options.loose);if(this.semver===ANY||version===ANY){return true;}if(typeof version==="string"){try{version=new SemVer(version,this.options);}catch(er){return false;}}return cmp(version,this.operator,this.semver,this.options);}},{key:"intersects",value:function intersects(comp,options){if(!(comp instanceof Comparator)){throw new TypeError("a Comparator is required");}if(!options||_typeof(options)!=="object"){options={loose:!!options,includePrerelease:false};}if(this.operator===""){if(this.value===""){return true;}return new Range(comp.value,options).test(this.value);}else if(comp.operator===""){if(comp.value===""){return true;}return new Range(this.value,options).test(comp.semver);}var sameDirectionIncreasing=(this.operator===">="||this.operator===">")&&(comp.operator===">="||comp.operator===">");var sameDirectionDecreasing=(this.operator==="<="||this.operator==="<")&&(comp.operator==="<="||comp.operator==="<");var sameSemVer=this.semver.version===comp.semver.version;var differentDirectionsInclusive=(this.operator===">="||this.operator==="<=")&&(comp.operator===">="||comp.operator==="<=");var oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&(this.operator===">="||this.operator===">")&&(comp.operator==="<="||comp.operator==="<");var oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&(this.operator==="<="||this.operator==="<")&&(comp.operator===">="||comp.operator===">");return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan;}}],[{key:"ANY",get:function get(){return ANY;}}]);return Comparator;}();module2.exports=Comparator;var parseOptions=require_parse_options();var _require_re5=require_re(),re=_require_re5.re,t=_require_re5.t;var cmp=require_cmp();var debug=require_debug();var SemVer=require_semver();var Range=require_range();}});// client/node_modules/semver/functions/satisfies.js
var require_satisfies=__commonJS({"client/node_modules/semver/functions/satisfies.js":function clientNode_modulesSemverFunctionsSatisfiesJs(exports,module2){var Range=require_range();var satisfies=function satisfies(version,range,options){try{range=new Range(range,options);}catch(er){return false;}return range.test(version);};module2.exports=satisfies;}});// client/node_modules/semver/ranges/to-comparators.js
var require_to_comparators=__commonJS({"client/node_modules/semver/ranges/to-comparators.js":function clientNode_modulesSemverRangesToComparatorsJs(exports,module2){var Range=require_range();var toComparators=function toComparators(range,options){return new Range(range,options).set.map(function(comp){return comp.map(function(c){return c.value;}).join(" ").trim().split(" ");});};module2.exports=toComparators;}});// client/node_modules/semver/ranges/max-satisfying.js
var require_max_satisfying=__commonJS({"client/node_modules/semver/ranges/max-satisfying.js":function clientNode_modulesSemverRangesMaxSatisfyingJs(exports,module2){var SemVer=require_semver();var Range=require_range();var maxSatisfying=function maxSatisfying(versions,range,options){var max=null;var maxSV=null;var rangeObj=null;try{rangeObj=new Range(range,options);}catch(er){return null;}versions.forEach(function(v){if(rangeObj.test(v)){if(!max||maxSV.compare(v)===-1){max=v;maxSV=new SemVer(max,options);}}});return max;};module2.exports=maxSatisfying;}});// client/node_modules/semver/ranges/min-satisfying.js
var require_min_satisfying=__commonJS({"client/node_modules/semver/ranges/min-satisfying.js":function clientNode_modulesSemverRangesMinSatisfyingJs(exports,module2){var SemVer=require_semver();var Range=require_range();var minSatisfying=function minSatisfying(versions,range,options){var min=null;var minSV=null;var rangeObj=null;try{rangeObj=new Range(range,options);}catch(er){return null;}versions.forEach(function(v){if(rangeObj.test(v)){if(!min||minSV.compare(v)===1){min=v;minSV=new SemVer(min,options);}}});return min;};module2.exports=minSatisfying;}});// client/node_modules/semver/ranges/min-version.js
var require_min_version=__commonJS({"client/node_modules/semver/ranges/min-version.js":function clientNode_modulesSemverRangesMinVersionJs(exports,module2){var SemVer=require_semver();var Range=require_range();var gt=require_gt();var minVersion=function minVersion(range,loose){range=new Range(range,loose);var minver=new SemVer("0.0.0");if(range.test(minver)){return minver;}minver=new SemVer("0.0.0-0");if(range.test(minver)){return minver;}minver=null;var _loop2=function _loop2(i){var comparators=range.set[i];var setMin=null;comparators.forEach(function(comparator){var compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":if(compver.prerelease.length===0){compver.patch++;}else{compver.prerelease.push(0);}compver.raw=compver.format();case"":case">=":if(!setMin||gt(compver,setMin)){setMin=compver;}break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(comparator.operator));}});if(setMin&&(!minver||gt(minver,setMin)))minver=setMin;};for(var i=0;i<range.set.length;++i){_loop2(i);}if(minver&&range.test(minver)){return minver;}return null;};module2.exports=minVersion;}});// client/node_modules/semver/ranges/valid.js
var require_valid2=__commonJS({"client/node_modules/semver/ranges/valid.js":function clientNode_modulesSemverRangesValidJs(exports,module2){var Range=require_range();var validRange=function validRange(range,options){try{return new Range(range,options).range||"*";}catch(er){return null;}};module2.exports=validRange;}});// client/node_modules/semver/ranges/outside.js
var require_outside=__commonJS({"client/node_modules/semver/ranges/outside.js":function clientNode_modulesSemverRangesOutsideJs(exports,module2){var SemVer=require_semver();var Comparator=require_comparator();var ANY=Comparator.ANY;var Range=require_range();var satisfies=require_satisfies();var gt=require_gt();var lt=require_lt();var lte=require_lte();var gte=require_gte();var outside=function outside(version,range,hilo,options){version=new SemVer(version,options);range=new Range(range,options);var gtfn,ltefn,ltfn,comp,ecomp;switch(hilo){case">":gtfn=gt;ltefn=lte;ltfn=lt;comp=">";ecomp=">=";break;case"<":gtfn=lt;ltefn=gte;ltfn=gt;comp="<";ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(satisfies(version,range,options)){return false;}var _loop3=function _loop3(i){var comparators=range.set[i];var high=null;var low=null;comparators.forEach(function(comparator){if(comparator.semver===ANY){comparator=new Comparator(">=0.0.0");}high=high||comparator;low=low||comparator;if(gtfn(comparator.semver,high.semver,options)){high=comparator;}else if(ltfn(comparator.semver,low.semver,options)){low=comparator;}});if(high.operator===comp||high.operator===ecomp){return{v:false};}if((!low.operator||low.operator===comp)&&ltefn(version,low.semver)){return{v:false};}else if(low.operator===ecomp&&ltfn(version,low.semver)){return{v:false};}};for(var i=0;i<range.set.length;++i){var _ret=_loop3(i);if(_typeof(_ret)==="object")return _ret.v;}return true;};module2.exports=outside;}});// client/node_modules/semver/ranges/gtr.js
var require_gtr=__commonJS({"client/node_modules/semver/ranges/gtr.js":function clientNode_modulesSemverRangesGtrJs(exports,module2){var outside=require_outside();var gtr=function gtr(version,range,options){return outside(version,range,">",options);};module2.exports=gtr;}});// client/node_modules/semver/ranges/ltr.js
var require_ltr=__commonJS({"client/node_modules/semver/ranges/ltr.js":function clientNode_modulesSemverRangesLtrJs(exports,module2){var outside=require_outside();var ltr=function ltr(version,range,options){return outside(version,range,"<",options);};module2.exports=ltr;}});// client/node_modules/semver/ranges/intersects.js
var require_intersects=__commonJS({"client/node_modules/semver/ranges/intersects.js":function clientNode_modulesSemverRangesIntersectsJs(exports,module2){var Range=require_range();var intersects=function intersects(r1,r2,options){r1=new Range(r1,options);r2=new Range(r2,options);return r1.intersects(r2);};module2.exports=intersects;}});// client/node_modules/semver/ranges/simplify.js
var require_simplify=__commonJS({"client/node_modules/semver/ranges/simplify.js":function clientNode_modulesSemverRangesSimplifyJs(exports,module2){var satisfies=require_satisfies();var compare=require_compare();module2.exports=function(versions,range,options){var set=[];var min=null;var prev=null;var v=versions.sort(function(a,b){return compare(a,b,options);});var _iterator4=_createForOfIteratorHelper(v),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var version=_step4.value;var included=satisfies(version,range,options);if(included){prev=version;if(!min)min=version;}else{if(prev){set.push([min,prev]);}prev=null;min=null;}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}if(min)set.push([min,null]);var ranges=[];for(var _i3=0,_set=set;_i3<_set.length;_i3++){var _set$_i=_slicedToArray(_set[_i3],2),min2=_set$_i[0],max=_set$_i[1];if(min2===max)ranges.push(min2);else if(!max&&min2===v[0])ranges.push("*");else if(!max)ranges.push(">=".concat(min2));else if(min2===v[0])ranges.push("<=".concat(max));else ranges.push("".concat(min2," - ").concat(max));}var simplified=ranges.join(" || ");var original=typeof range.raw==="string"?range.raw:String(range);return simplified.length<original.length?simplified:range;};}});// client/node_modules/semver/ranges/subset.js
var require_subset=__commonJS({"client/node_modules/semver/ranges/subset.js":function clientNode_modulesSemverRangesSubsetJs(exports,module2){var Range=require_range();var Comparator=require_comparator();var ANY=Comparator.ANY;var satisfies=require_satisfies();var compare=require_compare();var subset=function subset(sub,dom){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(sub===dom)return true;sub=new Range(sub,options);dom=new Range(dom,options);var sawNonNull=false;var _iterator5=_createForOfIteratorHelper(sub.set),_step5;try{OUTER:for(_iterator5.s();!(_step5=_iterator5.n()).done;){var simpleSub=_step5.value;var _iterator6=_createForOfIteratorHelper(dom.set),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var simpleDom=_step6.value;var isSub=simpleSubset(simpleSub,simpleDom,options);sawNonNull=sawNonNull||isSub!==null;if(isSub)continue OUTER;}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}if(sawNonNull)return false;}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return true;};var simpleSubset=function simpleSubset(sub,dom,options){if(sub===dom)return true;if(sub.length===1&&sub[0].semver===ANY){if(dom.length===1&&dom[0].semver===ANY)return true;else if(options.includePrerelease)sub=[new Comparator(">=0.0.0-0")];else sub=[new Comparator(">=0.0.0")];}if(dom.length===1&&dom[0].semver===ANY){if(options.includePrerelease)return true;else dom=[new Comparator(">=0.0.0")];}var eqSet=new Set();var gt,lt;var _iterator7=_createForOfIteratorHelper(sub),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var c=_step7.value;if(c.operator===">"||c.operator===">=")gt=higherGT(gt,c,options);else if(c.operator==="<"||c.operator==="<=")lt=lowerLT(lt,c,options);else eqSet.add(c.semver);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}if(eqSet.size>1)return null;var gtltComp;if(gt&&lt){gtltComp=compare(gt.semver,lt.semver,options);if(gtltComp>0)return null;else if(gtltComp===0&&(gt.operator!==">="||lt.operator!=="<="))return null;}var _iterator8=_createForOfIteratorHelper(eqSet),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var eq=_step8.value;if(gt&&!satisfies(eq,String(gt),options))return null;if(lt&&!satisfies(eq,String(lt),options))return null;var _iterator10=_createForOfIteratorHelper(dom),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _c2=_step10.value;if(!satisfies(eq,String(_c2),options))return false;}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}return true;}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}var higher,lower;var hasDomLT,hasDomGT;var needDomLTPre=lt&&!options.includePrerelease&&lt.semver.prerelease.length?lt.semver:false;var needDomGTPre=gt&&!options.includePrerelease&&gt.semver.prerelease.length?gt.semver:false;if(needDomLTPre&&needDomLTPre.prerelease.length===1&&lt.operator==="<"&&needDomLTPre.prerelease[0]===0){needDomLTPre=false;}var _iterator9=_createForOfIteratorHelper(dom),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _c3=_step9.value;hasDomGT=hasDomGT||_c3.operator===">"||_c3.operator===">=";hasDomLT=hasDomLT||_c3.operator==="<"||_c3.operator==="<=";if(gt){if(needDomGTPre){if(_c3.semver.prerelease&&_c3.semver.prerelease.length&&_c3.semver.major===needDomGTPre.major&&_c3.semver.minor===needDomGTPre.minor&&_c3.semver.patch===needDomGTPre.patch){needDomGTPre=false;}}if(_c3.operator===">"||_c3.operator===">="){higher=higherGT(gt,_c3,options);if(higher===_c3&&higher!==gt)return false;}else if(gt.operator===">="&&!satisfies(gt.semver,String(_c3),options))return false;}if(lt){if(needDomLTPre){if(_c3.semver.prerelease&&_c3.semver.prerelease.length&&_c3.semver.major===needDomLTPre.major&&_c3.semver.minor===needDomLTPre.minor&&_c3.semver.patch===needDomLTPre.patch){needDomLTPre=false;}}if(_c3.operator==="<"||_c3.operator==="<="){lower=lowerLT(lt,_c3,options);if(lower===_c3&&lower!==lt)return false;}else if(lt.operator==="<="&&!satisfies(lt.semver,String(_c3),options))return false;}if(!_c3.operator&&(lt||gt)&&gtltComp!==0)return false;}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}if(gt&&hasDomLT&&!lt&&gtltComp!==0)return false;if(lt&&hasDomGT&&!gt&&gtltComp!==0)return false;if(needDomGTPre||needDomLTPre)return false;return true;};var higherGT=function higherGT(a,b,options){if(!a)return b;var comp=compare(a.semver,b.semver,options);return comp>0?a:comp<0?b:b.operator===">"&&a.operator===">="?b:a;};var lowerLT=function lowerLT(a,b,options){if(!a)return b;var comp=compare(a.semver,b.semver,options);return comp<0?a:comp>0?b:b.operator==="<"&&a.operator==="<="?b:a;};module2.exports=subset;}});// client/node_modules/semver/index.js
var require_semver2=__commonJS({"client/node_modules/semver/index.js":function clientNode_modulesSemverIndexJs(exports,module2){var internalRe=require_re();module2.exports={re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:require_constants().SEMVER_SPEC_VERSION,SemVer:require_semver(),compareIdentifiers:require_identifiers().compareIdentifiers,rcompareIdentifiers:require_identifiers().rcompareIdentifiers,parse:require_parse(),valid:require_valid(),clean:require_clean(),inc:require_inc(),diff:require_diff(),major:require_major(),minor:require_minor(),patch:require_patch(),prerelease:require_prerelease(),compare:require_compare(),rcompare:require_rcompare(),compareLoose:require_compare_loose(),compareBuild:require_compare_build(),sort:require_sort(),rsort:require_rsort(),gt:require_gt(),lt:require_lt(),eq:require_eq(),neq:require_neq(),gte:require_gte(),lte:require_lte(),cmp:require_cmp(),coerce:require_coerce(),Comparator:require_comparator(),Range:require_range(),satisfies:require_satisfies(),toComparators:require_to_comparators(),maxSatisfying:require_max_satisfying(),minSatisfying:require_min_satisfying(),minVersion:require_min_version(),validRange:require_valid2(),outside:require_outside(),gtr:require_gtr(),ltr:require_ltr(),intersects:require_intersects(),simplifyRange:require_simplify(),subset:require_subset()};}});// client/node_modules/vscode-languageclient/lib/common/utils/is.js
var require_is=__commonJS({"client/node_modules/vscode-languageclient/lib/common/utils/is.js":function clientNode_modulesVscodeLanguageclientLibCommonUtilsIsJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asPromise=exports.thenable=exports.typedArray=exports.stringArray=exports.array=exports.func=exports.error=exports.number=exports.string=exports.boolean=void 0;function boolean(value){return value===true||value===false;}exports.boolean=boolean;function string(value){return typeof value==="string"||value instanceof String;}exports.string=string;function number(value){return typeof value==="number"||value instanceof Number;}exports.number=number;function error(value){return value instanceof Error;}exports.error=error;function func(value){return typeof value==="function";}exports.func=func;function array(value){return Array.isArray(value);}exports.array=array;function stringArray(value){return array(value)&&value.every(function(elem){return string(elem);});}exports.stringArray=stringArray;function typedArray(value,check){return Array.isArray(value)&&value.every(check);}exports.typedArray=typedArray;function thenable(value){return value&&func(value.then);}exports.thenable=thenable;function asPromise(value){if(value instanceof Promise){return value;}else if(thenable(value)){return new Promise(function(resolve,reject){value.then(function(resolved){return resolve(resolved);},function(error2){return reject(error2);});});}else{return Promise.resolve(value);}}exports.asPromise=asPromise;}});// client/node_modules/vscode-jsonrpc/lib/common/ral.js
var require_ral=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/ral.js":function clientNode_modulesVscodeJsonrpcLibCommonRalJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ral;function RAL(){if(_ral===void 0){throw new Error("No runtime abstraction layer installed");}return _ral;}(function(RAL2){function install(ral){if(ral===void 0){throw new Error("No runtime abstraction layer provided");}_ral=ral;}RAL2.install=install;})(RAL||(RAL={}));exports.default=RAL;}});// client/node_modules/vscode-jsonrpc/lib/common/disposable.js
var require_disposable=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/disposable.js":function clientNode_modulesVscodeJsonrpcLibCommonDisposableJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Disposable=void 0;var Disposable3;(function(Disposable4){function create(func){return{dispose:func};}Disposable4.create=create;})(Disposable3=exports.Disposable||(exports.Disposable={}));}});// client/node_modules/vscode-jsonrpc/lib/common/messageBuffer.js
var require_messageBuffer=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/messageBuffer.js":function clientNode_modulesVscodeJsonrpcLibCommonMessageBufferJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AbstractMessageBuffer=void 0;var CR=13;var LF=10;var CRLF="\r\n";var AbstractMessageBuffer=/*#__PURE__*/function(){function AbstractMessageBuffer(){var encoding=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"utf-8";_classCallCheck(this,AbstractMessageBuffer);this._encoding=encoding;this._chunks=[];this._totalLength=0;}_createClass(AbstractMessageBuffer,[{key:"encoding",get:function get(){return this._encoding;}},{key:"append",value:function append(chunk){var toAppend=typeof chunk==="string"?this.fromString(chunk,this._encoding):chunk;this._chunks.push(toAppend);this._totalLength+=toAppend.byteLength;}},{key:"tryReadHeaders",value:function tryReadHeaders(){if(this._chunks.length===0){return void 0;}var state=0;var chunkIndex=0;var offset=0;var chunkBytesRead=0;row:while(chunkIndex<this._chunks.length){var chunk=this._chunks[chunkIndex];offset=0;column:while(offset<chunk.length){var value=chunk[offset];switch(value){case CR:switch(state){case 0:state=1;break;case 2:state=3;break;default:state=0;}break;case LF:switch(state){case 1:state=2;break;case 3:state=4;offset++;break row;default:state=0;}break;default:state=0;}offset++;}chunkBytesRead+=chunk.byteLength;chunkIndex++;}if(state!==4){return void 0;}var buffer=this._read(chunkBytesRead+offset);var result=new Map();var headers=this.toString(buffer,"ascii").split(CRLF);if(headers.length<2){return result;}for(var i=0;i<headers.length-2;i++){var header=headers[i];var index=header.indexOf(":");if(index===-1){throw new Error("Message header must separate key and value using :");}var key=header.substr(0,index);var _value2=header.substr(index+1).trim();result.set(key,_value2);}return result;}},{key:"tryReadBody",value:function tryReadBody(length){if(this._totalLength<length){return void 0;}return this._read(length);}},{key:"numberOfBytes",get:function get(){return this._totalLength;}},{key:"_read",value:function _read(byteCount){if(byteCount===0){return this.emptyBuffer();}if(byteCount>this._totalLength){throw new Error("Cannot read so many bytes!");}if(this._chunks[0].byteLength===byteCount){var chunk=this._chunks[0];this._chunks.shift();this._totalLength-=byteCount;return this.asNative(chunk);}if(this._chunks[0].byteLength>byteCount){var _chunk=this._chunks[0];var result2=this.asNative(_chunk,byteCount);this._chunks[0]=_chunk.slice(byteCount);this._totalLength-=byteCount;return result2;}var result=this.allocNative(byteCount);var resultOffset=0;var chunkIndex=0;while(byteCount>0){var _chunk2=this._chunks[chunkIndex];if(_chunk2.byteLength>byteCount){var chunkPart=_chunk2.slice(0,byteCount);result.set(chunkPart,resultOffset);resultOffset+=byteCount;this._chunks[chunkIndex]=_chunk2.slice(byteCount);this._totalLength-=byteCount;byteCount-=byteCount;}else{result.set(_chunk2,resultOffset);resultOffset+=_chunk2.byteLength;this._chunks.shift();this._totalLength-=_chunk2.byteLength;byteCount-=_chunk2.byteLength;}}return result;}}]);return AbstractMessageBuffer;}();exports.AbstractMessageBuffer=AbstractMessageBuffer;}});// client/node_modules/vscode-jsonrpc/lib/node/ril.js
var require_ril=__commonJS({"client/node_modules/vscode-jsonrpc/lib/node/ril.js":function clientNode_modulesVscodeJsonrpcLibNodeRilJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ral_1=require_ral();var util_1=require("util");var disposable_1=require_disposable();var messageBuffer_1=require_messageBuffer();var MessageBuffer=/*#__PURE__*/function(_messageBuffer_1$Abst){_inherits(MessageBuffer,_messageBuffer_1$Abst);var _super2=_createSuper(MessageBuffer);function MessageBuffer(){var encoding=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"utf-8";_classCallCheck(this,MessageBuffer);return _super2.call(this,encoding);}_createClass(MessageBuffer,[{key:"emptyBuffer",value:function emptyBuffer(){return MessageBuffer.emptyBuffer;}},{key:"fromString",value:function fromString(value,encoding){return Buffer.from(value,encoding);}},{key:"toString",value:function toString(value,encoding){if(value instanceof Buffer){return value.toString(encoding);}else{return new util_1.TextDecoder(encoding).decode(value);}}},{key:"asNative",value:function asNative(buffer,length){if(length===void 0){return buffer instanceof Buffer?buffer:Buffer.from(buffer);}else{return buffer instanceof Buffer?buffer.slice(0,length):Buffer.from(buffer,0,length);}}},{key:"allocNative",value:function allocNative(length){return Buffer.allocUnsafe(length);}}]);return MessageBuffer;}(messageBuffer_1.AbstractMessageBuffer);MessageBuffer.emptyBuffer=Buffer.allocUnsafe(0);var ReadableStreamWrapper=/*#__PURE__*/function(){function ReadableStreamWrapper(stream){_classCallCheck(this,ReadableStreamWrapper);this.stream=stream;}_createClass(ReadableStreamWrapper,[{key:"onClose",value:function onClose(listener){var _this8=this;this.stream.on("close",listener);return disposable_1.Disposable.create(function(){return _this8.stream.off("close",listener);});}},{key:"onError",value:function onError(listener){var _this9=this;this.stream.on("error",listener);return disposable_1.Disposable.create(function(){return _this9.stream.off("error",listener);});}},{key:"onEnd",value:function onEnd(listener){var _this10=this;this.stream.on("end",listener);return disposable_1.Disposable.create(function(){return _this10.stream.off("end",listener);});}},{key:"onData",value:function onData(listener){var _this11=this;this.stream.on("data",listener);return disposable_1.Disposable.create(function(){return _this11.stream.off("data",listener);});}}]);return ReadableStreamWrapper;}();var WritableStreamWrapper=/*#__PURE__*/function(){function WritableStreamWrapper(stream){_classCallCheck(this,WritableStreamWrapper);this.stream=stream;}_createClass(WritableStreamWrapper,[{key:"onClose",value:function onClose(listener){var _this12=this;this.stream.on("close",listener);return disposable_1.Disposable.create(function(){return _this12.stream.off("close",listener);});}},{key:"onError",value:function onError(listener){var _this13=this;this.stream.on("error",listener);return disposable_1.Disposable.create(function(){return _this13.stream.off("error",listener);});}},{key:"onEnd",value:function onEnd(listener){var _this14=this;this.stream.on("end",listener);return disposable_1.Disposable.create(function(){return _this14.stream.off("end",listener);});}},{key:"write",value:function write(data,encoding){var _this15=this;return new Promise(function(resolve,reject){var callback=function callback(error){if(error===void 0||error===null){resolve();}else{reject(error);}};if(typeof data==="string"){_this15.stream.write(data,encoding,callback);}else{_this15.stream.write(data,callback);}});}},{key:"end",value:function end(){this.stream.end();}}]);return WritableStreamWrapper;}();var _ril=Object.freeze({messageBuffer:Object.freeze({create:function create(encoding){return new MessageBuffer(encoding);}}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:function encode(msg,options){try{return Promise.resolve(Buffer.from(JSON.stringify(msg,void 0,0),options.charset));}catch(err){return Promise.reject(err);}}}),decoder:Object.freeze({name:"application/json",decode:function decode(buffer,options){try{if(buffer instanceof Buffer){return Promise.resolve(JSON.parse(buffer.toString(options.charset)));}else{return Promise.resolve(JSON.parse(new util_1.TextDecoder(options.charset).decode(buffer)));}}catch(err){return Promise.reject(err);}}})}),stream:Object.freeze({asReadableStream:function asReadableStream(stream){return new ReadableStreamWrapper(stream);},asWritableStream:function asWritableStream(stream){return new WritableStreamWrapper(stream);}}),console:console,timer:Object.freeze({setTimeout:function(_setTimeout){function setTimeout(_x2,_x3){return _setTimeout.apply(this,arguments);}setTimeout.toString=function(){return _setTimeout.toString();};return setTimeout;}(function(callback,ms){for(var _len2=arguments.length,args=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2];}var handle=setTimeout.apply(void 0,[callback,ms].concat(args));return{dispose:function dispose(){return clearTimeout(handle);}};}),setImmediate:function(_setImmediate){function setImmediate(_x4){return _setImmediate.apply(this,arguments);}setImmediate.toString=function(){return _setImmediate.toString();};return setImmediate;}(function(callback){for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){args[_key3-1]=arguments[_key3];}var handle=setImmediate.apply(void 0,[callback].concat(args));return{dispose:function dispose(){return clearImmediate(handle);}};}),setInterval:function(_setInterval){function setInterval(_x5,_x6){return _setInterval.apply(this,arguments);}setInterval.toString=function(){return _setInterval.toString();};return setInterval;}(function(callback,ms){for(var _len4=arguments.length,args=new Array(_len4>2?_len4-2:0),_key4=2;_key4<_len4;_key4++){args[_key4-2]=arguments[_key4];}var handle=setInterval.apply(void 0,[callback,ms].concat(args));return{dispose:function dispose(){return clearInterval(handle);}};})})});function RIL(){return _ril;}(function(RIL2){function install(){ral_1.default.install(_ril);}RIL2.install=install;})(RIL||(RIL={}));exports.default=RIL;}});// client/node_modules/vscode-jsonrpc/lib/common/is.js
var require_is2=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/is.js":function clientNode_modulesVscodeJsonrpcLibCommonIsJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stringArray=exports.array=exports.func=exports.error=exports.number=exports.string=exports.boolean=void 0;function boolean(value){return value===true||value===false;}exports.boolean=boolean;function string(value){return typeof value==="string"||value instanceof String;}exports.string=string;function number(value){return typeof value==="number"||value instanceof Number;}exports.number=number;function error(value){return value instanceof Error;}exports.error=error;function func(value){return typeof value==="function";}exports.func=func;function array(value){return Array.isArray(value);}exports.array=array;function stringArray(value){return array(value)&&value.every(function(elem){return string(elem);});}exports.stringArray=stringArray;}});// client/node_modules/vscode-jsonrpc/lib/common/messages.js
var require_messages=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/messages.js":function clientNode_modulesVscodeJsonrpcLibCommonMessagesJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Message=exports.NotificationType9=exports.NotificationType8=exports.NotificationType7=exports.NotificationType6=exports.NotificationType5=exports.NotificationType4=exports.NotificationType3=exports.NotificationType2=exports.NotificationType1=exports.NotificationType0=exports.NotificationType=exports.RequestType9=exports.RequestType8=exports.RequestType7=exports.RequestType6=exports.RequestType5=exports.RequestType4=exports.RequestType3=exports.RequestType2=exports.RequestType1=exports.RequestType=exports.RequestType0=exports.AbstractMessageSignature=exports.ParameterStructures=exports.ResponseError=exports.ErrorCodes=void 0;var is=require_is2();var ErrorCodes;(function(ErrorCodes2){ErrorCodes2.ParseError=-32700;ErrorCodes2.InvalidRequest=-32600;ErrorCodes2.MethodNotFound=-32601;ErrorCodes2.InvalidParams=-32602;ErrorCodes2.InternalError=-32603;ErrorCodes2.jsonrpcReservedErrorRangeStart=-32099;ErrorCodes2.serverErrorStart=ErrorCodes2.jsonrpcReservedErrorRangeStart;ErrorCodes2.MessageWriteError=-32099;ErrorCodes2.MessageReadError=-32098;ErrorCodes2.ServerNotInitialized=-32002;ErrorCodes2.UnknownErrorCode=-32001;ErrorCodes2.jsonrpcReservedErrorRangeEnd=-32e3;ErrorCodes2.serverErrorEnd=ErrorCodes2.jsonrpcReservedErrorRangeEnd;})(ErrorCodes=exports.ErrorCodes||(exports.ErrorCodes={}));var ResponseError=/*#__PURE__*/function(_Error){_inherits(ResponseError,_Error);var _super3=_createSuper(ResponseError);function ResponseError(code,message,data){var _this16;_classCallCheck(this,ResponseError);_this16=_super3.call(this,message);_this16.code=is.number(code)?code:ErrorCodes.UnknownErrorCode;_this16.data=data;Object.setPrototypeOf(_assertThisInitialized(_this16),ResponseError.prototype);return _this16;}_createClass(ResponseError,[{key:"toJson",value:function toJson(){var result={code:this.code,message:this.message};if(this.data!==void 0){result.data=this.data;}return result;}}]);return ResponseError;}(/*#__PURE__*/_wrapNativeSuper(Error));exports.ResponseError=ResponseError;var ParameterStructures=/*#__PURE__*/function(){function ParameterStructures(kind){_classCallCheck(this,ParameterStructures);this.kind=kind;}_createClass(ParameterStructures,[{key:"toString",value:function toString(){return this.kind;}}],[{key:"is",value:function is(value){return value===ParameterStructures.auto||value===ParameterStructures.byName||value===ParameterStructures.byPosition;}}]);return ParameterStructures;}();exports.ParameterStructures=ParameterStructures;ParameterStructures.auto=new ParameterStructures("auto");ParameterStructures.byPosition=new ParameterStructures("byPosition");ParameterStructures.byName=new ParameterStructures("byName");var AbstractMessageSignature=/*#__PURE__*/function(){function AbstractMessageSignature(method,numberOfParams){_classCallCheck(this,AbstractMessageSignature);this.method=method;this.numberOfParams=numberOfParams;}_createClass(AbstractMessageSignature,[{key:"parameterStructures",get:function get(){return ParameterStructures.auto;}}]);return AbstractMessageSignature;}();exports.AbstractMessageSignature=AbstractMessageSignature;var RequestType0=/*#__PURE__*/function(_AbstractMessageSigna){_inherits(RequestType0,_AbstractMessageSigna);var _super4=_createSuper(RequestType0);function RequestType0(method){_classCallCheck(this,RequestType0);return _super4.call(this,method,0);}return _createClass(RequestType0);}(AbstractMessageSignature);exports.RequestType0=RequestType0;var RequestType=/*#__PURE__*/function(_AbstractMessageSigna2){_inherits(RequestType,_AbstractMessageSigna2);var _super5=_createSuper(RequestType);function RequestType(method){var _this17;var _parameterStructures=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ParameterStructures.auto;_classCallCheck(this,RequestType);_this17=_super5.call(this,method,1);_this17._parameterStructures=_parameterStructures;return _this17;}_createClass(RequestType,[{key:"parameterStructures",get:function get(){return this._parameterStructures;}}]);return RequestType;}(AbstractMessageSignature);exports.RequestType=RequestType;var RequestType1=/*#__PURE__*/function(_AbstractMessageSigna3){_inherits(RequestType1,_AbstractMessageSigna3);var _super6=_createSuper(RequestType1);function RequestType1(method){var _this18;var _parameterStructures=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ParameterStructures.auto;_classCallCheck(this,RequestType1);_this18=_super6.call(this,method,1);_this18._parameterStructures=_parameterStructures;return _this18;}_createClass(RequestType1,[{key:"parameterStructures",get:function get(){return this._parameterStructures;}}]);return RequestType1;}(AbstractMessageSignature);exports.RequestType1=RequestType1;var RequestType2=/*#__PURE__*/function(_AbstractMessageSigna4){_inherits(RequestType2,_AbstractMessageSigna4);var _super7=_createSuper(RequestType2);function RequestType2(method){_classCallCheck(this,RequestType2);return _super7.call(this,method,2);}return _createClass(RequestType2);}(AbstractMessageSignature);exports.RequestType2=RequestType2;var RequestType3=/*#__PURE__*/function(_AbstractMessageSigna5){_inherits(RequestType3,_AbstractMessageSigna5);var _super8=_createSuper(RequestType3);function RequestType3(method){_classCallCheck(this,RequestType3);return _super8.call(this,method,3);}return _createClass(RequestType3);}(AbstractMessageSignature);exports.RequestType3=RequestType3;var RequestType4=/*#__PURE__*/function(_AbstractMessageSigna6){_inherits(RequestType4,_AbstractMessageSigna6);var _super9=_createSuper(RequestType4);function RequestType4(method){_classCallCheck(this,RequestType4);return _super9.call(this,method,4);}return _createClass(RequestType4);}(AbstractMessageSignature);exports.RequestType4=RequestType4;var RequestType5=/*#__PURE__*/function(_AbstractMessageSigna7){_inherits(RequestType5,_AbstractMessageSigna7);var _super10=_createSuper(RequestType5);function RequestType5(method){_classCallCheck(this,RequestType5);return _super10.call(this,method,5);}return _createClass(RequestType5);}(AbstractMessageSignature);exports.RequestType5=RequestType5;var RequestType6=/*#__PURE__*/function(_AbstractMessageSigna8){_inherits(RequestType6,_AbstractMessageSigna8);var _super11=_createSuper(RequestType6);function RequestType6(method){_classCallCheck(this,RequestType6);return _super11.call(this,method,6);}return _createClass(RequestType6);}(AbstractMessageSignature);exports.RequestType6=RequestType6;var RequestType7=/*#__PURE__*/function(_AbstractMessageSigna9){_inherits(RequestType7,_AbstractMessageSigna9);var _super12=_createSuper(RequestType7);function RequestType7(method){_classCallCheck(this,RequestType7);return _super12.call(this,method,7);}return _createClass(RequestType7);}(AbstractMessageSignature);exports.RequestType7=RequestType7;var RequestType8=/*#__PURE__*/function(_AbstractMessageSigna10){_inherits(RequestType8,_AbstractMessageSigna10);var _super13=_createSuper(RequestType8);function RequestType8(method){_classCallCheck(this,RequestType8);return _super13.call(this,method,8);}return _createClass(RequestType8);}(AbstractMessageSignature);exports.RequestType8=RequestType8;var RequestType9=/*#__PURE__*/function(_AbstractMessageSigna11){_inherits(RequestType9,_AbstractMessageSigna11);var _super14=_createSuper(RequestType9);function RequestType9(method){_classCallCheck(this,RequestType9);return _super14.call(this,method,9);}return _createClass(RequestType9);}(AbstractMessageSignature);exports.RequestType9=RequestType9;var NotificationType=/*#__PURE__*/function(_AbstractMessageSigna12){_inherits(NotificationType,_AbstractMessageSigna12);var _super15=_createSuper(NotificationType);function NotificationType(method){var _this19;var _parameterStructures=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ParameterStructures.auto;_classCallCheck(this,NotificationType);_this19=_super15.call(this,method,1);_this19._parameterStructures=_parameterStructures;return _this19;}_createClass(NotificationType,[{key:"parameterStructures",get:function get(){return this._parameterStructures;}}]);return NotificationType;}(AbstractMessageSignature);exports.NotificationType=NotificationType;var NotificationType0=/*#__PURE__*/function(_AbstractMessageSigna13){_inherits(NotificationType0,_AbstractMessageSigna13);var _super16=_createSuper(NotificationType0);function NotificationType0(method){_classCallCheck(this,NotificationType0);return _super16.call(this,method,0);}return _createClass(NotificationType0);}(AbstractMessageSignature);exports.NotificationType0=NotificationType0;var NotificationType1=/*#__PURE__*/function(_AbstractMessageSigna14){_inherits(NotificationType1,_AbstractMessageSigna14);var _super17=_createSuper(NotificationType1);function NotificationType1(method){var _this20;var _parameterStructures=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ParameterStructures.auto;_classCallCheck(this,NotificationType1);_this20=_super17.call(this,method,1);_this20._parameterStructures=_parameterStructures;return _this20;}_createClass(NotificationType1,[{key:"parameterStructures",get:function get(){return this._parameterStructures;}}]);return NotificationType1;}(AbstractMessageSignature);exports.NotificationType1=NotificationType1;var NotificationType2=/*#__PURE__*/function(_AbstractMessageSigna15){_inherits(NotificationType2,_AbstractMessageSigna15);var _super18=_createSuper(NotificationType2);function NotificationType2(method){_classCallCheck(this,NotificationType2);return _super18.call(this,method,2);}return _createClass(NotificationType2);}(AbstractMessageSignature);exports.NotificationType2=NotificationType2;var NotificationType3=/*#__PURE__*/function(_AbstractMessageSigna16){_inherits(NotificationType3,_AbstractMessageSigna16);var _super19=_createSuper(NotificationType3);function NotificationType3(method){_classCallCheck(this,NotificationType3);return _super19.call(this,method,3);}return _createClass(NotificationType3);}(AbstractMessageSignature);exports.NotificationType3=NotificationType3;var NotificationType4=/*#__PURE__*/function(_AbstractMessageSigna17){_inherits(NotificationType4,_AbstractMessageSigna17);var _super20=_createSuper(NotificationType4);function NotificationType4(method){_classCallCheck(this,NotificationType4);return _super20.call(this,method,4);}return _createClass(NotificationType4);}(AbstractMessageSignature);exports.NotificationType4=NotificationType4;var NotificationType5=/*#__PURE__*/function(_AbstractMessageSigna18){_inherits(NotificationType5,_AbstractMessageSigna18);var _super21=_createSuper(NotificationType5);function NotificationType5(method){_classCallCheck(this,NotificationType5);return _super21.call(this,method,5);}return _createClass(NotificationType5);}(AbstractMessageSignature);exports.NotificationType5=NotificationType5;var NotificationType6=/*#__PURE__*/function(_AbstractMessageSigna19){_inherits(NotificationType6,_AbstractMessageSigna19);var _super22=_createSuper(NotificationType6);function NotificationType6(method){_classCallCheck(this,NotificationType6);return _super22.call(this,method,6);}return _createClass(NotificationType6);}(AbstractMessageSignature);exports.NotificationType6=NotificationType6;var NotificationType7=/*#__PURE__*/function(_AbstractMessageSigna20){_inherits(NotificationType7,_AbstractMessageSigna20);var _super23=_createSuper(NotificationType7);function NotificationType7(method){_classCallCheck(this,NotificationType7);return _super23.call(this,method,7);}return _createClass(NotificationType7);}(AbstractMessageSignature);exports.NotificationType7=NotificationType7;var NotificationType8=/*#__PURE__*/function(_AbstractMessageSigna21){_inherits(NotificationType8,_AbstractMessageSigna21);var _super24=_createSuper(NotificationType8);function NotificationType8(method){_classCallCheck(this,NotificationType8);return _super24.call(this,method,8);}return _createClass(NotificationType8);}(AbstractMessageSignature);exports.NotificationType8=NotificationType8;var NotificationType9=/*#__PURE__*/function(_AbstractMessageSigna22){_inherits(NotificationType9,_AbstractMessageSigna22);var _super25=_createSuper(NotificationType9);function NotificationType9(method){_classCallCheck(this,NotificationType9);return _super25.call(this,method,9);}return _createClass(NotificationType9);}(AbstractMessageSignature);exports.NotificationType9=NotificationType9;var Message;(function(Message2){function isRequest(message){var candidate=message;return candidate&&is.string(candidate.method)&&(is.string(candidate.id)||is.number(candidate.id));}Message2.isRequest=isRequest;function isNotification(message){var candidate=message;return candidate&&is.string(candidate.method)&&message.id===void 0;}Message2.isNotification=isNotification;function isResponse(message){var candidate=message;return candidate&&(candidate.result!==void 0||!!candidate.error)&&(is.string(candidate.id)||is.number(candidate.id)||candidate.id===null);}Message2.isResponse=isResponse;})(Message=exports.Message||(exports.Message={}));}});// client/node_modules/vscode-jsonrpc/lib/common/linkedMap.js
var require_linkedMap=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/linkedMap.js":function clientNode_modulesVscodeJsonrpcLibCommonLinkedMapJs(exports){"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:true});exports.LRUCache=exports.LinkedMap=exports.Touch=void 0;var Touch;(function(Touch2){Touch2.None=0;Touch2.First=1;Touch2.AsOld=Touch2.First;Touch2.Last=2;Touch2.AsNew=Touch2.Last;})(Touch=exports.Touch||(exports.Touch={}));var LinkedMap=/*#__PURE__*/function(_ref){function LinkedMap(){_classCallCheck(this,LinkedMap);this[_a]="LinkedMap";this._map=new Map();this._head=void 0;this._tail=void 0;this._size=0;this._state=0;}_createClass(LinkedMap,[{key:"clear",value:function clear(){this._map.clear();this._head=void 0;this._tail=void 0;this._size=0;this._state++;}},{key:"isEmpty",value:function isEmpty(){return!this._head&&!this._tail;}},{key:"size",get:function get(){return this._size;}},{key:"first",get:function get(){var _this$_head;return(_this$_head=this._head)===null||_this$_head===void 0?void 0:_this$_head.value;}},{key:"last",get:function get(){var _this$_tail;return(_this$_tail=this._tail)===null||_this$_tail===void 0?void 0:_this$_tail.value;}},{key:"has",value:function has(key){return this._map.has(key);}},{key:"get",value:function get(key){var touch=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Touch.None;var item=this._map.get(key);if(!item){return void 0;}if(touch!==Touch.None){this.touch(item,touch);}return item.value;}},{key:"set",value:function set(key,value){var touch=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Touch.None;var item=this._map.get(key);if(item){item.value=value;if(touch!==Touch.None){this.touch(item,touch);}}else{item={key:key,value:value,next:void 0,previous:void 0};switch(touch){case Touch.None:this.addItemLast(item);break;case Touch.First:this.addItemFirst(item);break;case Touch.Last:this.addItemLast(item);break;default:this.addItemLast(item);break;}this._map.set(key,item);this._size++;}return this;}},{key:"delete",value:function _delete(key){return!!this.remove(key);}},{key:"remove",value:function remove(key){var item=this._map.get(key);if(!item){return void 0;}this._map.delete(key);this.removeItem(item);this._size--;return item.value;}},{key:"shift",value:function shift(){if(!this._head&&!this._tail){return void 0;}if(!this._head||!this._tail){throw new Error("Invalid list");}var item=this._head;this._map.delete(item.key);this.removeItem(item);this._size--;return item.value;}},{key:"forEach",value:function forEach(callbackfn,thisArg){var state=this._state;var current=this._head;while(current){if(thisArg){callbackfn.bind(thisArg)(current.value,current.key,this);}else{callbackfn(current.value,current.key,this);}if(this._state!==state){throw new Error("LinkedMap got modified during iteration.");}current=current.next;}}},{key:"keys",value:function keys(){var _this21=this,_iterator11;var state=this._state;var current=this._head;var iterator=(_iterator11={},_defineProperty(_iterator11,Symbol.iterator,function(){return iterator;}),_defineProperty(_iterator11,"next",function next(){if(_this21._state!==state){throw new Error("LinkedMap got modified during iteration.");}if(current){var result={value:current.key,done:false};current=current.next;return result;}else{return{value:void 0,done:true};}}),_iterator11);return iterator;}},{key:"values",value:function values(){var _this22=this,_iterator12;var state=this._state;var current=this._head;var iterator=(_iterator12={},_defineProperty(_iterator12,Symbol.iterator,function(){return iterator;}),_defineProperty(_iterator12,"next",function next(){if(_this22._state!==state){throw new Error("LinkedMap got modified during iteration.");}if(current){var result={value:current.value,done:false};current=current.next;return result;}else{return{value:void 0,done:true};}}),_iterator12);return iterator;}},{key:"entries",value:function entries(){var _this23=this,_iterator13;var state=this._state;var current=this._head;var iterator=(_iterator13={},_defineProperty(_iterator13,Symbol.iterator,function(){return iterator;}),_defineProperty(_iterator13,"next",function next(){if(_this23._state!==state){throw new Error("LinkedMap got modified during iteration.");}if(current){var result={value:[current.key,current.value],done:false};current=current.next;return result;}else{return{value:void 0,done:true};}}),_iterator13);return iterator;}},{key:_ref,value:function value(){return this.entries();}},{key:"trimOld",value:function trimOld(newSize){if(newSize>=this.size){return;}if(newSize===0){this.clear();return;}var current=this._head;var currentSize=this.size;while(current&&currentSize>newSize){this._map.delete(current.key);current=current.next;currentSize--;}this._head=current;this._size=currentSize;if(current){current.previous=void 0;}this._state++;}},{key:"addItemFirst",value:function addItemFirst(item){if(!this._head&&!this._tail){this._tail=item;}else if(!this._head){throw new Error("Invalid list");}else{item.next=this._head;this._head.previous=item;}this._head=item;this._state++;}},{key:"addItemLast",value:function addItemLast(item){if(!this._head&&!this._tail){this._head=item;}else if(!this._tail){throw new Error("Invalid list");}else{item.previous=this._tail;this._tail.next=item;}this._tail=item;this._state++;}},{key:"removeItem",value:function removeItem(item){if(item===this._head&&item===this._tail){this._head=void 0;this._tail=void 0;}else if(item===this._head){if(!item.next){throw new Error("Invalid list");}item.next.previous=void 0;this._head=item.next;}else if(item===this._tail){if(!item.previous){throw new Error("Invalid list");}item.previous.next=void 0;this._tail=item.previous;}else{var next=item.next;var previous=item.previous;if(!next||!previous){throw new Error("Invalid list");}next.previous=previous;previous.next=next;}item.next=void 0;item.previous=void 0;this._state++;}},{key:"touch",value:function touch(item,_touch){if(!this._head||!this._tail){throw new Error("Invalid list");}if(_touch!==Touch.First&&_touch!==Touch.Last){return;}if(_touch===Touch.First){if(item===this._head){return;}var next=item.next;var previous=item.previous;if(item===this._tail){previous.next=void 0;this._tail=previous;}else{next.previous=previous;previous.next=next;}item.previous=void 0;item.next=this._head;this._head.previous=item;this._head=item;this._state++;}else if(_touch===Touch.Last){if(item===this._tail){return;}var _next=item.next;var _previous=item.previous;if(item===this._head){_next.previous=void 0;this._head=_next;}else{_next.previous=_previous;_previous.next=_next;}item.next=void 0;item.previous=this._tail;this._tail.next=item;this._tail=item;this._state++;}}},{key:"toJSON",value:function toJSON(){var data=[];this.forEach(function(value,key){data.push([key,value]);});return data;}},{key:"fromJSON",value:function fromJSON(data){this.clear();var _iterator14=_createForOfIteratorHelper(data),_step11;try{for(_iterator14.s();!(_step11=_iterator14.n()).done;){var _step11$value=_slicedToArray(_step11.value,2),key=_step11$value[0],value=_step11$value[1];this.set(key,value);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}}}]);return LinkedMap;}((_a=Symbol.toStringTag,Symbol.iterator));exports.LinkedMap=LinkedMap;var LRUCache=/*#__PURE__*/function(_LinkedMap){_inherits(LRUCache,_LinkedMap);var _super26=_createSuper(LRUCache);function LRUCache(limit){var _this24;var ratio=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;_classCallCheck(this,LRUCache);_this24=_super26.call(this);_this24._limit=limit;_this24._ratio=Math.min(Math.max(0,ratio),1);return _this24;}_createClass(LRUCache,[{key:"limit",get:function get(){return this._limit;},set:function set(limit){this._limit=limit;this.checkTrim();}},{key:"ratio",get:function get(){return this._ratio;},set:function set(ratio){this._ratio=Math.min(Math.max(0,ratio),1);this.checkTrim();}},{key:"get",value:function get(key){var touch=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Touch.AsNew;return _get2(_getPrototypeOf(LRUCache.prototype),"get",this).call(this,key,touch);}},{key:"peek",value:function peek(key){return _get2(_getPrototypeOf(LRUCache.prototype),"get",this).call(this,key,Touch.None);}},{key:"set",value:function set(key,value){_get2(_getPrototypeOf(LRUCache.prototype),"set",this).call(this,key,value,Touch.Last);this.checkTrim();return this;}},{key:"checkTrim",value:function checkTrim(){if(this.size>this._limit){this.trimOld(Math.round(this._limit*this._ratio));}}}]);return LRUCache;}(LinkedMap);exports.LRUCache=LRUCache;}});// client/node_modules/vscode-jsonrpc/lib/common/events.js
var require_events=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/events.js":function clientNode_modulesVscodeJsonrpcLibCommonEventsJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Emitter=exports.Event=void 0;var ral_1=require_ral();var Event;(function(Event2){var _disposable={dispose:function dispose(){}};Event2.None=function(){return _disposable;};})(Event=exports.Event||(exports.Event={}));var CallbackList=/*#__PURE__*/function(){function CallbackList(){_classCallCheck(this,CallbackList);}_createClass(CallbackList,[{key:"add",value:function add(callback){var _this25=this;var context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var bucket=arguments.length>2?arguments[2]:undefined;if(!this._callbacks){this._callbacks=[];this._contexts=[];}this._callbacks.push(callback);this._contexts.push(context);if(Array.isArray(bucket)){bucket.push({dispose:function dispose(){return _this25.remove(callback,context);}});}}},{key:"remove",value:function remove(callback){var context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!this._callbacks){return;}var foundCallbackWithDifferentContext=false;for(var i=0,len=this._callbacks.length;i<len;i++){if(this._callbacks[i]===callback){if(this._contexts[i]===context){this._callbacks.splice(i,1);this._contexts.splice(i,1);return;}else{foundCallbackWithDifferentContext=true;}}}if(foundCallbackWithDifferentContext){throw new Error("When adding a listener with a context, you should remove it with the same context");}}},{key:"invoke",value:function invoke(){if(!this._callbacks){return[];}var ret=[],callbacks=this._callbacks.slice(0),contexts=this._contexts.slice(0);for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5];}for(var i=0,len=callbacks.length;i<len;i++){try{ret.push(callbacks[i].apply(contexts[i],args));}catch(e){(0,ral_1.default)().console.error(e);}}return ret;}},{key:"isEmpty",value:function isEmpty(){return!this._callbacks||this._callbacks.length===0;}},{key:"dispose",value:function dispose(){this._callbacks=void 0;this._contexts=void 0;}}]);return CallbackList;}();var Emitter=/*#__PURE__*/function(){function Emitter(_options){_classCallCheck(this,Emitter);this._options=_options;}_createClass(Emitter,[{key:"event",get:function get(){var _this26=this;if(!this._event){this._event=function(listener,thisArgs,disposables){if(!_this26._callbacks){_this26._callbacks=new CallbackList();}if(_this26._options&&_this26._options.onFirstListenerAdd&&_this26._callbacks.isEmpty()){_this26._options.onFirstListenerAdd(_this26);}_this26._callbacks.add(listener,thisArgs);var result={dispose:function dispose(){if(!_this26._callbacks){return;}_this26._callbacks.remove(listener,thisArgs);result.dispose=Emitter._noop;if(_this26._options&&_this26._options.onLastListenerRemove&&_this26._callbacks.isEmpty()){_this26._options.onLastListenerRemove(_this26);}}};if(Array.isArray(disposables)){disposables.push(result);}return result;};}return this._event;}},{key:"fire",value:function fire(event){if(this._callbacks){this._callbacks.invoke.call(this._callbacks,event);}}},{key:"dispose",value:function dispose(){if(this._callbacks){this._callbacks.dispose();this._callbacks=void 0;}}}]);return Emitter;}();exports.Emitter=Emitter;Emitter._noop=function(){};}});// client/node_modules/vscode-jsonrpc/lib/common/cancellation.js
var require_cancellation=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/cancellation.js":function clientNode_modulesVscodeJsonrpcLibCommonCancellationJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CancellationTokenSource=exports.CancellationToken=void 0;var ral_1=require_ral();var Is=require_is2();var events_1=require_events();var CancellationToken;(function(CancellationToken2){CancellationToken2.None=Object.freeze({isCancellationRequested:false,onCancellationRequested:events_1.Event.None});CancellationToken2.Cancelled=Object.freeze({isCancellationRequested:true,onCancellationRequested:events_1.Event.None});function is(value){var candidate=value;return candidate&&(candidate===CancellationToken2.None||candidate===CancellationToken2.Cancelled||Is.boolean(candidate.isCancellationRequested)&&!!candidate.onCancellationRequested);}CancellationToken2.is=is;})(CancellationToken=exports.CancellationToken||(exports.CancellationToken={}));var shortcutEvent=Object.freeze(function(callback,context){var handle=(0,ral_1.default)().timer.setTimeout(callback.bind(context),0);return{dispose:function dispose(){handle.dispose();}};});var MutableToken=/*#__PURE__*/function(){function MutableToken(){_classCallCheck(this,MutableToken);this._isCancelled=false;}_createClass(MutableToken,[{key:"cancel",value:function cancel(){if(!this._isCancelled){this._isCancelled=true;if(this._emitter){this._emitter.fire(void 0);this.dispose();}}}},{key:"isCancellationRequested",get:function get(){return this._isCancelled;}},{key:"onCancellationRequested",get:function get(){if(this._isCancelled){return shortcutEvent;}if(!this._emitter){this._emitter=new events_1.Emitter();}return this._emitter.event;}},{key:"dispose",value:function dispose(){if(this._emitter){this._emitter.dispose();this._emitter=void 0;}}}]);return MutableToken;}();var CancellationTokenSource=/*#__PURE__*/function(){function CancellationTokenSource(){_classCallCheck(this,CancellationTokenSource);}_createClass(CancellationTokenSource,[{key:"token",get:function get(){if(!this._token){this._token=new MutableToken();}return this._token;}},{key:"cancel",value:function cancel(){if(!this._token){this._token=CancellationToken.Cancelled;}else{this._token.cancel();}}},{key:"dispose",value:function dispose(){if(!this._token){this._token=CancellationToken.None;}else if(this._token instanceof MutableToken){this._token.dispose();}}}]);return CancellationTokenSource;}();exports.CancellationTokenSource=CancellationTokenSource;}});// client/node_modules/vscode-jsonrpc/lib/common/messageReader.js
var require_messageReader=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/messageReader.js":function clientNode_modulesVscodeJsonrpcLibCommonMessageReaderJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReadableStreamMessageReader=exports.AbstractMessageReader=exports.MessageReader=void 0;var ral_1=require_ral();var Is=require_is2();var events_1=require_events();var MessageReader;(function(MessageReader2){function is(value){var candidate=value;return candidate&&Is.func(candidate.listen)&&Is.func(candidate.dispose)&&Is.func(candidate.onError)&&Is.func(candidate.onClose)&&Is.func(candidate.onPartialMessage);}MessageReader2.is=is;})(MessageReader=exports.MessageReader||(exports.MessageReader={}));var AbstractMessageReader=/*#__PURE__*/function(){function AbstractMessageReader(){_classCallCheck(this,AbstractMessageReader);this.errorEmitter=new events_1.Emitter();this.closeEmitter=new events_1.Emitter();this.partialMessageEmitter=new events_1.Emitter();}_createClass(AbstractMessageReader,[{key:"dispose",value:function dispose(){this.errorEmitter.dispose();this.closeEmitter.dispose();}},{key:"onError",get:function get(){return this.errorEmitter.event;}},{key:"fireError",value:function fireError(error){this.errorEmitter.fire(this.asError(error));}},{key:"onClose",get:function get(){return this.closeEmitter.event;}},{key:"fireClose",value:function fireClose(){this.closeEmitter.fire(void 0);}},{key:"onPartialMessage",get:function get(){return this.partialMessageEmitter.event;}},{key:"firePartialMessage",value:function firePartialMessage(info){this.partialMessageEmitter.fire(info);}},{key:"asError",value:function asError(error){if(error instanceof Error){return error;}else{return new Error("Reader received error. Reason: ".concat(Is.string(error.message)?error.message:"unknown"));}}}]);return AbstractMessageReader;}();exports.AbstractMessageReader=AbstractMessageReader;var ResolvedMessageReaderOptions;(function(ResolvedMessageReaderOptions2){function fromOptions(options){var charset;var result;var contentDecoder;var contentDecoders=new Map();var contentTypeDecoder;var contentTypeDecoders=new Map();if(options===void 0||typeof options==="string"){charset=options!==null&&options!==void 0?options:"utf-8";}else{var _options$charset;charset=(_options$charset=options.charset)!==null&&_options$charset!==void 0?_options$charset:"utf-8";if(options.contentDecoder!==void 0){contentDecoder=options.contentDecoder;contentDecoders.set(contentDecoder.name,contentDecoder);}if(options.contentDecoders!==void 0){var _iterator15=_createForOfIteratorHelper(options.contentDecoders),_step12;try{for(_iterator15.s();!(_step12=_iterator15.n()).done;){var decoder=_step12.value;contentDecoders.set(decoder.name,decoder);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}}if(options.contentTypeDecoder!==void 0){contentTypeDecoder=options.contentTypeDecoder;contentTypeDecoders.set(contentTypeDecoder.name,contentTypeDecoder);}if(options.contentTypeDecoders!==void 0){var _iterator16=_createForOfIteratorHelper(options.contentTypeDecoders),_step13;try{for(_iterator16.s();!(_step13=_iterator16.n()).done;){var _decoder=_step13.value;contentTypeDecoders.set(_decoder.name,_decoder);}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}}}if(contentTypeDecoder===void 0){contentTypeDecoder=(0,ral_1.default)().applicationJson.decoder;contentTypeDecoders.set(contentTypeDecoder.name,contentTypeDecoder);}return{charset:charset,contentDecoder:contentDecoder,contentDecoders:contentDecoders,contentTypeDecoder:contentTypeDecoder,contentTypeDecoders:contentTypeDecoders};}ResolvedMessageReaderOptions2.fromOptions=fromOptions;})(ResolvedMessageReaderOptions||(ResolvedMessageReaderOptions={}));var ReadableStreamMessageReader=/*#__PURE__*/function(_AbstractMessageReade){_inherits(ReadableStreamMessageReader,_AbstractMessageReade);var _super27=_createSuper(ReadableStreamMessageReader);function ReadableStreamMessageReader(readable,options){var _this27;_classCallCheck(this,ReadableStreamMessageReader);_this27=_super27.call(this);_this27.readable=readable;_this27.options=ResolvedMessageReaderOptions.fromOptions(options);_this27.buffer=(0,ral_1.default)().messageBuffer.create(_this27.options.charset);_this27._partialMessageTimeout=1e4;_this27.nextMessageLength=-1;_this27.messageToken=0;return _this27;}_createClass(ReadableStreamMessageReader,[{key:"partialMessageTimeout",get:function get(){return this._partialMessageTimeout;},set:function set(timeout){this._partialMessageTimeout=timeout;}},{key:"listen",value:function listen(callback){var _this28=this;this.nextMessageLength=-1;this.messageToken=0;this.partialMessageTimer=void 0;this.callback=callback;var result=this.readable.onData(function(data){_this28.onData(data);});this.readable.onError(function(error){return _this28.fireError(error);});this.readable.onClose(function(){return _this28.fireClose();});return result;}},{key:"onData",value:function onData(data){var _this29=this;this.buffer.append(data);while(true){if(this.nextMessageLength===-1){var headers=this.buffer.tryReadHeaders();if(!headers){return;}var contentLength=headers.get("Content-Length");if(!contentLength){throw new Error("Header must provide a Content-Length property.");}var length=parseInt(contentLength);if(isNaN(length)){throw new Error("Content-Length value must be a number.");}this.nextMessageLength=length;}var body=this.buffer.tryReadBody(this.nextMessageLength);if(body===void 0){this.setPartialMessageTimer();return;}this.clearPartialMessageTimer();this.nextMessageLength=-1;var p=void 0;if(this.options.contentDecoder!==void 0){p=this.options.contentDecoder.decode(body);}else{p=Promise.resolve(body);}p.then(function(value){_this29.options.contentTypeDecoder.decode(value,_this29.options).then(function(msg){_this29.callback(msg);},function(error){_this29.fireError(error);});},function(error){_this29.fireError(error);});}}},{key:"clearPartialMessageTimer",value:function clearPartialMessageTimer(){if(this.partialMessageTimer){this.partialMessageTimer.dispose();this.partialMessageTimer=void 0;}}},{key:"setPartialMessageTimer",value:function setPartialMessageTimer(){var _this30=this;this.clearPartialMessageTimer();if(this._partialMessageTimeout<=0){return;}this.partialMessageTimer=(0,ral_1.default)().timer.setTimeout(function(token,timeout){_this30.partialMessageTimer=void 0;if(token===_this30.messageToken){_this30.firePartialMessage({messageToken:token,waitingTime:timeout});_this30.setPartialMessageTimer();}},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout);}}]);return ReadableStreamMessageReader;}(AbstractMessageReader);exports.ReadableStreamMessageReader=ReadableStreamMessageReader;}});// client/node_modules/vscode-jsonrpc/lib/common/semaphore.js
var require_semaphore=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/semaphore.js":function clientNode_modulesVscodeJsonrpcLibCommonSemaphoreJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Semaphore=void 0;var ral_1=require_ral();var Semaphore=/*#__PURE__*/function(){function Semaphore(){var capacity=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;_classCallCheck(this,Semaphore);if(capacity<=0){throw new Error("Capacity must be greater than 0");}this._capacity=capacity;this._active=0;this._waiting=[];}_createClass(Semaphore,[{key:"lock",value:function lock(thunk){var _this31=this;return new Promise(function(resolve,reject){_this31._waiting.push({thunk:thunk,resolve:resolve,reject:reject});_this31.runNext();});}},{key:"active",get:function get(){return this._active;}},{key:"runNext",value:function runNext(){var _this32=this;if(this._waiting.length===0||this._active===this._capacity){return;}(0,ral_1.default)().timer.setImmediate(function(){return _this32.doRunNext();});}},{key:"doRunNext",value:function doRunNext(){var _this33=this;if(this._waiting.length===0||this._active===this._capacity){return;}var next=this._waiting.shift();this._active++;if(this._active>this._capacity){throw new Error("To many thunks active");}try{var result=next.thunk();if(result instanceof Promise){result.then(function(value){_this33._active--;next.resolve(value);_this33.runNext();},function(err){_this33._active--;next.reject(err);_this33.runNext();});}else{this._active--;next.resolve(result);this.runNext();}}catch(err){this._active--;next.reject(err);this.runNext();}}}]);return Semaphore;}();exports.Semaphore=Semaphore;}});// client/node_modules/vscode-jsonrpc/lib/common/messageWriter.js
var require_messageWriter=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/messageWriter.js":function clientNode_modulesVscodeJsonrpcLibCommonMessageWriterJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WriteableStreamMessageWriter=exports.AbstractMessageWriter=exports.MessageWriter=void 0;var ral_1=require_ral();var Is=require_is2();var semaphore_1=require_semaphore();var events_1=require_events();var ContentLength="Content-Length: ";var CRLF="\r\n";var MessageWriter;(function(MessageWriter2){function is(value){var candidate=value;return candidate&&Is.func(candidate.dispose)&&Is.func(candidate.onClose)&&Is.func(candidate.onError)&&Is.func(candidate.write);}MessageWriter2.is=is;})(MessageWriter=exports.MessageWriter||(exports.MessageWriter={}));var AbstractMessageWriter=/*#__PURE__*/function(){function AbstractMessageWriter(){_classCallCheck(this,AbstractMessageWriter);this.errorEmitter=new events_1.Emitter();this.closeEmitter=new events_1.Emitter();}_createClass(AbstractMessageWriter,[{key:"dispose",value:function dispose(){this.errorEmitter.dispose();this.closeEmitter.dispose();}},{key:"onError",get:function get(){return this.errorEmitter.event;}},{key:"fireError",value:function fireError(error,message,count){this.errorEmitter.fire([this.asError(error),message,count]);}},{key:"onClose",get:function get(){return this.closeEmitter.event;}},{key:"fireClose",value:function fireClose(){this.closeEmitter.fire(void 0);}},{key:"asError",value:function asError(error){if(error instanceof Error){return error;}else{return new Error("Writer received error. Reason: ".concat(Is.string(error.message)?error.message:"unknown"));}}}]);return AbstractMessageWriter;}();exports.AbstractMessageWriter=AbstractMessageWriter;var ResolvedMessageWriterOptions;(function(ResolvedMessageWriterOptions2){function fromOptions(options){if(options===void 0||typeof options==="string"){return{charset:options!==null&&options!==void 0?options:"utf-8",contentTypeEncoder:(0,ral_1.default)().applicationJson.encoder};}else{var _options$charset2,_options$contentTypeE;return{charset:(_options$charset2=options.charset)!==null&&_options$charset2!==void 0?_options$charset2:"utf-8",contentEncoder:options.contentEncoder,contentTypeEncoder:(_options$contentTypeE=options.contentTypeEncoder)!==null&&_options$contentTypeE!==void 0?_options$contentTypeE:(0,ral_1.default)().applicationJson.encoder};}}ResolvedMessageWriterOptions2.fromOptions=fromOptions;})(ResolvedMessageWriterOptions||(ResolvedMessageWriterOptions={}));var WriteableStreamMessageWriter=/*#__PURE__*/function(_AbstractMessageWrite){_inherits(WriteableStreamMessageWriter,_AbstractMessageWrite);var _super28=_createSuper(WriteableStreamMessageWriter);function WriteableStreamMessageWriter(writable,options){var _this34;_classCallCheck(this,WriteableStreamMessageWriter);_this34=_super28.call(this);_this34.writable=writable;_this34.options=ResolvedMessageWriterOptions.fromOptions(options);_this34.errorCount=0;_this34.writeSemaphore=new semaphore_1.Semaphore(1);_this34.writable.onError(function(error){return _this34.fireError(error);});_this34.writable.onClose(function(){return _this34.fireClose();});return _this34;}_createClass(WriteableStreamMessageWriter,[{key:"write",value:function(){var _write=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee3(msg){var _this35=this;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",this.writeSemaphore.lock(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(){var payload;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_this35.options.contentTypeEncoder.encode(msg,_this35.options).then(function(buffer){if(_this35.options.contentEncoder!==void 0){return _this35.options.contentEncoder.encode(buffer);}else{return buffer;}});return _context2.abrupt("return",payload.then(function(buffer){var headers=[];headers.push(ContentLength,buffer.byteLength.toString(),CRLF);headers.push(CRLF);return _this35.doWrite(msg,headers,buffer);},function(error){_this35.fireError(error);throw error;}));case 2:case"end":return _context2.stop();}}},_callee2);}))));case 1:case"end":return _context3.stop();}}},_callee3,this);}));function write(_x7){return _write.apply(this,arguments);}return write;}()},{key:"doWrite",value:function(){var _doWrite=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee4(msg,headers,data){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return this.writable.write(headers.join(""),"ascii");case 3:return _context4.abrupt("return",this.writable.write(data));case 6:_context4.prev=6;_context4.t0=_context4["catch"](0);this.handleError(_context4.t0,msg);return _context4.abrupt("return",Promise.reject(_context4.t0));case 10:case"end":return _context4.stop();}}},_callee4,this,[[0,6]]);}));function doWrite(_x8,_x9,_x10){return _doWrite.apply(this,arguments);}return doWrite;}()},{key:"handleError",value:function handleError(error,msg){this.errorCount++;this.fireError(error,msg,this.errorCount);}},{key:"end",value:function end(){this.writable.end();}}]);return WriteableStreamMessageWriter;}(AbstractMessageWriter);exports.WriteableStreamMessageWriter=WriteableStreamMessageWriter;}});// client/node_modules/vscode-jsonrpc/lib/common/connection.js
var require_connection=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/connection.js":function clientNode_modulesVscodeJsonrpcLibCommonConnectionJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMessageConnection=exports.ConnectionOptions=exports.CancellationStrategy=exports.CancellationSenderStrategy=exports.CancellationReceiverStrategy=exports.ConnectionStrategy=exports.ConnectionError=exports.ConnectionErrors=exports.LogTraceNotification=exports.SetTraceNotification=exports.TraceFormat=exports.Trace=exports.NullLogger=exports.ProgressType=exports.ProgressToken=void 0;var ral_1=require_ral();var Is=require_is2();var messages_1=require_messages();var linkedMap_1=require_linkedMap();var events_1=require_events();var cancellation_1=require_cancellation();var CancelNotification;(function(CancelNotification2){CancelNotification2.type=new messages_1.NotificationType("$/cancelRequest");})(CancelNotification||(CancelNotification={}));var ProgressToken;(function(ProgressToken2){function is(value){return typeof value==="string"||typeof value==="number";}ProgressToken2.is=is;})(ProgressToken=exports.ProgressToken||(exports.ProgressToken={}));var ProgressNotification;(function(ProgressNotification2){ProgressNotification2.type=new messages_1.NotificationType("$/progress");})(ProgressNotification||(ProgressNotification={}));var ProgressType=/*#__PURE__*/_createClass(function ProgressType(){_classCallCheck(this,ProgressType);});exports.ProgressType=ProgressType;var StarRequestHandler;(function(StarRequestHandler2){function is(value){return Is.func(value);}StarRequestHandler2.is=is;})(StarRequestHandler||(StarRequestHandler={}));exports.NullLogger=Object.freeze({error:function error(){},warn:function warn(){},info:function info(){},log:function log(){}});var Trace;(function(Trace2){Trace2[Trace2["Off"]=0]="Off";Trace2[Trace2["Messages"]=1]="Messages";Trace2[Trace2["Compact"]=2]="Compact";Trace2[Trace2["Verbose"]=3]="Verbose";})(Trace=exports.Trace||(exports.Trace={}));(function(Trace2){function fromString(value){if(!Is.string(value)){return Trace2.Off;}value=value.toLowerCase();switch(value){case"off":return Trace2.Off;case"messages":return Trace2.Messages;case"compact":return Trace2.Compact;case"verbose":return Trace2.Verbose;default:return Trace2.Off;}}Trace2.fromString=fromString;function toString(value){switch(value){case Trace2.Off:return"off";case Trace2.Messages:return"messages";case Trace2.Compact:return"compact";case Trace2.Verbose:return"verbose";default:return"off";}}Trace2.toString=toString;})(Trace=exports.Trace||(exports.Trace={}));var TraceFormat;(function(TraceFormat2){TraceFormat2["Text"]="text";TraceFormat2["JSON"]="json";})(TraceFormat=exports.TraceFormat||(exports.TraceFormat={}));(function(TraceFormat2){function fromString(value){if(!Is.string(value)){return TraceFormat2.Text;}value=value.toLowerCase();if(value==="json"){return TraceFormat2.JSON;}else{return TraceFormat2.Text;}}TraceFormat2.fromString=fromString;})(TraceFormat=exports.TraceFormat||(exports.TraceFormat={}));var SetTraceNotification;(function(SetTraceNotification2){SetTraceNotification2.type=new messages_1.NotificationType("$/setTrace");})(SetTraceNotification=exports.SetTraceNotification||(exports.SetTraceNotification={}));var LogTraceNotification;(function(LogTraceNotification2){LogTraceNotification2.type=new messages_1.NotificationType("$/logTrace");})(LogTraceNotification=exports.LogTraceNotification||(exports.LogTraceNotification={}));var ConnectionErrors;(function(ConnectionErrors2){ConnectionErrors2[ConnectionErrors2["Closed"]=1]="Closed";ConnectionErrors2[ConnectionErrors2["Disposed"]=2]="Disposed";ConnectionErrors2[ConnectionErrors2["AlreadyListening"]=3]="AlreadyListening";})(ConnectionErrors=exports.ConnectionErrors||(exports.ConnectionErrors={}));var ConnectionError=/*#__PURE__*/function(_Error2){_inherits(ConnectionError,_Error2);var _super29=_createSuper(ConnectionError);function ConnectionError(code,message){var _this36;_classCallCheck(this,ConnectionError);_this36=_super29.call(this,message);_this36.code=code;Object.setPrototypeOf(_assertThisInitialized(_this36),ConnectionError.prototype);return _this36;}return _createClass(ConnectionError);}(/*#__PURE__*/_wrapNativeSuper(Error));exports.ConnectionError=ConnectionError;var ConnectionStrategy;(function(ConnectionStrategy2){function is(value){var candidate=value;return candidate&&Is.func(candidate.cancelUndispatched);}ConnectionStrategy2.is=is;})(ConnectionStrategy=exports.ConnectionStrategy||(exports.ConnectionStrategy={}));var CancellationReceiverStrategy;(function(CancellationReceiverStrategy2){CancellationReceiverStrategy2.Message=Object.freeze({createCancellationTokenSource:function createCancellationTokenSource(_){return new cancellation_1.CancellationTokenSource();}});function is(value){var candidate=value;return candidate&&Is.func(candidate.createCancellationTokenSource);}CancellationReceiverStrategy2.is=is;})(CancellationReceiverStrategy=exports.CancellationReceiverStrategy||(exports.CancellationReceiverStrategy={}));var CancellationSenderStrategy;(function(CancellationSenderStrategy2){CancellationSenderStrategy2.Message=Object.freeze({sendCancellation:function sendCancellation(conn,id){return conn.sendNotification(CancelNotification.type,{id:id});},cleanup:function cleanup(_){}});function is(value){var candidate=value;return candidate&&Is.func(candidate.sendCancellation)&&Is.func(candidate.cleanup);}CancellationSenderStrategy2.is=is;})(CancellationSenderStrategy=exports.CancellationSenderStrategy||(exports.CancellationSenderStrategy={}));var CancellationStrategy;(function(CancellationStrategy2){CancellationStrategy2.Message=Object.freeze({receiver:CancellationReceiverStrategy.Message,sender:CancellationSenderStrategy.Message});function is(value){var candidate=value;return candidate&&CancellationReceiverStrategy.is(candidate.receiver)&&CancellationSenderStrategy.is(candidate.sender);}CancellationStrategy2.is=is;})(CancellationStrategy=exports.CancellationStrategy||(exports.CancellationStrategy={}));var ConnectionOptions;(function(ConnectionOptions2){function is(value){var candidate=value;return candidate&&(CancellationStrategy.is(candidate.cancellationStrategy)||ConnectionStrategy.is(candidate.connectionStrategy));}ConnectionOptions2.is=is;})(ConnectionOptions=exports.ConnectionOptions||(exports.ConnectionOptions={}));var ConnectionState;(function(ConnectionState2){ConnectionState2[ConnectionState2["New"]=1]="New";ConnectionState2[ConnectionState2["Listening"]=2]="Listening";ConnectionState2[ConnectionState2["Closed"]=3]="Closed";ConnectionState2[ConnectionState2["Disposed"]=4]="Disposed";})(ConnectionState||(ConnectionState={}));function createMessageConnection(messageReader,messageWriter,_logger,options){var logger=_logger!==void 0?_logger:exports.NullLogger;var sequenceNumber=0;var notificationSequenceNumber=0;var unknownResponseSequenceNumber=0;var version="2.0";var starRequestHandler=void 0;var requestHandlers=Object.create(null);var starNotificationHandler=void 0;var notificationHandlers=Object.create(null);var progressHandlers=new Map();var timer;var messageQueue=new linkedMap_1.LinkedMap();var responsePromises=Object.create(null);var knownCanceledRequests=new Set();var requestTokens=Object.create(null);var _trace=Trace.Off;var traceFormat=TraceFormat.Text;var tracer;var state=ConnectionState.New;var errorEmitter=new events_1.Emitter();var closeEmitter=new events_1.Emitter();var unhandledNotificationEmitter=new events_1.Emitter();var unhandledProgressEmitter=new events_1.Emitter();var disposeEmitter=new events_1.Emitter();var cancellationStrategy=options&&options.cancellationStrategy?options.cancellationStrategy:CancellationStrategy.Message;function createRequestQueueKey(id){if(id===null){throw new Error("Can't send requests with id null since the response can't be correlated.");}return"req-"+id.toString();}function createResponseQueueKey(id){if(id===null){return"res-unknown-"+(++unknownResponseSequenceNumber).toString();}else{return"res-"+id.toString();}}function createNotificationQueueKey(){return"not-"+(++notificationSequenceNumber).toString();}function addMessageToQueue(queue,message){if(messages_1.Message.isRequest(message)){queue.set(createRequestQueueKey(message.id),message);}else if(messages_1.Message.isResponse(message)){queue.set(createResponseQueueKey(message.id),message);}else{queue.set(createNotificationQueueKey(),message);}}function cancelUndispatched(_message){return void 0;}function isListening(){return state===ConnectionState.Listening;}function isClosed(){return state===ConnectionState.Closed;}function isDisposed(){return state===ConnectionState.Disposed;}function closeHandler(){if(state===ConnectionState.New||state===ConnectionState.Listening){state=ConnectionState.Closed;closeEmitter.fire(void 0);}}function readErrorHandler(error){errorEmitter.fire([error,void 0,void 0]);}function writeErrorHandler(data){errorEmitter.fire(data);}messageReader.onClose(closeHandler);messageReader.onError(readErrorHandler);messageWriter.onClose(closeHandler);messageWriter.onError(writeErrorHandler);function triggerMessageQueue(){if(timer||messageQueue.size===0){return;}timer=(0,ral_1.default)().timer.setImmediate(function(){timer=void 0;processMessageQueue();});}function processMessageQueue(){if(messageQueue.size===0){return;}var message=messageQueue.shift();try{if(messages_1.Message.isRequest(message)){handleRequest(message);}else if(messages_1.Message.isNotification(message)){handleNotification(message);}else if(messages_1.Message.isResponse(message)){handleResponse(message);}else{handleInvalidMessage(message);}}finally{triggerMessageQueue();}}var callback=function callback(message){try{if(messages_1.Message.isNotification(message)&&message.method===CancelNotification.type.method){var cancelId=message.params.id;var key=createRequestQueueKey(cancelId);var toCancel=messageQueue.get(key);if(messages_1.Message.isRequest(toCancel)){var strategy=options===null||options===void 0?void 0:options.connectionStrategy;var response=strategy&&strategy.cancelUndispatched?strategy.cancelUndispatched(toCancel,cancelUndispatched):cancelUndispatched(toCancel);if(response&&(response.error!==void 0||response.result!==void 0)){messageQueue.delete(key);response.id=toCancel.id;traceSendingResponse(response,message.method,Date.now());messageWriter.write(response).catch(function(){return logger.error("Sending response for canceled message failed.");});return;}}var tokenKey=String(cancelId);var cancellationToken=requestTokens[tokenKey];if(cancellationToken!==void 0){cancellationToken.cancel();traceReceivedNotification(message);return;}else{knownCanceledRequests.add(cancelId);}}addMessageToQueue(messageQueue,message);}finally{triggerMessageQueue();}};function handleRequest(requestMessage){if(isDisposed()){return;}function reply(resultOrError,method,startTime2){var message={jsonrpc:version,id:requestMessage.id};if(resultOrError instanceof messages_1.ResponseError){message.error=resultOrError.toJson();}else{message.result=resultOrError===void 0?null:resultOrError;}traceSendingResponse(message,method,startTime2);messageWriter.write(message).catch(function(){return logger.error("Sending response failed.");});}function replyError(error,method,startTime2){var message={jsonrpc:version,id:requestMessage.id,error:error.toJson()};traceSendingResponse(message,method,startTime2);messageWriter.write(message).catch(function(){return logger.error("Sending response failed.");});}function replySuccess(result,method,startTime2){if(result===void 0){result=null;}var message={jsonrpc:version,id:requestMessage.id,result:result};traceSendingResponse(message,method,startTime2);messageWriter.write(message).catch(function(){return logger.error("Sending response failed.");});}traceReceivedRequest(requestMessage);var element=requestHandlers[requestMessage.method];var type;var requestHandler;if(element){type=element.type;requestHandler=element.handler;}var startTime=Date.now();if(requestHandler||starRequestHandler){var tokenKey=String(requestMessage.id);var cancellationSource=cancellationStrategy.receiver.createCancellationTokenSource(tokenKey);if(requestMessage.id!==null&&knownCanceledRequests.has(requestMessage.id)){cancellationSource.cancel();}requestTokens[tokenKey]=cancellationSource;try{var handlerResult;if(requestHandler){if(requestMessage.params===void 0){if(type!==void 0&&type.numberOfParams!==0){replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams,"Request ".concat(requestMessage.method," defines ").concat(type.numberOfParams," params but received none.")),requestMessage.method,startTime);return;}handlerResult=requestHandler(cancellationSource.token);}else if(Array.isArray(requestMessage.params)){if(type!==void 0&&type.parameterStructures===messages_1.ParameterStructures.byName){replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams,"Request ".concat(requestMessage.method," defines parameters by name but received parameters by position")),requestMessage.method,startTime);return;}handlerResult=requestHandler.apply(void 0,_toConsumableArray(requestMessage.params).concat([cancellationSource.token]));}else{if(type!==void 0&&type.parameterStructures===messages_1.ParameterStructures.byPosition){replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams,"Request ".concat(requestMessage.method," defines parameters by position but received parameters by name")),requestMessage.method,startTime);return;}handlerResult=requestHandler(requestMessage.params,cancellationSource.token);}}else if(starRequestHandler){handlerResult=starRequestHandler(requestMessage.method,requestMessage.params,cancellationSource.token);}var promise=handlerResult;if(!handlerResult){delete requestTokens[tokenKey];replySuccess(handlerResult,requestMessage.method,startTime);}else if(promise.then){promise.then(function(resultOrError){delete requestTokens[tokenKey];reply(resultOrError,requestMessage.method,startTime);},function(error){delete requestTokens[tokenKey];if(error instanceof messages_1.ResponseError){replyError(error,requestMessage.method,startTime);}else if(error&&Is.string(error.message)){replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,"Request ".concat(requestMessage.method," failed with message: ").concat(error.message)),requestMessage.method,startTime);}else{replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,"Request ".concat(requestMessage.method," failed unexpectedly without providing any details.")),requestMessage.method,startTime);}});}else{delete requestTokens[tokenKey];reply(handlerResult,requestMessage.method,startTime);}}catch(error){delete requestTokens[tokenKey];if(error instanceof messages_1.ResponseError){reply(error,requestMessage.method,startTime);}else if(error&&Is.string(error.message)){replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,"Request ".concat(requestMessage.method," failed with message: ").concat(error.message)),requestMessage.method,startTime);}else{replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,"Request ".concat(requestMessage.method," failed unexpectedly without providing any details.")),requestMessage.method,startTime);}}}else{replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound,"Unhandled method ".concat(requestMessage.method)),requestMessage.method,startTime);}}function handleResponse(responseMessage){if(isDisposed()){return;}if(responseMessage.id===null){if(responseMessage.error){logger.error("Received response message without id: Error is: \n".concat(JSON.stringify(responseMessage.error,void 0,4)));}else{logger.error("Received response message without id. No further error information provided.");}}else{var key=String(responseMessage.id);var responsePromise=responsePromises[key];traceReceivedResponse(responseMessage,responsePromise);if(responsePromise){delete responsePromises[key];try{if(responseMessage.error){var error=responseMessage.error;responsePromise.reject(new messages_1.ResponseError(error.code,error.message,error.data));}else if(responseMessage.result!==void 0){responsePromise.resolve(responseMessage.result);}else{throw new Error("Should never happen.");}}catch(error){if(error.message){logger.error("Response handler '".concat(responsePromise.method,"' failed with message: ").concat(error.message));}else{logger.error("Response handler '".concat(responsePromise.method,"' failed unexpectedly."));}}}}}function handleNotification(message){if(isDisposed()){return;}var type=void 0;var notificationHandler;if(message.method===CancelNotification.type.method){var cancelId=message.params.id;knownCanceledRequests.delete(cancelId);traceReceivedNotification(message);return;}else{var element=notificationHandlers[message.method];if(element){notificationHandler=element.handler;type=element.type;}}if(notificationHandler||starNotificationHandler){try{traceReceivedNotification(message);if(notificationHandler){if(message.params===void 0){if(type!==void 0){if(type.numberOfParams!==0&&type.parameterStructures!==messages_1.ParameterStructures.byName){logger.error("Notification ".concat(message.method," defines ").concat(type.numberOfParams," params but received none."));}}notificationHandler();}else if(Array.isArray(message.params)){var params=message.params;if(message.method===ProgressNotification.type.method&&params.length===2&&ProgressToken.is(params[0])){notificationHandler({token:params[0],value:params[1]});}else{if(type!==void 0){if(type.parameterStructures===messages_1.ParameterStructures.byName){logger.error("Notification ".concat(message.method," defines parameters by name but received parameters by position"));}if(type.numberOfParams!==message.params.length){logger.error("Notification ".concat(message.method," defines ").concat(type.numberOfParams," params but received ").concat(params.length," arguments"));}}notificationHandler.apply(void 0,_toConsumableArray(params));}}else{if(type!==void 0&&type.parameterStructures===messages_1.ParameterStructures.byPosition){logger.error("Notification ".concat(message.method," defines parameters by position but received parameters by name"));}notificationHandler(message.params);}}else if(starNotificationHandler){starNotificationHandler(message.method,message.params);}}catch(error){if(error.message){logger.error("Notification handler '".concat(message.method,"' failed with message: ").concat(error.message));}else{logger.error("Notification handler '".concat(message.method,"' failed unexpectedly."));}}}else{unhandledNotificationEmitter.fire(message);}}function handleInvalidMessage(message){if(!message){logger.error("Received empty message.");return;}logger.error("Received message which is neither a response nor a notification message:\n".concat(JSON.stringify(message,null,4)));var responseMessage=message;if(Is.string(responseMessage.id)||Is.number(responseMessage.id)){var key=String(responseMessage.id);var responseHandler=responsePromises[key];if(responseHandler){responseHandler.reject(new Error("The received response has neither a result nor an error property."));}}}function stringifyTrace(params){if(params===void 0||params===null){return void 0;}switch(_trace){case Trace.Verbose:return JSON.stringify(params,null,4);case Trace.Compact:return JSON.stringify(params);default:return void 0;}}function traceSendingRequest(message){if(_trace===Trace.Off||!tracer){return;}if(traceFormat===TraceFormat.Text){var data=void 0;if((_trace===Trace.Verbose||_trace===Trace.Compact)&&message.params){data="Params: ".concat(stringifyTrace(message.params),"\n\n");}tracer.log("Sending request '".concat(message.method," - (").concat(message.id,")'."),data);}else{logLSPMessage("send-request",message);}}function traceSendingNotification(message){if(_trace===Trace.Off||!tracer){return;}if(traceFormat===TraceFormat.Text){var data=void 0;if(_trace===Trace.Verbose||_trace===Trace.Compact){if(message.params){data="Params: ".concat(stringifyTrace(message.params),"\n\n");}else{data="No parameters provided.\n\n";}}tracer.log("Sending notification '".concat(message.method,"'."),data);}else{logLSPMessage("send-notification",message);}}function traceSendingResponse(message,method,startTime){if(_trace===Trace.Off||!tracer){return;}if(traceFormat===TraceFormat.Text){var data=void 0;if(_trace===Trace.Verbose||_trace===Trace.Compact){if(message.error&&message.error.data){data="Error data: ".concat(stringifyTrace(message.error.data),"\n\n");}else{if(message.result){data="Result: ".concat(stringifyTrace(message.result),"\n\n");}else if(message.error===void 0){data="No result returned.\n\n";}}}tracer.log("Sending response '".concat(method," - (").concat(message.id,")'. Processing request took ").concat(Date.now()-startTime,"ms"),data);}else{logLSPMessage("send-response",message);}}function traceReceivedRequest(message){if(_trace===Trace.Off||!tracer){return;}if(traceFormat===TraceFormat.Text){var data=void 0;if((_trace===Trace.Verbose||_trace===Trace.Compact)&&message.params){data="Params: ".concat(stringifyTrace(message.params),"\n\n");}tracer.log("Received request '".concat(message.method," - (").concat(message.id,")'."),data);}else{logLSPMessage("receive-request",message);}}function traceReceivedNotification(message){if(_trace===Trace.Off||!tracer||message.method===LogTraceNotification.type.method){return;}if(traceFormat===TraceFormat.Text){var data=void 0;if(_trace===Trace.Verbose||_trace===Trace.Compact){if(message.params){data="Params: ".concat(stringifyTrace(message.params),"\n\n");}else{data="No parameters provided.\n\n";}}tracer.log("Received notification '".concat(message.method,"'."),data);}else{logLSPMessage("receive-notification",message);}}function traceReceivedResponse(message,responsePromise){if(_trace===Trace.Off||!tracer){return;}if(traceFormat===TraceFormat.Text){var data=void 0;if(_trace===Trace.Verbose||_trace===Trace.Compact){if(message.error&&message.error.data){data="Error data: ".concat(stringifyTrace(message.error.data),"\n\n");}else{if(message.result){data="Result: ".concat(stringifyTrace(message.result),"\n\n");}else if(message.error===void 0){data="No result returned.\n\n";}}}if(responsePromise){var error=message.error?" Request failed: ".concat(message.error.message," (").concat(message.error.code,")."):"";tracer.log("Received response '".concat(responsePromise.method," - (").concat(message.id,")' in ").concat(Date.now()-responsePromise.timerStart,"ms.").concat(error),data);}else{tracer.log("Received response ".concat(message.id," without active response promise."),data);}}else{logLSPMessage("receive-response",message);}}function logLSPMessage(type,message){if(!tracer||_trace===Trace.Off){return;}var lspMessage={isLSPMessage:true,type:type,message:message,timestamp:Date.now()};tracer.log(lspMessage);}function throwIfClosedOrDisposed(){if(isClosed()){throw new ConnectionError(ConnectionErrors.Closed,"Connection is closed.");}if(isDisposed()){throw new ConnectionError(ConnectionErrors.Disposed,"Connection is disposed.");}}function throwIfListening(){if(isListening()){throw new ConnectionError(ConnectionErrors.AlreadyListening,"Connection is already listening");}}function throwIfNotListening(){if(!isListening()){throw new Error("Call listen() first.");}}function undefinedToNull(param){if(param===void 0){return null;}else{return param;}}function nullToUndefined(param){if(param===null){return void 0;}else{return param;}}function isNamedParam(param){return param!==void 0&&param!==null&&!Array.isArray(param)&&_typeof(param)==="object";}function computeSingleParam(parameterStructures,param){switch(parameterStructures){case messages_1.ParameterStructures.auto:if(isNamedParam(param)){return nullToUndefined(param);}else{return[undefinedToNull(param)];}case messages_1.ParameterStructures.byName:if(!isNamedParam(param)){throw new Error("Received parameters by name but param is not an object literal.");}return nullToUndefined(param);case messages_1.ParameterStructures.byPosition:return[undefinedToNull(param)];default:throw new Error("Unknown parameter structure ".concat(parameterStructures.toString()));}}function computeMessageParams(type,params){var result;var numberOfParams=type.numberOfParams;switch(numberOfParams){case 0:result=void 0;break;case 1:result=computeSingleParam(type.parameterStructures,params[0]);break;default:result=[];for(var i=0;i<params.length&&i<numberOfParams;i++){result.push(undefinedToNull(params[i]));}if(params.length<numberOfParams){for(var _i4=params.length;_i4<numberOfParams;_i4++){result.push(null);}}break;}return result;}var connection={sendNotification:function sendNotification(type){throwIfClosedOrDisposed();var method;var messageParams;for(var _len6=arguments.length,args=new Array(_len6>1?_len6-1:0),_key6=1;_key6<_len6;_key6++){args[_key6-1]=arguments[_key6];}if(Is.string(type)){method=type;var first=args[0];var paramStart=0;var parameterStructures=messages_1.ParameterStructures.auto;if(messages_1.ParameterStructures.is(first)){paramStart=1;parameterStructures=first;}var paramEnd=args.length;var numberOfParams=paramEnd-paramStart;switch(numberOfParams){case 0:messageParams=void 0;break;case 1:messageParams=computeSingleParam(parameterStructures,args[paramStart]);break;default:if(parameterStructures===messages_1.ParameterStructures.byName){throw new Error("Received ".concat(numberOfParams," parameters for 'by Name' notification parameter structure."));}messageParams=args.slice(paramStart,paramEnd).map(function(value){return undefinedToNull(value);});break;}}else{var params=args;method=type.method;messageParams=computeMessageParams(type,params);}var notificationMessage={jsonrpc:version,method:method,params:messageParams};traceSendingNotification(notificationMessage);return messageWriter.write(notificationMessage).catch(function(){return logger.error("Sending notification failed.");});},onNotification:function onNotification(type,handler){throwIfClosedOrDisposed();var method;if(Is.func(type)){starNotificationHandler=type;}else if(handler){if(Is.string(type)){method=type;notificationHandlers[type]={type:void 0,handler:handler};}else{method=type.method;notificationHandlers[type.method]={type:type,handler:handler};}}return{dispose:function dispose(){if(method!==void 0){delete notificationHandlers[method];}else{starNotificationHandler=void 0;}}};},onProgress:function onProgress(_type,token,handler){if(progressHandlers.has(token)){throw new Error("Progress handler for token ".concat(token," already registered"));}progressHandlers.set(token,handler);return{dispose:function dispose(){progressHandlers.delete(token);}};},sendProgress:function sendProgress(_type,token,value){return connection.sendNotification(ProgressNotification.type,{token:token,value:value});},onUnhandledProgress:unhandledProgressEmitter.event,sendRequest:function sendRequest(type){throwIfClosedOrDisposed();throwIfNotListening();var method;var messageParams;var token=void 0;for(var _len7=arguments.length,args=new Array(_len7>1?_len7-1:0),_key7=1;_key7<_len7;_key7++){args[_key7-1]=arguments[_key7];}if(Is.string(type)){method=type;var first=args[0];var last=args[args.length-1];var paramStart=0;var parameterStructures=messages_1.ParameterStructures.auto;if(messages_1.ParameterStructures.is(first)){paramStart=1;parameterStructures=first;}var paramEnd=args.length;if(cancellation_1.CancellationToken.is(last)){paramEnd=paramEnd-1;token=last;}var numberOfParams=paramEnd-paramStart;switch(numberOfParams){case 0:messageParams=void 0;break;case 1:messageParams=computeSingleParam(parameterStructures,args[paramStart]);break;default:if(parameterStructures===messages_1.ParameterStructures.byName){throw new Error("Received ".concat(numberOfParams," parameters for 'by Name' request parameter structure."));}messageParams=args.slice(paramStart,paramEnd).map(function(value){return undefinedToNull(value);});break;}}else{var params=args;method=type.method;messageParams=computeMessageParams(type,params);var _numberOfParams=type.numberOfParams;token=cancellation_1.CancellationToken.is(params[_numberOfParams])?params[_numberOfParams]:void 0;}var id=sequenceNumber++;var disposable;if(token){disposable=token.onCancellationRequested(function(){var p=cancellationStrategy.sender.sendCancellation(connection,id);if(p===void 0){logger.log("Received no promise from cancellation strategy when cancelling id ".concat(id));return Promise.resolve();}else{return p.catch(function(){logger.log("Sending cancellation messages for id ".concat(id," failed"));});}});}var result=new Promise(function(resolve,reject){var requestMessage={jsonrpc:version,id:id,method:method,params:messageParams};var resolveWithCleanup=function resolveWithCleanup(r){var _disposable2;resolve(r);cancellationStrategy.sender.cleanup(id);(_disposable2=disposable)===null||_disposable2===void 0?void 0:_disposable2.dispose();};var rejectWithCleanup=function rejectWithCleanup(r){var _disposable3;reject(r);cancellationStrategy.sender.cleanup(id);(_disposable3=disposable)===null||_disposable3===void 0?void 0:_disposable3.dispose();};var responsePromise={method:method,timerStart:Date.now(),resolve:resolveWithCleanup,reject:rejectWithCleanup};traceSendingRequest(requestMessage);try{messageWriter.write(requestMessage).catch(function(){return logger.error("Sending request failed.");});}catch(e){responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason"));responsePromise=null;}if(responsePromise){responsePromises[String(id)]=responsePromise;}});return result;},onRequest:function onRequest(type,handler){throwIfClosedOrDisposed();var method=null;if(StarRequestHandler.is(type)){method=void 0;starRequestHandler=type;}else if(Is.string(type)){method=null;if(handler!==void 0){method=type;requestHandlers[type]={handler:handler,type:void 0};}}else{if(handler!==void 0){method=type.method;requestHandlers[type.method]={type:type,handler:handler};}}return{dispose:function dispose(){if(method===null){return;}if(method!==void 0){delete requestHandlers[method];}else{starRequestHandler=void 0;}}};},trace:function trace(_value,_tracer,sendNotificationOrTraceOptions){var _sendNotification=false;var _traceFormat=TraceFormat.Text;if(sendNotificationOrTraceOptions!==void 0){if(Is.boolean(sendNotificationOrTraceOptions)){_sendNotification=sendNotificationOrTraceOptions;}else{_sendNotification=sendNotificationOrTraceOptions.sendNotification||false;_traceFormat=sendNotificationOrTraceOptions.traceFormat||TraceFormat.Text;}}_trace=_value;traceFormat=_traceFormat;if(_trace===Trace.Off){tracer=void 0;}else{tracer=_tracer;}if(_sendNotification&&!isClosed()&&!isDisposed()){connection.sendNotification(SetTraceNotification.type,{value:Trace.toString(_value)}).catch(function(){logger.error("Sending trace notification failed");});}},onError:errorEmitter.event,onClose:closeEmitter.event,onUnhandledNotification:unhandledNotificationEmitter.event,onDispose:disposeEmitter.event,end:function end(){messageWriter.end();},dispose:function dispose(){if(isDisposed()){return;}state=ConnectionState.Disposed;disposeEmitter.fire(void 0);var error=new Error("Connection got disposed.");Object.keys(responsePromises).forEach(function(key){responsePromises[key].reject(error);});responsePromises=Object.create(null);requestTokens=Object.create(null);knownCanceledRequests=new Set();messageQueue=new linkedMap_1.LinkedMap();if(Is.func(messageWriter.dispose)){messageWriter.dispose();}if(Is.func(messageReader.dispose)){messageReader.dispose();}},listen:function listen(){throwIfClosedOrDisposed();throwIfListening();state=ConnectionState.Listening;messageReader.listen(callback);},inspect:function inspect(){(0,ral_1.default)().console.log("inspect");}};connection.onNotification(LogTraceNotification.type,function(params){if(_trace===Trace.Off||!tracer){return;}var verbose=_trace===Trace.Verbose||_trace===Trace.Compact;tracer.log(params.message,verbose?params.verbose:void 0);});connection.onNotification(ProgressNotification.type,function(params){var handler=progressHandlers.get(params.token);if(handler){handler(params.value);}else{unhandledProgressEmitter.fire(params);}});return connection;}exports.createMessageConnection=createMessageConnection;}});// client/node_modules/vscode-jsonrpc/lib/common/api.js
var require_api=__commonJS({"client/node_modules/vscode-jsonrpc/lib/common/api.js":function clientNode_modulesVscodeJsonrpcLibCommonApiJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SetTraceNotification=exports.TraceFormat=exports.Trace=exports.ProgressType=exports.ProgressToken=exports.createMessageConnection=exports.NullLogger=exports.ConnectionOptions=exports.ConnectionStrategy=exports.WriteableStreamMessageWriter=exports.AbstractMessageWriter=exports.MessageWriter=exports.ReadableStreamMessageReader=exports.AbstractMessageReader=exports.MessageReader=exports.CancellationToken=exports.CancellationTokenSource=exports.Emitter=exports.Event=exports.Disposable=exports.LRUCache=exports.Touch=exports.LinkedMap=exports.ParameterStructures=exports.NotificationType9=exports.NotificationType8=exports.NotificationType7=exports.NotificationType6=exports.NotificationType5=exports.NotificationType4=exports.NotificationType3=exports.NotificationType2=exports.NotificationType1=exports.NotificationType0=exports.NotificationType=exports.ErrorCodes=exports.ResponseError=exports.RequestType9=exports.RequestType8=exports.RequestType7=exports.RequestType6=exports.RequestType5=exports.RequestType4=exports.RequestType3=exports.RequestType2=exports.RequestType1=exports.RequestType0=exports.RequestType=exports.Message=exports.RAL=void 0;exports.CancellationStrategy=exports.CancellationSenderStrategy=exports.CancellationReceiverStrategy=exports.ConnectionError=exports.ConnectionErrors=exports.LogTraceNotification=void 0;var messages_1=require_messages();Object.defineProperty(exports,"Message",{enumerable:true,get:function get(){return messages_1.Message;}});Object.defineProperty(exports,"RequestType",{enumerable:true,get:function get(){return messages_1.RequestType;}});Object.defineProperty(exports,"RequestType0",{enumerable:true,get:function get(){return messages_1.RequestType0;}});Object.defineProperty(exports,"RequestType1",{enumerable:true,get:function get(){return messages_1.RequestType1;}});Object.defineProperty(exports,"RequestType2",{enumerable:true,get:function get(){return messages_1.RequestType2;}});Object.defineProperty(exports,"RequestType3",{enumerable:true,get:function get(){return messages_1.RequestType3;}});Object.defineProperty(exports,"RequestType4",{enumerable:true,get:function get(){return messages_1.RequestType4;}});Object.defineProperty(exports,"RequestType5",{enumerable:true,get:function get(){return messages_1.RequestType5;}});Object.defineProperty(exports,"RequestType6",{enumerable:true,get:function get(){return messages_1.RequestType6;}});Object.defineProperty(exports,"RequestType7",{enumerable:true,get:function get(){return messages_1.RequestType7;}});Object.defineProperty(exports,"RequestType8",{enumerable:true,get:function get(){return messages_1.RequestType8;}});Object.defineProperty(exports,"RequestType9",{enumerable:true,get:function get(){return messages_1.RequestType9;}});Object.defineProperty(exports,"ResponseError",{enumerable:true,get:function get(){return messages_1.ResponseError;}});Object.defineProperty(exports,"ErrorCodes",{enumerable:true,get:function get(){return messages_1.ErrorCodes;}});Object.defineProperty(exports,"NotificationType",{enumerable:true,get:function get(){return messages_1.NotificationType;}});Object.defineProperty(exports,"NotificationType0",{enumerable:true,get:function get(){return messages_1.NotificationType0;}});Object.defineProperty(exports,"NotificationType1",{enumerable:true,get:function get(){return messages_1.NotificationType1;}});Object.defineProperty(exports,"NotificationType2",{enumerable:true,get:function get(){return messages_1.NotificationType2;}});Object.defineProperty(exports,"NotificationType3",{enumerable:true,get:function get(){return messages_1.NotificationType3;}});Object.defineProperty(exports,"NotificationType4",{enumerable:true,get:function get(){return messages_1.NotificationType4;}});Object.defineProperty(exports,"NotificationType5",{enumerable:true,get:function get(){return messages_1.NotificationType5;}});Object.defineProperty(exports,"NotificationType6",{enumerable:true,get:function get(){return messages_1.NotificationType6;}});Object.defineProperty(exports,"NotificationType7",{enumerable:true,get:function get(){return messages_1.NotificationType7;}});Object.defineProperty(exports,"NotificationType8",{enumerable:true,get:function get(){return messages_1.NotificationType8;}});Object.defineProperty(exports,"NotificationType9",{enumerable:true,get:function get(){return messages_1.NotificationType9;}});Object.defineProperty(exports,"ParameterStructures",{enumerable:true,get:function get(){return messages_1.ParameterStructures;}});var linkedMap_1=require_linkedMap();Object.defineProperty(exports,"LinkedMap",{enumerable:true,get:function get(){return linkedMap_1.LinkedMap;}});Object.defineProperty(exports,"LRUCache",{enumerable:true,get:function get(){return linkedMap_1.LRUCache;}});Object.defineProperty(exports,"Touch",{enumerable:true,get:function get(){return linkedMap_1.Touch;}});var disposable_1=require_disposable();Object.defineProperty(exports,"Disposable",{enumerable:true,get:function get(){return disposable_1.Disposable;}});var events_1=require_events();Object.defineProperty(exports,"Event",{enumerable:true,get:function get(){return events_1.Event;}});Object.defineProperty(exports,"Emitter",{enumerable:true,get:function get(){return events_1.Emitter;}});var cancellation_1=require_cancellation();Object.defineProperty(exports,"CancellationTokenSource",{enumerable:true,get:function get(){return cancellation_1.CancellationTokenSource;}});Object.defineProperty(exports,"CancellationToken",{enumerable:true,get:function get(){return cancellation_1.CancellationToken;}});var messageReader_1=require_messageReader();Object.defineProperty(exports,"MessageReader",{enumerable:true,get:function get(){return messageReader_1.MessageReader;}});Object.defineProperty(exports,"AbstractMessageReader",{enumerable:true,get:function get(){return messageReader_1.AbstractMessageReader;}});Object.defineProperty(exports,"ReadableStreamMessageReader",{enumerable:true,get:function get(){return messageReader_1.ReadableStreamMessageReader;}});var messageWriter_1=require_messageWriter();Object.defineProperty(exports,"MessageWriter",{enumerable:true,get:function get(){return messageWriter_1.MessageWriter;}});Object.defineProperty(exports,"AbstractMessageWriter",{enumerable:true,get:function get(){return messageWriter_1.AbstractMessageWriter;}});Object.defineProperty(exports,"WriteableStreamMessageWriter",{enumerable:true,get:function get(){return messageWriter_1.WriteableStreamMessageWriter;}});var connection_1=require_connection();Object.defineProperty(exports,"ConnectionStrategy",{enumerable:true,get:function get(){return connection_1.ConnectionStrategy;}});Object.defineProperty(exports,"ConnectionOptions",{enumerable:true,get:function get(){return connection_1.ConnectionOptions;}});Object.defineProperty(exports,"NullLogger",{enumerable:true,get:function get(){return connection_1.NullLogger;}});Object.defineProperty(exports,"createMessageConnection",{enumerable:true,get:function get(){return connection_1.createMessageConnection;}});Object.defineProperty(exports,"ProgressToken",{enumerable:true,get:function get(){return connection_1.ProgressToken;}});Object.defineProperty(exports,"ProgressType",{enumerable:true,get:function get(){return connection_1.ProgressType;}});Object.defineProperty(exports,"Trace",{enumerable:true,get:function get(){return connection_1.Trace;}});Object.defineProperty(exports,"TraceFormat",{enumerable:true,get:function get(){return connection_1.TraceFormat;}});Object.defineProperty(exports,"SetTraceNotification",{enumerable:true,get:function get(){return connection_1.SetTraceNotification;}});Object.defineProperty(exports,"LogTraceNotification",{enumerable:true,get:function get(){return connection_1.LogTraceNotification;}});Object.defineProperty(exports,"ConnectionErrors",{enumerable:true,get:function get(){return connection_1.ConnectionErrors;}});Object.defineProperty(exports,"ConnectionError",{enumerable:true,get:function get(){return connection_1.ConnectionError;}});Object.defineProperty(exports,"CancellationReceiverStrategy",{enumerable:true,get:function get(){return connection_1.CancellationReceiverStrategy;}});Object.defineProperty(exports,"CancellationSenderStrategy",{enumerable:true,get:function get(){return connection_1.CancellationSenderStrategy;}});Object.defineProperty(exports,"CancellationStrategy",{enumerable:true,get:function get(){return connection_1.CancellationStrategy;}});var ral_1=require_ral();exports.RAL=ral_1.default;}});// client/node_modules/vscode-jsonrpc/lib/node/main.js
var require_main=__commonJS({"client/node_modules/vscode-jsonrpc/lib/node/main.js":function clientNode_modulesVscodeJsonrpcLibNodeMainJs(exports){"use strict";var __createBinding2=exports&&exports.__createBinding||(Object.create?function(o,m,k,k2){if(k2===void 0)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===void 0)k2=k;o[k2]=m[k];});var __exportStar=exports&&exports.__exportStar||function(m,exports2){for(var p in m){if(p!=="default"&&!Object.prototype.hasOwnProperty.call(exports2,p))__createBinding2(exports2,m,p);}};Object.defineProperty(exports,"__esModule",{value:true});exports.createMessageConnection=exports.createServerSocketTransport=exports.createClientSocketTransport=exports.createServerPipeTransport=exports.createClientPipeTransport=exports.generateRandomPipeName=exports.StreamMessageWriter=exports.StreamMessageReader=exports.SocketMessageWriter=exports.SocketMessageReader=exports.IPCMessageWriter=exports.IPCMessageReader=void 0;var ril_1=require_ril();ril_1.default.install();var api_1=require_api();var path=require("path");var os=require("os");var crypto_1=require("crypto");var net_1=require("net");__exportStar(require_api(),exports);var IPCMessageReader=/*#__PURE__*/function(_api_1$AbstractMessag){_inherits(IPCMessageReader,_api_1$AbstractMessag);var _super30=_createSuper(IPCMessageReader);function IPCMessageReader(process2){var _this37;_classCallCheck(this,IPCMessageReader);_this37=_super30.call(this);_this37.process=process2;var eventEmitter=_this37.process;eventEmitter.on("error",function(error){return _this37.fireError(error);});eventEmitter.on("close",function(){return _this37.fireClose();});return _this37;}_createClass(IPCMessageReader,[{key:"listen",value:function listen(callback){var _this38=this;this.process.on("message",callback);return api_1.Disposable.create(function(){return _this38.process.off("message",callback);});}}]);return IPCMessageReader;}(api_1.AbstractMessageReader);exports.IPCMessageReader=IPCMessageReader;var IPCMessageWriter=/*#__PURE__*/function(_api_1$AbstractMessag2){_inherits(IPCMessageWriter,_api_1$AbstractMessag2);var _super31=_createSuper(IPCMessageWriter);function IPCMessageWriter(process2){var _this39;_classCallCheck(this,IPCMessageWriter);_this39=_super31.call(this);_this39.process=process2;_this39.errorCount=0;var eventEmitter=_this39.process;eventEmitter.on("error",function(error){return _this39.fireError(error);});eventEmitter.on("close",function(){return _this39.fireClose;});return _this39;}_createClass(IPCMessageWriter,[{key:"write",value:function write(msg){var _this40=this;try{if(typeof this.process.send==="function"){this.process.send(msg,void 0,void 0,function(error){if(error){_this40.errorCount++;_this40.handleError(error,msg);}else{_this40.errorCount=0;}});}return Promise.resolve();}catch(error){this.handleError(error,msg);return Promise.reject(error);}}},{key:"handleError",value:function handleError(error,msg){this.errorCount++;this.fireError(error,msg,this.errorCount);}},{key:"end",value:function end(){}}]);return IPCMessageWriter;}(api_1.AbstractMessageWriter);exports.IPCMessageWriter=IPCMessageWriter;var SocketMessageReader=/*#__PURE__*/function(_api_1$ReadableStream){_inherits(SocketMessageReader,_api_1$ReadableStream);var _super32=_createSuper(SocketMessageReader);function SocketMessageReader(socket){var encoding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"utf-8";_classCallCheck(this,SocketMessageReader);return _super32.call(this,(0,ril_1.default)().stream.asReadableStream(socket),encoding);}return _createClass(SocketMessageReader);}(api_1.ReadableStreamMessageReader);exports.SocketMessageReader=SocketMessageReader;var SocketMessageWriter=/*#__PURE__*/function(_api_1$WriteableStrea){_inherits(SocketMessageWriter,_api_1$WriteableStrea);var _super33=_createSuper(SocketMessageWriter);function SocketMessageWriter(socket,options){var _this41;_classCallCheck(this,SocketMessageWriter);_this41=_super33.call(this,(0,ril_1.default)().stream.asWritableStream(socket),options);_this41.socket=socket;return _this41;}_createClass(SocketMessageWriter,[{key:"dispose",value:function dispose(){_get2(_getPrototypeOf(SocketMessageWriter.prototype),"dispose",this).call(this);this.socket.destroy();}}]);return SocketMessageWriter;}(api_1.WriteableStreamMessageWriter);exports.SocketMessageWriter=SocketMessageWriter;var StreamMessageReader=/*#__PURE__*/function(_api_1$ReadableStream2){_inherits(StreamMessageReader,_api_1$ReadableStream2);var _super34=_createSuper(StreamMessageReader);function StreamMessageReader(readble,encoding){_classCallCheck(this,StreamMessageReader);return _super34.call(this,(0,ril_1.default)().stream.asReadableStream(readble),encoding);}return _createClass(StreamMessageReader);}(api_1.ReadableStreamMessageReader);exports.StreamMessageReader=StreamMessageReader;var StreamMessageWriter=/*#__PURE__*/function(_api_1$WriteableStrea2){_inherits(StreamMessageWriter,_api_1$WriteableStrea2);var _super35=_createSuper(StreamMessageWriter);function StreamMessageWriter(writable,options){_classCallCheck(this,StreamMessageWriter);return _super35.call(this,(0,ril_1.default)().stream.asWritableStream(writable),options);}return _createClass(StreamMessageWriter);}(api_1.WriteableStreamMessageWriter);exports.StreamMessageWriter=StreamMessageWriter;var XDG_RUNTIME_DIR=process.env["XDG_RUNTIME_DIR"];var safeIpcPathLengths=new Map([["linux",107],["darwin",103]]);function generateRandomPipeName(){var randomSuffix=(0,crypto_1.randomBytes)(21).toString("hex");if(process.platform==="win32"){return"\\\\.\\pipe\\vscode-jsonrpc-".concat(randomSuffix,"-sock");}var result;if(XDG_RUNTIME_DIR){result=path.join(XDG_RUNTIME_DIR,"vscode-ipc-".concat(randomSuffix,".sock"));}else{result=path.join(os.tmpdir(),"vscode-".concat(randomSuffix,".sock"));}var limit=safeIpcPathLengths.get(process.platform);if(limit!==void 0&&result.length>=limit){(0,ril_1.default)().console.warn("WARNING: IPC handle \"".concat(result,"\" is longer than ").concat(limit," characters."));}return result;}exports.generateRandomPipeName=generateRandomPipeName;function createClientPipeTransport(pipeName){var encoding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"utf-8";var connectResolve;var connected=new Promise(function(resolve,_reject){connectResolve=resolve;});return new Promise(function(resolve,reject){var server=(0,net_1.createServer)(function(socket){server.close();connectResolve([new SocketMessageReader(socket,encoding),new SocketMessageWriter(socket,encoding)]);});server.on("error",reject);server.listen(pipeName,function(){server.removeListener("error",reject);resolve({onConnected:function onConnected(){return connected;}});});});}exports.createClientPipeTransport=createClientPipeTransport;function createServerPipeTransport(pipeName){var encoding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"utf-8";var socket=(0,net_1.createConnection)(pipeName);return[new SocketMessageReader(socket,encoding),new SocketMessageWriter(socket,encoding)];}exports.createServerPipeTransport=createServerPipeTransport;function createClientSocketTransport(port){var encoding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"utf-8";var connectResolve;var connected=new Promise(function(resolve,_reject){connectResolve=resolve;});return new Promise(function(resolve,reject){var server=(0,net_1.createServer)(function(socket){server.close();connectResolve([new SocketMessageReader(socket,encoding),new SocketMessageWriter(socket,encoding)]);});server.on("error",reject);server.listen(port,"127.0.0.1",function(){server.removeListener("error",reject);resolve({onConnected:function onConnected(){return connected;}});});});}exports.createClientSocketTransport=createClientSocketTransport;function createServerSocketTransport(port){var encoding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"utf-8";var socket=(0,net_1.createConnection)(port,"127.0.0.1");return[new SocketMessageReader(socket,encoding),new SocketMessageWriter(socket,encoding)];}exports.createServerSocketTransport=createServerSocketTransport;function isReadableStream(value){var candidate=value;return candidate.read!==void 0&&candidate.addListener!==void 0;}function isWritableStream(value){var candidate=value;return candidate.write!==void 0&&candidate.addListener!==void 0;}function createMessageConnection(input,output,logger,options){if(!logger){logger=api_1.NullLogger;}var reader=isReadableStream(input)?new StreamMessageReader(input):input;var writer=isWritableStream(output)?new StreamMessageWriter(output):output;if(api_1.ConnectionStrategy.is(options)){options={connectionStrategy:options};}return(0,api_1.createMessageConnection)(reader,writer,logger,options);}exports.createMessageConnection=createMessageConnection;}});// client/node_modules/vscode-jsonrpc/node.js
var require_node=__commonJS({"client/node_modules/vscode-jsonrpc/node.js":function clientNode_modulesVscodeJsonrpcNodeJs(exports,module2){"use strict";module2.exports=require_main();}});// client/node_modules/vscode-languageserver-types/lib/umd/main.js
var require_main2=__commonJS({"client/node_modules/vscode-languageserver-types/lib/umd/main.js":function clientNode_modulesVscodeLanguageserverTypesLibUmdMainJs(exports,module2){(function(factory){if(_typeof(module2)==="object"&&_typeof(module2.exports)==="object"){var v=factory(require,exports);if(v!==void 0)module2.exports=v;}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory);}})(function(require2,exports2){"use strict";Object.defineProperty(exports2,"__esModule",{value:true});exports2.TextDocument=exports2.EOL=exports2.InlineValuesContext=exports2.InlineValueEvaluatableExpression=exports2.InlineValueVariableLookup=exports2.InlineValueText=exports2.SemanticTokens=exports2.SemanticTokenModifiers=exports2.SemanticTokenTypes=exports2.SelectionRange=exports2.DocumentLink=exports2.FormattingOptions=exports2.CodeLens=exports2.CodeAction=exports2.CodeActionContext=exports2.CodeActionTriggerKind=exports2.CodeActionKind=exports2.DocumentSymbol=exports2.WorkspaceSymbol=exports2.SymbolInformation=exports2.SymbolTag=exports2.SymbolKind=exports2.DocumentHighlight=exports2.DocumentHighlightKind=exports2.SignatureInformation=exports2.ParameterInformation=exports2.Hover=exports2.MarkedString=exports2.CompletionList=exports2.CompletionItem=exports2.CompletionItemLabelDetails=exports2.InsertTextMode=exports2.InsertReplaceEdit=exports2.CompletionItemTag=exports2.InsertTextFormat=exports2.CompletionItemKind=exports2.MarkupContent=exports2.MarkupKind=exports2.TextDocumentItem=exports2.OptionalVersionedTextDocumentIdentifier=exports2.VersionedTextDocumentIdentifier=exports2.TextDocumentIdentifier=exports2.WorkspaceChange=exports2.WorkspaceEdit=exports2.DeleteFile=exports2.RenameFile=exports2.CreateFile=exports2.TextDocumentEdit=exports2.AnnotatedTextEdit=exports2.ChangeAnnotationIdentifier=exports2.ChangeAnnotation=exports2.TextEdit=exports2.Command=exports2.Diagnostic=exports2.CodeDescription=exports2.DiagnosticTag=exports2.DiagnosticSeverity=exports2.DiagnosticRelatedInformation=exports2.FoldingRange=exports2.FoldingRangeKind=exports2.ColorPresentation=exports2.ColorInformation=exports2.Color=exports2.LocationLink=exports2.Location=exports2.Range=exports2.Position=exports2.uinteger=exports2.integer=void 0;var integer;(function(integer2){integer2.MIN_VALUE=-2147483648;integer2.MAX_VALUE=2147483647;})(integer=exports2.integer||(exports2.integer={}));var uinteger;(function(uinteger2){uinteger2.MIN_VALUE=0;uinteger2.MAX_VALUE=2147483647;})(uinteger=exports2.uinteger||(exports2.uinteger={}));var Position;(function(Position2){function create(line,character){if(line===Number.MAX_VALUE){line=uinteger.MAX_VALUE;}if(character===Number.MAX_VALUE){character=uinteger.MAX_VALUE;}return{line:line,character:character};}Position2.create=create;function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.uinteger(candidate.line)&&Is.uinteger(candidate.character);}Position2.is=is;})(Position=exports2.Position||(exports2.Position={}));var Range;(function(Range2){function create(one,two,three,four){if(Is.uinteger(one)&&Is.uinteger(two)&&Is.uinteger(three)&&Is.uinteger(four)){return{start:Position.create(one,two),end:Position.create(three,four)};}else if(Position.is(one)&&Position.is(two)){return{start:one,end:two};}else{throw new Error("Range#create called with invalid arguments[".concat(one,", ").concat(two,", ").concat(three,", ").concat(four,"]"));}}Range2.create=create;function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Position.is(candidate.start)&&Position.is(candidate.end);}Range2.is=is;})(Range=exports2.Range||(exports2.Range={}));var Location;(function(Location2){function create(uri,range){return{uri:uri,range:range};}Location2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.string(candidate.uri)||Is.undefined(candidate.uri));}Location2.is=is;})(Location=exports2.Location||(exports2.Location={}));var LocationLink;(function(LocationLink2){function create(targetUri,targetRange,targetSelectionRange,originSelectionRange){return{targetUri:targetUri,targetRange:targetRange,targetSelectionRange:targetSelectionRange,originSelectionRange:originSelectionRange};}LocationLink2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.targetRange)&&Is.string(candidate.targetUri)&&Range.is(candidate.targetSelectionRange)&&(Range.is(candidate.originSelectionRange)||Is.undefined(candidate.originSelectionRange));}LocationLink2.is=is;})(LocationLink=exports2.LocationLink||(exports2.LocationLink={}));var Color;(function(Color2){function create(red,green,blue,alpha){return{red:red,green:green,blue:blue,alpha:alpha};}Color2.create=create;function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.numberRange(candidate.red,0,1)&&Is.numberRange(candidate.green,0,1)&&Is.numberRange(candidate.blue,0,1)&&Is.numberRange(candidate.alpha,0,1);}Color2.is=is;})(Color=exports2.Color||(exports2.Color={}));var ColorInformation;(function(ColorInformation2){function create(range,color){return{range:range,color:color};}ColorInformation2.create=create;function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Range.is(candidate.range)&&Color.is(candidate.color);}ColorInformation2.is=is;})(ColorInformation=exports2.ColorInformation||(exports2.ColorInformation={}));var ColorPresentation;(function(ColorPresentation2){function create(label,textEdit,additionalTextEdits){return{label:label,textEdit:textEdit,additionalTextEdits:additionalTextEdits};}ColorPresentation2.create=create;function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.string(candidate.label)&&(Is.undefined(candidate.textEdit)||TextEdit.is(candidate))&&(Is.undefined(candidate.additionalTextEdits)||Is.typedArray(candidate.additionalTextEdits,TextEdit.is));}ColorPresentation2.is=is;})(ColorPresentation=exports2.ColorPresentation||(exports2.ColorPresentation={}));var FoldingRangeKind;(function(FoldingRangeKind2){FoldingRangeKind2["Comment"]="comment";FoldingRangeKind2["Imports"]="imports";FoldingRangeKind2["Region"]="region";})(FoldingRangeKind=exports2.FoldingRangeKind||(exports2.FoldingRangeKind={}));var FoldingRange;(function(FoldingRange2){function create(startLine,endLine,startCharacter,endCharacter,kind){var result={startLine:startLine,endLine:endLine};if(Is.defined(startCharacter)){result.startCharacter=startCharacter;}if(Is.defined(endCharacter)){result.endCharacter=endCharacter;}if(Is.defined(kind)){result.kind=kind;}return result;}FoldingRange2.create=create;function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.uinteger(candidate.startLine)&&Is.uinteger(candidate.startLine)&&(Is.undefined(candidate.startCharacter)||Is.uinteger(candidate.startCharacter))&&(Is.undefined(candidate.endCharacter)||Is.uinteger(candidate.endCharacter))&&(Is.undefined(candidate.kind)||Is.string(candidate.kind));}FoldingRange2.is=is;})(FoldingRange=exports2.FoldingRange||(exports2.FoldingRange={}));var DiagnosticRelatedInformation;(function(DiagnosticRelatedInformation2){function create(location2,message){return{location:location2,message:message};}DiagnosticRelatedInformation2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Location.is(candidate.location)&&Is.string(candidate.message);}DiagnosticRelatedInformation2.is=is;})(DiagnosticRelatedInformation=exports2.DiagnosticRelatedInformation||(exports2.DiagnosticRelatedInformation={}));var DiagnosticSeverity;(function(DiagnosticSeverity2){DiagnosticSeverity2.Error=1;DiagnosticSeverity2.Warning=2;DiagnosticSeverity2.Information=3;DiagnosticSeverity2.Hint=4;})(DiagnosticSeverity=exports2.DiagnosticSeverity||(exports2.DiagnosticSeverity={}));var DiagnosticTag;(function(DiagnosticTag2){DiagnosticTag2.Unnecessary=1;DiagnosticTag2.Deprecated=2;})(DiagnosticTag=exports2.DiagnosticTag||(exports2.DiagnosticTag={}));var CodeDescription;(function(CodeDescription2){function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.string(candidate.href);}CodeDescription2.is=is;})(CodeDescription=exports2.CodeDescription||(exports2.CodeDescription={}));var Diagnostic;(function(Diagnostic2){function create(range,message,severity,code,source,relatedInformation){var result={range:range,message:message};if(Is.defined(severity)){result.severity=severity;}if(Is.defined(code)){result.code=code;}if(Is.defined(source)){result.source=source;}if(Is.defined(relatedInformation)){result.relatedInformation=relatedInformation;}return result;}Diagnostic2.create=create;function is(value){var _a;var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&Is.string(candidate.message)&&(Is.number(candidate.severity)||Is.undefined(candidate.severity))&&(Is.integer(candidate.code)||Is.string(candidate.code)||Is.undefined(candidate.code))&&(Is.undefined(candidate.codeDescription)||Is.string((_a=candidate.codeDescription)===null||_a===void 0?void 0:_a.href))&&(Is.string(candidate.source)||Is.undefined(candidate.source))&&(Is.undefined(candidate.relatedInformation)||Is.typedArray(candidate.relatedInformation,DiagnosticRelatedInformation.is));}Diagnostic2.is=is;})(Diagnostic=exports2.Diagnostic||(exports2.Diagnostic={}));var Command;(function(Command2){function create(title,command){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i];}var result={title:title,command:command};if(Is.defined(args)&&args.length>0){result.arguments=args;}return result;}Command2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.title)&&Is.string(candidate.command);}Command2.is=is;})(Command=exports2.Command||(exports2.Command={}));var TextEdit;(function(TextEdit2){function replace(range,newText){return{range:range,newText:newText};}TextEdit2.replace=replace;function insert(position,newText){return{range:{start:position,end:position},newText:newText};}TextEdit2.insert=insert;function del(range){return{range:range,newText:""};}TextEdit2.del=del;function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.string(candidate.newText)&&Range.is(candidate.range);}TextEdit2.is=is;})(TextEdit=exports2.TextEdit||(exports2.TextEdit={}));var ChangeAnnotation;(function(ChangeAnnotation2){function create(label,needsConfirmation,description){var result={label:label};if(needsConfirmation!==void 0){result.needsConfirmation=needsConfirmation;}if(description!==void 0){result.description=description;}return result;}ChangeAnnotation2.create=create;function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.string(candidate.label)&&(Is.boolean(candidate.needsConfirmation)||candidate.needsConfirmation===void 0)&&(Is.string(candidate.description)||candidate.description===void 0);}ChangeAnnotation2.is=is;})(ChangeAnnotation=exports2.ChangeAnnotation||(exports2.ChangeAnnotation={}));var ChangeAnnotationIdentifier;(function(ChangeAnnotationIdentifier2){function is(value){var candidate=value;return Is.string(candidate);}ChangeAnnotationIdentifier2.is=is;})(ChangeAnnotationIdentifier=exports2.ChangeAnnotationIdentifier||(exports2.ChangeAnnotationIdentifier={}));var AnnotatedTextEdit;(function(AnnotatedTextEdit2){function replace(range,newText,annotation){return{range:range,newText:newText,annotationId:annotation};}AnnotatedTextEdit2.replace=replace;function insert(position,newText,annotation){return{range:{start:position,end:position},newText:newText,annotationId:annotation};}AnnotatedTextEdit2.insert=insert;function del(range,annotation){return{range:range,newText:"",annotationId:annotation};}AnnotatedTextEdit2.del=del;function is(value){var candidate=value;return TextEdit.is(candidate)&&(ChangeAnnotation.is(candidate.annotationId)||ChangeAnnotationIdentifier.is(candidate.annotationId));}AnnotatedTextEdit2.is=is;})(AnnotatedTextEdit=exports2.AnnotatedTextEdit||(exports2.AnnotatedTextEdit={}));var TextDocumentEdit;(function(TextDocumentEdit2){function create(textDocument,edits){return{textDocument:textDocument,edits:edits};}TextDocumentEdit2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)&&Array.isArray(candidate.edits);}TextDocumentEdit2.is=is;})(TextDocumentEdit=exports2.TextDocumentEdit||(exports2.TextDocumentEdit={}));var CreateFile;(function(CreateFile2){function create(uri,options,annotation){var result={kind:"create",uri:uri};if(options!==void 0&&(options.overwrite!==void 0||options.ignoreIfExists!==void 0)){result.options=options;}if(annotation!==void 0){result.annotationId=annotation;}return result;}CreateFile2.create=create;function is(value){var candidate=value;return candidate&&candidate.kind==="create"&&Is.string(candidate.uri)&&(candidate.options===void 0||(candidate.options.overwrite===void 0||Is.boolean(candidate.options.overwrite))&&(candidate.options.ignoreIfExists===void 0||Is.boolean(candidate.options.ignoreIfExists)))&&(candidate.annotationId===void 0||ChangeAnnotationIdentifier.is(candidate.annotationId));}CreateFile2.is=is;})(CreateFile=exports2.CreateFile||(exports2.CreateFile={}));var RenameFile;(function(RenameFile2){function create(oldUri,newUri,options,annotation){var result={kind:"rename",oldUri:oldUri,newUri:newUri};if(options!==void 0&&(options.overwrite!==void 0||options.ignoreIfExists!==void 0)){result.options=options;}if(annotation!==void 0){result.annotationId=annotation;}return result;}RenameFile2.create=create;function is(value){var candidate=value;return candidate&&candidate.kind==="rename"&&Is.string(candidate.oldUri)&&Is.string(candidate.newUri)&&(candidate.options===void 0||(candidate.options.overwrite===void 0||Is.boolean(candidate.options.overwrite))&&(candidate.options.ignoreIfExists===void 0||Is.boolean(candidate.options.ignoreIfExists)))&&(candidate.annotationId===void 0||ChangeAnnotationIdentifier.is(candidate.annotationId));}RenameFile2.is=is;})(RenameFile=exports2.RenameFile||(exports2.RenameFile={}));var DeleteFile;(function(DeleteFile2){function create(uri,options,annotation){var result={kind:"delete",uri:uri};if(options!==void 0&&(options.recursive!==void 0||options.ignoreIfNotExists!==void 0)){result.options=options;}if(annotation!==void 0){result.annotationId=annotation;}return result;}DeleteFile2.create=create;function is(value){var candidate=value;return candidate&&candidate.kind==="delete"&&Is.string(candidate.uri)&&(candidate.options===void 0||(candidate.options.recursive===void 0||Is.boolean(candidate.options.recursive))&&(candidate.options.ignoreIfNotExists===void 0||Is.boolean(candidate.options.ignoreIfNotExists)))&&(candidate.annotationId===void 0||ChangeAnnotationIdentifier.is(candidate.annotationId));}DeleteFile2.is=is;})(DeleteFile=exports2.DeleteFile||(exports2.DeleteFile={}));var WorkspaceEdit;(function(WorkspaceEdit2){function is(value){var candidate=value;return candidate&&(candidate.changes!==void 0||candidate.documentChanges!==void 0)&&(candidate.documentChanges===void 0||candidate.documentChanges.every(function(change){if(Is.string(change.kind)){return CreateFile.is(change)||RenameFile.is(change)||DeleteFile.is(change);}else{return TextDocumentEdit.is(change);}}));}WorkspaceEdit2.is=is;})(WorkspaceEdit=exports2.WorkspaceEdit||(exports2.WorkspaceEdit={}));var TextEditChangeImpl=function(){function TextEditChangeImpl2(edits,changeAnnotations){this.edits=edits;this.changeAnnotations=changeAnnotations;}TextEditChangeImpl2.prototype.insert=function(position,newText,annotation){var edit;var id;if(annotation===void 0){edit=TextEdit.insert(position,newText);}else if(ChangeAnnotationIdentifier.is(annotation)){id=annotation;edit=AnnotatedTextEdit.insert(position,newText,annotation);}else{this.assertChangeAnnotations(this.changeAnnotations);id=this.changeAnnotations.manage(annotation);edit=AnnotatedTextEdit.insert(position,newText,id);}this.edits.push(edit);if(id!==void 0){return id;}};TextEditChangeImpl2.prototype.replace=function(range,newText,annotation){var edit;var id;if(annotation===void 0){edit=TextEdit.replace(range,newText);}else if(ChangeAnnotationIdentifier.is(annotation)){id=annotation;edit=AnnotatedTextEdit.replace(range,newText,annotation);}else{this.assertChangeAnnotations(this.changeAnnotations);id=this.changeAnnotations.manage(annotation);edit=AnnotatedTextEdit.replace(range,newText,id);}this.edits.push(edit);if(id!==void 0){return id;}};TextEditChangeImpl2.prototype.delete=function(range,annotation){var edit;var id;if(annotation===void 0){edit=TextEdit.del(range);}else if(ChangeAnnotationIdentifier.is(annotation)){id=annotation;edit=AnnotatedTextEdit.del(range,annotation);}else{this.assertChangeAnnotations(this.changeAnnotations);id=this.changeAnnotations.manage(annotation);edit=AnnotatedTextEdit.del(range,id);}this.edits.push(edit);if(id!==void 0){return id;}};TextEditChangeImpl2.prototype.add=function(edit){this.edits.push(edit);};TextEditChangeImpl2.prototype.all=function(){return this.edits;};TextEditChangeImpl2.prototype.clear=function(){this.edits.splice(0,this.edits.length);};TextEditChangeImpl2.prototype.assertChangeAnnotations=function(value){if(value===void 0){throw new Error("Text edit change is not configured to manage change annotations.");}};return TextEditChangeImpl2;}();var ChangeAnnotations=function(){function ChangeAnnotations2(annotations){this._annotations=annotations===void 0?Object.create(null):annotations;this._counter=0;this._size=0;}ChangeAnnotations2.prototype.all=function(){return this._annotations;};Object.defineProperty(ChangeAnnotations2.prototype,"size",{get:function get(){return this._size;},enumerable:false,configurable:true});ChangeAnnotations2.prototype.manage=function(idOrAnnotation,annotation){var id;if(ChangeAnnotationIdentifier.is(idOrAnnotation)){id=idOrAnnotation;}else{id=this.nextId();annotation=idOrAnnotation;}if(this._annotations[id]!==void 0){throw new Error("Id ".concat(id," is already in use."));}if(annotation===void 0){throw new Error("No annotation provided for id ".concat(id));}this._annotations[id]=annotation;this._size++;return id;};ChangeAnnotations2.prototype.nextId=function(){this._counter++;return this._counter.toString();};return ChangeAnnotations2;}();var WorkspaceChange=function(){function WorkspaceChange2(workspaceEdit){var _this=this;this._textEditChanges=Object.create(null);if(workspaceEdit!==void 0){this._workspaceEdit=workspaceEdit;if(workspaceEdit.documentChanges){this._changeAnnotations=new ChangeAnnotations(workspaceEdit.changeAnnotations);workspaceEdit.changeAnnotations=this._changeAnnotations.all();workspaceEdit.documentChanges.forEach(function(change){if(TextDocumentEdit.is(change)){var textEditChange=new TextEditChangeImpl(change.edits,_this._changeAnnotations);_this._textEditChanges[change.textDocument.uri]=textEditChange;}});}else if(workspaceEdit.changes){Object.keys(workspaceEdit.changes).forEach(function(key){var textEditChange=new TextEditChangeImpl(workspaceEdit.changes[key]);_this._textEditChanges[key]=textEditChange;});}}else{this._workspaceEdit={};}}Object.defineProperty(WorkspaceChange2.prototype,"edit",{get:function get(){this.initDocumentChanges();if(this._changeAnnotations!==void 0){if(this._changeAnnotations.size===0){this._workspaceEdit.changeAnnotations=void 0;}else{this._workspaceEdit.changeAnnotations=this._changeAnnotations.all();}}return this._workspaceEdit;},enumerable:false,configurable:true});WorkspaceChange2.prototype.getTextEditChange=function(key){if(OptionalVersionedTextDocumentIdentifier.is(key)){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===void 0){throw new Error("Workspace edit is not configured for document changes.");}var textDocument={uri:key.uri,version:key.version};var result=this._textEditChanges[textDocument.uri];if(!result){var edits=[];var textDocumentEdit={textDocument:textDocument,edits:edits};this._workspaceEdit.documentChanges.push(textDocumentEdit);result=new TextEditChangeImpl(edits,this._changeAnnotations);this._textEditChanges[textDocument.uri]=result;}return result;}else{this.initChanges();if(this._workspaceEdit.changes===void 0){throw new Error("Workspace edit is not configured for normal text edit changes.");}var result=this._textEditChanges[key];if(!result){var edits=[];this._workspaceEdit.changes[key]=edits;result=new TextEditChangeImpl(edits);this._textEditChanges[key]=result;}return result;}};WorkspaceChange2.prototype.initDocumentChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0){this._changeAnnotations=new ChangeAnnotations();this._workspaceEdit.documentChanges=[];this._workspaceEdit.changeAnnotations=this._changeAnnotations.all();}};WorkspaceChange2.prototype.initChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0){this._workspaceEdit.changes=Object.create(null);}};WorkspaceChange2.prototype.createFile=function(uri,optionsOrAnnotation,options){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===void 0){throw new Error("Workspace edit is not configured for document changes.");}var annotation;if(ChangeAnnotation.is(optionsOrAnnotation)||ChangeAnnotationIdentifier.is(optionsOrAnnotation)){annotation=optionsOrAnnotation;}else{options=optionsOrAnnotation;}var operation;var id;if(annotation===void 0){operation=CreateFile.create(uri,options);}else{id=ChangeAnnotationIdentifier.is(annotation)?annotation:this._changeAnnotations.manage(annotation);operation=CreateFile.create(uri,options,id);}this._workspaceEdit.documentChanges.push(operation);if(id!==void 0){return id;}};WorkspaceChange2.prototype.renameFile=function(oldUri,newUri,optionsOrAnnotation,options){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===void 0){throw new Error("Workspace edit is not configured for document changes.");}var annotation;if(ChangeAnnotation.is(optionsOrAnnotation)||ChangeAnnotationIdentifier.is(optionsOrAnnotation)){annotation=optionsOrAnnotation;}else{options=optionsOrAnnotation;}var operation;var id;if(annotation===void 0){operation=RenameFile.create(oldUri,newUri,options);}else{id=ChangeAnnotationIdentifier.is(annotation)?annotation:this._changeAnnotations.manage(annotation);operation=RenameFile.create(oldUri,newUri,options,id);}this._workspaceEdit.documentChanges.push(operation);if(id!==void 0){return id;}};WorkspaceChange2.prototype.deleteFile=function(uri,optionsOrAnnotation,options){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===void 0){throw new Error("Workspace edit is not configured for document changes.");}var annotation;if(ChangeAnnotation.is(optionsOrAnnotation)||ChangeAnnotationIdentifier.is(optionsOrAnnotation)){annotation=optionsOrAnnotation;}else{options=optionsOrAnnotation;}var operation;var id;if(annotation===void 0){operation=DeleteFile.create(uri,options);}else{id=ChangeAnnotationIdentifier.is(annotation)?annotation:this._changeAnnotations.manage(annotation);operation=DeleteFile.create(uri,options,id);}this._workspaceEdit.documentChanges.push(operation);if(id!==void 0){return id;}};return WorkspaceChange2;}();exports2.WorkspaceChange=WorkspaceChange;var TextDocumentIdentifier;(function(TextDocumentIdentifier2){function create(uri){return{uri:uri};}TextDocumentIdentifier2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri);}TextDocumentIdentifier2.is=is;})(TextDocumentIdentifier=exports2.TextDocumentIdentifier||(exports2.TextDocumentIdentifier={}));var VersionedTextDocumentIdentifier;(function(VersionedTextDocumentIdentifier2){function create(uri,version){return{uri:uri,version:version};}VersionedTextDocumentIdentifier2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.integer(candidate.version);}VersionedTextDocumentIdentifier2.is=is;})(VersionedTextDocumentIdentifier=exports2.VersionedTextDocumentIdentifier||(exports2.VersionedTextDocumentIdentifier={}));var OptionalVersionedTextDocumentIdentifier;(function(OptionalVersionedTextDocumentIdentifier2){function create(uri,version){return{uri:uri,version:version};}OptionalVersionedTextDocumentIdentifier2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&(candidate.version===null||Is.integer(candidate.version));}OptionalVersionedTextDocumentIdentifier2.is=is;})(OptionalVersionedTextDocumentIdentifier=exports2.OptionalVersionedTextDocumentIdentifier||(exports2.OptionalVersionedTextDocumentIdentifier={}));var TextDocumentItem;(function(TextDocumentItem2){function create(uri,languageId,version,text){return{uri:uri,languageId:languageId,version:version,text:text};}TextDocumentItem2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.string(candidate.languageId)&&Is.integer(candidate.version)&&Is.string(candidate.text);}TextDocumentItem2.is=is;})(TextDocumentItem=exports2.TextDocumentItem||(exports2.TextDocumentItem={}));var MarkupKind;(function(MarkupKind2){MarkupKind2.PlainText="plaintext";MarkupKind2.Markdown="markdown";})(MarkupKind=exports2.MarkupKind||(exports2.MarkupKind={}));(function(MarkupKind2){function is(value){var candidate=value;return candidate===MarkupKind2.PlainText||candidate===MarkupKind2.Markdown;}MarkupKind2.is=is;})(MarkupKind=exports2.MarkupKind||(exports2.MarkupKind={}));var MarkupContent;(function(MarkupContent2){function is(value){var candidate=value;return Is.objectLiteral(value)&&MarkupKind.is(candidate.kind)&&Is.string(candidate.value);}MarkupContent2.is=is;})(MarkupContent=exports2.MarkupContent||(exports2.MarkupContent={}));var CompletionItemKind;(function(CompletionItemKind2){CompletionItemKind2.Text=1;CompletionItemKind2.Method=2;CompletionItemKind2.Function=3;CompletionItemKind2.Constructor=4;CompletionItemKind2.Field=5;CompletionItemKind2.Variable=6;CompletionItemKind2.Class=7;CompletionItemKind2.Interface=8;CompletionItemKind2.Module=9;CompletionItemKind2.Property=10;CompletionItemKind2.Unit=11;CompletionItemKind2.Value=12;CompletionItemKind2.Enum=13;CompletionItemKind2.Keyword=14;CompletionItemKind2.Snippet=15;CompletionItemKind2.Color=16;CompletionItemKind2.File=17;CompletionItemKind2.Reference=18;CompletionItemKind2.Folder=19;CompletionItemKind2.EnumMember=20;CompletionItemKind2.Constant=21;CompletionItemKind2.Struct=22;CompletionItemKind2.Event=23;CompletionItemKind2.Operator=24;CompletionItemKind2.TypeParameter=25;})(CompletionItemKind=exports2.CompletionItemKind||(exports2.CompletionItemKind={}));var InsertTextFormat;(function(InsertTextFormat2){InsertTextFormat2.PlainText=1;InsertTextFormat2.Snippet=2;})(InsertTextFormat=exports2.InsertTextFormat||(exports2.InsertTextFormat={}));var CompletionItemTag;(function(CompletionItemTag2){CompletionItemTag2.Deprecated=1;})(CompletionItemTag=exports2.CompletionItemTag||(exports2.CompletionItemTag={}));var InsertReplaceEdit;(function(InsertReplaceEdit2){function create(newText,insert,replace){return{newText:newText,insert:insert,replace:replace};}InsertReplaceEdit2.create=create;function is(value){var candidate=value;return candidate&&Is.string(candidate.newText)&&Range.is(candidate.insert)&&Range.is(candidate.replace);}InsertReplaceEdit2.is=is;})(InsertReplaceEdit=exports2.InsertReplaceEdit||(exports2.InsertReplaceEdit={}));var InsertTextMode;(function(InsertTextMode2){InsertTextMode2.asIs=1;InsertTextMode2.adjustIndentation=2;})(InsertTextMode=exports2.InsertTextMode||(exports2.InsertTextMode={}));var CompletionItemLabelDetails;(function(CompletionItemLabelDetails2){function is(value){var candidate=value;return candidate&&(Is.string(candidate.detail)||candidate.detail===void 0)&&(Is.string(candidate.description)||candidate.description===void 0);}CompletionItemLabelDetails2.is=is;})(CompletionItemLabelDetails=exports2.CompletionItemLabelDetails||(exports2.CompletionItemLabelDetails={}));var CompletionItem;(function(CompletionItem2){function create(label){return{label:label};}CompletionItem2.create=create;})(CompletionItem=exports2.CompletionItem||(exports2.CompletionItem={}));var CompletionList;(function(CompletionList2){function create(items,isIncomplete){return{items:items?items:[],isIncomplete:!!isIncomplete};}CompletionList2.create=create;})(CompletionList=exports2.CompletionList||(exports2.CompletionList={}));var MarkedString;(function(MarkedString2){function fromPlainText(plainText){return plainText.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&");}MarkedString2.fromPlainText=fromPlainText;function is(value){var candidate=value;return Is.string(candidate)||Is.objectLiteral(candidate)&&Is.string(candidate.language)&&Is.string(candidate.value);}MarkedString2.is=is;})(MarkedString=exports2.MarkedString||(exports2.MarkedString={}));var Hover;(function(Hover2){function is(value){var candidate=value;return!!candidate&&Is.objectLiteral(candidate)&&(MarkupContent.is(candidate.contents)||MarkedString.is(candidate.contents)||Is.typedArray(candidate.contents,MarkedString.is))&&(value.range===void 0||Range.is(value.range));}Hover2.is=is;})(Hover=exports2.Hover||(exports2.Hover={}));var ParameterInformation;(function(ParameterInformation2){function create(label,documentation){return documentation?{label:label,documentation:documentation}:{label:label};}ParameterInformation2.create=create;})(ParameterInformation=exports2.ParameterInformation||(exports2.ParameterInformation={}));var SignatureInformation;(function(SignatureInformation2){function create(label,documentation){var parameters=[];for(var _i=2;_i<arguments.length;_i++){parameters[_i-2]=arguments[_i];}var result={label:label};if(Is.defined(documentation)){result.documentation=documentation;}if(Is.defined(parameters)){result.parameters=parameters;}else{result.parameters=[];}return result;}SignatureInformation2.create=create;})(SignatureInformation=exports2.SignatureInformation||(exports2.SignatureInformation={}));var DocumentHighlightKind;(function(DocumentHighlightKind2){DocumentHighlightKind2.Text=1;DocumentHighlightKind2.Read=2;DocumentHighlightKind2.Write=3;})(DocumentHighlightKind=exports2.DocumentHighlightKind||(exports2.DocumentHighlightKind={}));var DocumentHighlight;(function(DocumentHighlight2){function create(range,kind){var result={range:range};if(Is.number(kind)){result.kind=kind;}return result;}DocumentHighlight2.create=create;})(DocumentHighlight=exports2.DocumentHighlight||(exports2.DocumentHighlight={}));var SymbolKind;(function(SymbolKind2){SymbolKind2.File=1;SymbolKind2.Module=2;SymbolKind2.Namespace=3;SymbolKind2.Package=4;SymbolKind2.Class=5;SymbolKind2.Method=6;SymbolKind2.Property=7;SymbolKind2.Field=8;SymbolKind2.Constructor=9;SymbolKind2.Enum=10;SymbolKind2.Interface=11;SymbolKind2.Function=12;SymbolKind2.Variable=13;SymbolKind2.Constant=14;SymbolKind2.String=15;SymbolKind2.Number=16;SymbolKind2.Boolean=17;SymbolKind2.Array=18;SymbolKind2.Object=19;SymbolKind2.Key=20;SymbolKind2.Null=21;SymbolKind2.EnumMember=22;SymbolKind2.Struct=23;SymbolKind2.Event=24;SymbolKind2.Operator=25;SymbolKind2.TypeParameter=26;})(SymbolKind=exports2.SymbolKind||(exports2.SymbolKind={}));var SymbolTag;(function(SymbolTag2){SymbolTag2.Deprecated=1;})(SymbolTag=exports2.SymbolTag||(exports2.SymbolTag={}));var SymbolInformation;(function(SymbolInformation2){function create(name,kind,range,uri,containerName){var result={name:name,kind:kind,location:{uri:uri,range:range}};if(containerName){result.containerName=containerName;}return result;}SymbolInformation2.create=create;})(SymbolInformation=exports2.SymbolInformation||(exports2.SymbolInformation={}));var WorkspaceSymbol;(function(WorkspaceSymbol2){function create(name,kind,uri,range){return range!==void 0?{name:name,kind:kind,location:{uri:uri,range:range}}:{name:name,kind:kind,location:{uri:uri}};}WorkspaceSymbol2.create=create;})(WorkspaceSymbol=exports2.WorkspaceSymbol||(exports2.WorkspaceSymbol={}));var DocumentSymbol;(function(DocumentSymbol2){function create(name,detail,kind,range,selectionRange,children){var result={name:name,detail:detail,kind:kind,range:range,selectionRange:selectionRange};if(children!==void 0){result.children=children;}return result;}DocumentSymbol2.create=create;function is(value){var candidate=value;return candidate&&Is.string(candidate.name)&&Is.number(candidate.kind)&&Range.is(candidate.range)&&Range.is(candidate.selectionRange)&&(candidate.detail===void 0||Is.string(candidate.detail))&&(candidate.deprecated===void 0||Is.boolean(candidate.deprecated))&&(candidate.children===void 0||Array.isArray(candidate.children))&&(candidate.tags===void 0||Array.isArray(candidate.tags));}DocumentSymbol2.is=is;})(DocumentSymbol=exports2.DocumentSymbol||(exports2.DocumentSymbol={}));var CodeActionKind;(function(CodeActionKind2){CodeActionKind2.Empty="";CodeActionKind2.QuickFix="quickfix";CodeActionKind2.Refactor="refactor";CodeActionKind2.RefactorExtract="refactor.extract";CodeActionKind2.RefactorInline="refactor.inline";CodeActionKind2.RefactorRewrite="refactor.rewrite";CodeActionKind2.Source="source";CodeActionKind2.SourceOrganizeImports="source.organizeImports";CodeActionKind2.SourceFixAll="source.fixAll";})(CodeActionKind=exports2.CodeActionKind||(exports2.CodeActionKind={}));var CodeActionTriggerKind;(function(CodeActionTriggerKind2){CodeActionTriggerKind2.Invoked=1;CodeActionTriggerKind2.Automatic=2;})(CodeActionTriggerKind=exports2.CodeActionTriggerKind||(exports2.CodeActionTriggerKind={}));var CodeActionContext;(function(CodeActionContext2){function create(diagnostics,only,triggerKind){var result={diagnostics:diagnostics};if(only!==void 0&&only!==null){result.only=only;}if(triggerKind!==void 0&&triggerKind!==null){result.triggerKind=triggerKind;}return result;}CodeActionContext2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.typedArray(candidate.diagnostics,Diagnostic.is)&&(candidate.only===void 0||Is.typedArray(candidate.only,Is.string))&&(candidate.triggerKind===void 0||candidate.triggerKind===CodeActionTriggerKind.Invoked||candidate.triggerKind===CodeActionTriggerKind.Automatic);}CodeActionContext2.is=is;})(CodeActionContext=exports2.CodeActionContext||(exports2.CodeActionContext={}));var CodeAction;(function(CodeAction2){function create(title,kindOrCommandOrEdit,kind){var result={title:title};var checkKind=true;if(typeof kindOrCommandOrEdit==="string"){checkKind=false;result.kind=kindOrCommandOrEdit;}else if(Command.is(kindOrCommandOrEdit)){result.command=kindOrCommandOrEdit;}else{result.edit=kindOrCommandOrEdit;}if(checkKind&&kind!==void 0){result.kind=kind;}return result;}CodeAction2.create=create;function is(value){var candidate=value;return candidate&&Is.string(candidate.title)&&(candidate.diagnostics===void 0||Is.typedArray(candidate.diagnostics,Diagnostic.is))&&(candidate.kind===void 0||Is.string(candidate.kind))&&(candidate.edit!==void 0||candidate.command!==void 0)&&(candidate.command===void 0||Command.is(candidate.command))&&(candidate.isPreferred===void 0||Is.boolean(candidate.isPreferred))&&(candidate.edit===void 0||WorkspaceEdit.is(candidate.edit));}CodeAction2.is=is;})(CodeAction=exports2.CodeAction||(exports2.CodeAction={}));var CodeLens;(function(CodeLens2){function create(range,data){var result={range:range};if(Is.defined(data)){result.data=data;}return result;}CodeLens2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.command)||Command.is(candidate.command));}CodeLens2.is=is;})(CodeLens=exports2.CodeLens||(exports2.CodeLens={}));var FormattingOptions;(function(FormattingOptions2){function create(tabSize,insertSpaces){return{tabSize:tabSize,insertSpaces:insertSpaces};}FormattingOptions2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.uinteger(candidate.tabSize)&&Is.boolean(candidate.insertSpaces);}FormattingOptions2.is=is;})(FormattingOptions=exports2.FormattingOptions||(exports2.FormattingOptions={}));var DocumentLink;(function(DocumentLink2){function create(range,target,data){return{range:range,target:target,data:data};}DocumentLink2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.target)||Is.string(candidate.target));}DocumentLink2.is=is;})(DocumentLink=exports2.DocumentLink||(exports2.DocumentLink={}));var SelectionRange;(function(SelectionRange2){function create(range,parent){return{range:range,parent:parent};}SelectionRange2.create=create;function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Range.is(candidate.range)&&(candidate.parent===void 0||SelectionRange2.is(candidate.parent));}SelectionRange2.is=is;})(SelectionRange=exports2.SelectionRange||(exports2.SelectionRange={}));var SemanticTokenTypes;(function(SemanticTokenTypes2){SemanticTokenTypes2["namespace"]="namespace";SemanticTokenTypes2["type"]="type";SemanticTokenTypes2["class"]="class";SemanticTokenTypes2["enum"]="enum";SemanticTokenTypes2["interface"]="interface";SemanticTokenTypes2["struct"]="struct";SemanticTokenTypes2["typeParameter"]="typeParameter";SemanticTokenTypes2["parameter"]="parameter";SemanticTokenTypes2["variable"]="variable";SemanticTokenTypes2["property"]="property";SemanticTokenTypes2["enumMember"]="enumMember";SemanticTokenTypes2["event"]="event";SemanticTokenTypes2["function"]="function";SemanticTokenTypes2["method"]="method";SemanticTokenTypes2["macro"]="macro";SemanticTokenTypes2["keyword"]="keyword";SemanticTokenTypes2["modifier"]="modifier";SemanticTokenTypes2["comment"]="comment";SemanticTokenTypes2["string"]="string";SemanticTokenTypes2["number"]="number";SemanticTokenTypes2["regexp"]="regexp";SemanticTokenTypes2["operator"]="operator";SemanticTokenTypes2["decorator"]="decorator";})(SemanticTokenTypes=exports2.SemanticTokenTypes||(exports2.SemanticTokenTypes={}));var SemanticTokenModifiers;(function(SemanticTokenModifiers2){SemanticTokenModifiers2["declaration"]="declaration";SemanticTokenModifiers2["definition"]="definition";SemanticTokenModifiers2["readonly"]="readonly";SemanticTokenModifiers2["static"]="static";SemanticTokenModifiers2["deprecated"]="deprecated";SemanticTokenModifiers2["abstract"]="abstract";SemanticTokenModifiers2["async"]="async";SemanticTokenModifiers2["modification"]="modification";SemanticTokenModifiers2["documentation"]="documentation";SemanticTokenModifiers2["defaultLibrary"]="defaultLibrary";})(SemanticTokenModifiers=exports2.SemanticTokenModifiers||(exports2.SemanticTokenModifiers={}));var SemanticTokens;(function(SemanticTokens2){function is(value){var candidate=value;return Is.objectLiteral(candidate)&&(candidate.resultId===void 0||typeof candidate.resultId==="string")&&Array.isArray(candidate.data)&&(candidate.data.length===0||typeof candidate.data[0]==="number");}SemanticTokens2.is=is;})(SemanticTokens=exports2.SemanticTokens||(exports2.SemanticTokens={}));var InlineValueText;(function(InlineValueText2){function create(range,text){return{range:range,text:text};}InlineValueText2.create=create;function is(value){var candidate=value;return candidate!==void 0&&candidate!==null&&Range.is(candidate.range)&&Is.string(candidate.text);}InlineValueText2.is=is;})(InlineValueText=exports2.InlineValueText||(exports2.InlineValueText={}));var InlineValueVariableLookup;(function(InlineValueVariableLookup2){function create(range,variableName,caseSensitiveLookup){return{range:range,variableName:variableName,caseSensitiveLookup:caseSensitiveLookup};}InlineValueVariableLookup2.create=create;function is(value){var candidate=value;return candidate!==void 0&&candidate!==null&&Range.is(candidate.range)&&Is.boolean(candidate.caseSensitiveLookup)&&(Is.string(candidate.variableName)||candidate.variableName===void 0);}InlineValueVariableLookup2.is=is;})(InlineValueVariableLookup=exports2.InlineValueVariableLookup||(exports2.InlineValueVariableLookup={}));var InlineValueEvaluatableExpression;(function(InlineValueEvaluatableExpression2){function create(range,expression){return{range:range,expression:expression};}InlineValueEvaluatableExpression2.create=create;function is(value){var candidate=value;return candidate!==void 0&&candidate!==null&&Range.is(candidate.range)&&(Is.string(candidate.expression)||candidate.expression===void 0);}InlineValueEvaluatableExpression2.is=is;})(InlineValueEvaluatableExpression=exports2.InlineValueEvaluatableExpression||(exports2.InlineValueEvaluatableExpression={}));var InlineValuesContext;(function(InlineValuesContext2){function create(stoppedLocation){return{stoppedLocation:stoppedLocation};}InlineValuesContext2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(value.stoppedLocation);}InlineValuesContext2.is=is;})(InlineValuesContext=exports2.InlineValuesContext||(exports2.InlineValuesContext={}));exports2.EOL=["\n","\r\n","\r"];var TextDocument;(function(TextDocument2){function create(uri,languageId,version,content){return new FullTextDocument(uri,languageId,version,content);}TextDocument2.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&(Is.undefined(candidate.languageId)||Is.string(candidate.languageId))&&Is.uinteger(candidate.lineCount)&&Is.func(candidate.getText)&&Is.func(candidate.positionAt)&&Is.func(candidate.offsetAt)?true:false;}TextDocument2.is=is;function applyEdits(document2,edits){var text=document2.getText();var sortedEdits=mergeSort(edits,function(a,b){var diff=a.range.start.line-b.range.start.line;if(diff===0){return a.range.start.character-b.range.start.character;}return diff;});var lastModifiedOffset=text.length;for(var i=sortedEdits.length-1;i>=0;i--){var e=sortedEdits[i];var startOffset=document2.offsetAt(e.range.start);var endOffset=document2.offsetAt(e.range.end);if(endOffset<=lastModifiedOffset){text=text.substring(0,startOffset)+e.newText+text.substring(endOffset,text.length);}else{throw new Error("Overlapping edit");}lastModifiedOffset=startOffset;}return text;}TextDocument2.applyEdits=applyEdits;function mergeSort(data,compare){if(data.length<=1){return data;}var p=data.length/2|0;var left=data.slice(0,p);var right=data.slice(p);mergeSort(left,compare);mergeSort(right,compare);var leftIdx=0;var rightIdx=0;var i=0;while(leftIdx<left.length&&rightIdx<right.length){var ret=compare(left[leftIdx],right[rightIdx]);if(ret<=0){data[i++]=left[leftIdx++];}else{data[i++]=right[rightIdx++];}}while(leftIdx<left.length){data[i++]=left[leftIdx++];}while(rightIdx<right.length){data[i++]=right[rightIdx++];}return data;}})(TextDocument=exports2.TextDocument||(exports2.TextDocument={}));var FullTextDocument=function(){function FullTextDocument2(uri,languageId,version,content){this._uri=uri;this._languageId=languageId;this._version=version;this._content=content;this._lineOffsets=void 0;}Object.defineProperty(FullTextDocument2.prototype,"uri",{get:function get(){return this._uri;},enumerable:false,configurable:true});Object.defineProperty(FullTextDocument2.prototype,"languageId",{get:function get(){return this._languageId;},enumerable:false,configurable:true});Object.defineProperty(FullTextDocument2.prototype,"version",{get:function get(){return this._version;},enumerable:false,configurable:true});FullTextDocument2.prototype.getText=function(range){if(range){var start=this.offsetAt(range.start);var end=this.offsetAt(range.end);return this._content.substring(start,end);}return this._content;};FullTextDocument2.prototype.update=function(event,version){this._content=event.text;this._version=version;this._lineOffsets=void 0;};FullTextDocument2.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){var lineOffsets=[];var text=this._content;var isLineStart=true;for(var i=0;i<text.length;i++){if(isLineStart){lineOffsets.push(i);isLineStart=false;}var ch=text.charAt(i);isLineStart=ch==="\r"||ch==="\n";if(ch==="\r"&&i+1<text.length&&text.charAt(i+1)==="\n"){i++;}}if(isLineStart&&text.length>0){lineOffsets.push(text.length);}this._lineOffsets=lineOffsets;}return this._lineOffsets;};FullTextDocument2.prototype.positionAt=function(offset){offset=Math.max(Math.min(offset,this._content.length),0);var lineOffsets=this.getLineOffsets();var low=0,high=lineOffsets.length;if(high===0){return Position.create(0,offset);}while(low<high){var mid=Math.floor((low+high)/2);if(lineOffsets[mid]>offset){high=mid;}else{low=mid+1;}}var line=low-1;return Position.create(line,offset-lineOffsets[line]);};FullTextDocument2.prototype.offsetAt=function(position){var lineOffsets=this.getLineOffsets();if(position.line>=lineOffsets.length){return this._content.length;}else if(position.line<0){return 0;}var lineOffset=lineOffsets[position.line];var nextLineOffset=position.line+1<lineOffsets.length?lineOffsets[position.line+1]:this._content.length;return Math.max(Math.min(lineOffset+position.character,nextLineOffset),lineOffset);};Object.defineProperty(FullTextDocument2.prototype,"lineCount",{get:function get(){return this.getLineOffsets().length;},enumerable:false,configurable:true});return FullTextDocument2;}();var Is;(function(Is2){var toString=Object.prototype.toString;function defined(value){return typeof value!=="undefined";}Is2.defined=defined;function undefined2(value){return typeof value==="undefined";}Is2.undefined=undefined2;function boolean(value){return value===true||value===false;}Is2.boolean=boolean;function string(value){return toString.call(value)==="[object String]";}Is2.string=string;function number(value){return toString.call(value)==="[object Number]";}Is2.number=number;function numberRange(value,min,max){return toString.call(value)==="[object Number]"&&min<=value&&value<=max;}Is2.numberRange=numberRange;function integer2(value){return toString.call(value)==="[object Number]"&&-2147483648<=value&&value<=2147483647;}Is2.integer=integer2;function uinteger2(value){return toString.call(value)==="[object Number]"&&0<=value&&value<=2147483647;}Is2.uinteger=uinteger2;function func(value){return toString.call(value)==="[object Function]";}Is2.func=func;function objectLiteral(value){return value!==null&&_typeof(value)==="object";}Is2.objectLiteral=objectLiteral;function typedArray(value,check){return Array.isArray(value)&&value.every(check);}Is2.typedArray=typedArray;})(Is||(Is={}));});}});// client/node_modules/vscode-languageserver-protocol/lib/common/messages.js
var require_messages2=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/messages.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonMessagesJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProtocolNotificationType=exports.ProtocolNotificationType0=exports.ProtocolRequestType=exports.ProtocolRequestType0=exports.RegistrationType=void 0;var vscode_jsonrpc_1=require_main();var RegistrationType=/*#__PURE__*/_createClass(function RegistrationType(method){_classCallCheck(this,RegistrationType);this.method=method;});exports.RegistrationType=RegistrationType;var ProtocolRequestType0=/*#__PURE__*/function(_vscode_jsonrpc_1$Req){_inherits(ProtocolRequestType0,_vscode_jsonrpc_1$Req);var _super36=_createSuper(ProtocolRequestType0);function ProtocolRequestType0(method){_classCallCheck(this,ProtocolRequestType0);return _super36.call(this,method);}return _createClass(ProtocolRequestType0);}(vscode_jsonrpc_1.RequestType0);exports.ProtocolRequestType0=ProtocolRequestType0;var ProtocolRequestType=/*#__PURE__*/function(_vscode_jsonrpc_1$Req2){_inherits(ProtocolRequestType,_vscode_jsonrpc_1$Req2);var _super37=_createSuper(ProtocolRequestType);function ProtocolRequestType(method){_classCallCheck(this,ProtocolRequestType);return _super37.call(this,method,vscode_jsonrpc_1.ParameterStructures.byName);}return _createClass(ProtocolRequestType);}(vscode_jsonrpc_1.RequestType);exports.ProtocolRequestType=ProtocolRequestType;var ProtocolNotificationType0=/*#__PURE__*/function(_vscode_jsonrpc_1$Not){_inherits(ProtocolNotificationType0,_vscode_jsonrpc_1$Not);var _super38=_createSuper(ProtocolNotificationType0);function ProtocolNotificationType0(method){_classCallCheck(this,ProtocolNotificationType0);return _super38.call(this,method);}return _createClass(ProtocolNotificationType0);}(vscode_jsonrpc_1.NotificationType0);exports.ProtocolNotificationType0=ProtocolNotificationType0;var ProtocolNotificationType=/*#__PURE__*/function(_vscode_jsonrpc_1$Not2){_inherits(ProtocolNotificationType,_vscode_jsonrpc_1$Not2);var _super39=_createSuper(ProtocolNotificationType);function ProtocolNotificationType(method){_classCallCheck(this,ProtocolNotificationType);return _super39.call(this,method,vscode_jsonrpc_1.ParameterStructures.byName);}return _createClass(ProtocolNotificationType);}(vscode_jsonrpc_1.NotificationType);exports.ProtocolNotificationType=ProtocolNotificationType;}});// client/node_modules/vscode-languageserver-protocol/lib/common/utils/is.js
var require_is3=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/utils/is.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonUtilsIsJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.objectLiteral=exports.typedArray=exports.stringArray=exports.array=exports.func=exports.error=exports.number=exports.string=exports.boolean=void 0;function boolean(value){return value===true||value===false;}exports.boolean=boolean;function string(value){return typeof value==="string"||value instanceof String;}exports.string=string;function number(value){return typeof value==="number"||value instanceof Number;}exports.number=number;function error(value){return value instanceof Error;}exports.error=error;function func(value){return typeof value==="function";}exports.func=func;function array(value){return Array.isArray(value);}exports.array=array;function stringArray(value){return array(value)&&value.every(function(elem){return string(elem);});}exports.stringArray=stringArray;function typedArray(value,check){return Array.isArray(value)&&value.every(check);}exports.typedArray=typedArray;function objectLiteral(value){return value!==null&&_typeof(value)==="object";}exports.objectLiteral=objectLiteral;}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js
var require_protocol_implementation=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolImplementationJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ImplementationRequest=void 0;var messages_1=require_messages2();var ImplementationRequest;(function(ImplementationRequest2){ImplementationRequest2.method="textDocument/implementation";ImplementationRequest2.type=new messages_1.ProtocolRequestType(ImplementationRequest2.method);})(ImplementationRequest=exports.ImplementationRequest||(exports.ImplementationRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js
var require_protocol_typeDefinition=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolTypeDefinitionJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TypeDefinitionRequest=void 0;var messages_1=require_messages2();var TypeDefinitionRequest;(function(TypeDefinitionRequest2){TypeDefinitionRequest2.method="textDocument/typeDefinition";TypeDefinitionRequest2.type=new messages_1.ProtocolRequestType(TypeDefinitionRequest2.method);})(TypeDefinitionRequest=exports.TypeDefinitionRequest||(exports.TypeDefinitionRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolders.js
var require_protocol_workspaceFolders=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolders.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolWorkspaceFoldersJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DidChangeWorkspaceFoldersNotification=exports.WorkspaceFoldersRequest=void 0;var messages_1=require_messages2();var WorkspaceFoldersRequest;(function(WorkspaceFoldersRequest2){WorkspaceFoldersRequest2.type=new messages_1.ProtocolRequestType0("workspace/workspaceFolders");})(WorkspaceFoldersRequest=exports.WorkspaceFoldersRequest||(exports.WorkspaceFoldersRequest={}));var DidChangeWorkspaceFoldersNotification;(function(DidChangeWorkspaceFoldersNotification2){DidChangeWorkspaceFoldersNotification2.type=new messages_1.ProtocolNotificationType("workspace/didChangeWorkspaceFolders");})(DidChangeWorkspaceFoldersNotification=exports.DidChangeWorkspaceFoldersNotification||(exports.DidChangeWorkspaceFoldersNotification={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js
var require_protocol_configuration=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolConfigurationJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConfigurationRequest=void 0;var messages_1=require_messages2();var ConfigurationRequest;(function(ConfigurationRequest2){ConfigurationRequest2.type=new messages_1.ProtocolRequestType("workspace/configuration");})(ConfigurationRequest=exports.ConfigurationRequest||(exports.ConfigurationRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js
var require_protocol_colorProvider=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolColorProviderJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorPresentationRequest=exports.DocumentColorRequest=void 0;var messages_1=require_messages2();var DocumentColorRequest;(function(DocumentColorRequest2){DocumentColorRequest2.method="textDocument/documentColor";DocumentColorRequest2.type=new messages_1.ProtocolRequestType(DocumentColorRequest2.method);})(DocumentColorRequest=exports.DocumentColorRequest||(exports.DocumentColorRequest={}));var ColorPresentationRequest;(function(ColorPresentationRequest2){ColorPresentationRequest2.type=new messages_1.ProtocolRequestType("textDocument/colorPresentation");})(ColorPresentationRequest=exports.ColorPresentationRequest||(exports.ColorPresentationRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js
var require_protocol_foldingRange=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolFoldingRangeJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FoldingRangeRequest=exports.FoldingRangeKind=void 0;var messages_1=require_messages2();var FoldingRangeKind;(function(FoldingRangeKind2){FoldingRangeKind2["Comment"]="comment";FoldingRangeKind2["Imports"]="imports";FoldingRangeKind2["Region"]="region";})(FoldingRangeKind=exports.FoldingRangeKind||(exports.FoldingRangeKind={}));var FoldingRangeRequest;(function(FoldingRangeRequest2){FoldingRangeRequest2.method="textDocument/foldingRange";FoldingRangeRequest2.type=new messages_1.ProtocolRequestType(FoldingRangeRequest2.method);})(FoldingRangeRequest=exports.FoldingRangeRequest||(exports.FoldingRangeRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js
var require_protocol_declaration=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolDeclarationJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeclarationRequest=void 0;var messages_1=require_messages2();var DeclarationRequest;(function(DeclarationRequest2){DeclarationRequest2.method="textDocument/declaration";DeclarationRequest2.type=new messages_1.ProtocolRequestType(DeclarationRequest2.method);})(DeclarationRequest=exports.DeclarationRequest||(exports.DeclarationRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js
var require_protocol_selectionRange=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolSelectionRangeJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SelectionRangeRequest=void 0;var messages_1=require_messages2();var SelectionRangeRequest;(function(SelectionRangeRequest2){SelectionRangeRequest2.method="textDocument/selectionRange";SelectionRangeRequest2.type=new messages_1.ProtocolRequestType(SelectionRangeRequest2.method);})(SelectionRangeRequest=exports.SelectionRangeRequest||(exports.SelectionRangeRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js
var require_protocol_progress=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolProgressJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkDoneProgressCancelNotification=exports.WorkDoneProgressCreateRequest=exports.WorkDoneProgress=void 0;var vscode_jsonrpc_1=require_main();var messages_1=require_messages2();var WorkDoneProgress;(function(WorkDoneProgress2){WorkDoneProgress2.type=new vscode_jsonrpc_1.ProgressType();function is(value){return value===WorkDoneProgress2.type;}WorkDoneProgress2.is=is;})(WorkDoneProgress=exports.WorkDoneProgress||(exports.WorkDoneProgress={}));var WorkDoneProgressCreateRequest;(function(WorkDoneProgressCreateRequest2){WorkDoneProgressCreateRequest2.type=new messages_1.ProtocolRequestType("window/workDoneProgress/create");})(WorkDoneProgressCreateRequest=exports.WorkDoneProgressCreateRequest||(exports.WorkDoneProgressCreateRequest={}));var WorkDoneProgressCancelNotification;(function(WorkDoneProgressCancelNotification2){WorkDoneProgressCancelNotification2.type=new messages_1.ProtocolNotificationType("window/workDoneProgress/cancel");})(WorkDoneProgressCancelNotification=exports.WorkDoneProgressCancelNotification||(exports.WorkDoneProgressCancelNotification={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js
var require_protocol_callHierarchy=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolCallHierarchyJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallHierarchyOutgoingCallsRequest=exports.CallHierarchyIncomingCallsRequest=exports.CallHierarchyPrepareRequest=void 0;var messages_1=require_messages2();var CallHierarchyPrepareRequest;(function(CallHierarchyPrepareRequest2){CallHierarchyPrepareRequest2.method="textDocument/prepareCallHierarchy";CallHierarchyPrepareRequest2.type=new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest2.method);})(CallHierarchyPrepareRequest=exports.CallHierarchyPrepareRequest||(exports.CallHierarchyPrepareRequest={}));var CallHierarchyIncomingCallsRequest;(function(CallHierarchyIncomingCallsRequest2){CallHierarchyIncomingCallsRequest2.method="callHierarchy/incomingCalls";CallHierarchyIncomingCallsRequest2.type=new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest2.method);})(CallHierarchyIncomingCallsRequest=exports.CallHierarchyIncomingCallsRequest||(exports.CallHierarchyIncomingCallsRequest={}));var CallHierarchyOutgoingCallsRequest;(function(CallHierarchyOutgoingCallsRequest2){CallHierarchyOutgoingCallsRequest2.method="callHierarchy/outgoingCalls";CallHierarchyOutgoingCallsRequest2.type=new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest2.method);})(CallHierarchyOutgoingCallsRequest=exports.CallHierarchyOutgoingCallsRequest||(exports.CallHierarchyOutgoingCallsRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js
var require_protocol_semanticTokens=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolSemanticTokensJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SemanticTokensRefreshRequest=exports.SemanticTokensRangeRequest=exports.SemanticTokensDeltaRequest=exports.SemanticTokensRequest=exports.SemanticTokensRegistrationType=exports.TokenFormat=void 0;var messages_1=require_messages2();var TokenFormat;(function(TokenFormat2){TokenFormat2.Relative="relative";})(TokenFormat=exports.TokenFormat||(exports.TokenFormat={}));var SemanticTokensRegistrationType;(function(SemanticTokensRegistrationType2){SemanticTokensRegistrationType2.method="textDocument/semanticTokens";SemanticTokensRegistrationType2.type=new messages_1.RegistrationType(SemanticTokensRegistrationType2.method);})(SemanticTokensRegistrationType=exports.SemanticTokensRegistrationType||(exports.SemanticTokensRegistrationType={}));var SemanticTokensRequest;(function(SemanticTokensRequest2){SemanticTokensRequest2.method="textDocument/semanticTokens/full";SemanticTokensRequest2.type=new messages_1.ProtocolRequestType(SemanticTokensRequest2.method);})(SemanticTokensRequest=exports.SemanticTokensRequest||(exports.SemanticTokensRequest={}));var SemanticTokensDeltaRequest;(function(SemanticTokensDeltaRequest2){SemanticTokensDeltaRequest2.method="textDocument/semanticTokens/full/delta";SemanticTokensDeltaRequest2.type=new messages_1.ProtocolRequestType(SemanticTokensDeltaRequest2.method);})(SemanticTokensDeltaRequest=exports.SemanticTokensDeltaRequest||(exports.SemanticTokensDeltaRequest={}));var SemanticTokensRangeRequest;(function(SemanticTokensRangeRequest2){SemanticTokensRangeRequest2.method="textDocument/semanticTokens/range";SemanticTokensRangeRequest2.type=new messages_1.ProtocolRequestType(SemanticTokensRangeRequest2.method);})(SemanticTokensRangeRequest=exports.SemanticTokensRangeRequest||(exports.SemanticTokensRangeRequest={}));var SemanticTokensRefreshRequest;(function(SemanticTokensRefreshRequest2){SemanticTokensRefreshRequest2.method="workspace/semanticTokens/refresh";SemanticTokensRefreshRequest2.type=new messages_1.ProtocolRequestType0(SemanticTokensRefreshRequest2.method);})(SemanticTokensRefreshRequest=exports.SemanticTokensRefreshRequest||(exports.SemanticTokensRefreshRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js
var require_protocol_showDocument=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolShowDocumentJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShowDocumentRequest=void 0;var messages_1=require_messages2();var ShowDocumentRequest;(function(ShowDocumentRequest2){ShowDocumentRequest2.method="window/showDocument";ShowDocumentRequest2.type=new messages_1.ProtocolRequestType(ShowDocumentRequest2.method);})(ShowDocumentRequest=exports.ShowDocumentRequest||(exports.ShowDocumentRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js
var require_protocol_linkedEditingRange=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolLinkedEditingRangeJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LinkedEditingRangeRequest=void 0;var messages_1=require_messages2();var LinkedEditingRangeRequest;(function(LinkedEditingRangeRequest2){LinkedEditingRangeRequest2.method="textDocument/linkedEditingRange";LinkedEditingRangeRequest2.type=new messages_1.ProtocolRequestType(LinkedEditingRangeRequest2.method);})(LinkedEditingRangeRequest=exports.LinkedEditingRangeRequest||(exports.LinkedEditingRangeRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js
var require_protocol_fileOperations=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolFileOperationsJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WillDeleteFilesRequest=exports.DidDeleteFilesNotification=exports.DidRenameFilesNotification=exports.WillRenameFilesRequest=exports.DidCreateFilesNotification=exports.WillCreateFilesRequest=exports.FileOperationPatternKind=void 0;var messages_1=require_messages2();var FileOperationPatternKind;(function(FileOperationPatternKind2){FileOperationPatternKind2.file="file";FileOperationPatternKind2.folder="folder";})(FileOperationPatternKind=exports.FileOperationPatternKind||(exports.FileOperationPatternKind={}));var WillCreateFilesRequest;(function(WillCreateFilesRequest2){WillCreateFilesRequest2.method="workspace/willCreateFiles";WillCreateFilesRequest2.type=new messages_1.ProtocolRequestType(WillCreateFilesRequest2.method);})(WillCreateFilesRequest=exports.WillCreateFilesRequest||(exports.WillCreateFilesRequest={}));var DidCreateFilesNotification;(function(DidCreateFilesNotification2){DidCreateFilesNotification2.method="workspace/didCreateFiles";DidCreateFilesNotification2.type=new messages_1.ProtocolNotificationType(DidCreateFilesNotification2.method);})(DidCreateFilesNotification=exports.DidCreateFilesNotification||(exports.DidCreateFilesNotification={}));var WillRenameFilesRequest;(function(WillRenameFilesRequest2){WillRenameFilesRequest2.method="workspace/willRenameFiles";WillRenameFilesRequest2.type=new messages_1.ProtocolRequestType(WillRenameFilesRequest2.method);})(WillRenameFilesRequest=exports.WillRenameFilesRequest||(exports.WillRenameFilesRequest={}));var DidRenameFilesNotification;(function(DidRenameFilesNotification2){DidRenameFilesNotification2.method="workspace/didRenameFiles";DidRenameFilesNotification2.type=new messages_1.ProtocolNotificationType(DidRenameFilesNotification2.method);})(DidRenameFilesNotification=exports.DidRenameFilesNotification||(exports.DidRenameFilesNotification={}));var DidDeleteFilesNotification;(function(DidDeleteFilesNotification2){DidDeleteFilesNotification2.method="workspace/didDeleteFiles";DidDeleteFilesNotification2.type=new messages_1.ProtocolNotificationType(DidDeleteFilesNotification2.method);})(DidDeleteFilesNotification=exports.DidDeleteFilesNotification||(exports.DidDeleteFilesNotification={}));var WillDeleteFilesRequest;(function(WillDeleteFilesRequest2){WillDeleteFilesRequest2.method="workspace/willDeleteFiles";WillDeleteFilesRequest2.type=new messages_1.ProtocolRequestType(WillDeleteFilesRequest2.method);})(WillDeleteFilesRequest=exports.WillDeleteFilesRequest||(exports.WillDeleteFilesRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js
var require_protocol_moniker=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolMonikerJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MonikerRequest=exports.MonikerKind=exports.UniquenessLevel=void 0;var messages_1=require_messages2();var UniquenessLevel;(function(UniquenessLevel2){UniquenessLevel2["document"]="document";UniquenessLevel2["project"]="project";UniquenessLevel2["group"]="group";UniquenessLevel2["scheme"]="scheme";UniquenessLevel2["global"]="global";})(UniquenessLevel=exports.UniquenessLevel||(exports.UniquenessLevel={}));var MonikerKind;(function(MonikerKind2){MonikerKind2["import"]="import";MonikerKind2["export"]="export";MonikerKind2["local"]="local";})(MonikerKind=exports.MonikerKind||(exports.MonikerKind={}));var MonikerRequest;(function(MonikerRequest2){MonikerRequest2.method="textDocument/moniker";MonikerRequest2.type=new messages_1.ProtocolRequestType(MonikerRequest2.method);})(MonikerRequest=exports.MonikerRequest||(exports.MonikerRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/protocol.js
var require_protocol=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/protocol.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProtocolJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CodeLensRefreshRequest=exports.CodeLensResolveRequest=exports.CodeLensRequest=exports.WorkspaceSymbolResolveRequest=exports.WorkspaceSymbolRequest=exports.CodeActionResolveRequest=exports.CodeActionRequest=exports.DocumentSymbolRequest=exports.DocumentHighlightRequest=exports.ReferencesRequest=exports.DefinitionRequest=exports.SignatureHelpRequest=exports.SignatureHelpTriggerKind=exports.HoverRequest=exports.CompletionResolveRequest=exports.CompletionRequest=exports.CompletionTriggerKind=exports.PublishDiagnosticsNotification=exports.WatchKind=exports.FileChangeType=exports.DidChangeWatchedFilesNotification=exports.WillSaveTextDocumentWaitUntilRequest=exports.WillSaveTextDocumentNotification=exports.TextDocumentSaveReason=exports.DidSaveTextDocumentNotification=exports.DidCloseTextDocumentNotification=exports.DidChangeTextDocumentNotification=exports.TextDocumentContentChangeEvent=exports.DidOpenTextDocumentNotification=exports.TextDocumentSyncKind=exports.TelemetryEventNotification=exports.LogMessageNotification=exports.ShowMessageRequest=exports.ShowMessageNotification=exports.MessageType=exports.DidChangeConfigurationNotification=exports.ExitNotification=exports.ShutdownRequest=exports.InitializedNotification=exports.InitializeError=exports.InitializeRequest=exports.WorkDoneProgressOptions=exports.TextDocumentRegistrationOptions=exports.StaticRegistrationOptions=exports.FailureHandlingKind=exports.ResourceOperationKind=exports.UnregistrationRequest=exports.RegistrationRequest=exports.DocumentSelector=exports.DocumentFilter=void 0;exports.MonikerRequest=exports.MonikerKind=exports.UniquenessLevel=exports.WillDeleteFilesRequest=exports.DidDeleteFilesNotification=exports.WillRenameFilesRequest=exports.DidRenameFilesNotification=exports.WillCreateFilesRequest=exports.DidCreateFilesNotification=exports.FileOperationPatternKind=exports.LinkedEditingRangeRequest=exports.ShowDocumentRequest=exports.SemanticTokensRegistrationType=exports.SemanticTokensRefreshRequest=exports.SemanticTokensRangeRequest=exports.SemanticTokensDeltaRequest=exports.SemanticTokensRequest=exports.TokenFormat=exports.CallHierarchyPrepareRequest=exports.CallHierarchyOutgoingCallsRequest=exports.CallHierarchyIncomingCallsRequest=exports.WorkDoneProgressCancelNotification=exports.WorkDoneProgressCreateRequest=exports.WorkDoneProgress=exports.SelectionRangeRequest=exports.DeclarationRequest=exports.FoldingRangeRequest=exports.ColorPresentationRequest=exports.DocumentColorRequest=exports.ConfigurationRequest=exports.DidChangeWorkspaceFoldersNotification=exports.WorkspaceFoldersRequest=exports.TypeDefinitionRequest=exports.ImplementationRequest=exports.ApplyWorkspaceEditRequest=exports.ExecuteCommandRequest=exports.PrepareRenameRequest=exports.RenameRequest=exports.PrepareSupportDefaultBehavior=exports.DocumentOnTypeFormattingRequest=exports.DocumentRangeFormattingRequest=exports.DocumentFormattingRequest=exports.DocumentLinkResolveRequest=exports.DocumentLinkRequest=void 0;var messages_1=require_messages2();var Is=require_is3();var protocol_implementation_1=require_protocol_implementation();Object.defineProperty(exports,"ImplementationRequest",{enumerable:true,get:function get(){return protocol_implementation_1.ImplementationRequest;}});var protocol_typeDefinition_1=require_protocol_typeDefinition();Object.defineProperty(exports,"TypeDefinitionRequest",{enumerable:true,get:function get(){return protocol_typeDefinition_1.TypeDefinitionRequest;}});var protocol_workspaceFolders_1=require_protocol_workspaceFolders();Object.defineProperty(exports,"WorkspaceFoldersRequest",{enumerable:true,get:function get(){return protocol_workspaceFolders_1.WorkspaceFoldersRequest;}});Object.defineProperty(exports,"DidChangeWorkspaceFoldersNotification",{enumerable:true,get:function get(){return protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;}});var protocol_configuration_1=require_protocol_configuration();Object.defineProperty(exports,"ConfigurationRequest",{enumerable:true,get:function get(){return protocol_configuration_1.ConfigurationRequest;}});var protocol_colorProvider_1=require_protocol_colorProvider();Object.defineProperty(exports,"DocumentColorRequest",{enumerable:true,get:function get(){return protocol_colorProvider_1.DocumentColorRequest;}});Object.defineProperty(exports,"ColorPresentationRequest",{enumerable:true,get:function get(){return protocol_colorProvider_1.ColorPresentationRequest;}});var protocol_foldingRange_1=require_protocol_foldingRange();Object.defineProperty(exports,"FoldingRangeRequest",{enumerable:true,get:function get(){return protocol_foldingRange_1.FoldingRangeRequest;}});var protocol_declaration_1=require_protocol_declaration();Object.defineProperty(exports,"DeclarationRequest",{enumerable:true,get:function get(){return protocol_declaration_1.DeclarationRequest;}});var protocol_selectionRange_1=require_protocol_selectionRange();Object.defineProperty(exports,"SelectionRangeRequest",{enumerable:true,get:function get(){return protocol_selectionRange_1.SelectionRangeRequest;}});var protocol_progress_1=require_protocol_progress();Object.defineProperty(exports,"WorkDoneProgress",{enumerable:true,get:function get(){return protocol_progress_1.WorkDoneProgress;}});Object.defineProperty(exports,"WorkDoneProgressCreateRequest",{enumerable:true,get:function get(){return protocol_progress_1.WorkDoneProgressCreateRequest;}});Object.defineProperty(exports,"WorkDoneProgressCancelNotification",{enumerable:true,get:function get(){return protocol_progress_1.WorkDoneProgressCancelNotification;}});var protocol_callHierarchy_1=require_protocol_callHierarchy();Object.defineProperty(exports,"CallHierarchyIncomingCallsRequest",{enumerable:true,get:function get(){return protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest;}});Object.defineProperty(exports,"CallHierarchyOutgoingCallsRequest",{enumerable:true,get:function get(){return protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest;}});Object.defineProperty(exports,"CallHierarchyPrepareRequest",{enumerable:true,get:function get(){return protocol_callHierarchy_1.CallHierarchyPrepareRequest;}});var protocol_semanticTokens_1=require_protocol_semanticTokens();Object.defineProperty(exports,"TokenFormat",{enumerable:true,get:function get(){return protocol_semanticTokens_1.TokenFormat;}});Object.defineProperty(exports,"SemanticTokensRequest",{enumerable:true,get:function get(){return protocol_semanticTokens_1.SemanticTokensRequest;}});Object.defineProperty(exports,"SemanticTokensDeltaRequest",{enumerable:true,get:function get(){return protocol_semanticTokens_1.SemanticTokensDeltaRequest;}});Object.defineProperty(exports,"SemanticTokensRangeRequest",{enumerable:true,get:function get(){return protocol_semanticTokens_1.SemanticTokensRangeRequest;}});Object.defineProperty(exports,"SemanticTokensRefreshRequest",{enumerable:true,get:function get(){return protocol_semanticTokens_1.SemanticTokensRefreshRequest;}});Object.defineProperty(exports,"SemanticTokensRegistrationType",{enumerable:true,get:function get(){return protocol_semanticTokens_1.SemanticTokensRegistrationType;}});var protocol_showDocument_1=require_protocol_showDocument();Object.defineProperty(exports,"ShowDocumentRequest",{enumerable:true,get:function get(){return protocol_showDocument_1.ShowDocumentRequest;}});var protocol_linkedEditingRange_1=require_protocol_linkedEditingRange();Object.defineProperty(exports,"LinkedEditingRangeRequest",{enumerable:true,get:function get(){return protocol_linkedEditingRange_1.LinkedEditingRangeRequest;}});var protocol_fileOperations_1=require_protocol_fileOperations();Object.defineProperty(exports,"FileOperationPatternKind",{enumerable:true,get:function get(){return protocol_fileOperations_1.FileOperationPatternKind;}});Object.defineProperty(exports,"DidCreateFilesNotification",{enumerable:true,get:function get(){return protocol_fileOperations_1.DidCreateFilesNotification;}});Object.defineProperty(exports,"WillCreateFilesRequest",{enumerable:true,get:function get(){return protocol_fileOperations_1.WillCreateFilesRequest;}});Object.defineProperty(exports,"DidRenameFilesNotification",{enumerable:true,get:function get(){return protocol_fileOperations_1.DidRenameFilesNotification;}});Object.defineProperty(exports,"WillRenameFilesRequest",{enumerable:true,get:function get(){return protocol_fileOperations_1.WillRenameFilesRequest;}});Object.defineProperty(exports,"DidDeleteFilesNotification",{enumerable:true,get:function get(){return protocol_fileOperations_1.DidDeleteFilesNotification;}});Object.defineProperty(exports,"WillDeleteFilesRequest",{enumerable:true,get:function get(){return protocol_fileOperations_1.WillDeleteFilesRequest;}});var protocol_moniker_1=require_protocol_moniker();Object.defineProperty(exports,"UniquenessLevel",{enumerable:true,get:function get(){return protocol_moniker_1.UniquenessLevel;}});Object.defineProperty(exports,"MonikerKind",{enumerable:true,get:function get(){return protocol_moniker_1.MonikerKind;}});Object.defineProperty(exports,"MonikerRequest",{enumerable:true,get:function get(){return protocol_moniker_1.MonikerRequest;}});var DocumentFilter;(function(DocumentFilter2){function is(value){var candidate=value;return Is.string(candidate.language)||Is.string(candidate.scheme)||Is.string(candidate.pattern);}DocumentFilter2.is=is;})(DocumentFilter=exports.DocumentFilter||(exports.DocumentFilter={}));var DocumentSelector;(function(DocumentSelector2){function is(value){if(!Array.isArray(value)){return false;}var _iterator17=_createForOfIteratorHelper(value),_step14;try{for(_iterator17.s();!(_step14=_iterator17.n()).done;){var elem=_step14.value;if(!Is.string(elem)&&!DocumentFilter.is(elem)){return false;}}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}return true;}DocumentSelector2.is=is;})(DocumentSelector=exports.DocumentSelector||(exports.DocumentSelector={}));var RegistrationRequest;(function(RegistrationRequest2){RegistrationRequest2.type=new messages_1.ProtocolRequestType("client/registerCapability");})(RegistrationRequest=exports.RegistrationRequest||(exports.RegistrationRequest={}));var UnregistrationRequest;(function(UnregistrationRequest2){UnregistrationRequest2.type=new messages_1.ProtocolRequestType("client/unregisterCapability");})(UnregistrationRequest=exports.UnregistrationRequest||(exports.UnregistrationRequest={}));var ResourceOperationKind;(function(ResourceOperationKind2){ResourceOperationKind2.Create="create";ResourceOperationKind2.Rename="rename";ResourceOperationKind2.Delete="delete";})(ResourceOperationKind=exports.ResourceOperationKind||(exports.ResourceOperationKind={}));var FailureHandlingKind;(function(FailureHandlingKind2){FailureHandlingKind2.Abort="abort";FailureHandlingKind2.Transactional="transactional";FailureHandlingKind2.TextOnlyTransactional="textOnlyTransactional";FailureHandlingKind2.Undo="undo";})(FailureHandlingKind=exports.FailureHandlingKind||(exports.FailureHandlingKind={}));var StaticRegistrationOptions;(function(StaticRegistrationOptions2){function hasId(value){var candidate=value;return candidate&&Is.string(candidate.id)&&candidate.id.length>0;}StaticRegistrationOptions2.hasId=hasId;})(StaticRegistrationOptions=exports.StaticRegistrationOptions||(exports.StaticRegistrationOptions={}));var TextDocumentRegistrationOptions;(function(TextDocumentRegistrationOptions2){function is(value){var candidate=value;return candidate&&(candidate.documentSelector===null||DocumentSelector.is(candidate.documentSelector));}TextDocumentRegistrationOptions2.is=is;})(TextDocumentRegistrationOptions=exports.TextDocumentRegistrationOptions||(exports.TextDocumentRegistrationOptions={}));var WorkDoneProgressOptions;(function(WorkDoneProgressOptions2){function is(value){var candidate=value;return Is.objectLiteral(candidate)&&(candidate.workDoneProgress===void 0||Is.boolean(candidate.workDoneProgress));}WorkDoneProgressOptions2.is=is;function hasWorkDoneProgress(value){var candidate=value;return candidate&&Is.boolean(candidate.workDoneProgress);}WorkDoneProgressOptions2.hasWorkDoneProgress=hasWorkDoneProgress;})(WorkDoneProgressOptions=exports.WorkDoneProgressOptions||(exports.WorkDoneProgressOptions={}));var InitializeRequest;(function(InitializeRequest2){InitializeRequest2.type=new messages_1.ProtocolRequestType("initialize");})(InitializeRequest=exports.InitializeRequest||(exports.InitializeRequest={}));var InitializeError;(function(InitializeError2){InitializeError2.unknownProtocolVersion=1;})(InitializeError=exports.InitializeError||(exports.InitializeError={}));var InitializedNotification;(function(InitializedNotification2){InitializedNotification2.type=new messages_1.ProtocolNotificationType("initialized");})(InitializedNotification=exports.InitializedNotification||(exports.InitializedNotification={}));var ShutdownRequest;(function(ShutdownRequest2){ShutdownRequest2.type=new messages_1.ProtocolRequestType0("shutdown");})(ShutdownRequest=exports.ShutdownRequest||(exports.ShutdownRequest={}));var ExitNotification;(function(ExitNotification2){ExitNotification2.type=new messages_1.ProtocolNotificationType0("exit");})(ExitNotification=exports.ExitNotification||(exports.ExitNotification={}));var DidChangeConfigurationNotification;(function(DidChangeConfigurationNotification2){DidChangeConfigurationNotification2.type=new messages_1.ProtocolNotificationType("workspace/didChangeConfiguration");})(DidChangeConfigurationNotification=exports.DidChangeConfigurationNotification||(exports.DidChangeConfigurationNotification={}));var MessageType;(function(MessageType2){MessageType2.Error=1;MessageType2.Warning=2;MessageType2.Info=3;MessageType2.Log=4;})(MessageType=exports.MessageType||(exports.MessageType={}));var ShowMessageNotification;(function(ShowMessageNotification2){ShowMessageNotification2.type=new messages_1.ProtocolNotificationType("window/showMessage");})(ShowMessageNotification=exports.ShowMessageNotification||(exports.ShowMessageNotification={}));var ShowMessageRequest;(function(ShowMessageRequest2){ShowMessageRequest2.type=new messages_1.ProtocolRequestType("window/showMessageRequest");})(ShowMessageRequest=exports.ShowMessageRequest||(exports.ShowMessageRequest={}));var LogMessageNotification;(function(LogMessageNotification2){LogMessageNotification2.type=new messages_1.ProtocolNotificationType("window/logMessage");})(LogMessageNotification=exports.LogMessageNotification||(exports.LogMessageNotification={}));var TelemetryEventNotification;(function(TelemetryEventNotification2){TelemetryEventNotification2.type=new messages_1.ProtocolNotificationType("telemetry/event");})(TelemetryEventNotification=exports.TelemetryEventNotification||(exports.TelemetryEventNotification={}));var TextDocumentSyncKind;(function(TextDocumentSyncKind2){TextDocumentSyncKind2.None=0;TextDocumentSyncKind2.Full=1;TextDocumentSyncKind2.Incremental=2;})(TextDocumentSyncKind=exports.TextDocumentSyncKind||(exports.TextDocumentSyncKind={}));var DidOpenTextDocumentNotification;(function(DidOpenTextDocumentNotification2){DidOpenTextDocumentNotification2.method="textDocument/didOpen";DidOpenTextDocumentNotification2.type=new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification2.method);})(DidOpenTextDocumentNotification=exports.DidOpenTextDocumentNotification||(exports.DidOpenTextDocumentNotification={}));var TextDocumentContentChangeEvent;(function(TextDocumentContentChangeEvent2){function isIncremental(event){var candidate=event;return candidate!==void 0&&candidate!==null&&typeof candidate.text==="string"&&candidate.range!==void 0&&(candidate.rangeLength===void 0||typeof candidate.rangeLength==="number");}TextDocumentContentChangeEvent2.isIncremental=isIncremental;function isFull(event){var candidate=event;return candidate!==void 0&&candidate!==null&&typeof candidate.text==="string"&&candidate.range===void 0&&candidate.rangeLength===void 0;}TextDocumentContentChangeEvent2.isFull=isFull;})(TextDocumentContentChangeEvent=exports.TextDocumentContentChangeEvent||(exports.TextDocumentContentChangeEvent={}));var DidChangeTextDocumentNotification;(function(DidChangeTextDocumentNotification2){DidChangeTextDocumentNotification2.method="textDocument/didChange";DidChangeTextDocumentNotification2.type=new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification2.method);})(DidChangeTextDocumentNotification=exports.DidChangeTextDocumentNotification||(exports.DidChangeTextDocumentNotification={}));var DidCloseTextDocumentNotification;(function(DidCloseTextDocumentNotification2){DidCloseTextDocumentNotification2.method="textDocument/didClose";DidCloseTextDocumentNotification2.type=new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification2.method);})(DidCloseTextDocumentNotification=exports.DidCloseTextDocumentNotification||(exports.DidCloseTextDocumentNotification={}));var DidSaveTextDocumentNotification;(function(DidSaveTextDocumentNotification2){DidSaveTextDocumentNotification2.method="textDocument/didSave";DidSaveTextDocumentNotification2.type=new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification2.method);})(DidSaveTextDocumentNotification=exports.DidSaveTextDocumentNotification||(exports.DidSaveTextDocumentNotification={}));var TextDocumentSaveReason;(function(TextDocumentSaveReason2){TextDocumentSaveReason2.Manual=1;TextDocumentSaveReason2.AfterDelay=2;TextDocumentSaveReason2.FocusOut=3;})(TextDocumentSaveReason=exports.TextDocumentSaveReason||(exports.TextDocumentSaveReason={}));var WillSaveTextDocumentNotification;(function(WillSaveTextDocumentNotification2){WillSaveTextDocumentNotification2.method="textDocument/willSave";WillSaveTextDocumentNotification2.type=new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification2.method);})(WillSaveTextDocumentNotification=exports.WillSaveTextDocumentNotification||(exports.WillSaveTextDocumentNotification={}));var WillSaveTextDocumentWaitUntilRequest;(function(WillSaveTextDocumentWaitUntilRequest2){WillSaveTextDocumentWaitUntilRequest2.method="textDocument/willSaveWaitUntil";WillSaveTextDocumentWaitUntilRequest2.type=new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest2.method);})(WillSaveTextDocumentWaitUntilRequest=exports.WillSaveTextDocumentWaitUntilRequest||(exports.WillSaveTextDocumentWaitUntilRequest={}));var DidChangeWatchedFilesNotification;(function(DidChangeWatchedFilesNotification2){DidChangeWatchedFilesNotification2.type=new messages_1.ProtocolNotificationType("workspace/didChangeWatchedFiles");})(DidChangeWatchedFilesNotification=exports.DidChangeWatchedFilesNotification||(exports.DidChangeWatchedFilesNotification={}));var FileChangeType;(function(FileChangeType2){FileChangeType2.Created=1;FileChangeType2.Changed=2;FileChangeType2.Deleted=3;})(FileChangeType=exports.FileChangeType||(exports.FileChangeType={}));var WatchKind;(function(WatchKind2){WatchKind2.Create=1;WatchKind2.Change=2;WatchKind2.Delete=4;})(WatchKind=exports.WatchKind||(exports.WatchKind={}));var PublishDiagnosticsNotification;(function(PublishDiagnosticsNotification2){PublishDiagnosticsNotification2.type=new messages_1.ProtocolNotificationType("textDocument/publishDiagnostics");})(PublishDiagnosticsNotification=exports.PublishDiagnosticsNotification||(exports.PublishDiagnosticsNotification={}));var CompletionTriggerKind;(function(CompletionTriggerKind2){CompletionTriggerKind2.Invoked=1;CompletionTriggerKind2.TriggerCharacter=2;CompletionTriggerKind2.TriggerForIncompleteCompletions=3;})(CompletionTriggerKind=exports.CompletionTriggerKind||(exports.CompletionTriggerKind={}));var CompletionRequest;(function(CompletionRequest2){CompletionRequest2.method="textDocument/completion";CompletionRequest2.type=new messages_1.ProtocolRequestType(CompletionRequest2.method);})(CompletionRequest=exports.CompletionRequest||(exports.CompletionRequest={}));var CompletionResolveRequest;(function(CompletionResolveRequest2){CompletionResolveRequest2.method="completionItem/resolve";CompletionResolveRequest2.type=new messages_1.ProtocolRequestType(CompletionResolveRequest2.method);})(CompletionResolveRequest=exports.CompletionResolveRequest||(exports.CompletionResolveRequest={}));var HoverRequest;(function(HoverRequest2){HoverRequest2.method="textDocument/hover";HoverRequest2.type=new messages_1.ProtocolRequestType(HoverRequest2.method);})(HoverRequest=exports.HoverRequest||(exports.HoverRequest={}));var SignatureHelpTriggerKind;(function(SignatureHelpTriggerKind2){SignatureHelpTriggerKind2.Invoked=1;SignatureHelpTriggerKind2.TriggerCharacter=2;SignatureHelpTriggerKind2.ContentChange=3;})(SignatureHelpTriggerKind=exports.SignatureHelpTriggerKind||(exports.SignatureHelpTriggerKind={}));var SignatureHelpRequest;(function(SignatureHelpRequest2){SignatureHelpRequest2.method="textDocument/signatureHelp";SignatureHelpRequest2.type=new messages_1.ProtocolRequestType(SignatureHelpRequest2.method);})(SignatureHelpRequest=exports.SignatureHelpRequest||(exports.SignatureHelpRequest={}));var DefinitionRequest;(function(DefinitionRequest2){DefinitionRequest2.method="textDocument/definition";DefinitionRequest2.type=new messages_1.ProtocolRequestType(DefinitionRequest2.method);})(DefinitionRequest=exports.DefinitionRequest||(exports.DefinitionRequest={}));var ReferencesRequest;(function(ReferencesRequest2){ReferencesRequest2.method="textDocument/references";ReferencesRequest2.type=new messages_1.ProtocolRequestType(ReferencesRequest2.method);})(ReferencesRequest=exports.ReferencesRequest||(exports.ReferencesRequest={}));var DocumentHighlightRequest;(function(DocumentHighlightRequest2){DocumentHighlightRequest2.method="textDocument/documentHighlight";DocumentHighlightRequest2.type=new messages_1.ProtocolRequestType(DocumentHighlightRequest2.method);})(DocumentHighlightRequest=exports.DocumentHighlightRequest||(exports.DocumentHighlightRequest={}));var DocumentSymbolRequest;(function(DocumentSymbolRequest2){DocumentSymbolRequest2.method="textDocument/documentSymbol";DocumentSymbolRequest2.type=new messages_1.ProtocolRequestType(DocumentSymbolRequest2.method);})(DocumentSymbolRequest=exports.DocumentSymbolRequest||(exports.DocumentSymbolRequest={}));var CodeActionRequest;(function(CodeActionRequest2){CodeActionRequest2.method="textDocument/codeAction";CodeActionRequest2.type=new messages_1.ProtocolRequestType(CodeActionRequest2.method);})(CodeActionRequest=exports.CodeActionRequest||(exports.CodeActionRequest={}));var CodeActionResolveRequest;(function(CodeActionResolveRequest2){CodeActionResolveRequest2.method="codeAction/resolve";CodeActionResolveRequest2.type=new messages_1.ProtocolRequestType(CodeActionResolveRequest2.method);})(CodeActionResolveRequest=exports.CodeActionResolveRequest||(exports.CodeActionResolveRequest={}));var WorkspaceSymbolRequest;(function(WorkspaceSymbolRequest2){WorkspaceSymbolRequest2.method="workspace/symbol";WorkspaceSymbolRequest2.type=new messages_1.ProtocolRequestType(WorkspaceSymbolRequest2.method);})(WorkspaceSymbolRequest=exports.WorkspaceSymbolRequest||(exports.WorkspaceSymbolRequest={}));var WorkspaceSymbolResolveRequest;(function(WorkspaceSymbolResolveRequest2){WorkspaceSymbolResolveRequest2.method="workspaceSymbol/resolve";WorkspaceSymbolResolveRequest2.type=new messages_1.ProtocolRequestType(WorkspaceSymbolResolveRequest2.method);})(WorkspaceSymbolResolveRequest=exports.WorkspaceSymbolResolveRequest||(exports.WorkspaceSymbolResolveRequest={}));var CodeLensRequest;(function(CodeLensRequest2){CodeLensRequest2.method="textDocument/codeLens";CodeLensRequest2.type=new messages_1.ProtocolRequestType(CodeLensRequest2.method);})(CodeLensRequest=exports.CodeLensRequest||(exports.CodeLensRequest={}));var CodeLensResolveRequest;(function(CodeLensResolveRequest2){CodeLensResolveRequest2.method="codeLens/resolve";CodeLensResolveRequest2.type=new messages_1.ProtocolRequestType(CodeLensResolveRequest2.method);})(CodeLensResolveRequest=exports.CodeLensResolveRequest||(exports.CodeLensResolveRequest={}));var CodeLensRefreshRequest;(function(CodeLensRefreshRequest2){CodeLensRefreshRequest2.method="workspace/codeLens/refresh";CodeLensRefreshRequest2.type=new messages_1.ProtocolRequestType0(CodeLensRefreshRequest2.method);})(CodeLensRefreshRequest=exports.CodeLensRefreshRequest||(exports.CodeLensRefreshRequest={}));var DocumentLinkRequest;(function(DocumentLinkRequest2){DocumentLinkRequest2.method="textDocument/documentLink";DocumentLinkRequest2.type=new messages_1.ProtocolRequestType(DocumentLinkRequest2.method);})(DocumentLinkRequest=exports.DocumentLinkRequest||(exports.DocumentLinkRequest={}));var DocumentLinkResolveRequest;(function(DocumentLinkResolveRequest2){DocumentLinkResolveRequest2.method="documentLink/resolve";DocumentLinkResolveRequest2.type=new messages_1.ProtocolRequestType(DocumentLinkResolveRequest2.method);})(DocumentLinkResolveRequest=exports.DocumentLinkResolveRequest||(exports.DocumentLinkResolveRequest={}));var DocumentFormattingRequest;(function(DocumentFormattingRequest2){DocumentFormattingRequest2.method="textDocument/formatting";DocumentFormattingRequest2.type=new messages_1.ProtocolRequestType(DocumentFormattingRequest2.method);})(DocumentFormattingRequest=exports.DocumentFormattingRequest||(exports.DocumentFormattingRequest={}));var DocumentRangeFormattingRequest;(function(DocumentRangeFormattingRequest2){DocumentRangeFormattingRequest2.method="textDocument/rangeFormatting";DocumentRangeFormattingRequest2.type=new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest2.method);})(DocumentRangeFormattingRequest=exports.DocumentRangeFormattingRequest||(exports.DocumentRangeFormattingRequest={}));var DocumentOnTypeFormattingRequest;(function(DocumentOnTypeFormattingRequest2){DocumentOnTypeFormattingRequest2.method="textDocument/onTypeFormatting";DocumentOnTypeFormattingRequest2.type=new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest2.method);})(DocumentOnTypeFormattingRequest=exports.DocumentOnTypeFormattingRequest||(exports.DocumentOnTypeFormattingRequest={}));var PrepareSupportDefaultBehavior;(function(PrepareSupportDefaultBehavior2){PrepareSupportDefaultBehavior2.Identifier=1;})(PrepareSupportDefaultBehavior=exports.PrepareSupportDefaultBehavior||(exports.PrepareSupportDefaultBehavior={}));var RenameRequest;(function(RenameRequest2){RenameRequest2.method="textDocument/rename";RenameRequest2.type=new messages_1.ProtocolRequestType(RenameRequest2.method);})(RenameRequest=exports.RenameRequest||(exports.RenameRequest={}));var PrepareRenameRequest;(function(PrepareRenameRequest2){PrepareRenameRequest2.method="textDocument/prepareRename";PrepareRenameRequest2.type=new messages_1.ProtocolRequestType(PrepareRenameRequest2.method);})(PrepareRenameRequest=exports.PrepareRenameRequest||(exports.PrepareRenameRequest={}));var ExecuteCommandRequest;(function(ExecuteCommandRequest2){ExecuteCommandRequest2.type=new messages_1.ProtocolRequestType("workspace/executeCommand");})(ExecuteCommandRequest=exports.ExecuteCommandRequest||(exports.ExecuteCommandRequest={}));var ApplyWorkspaceEditRequest;(function(ApplyWorkspaceEditRequest2){ApplyWorkspaceEditRequest2.type=new messages_1.ProtocolRequestType("workspace/applyEdit");})(ApplyWorkspaceEditRequest=exports.ApplyWorkspaceEditRequest||(exports.ApplyWorkspaceEditRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/connection.js
var require_connection2=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/connection.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonConnectionJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createProtocolConnection=void 0;var vscode_jsonrpc_1=require_main();function createProtocolConnection(input,output,logger,options){if(vscode_jsonrpc_1.ConnectionStrategy.is(options)){options={connectionStrategy:options};}return(0,vscode_jsonrpc_1.createMessageConnection)(input,output,logger,options);}exports.createProtocolConnection=createProtocolConnection;}});// client/node_modules/vscode-languageserver-protocol/lib/common/proposed.diagnostic.js
var require_proposed_diagnostic=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/proposed.diagnostic.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProposedDiagnosticJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiagnosticRefreshRequest=exports.WorkspaceDiagnosticRequest=exports.DocumentDiagnosticRequest=exports.DocumentDiagnosticReportKind=exports.DiagnosticServerCancellationData=void 0;var vscode_jsonrpc_1=require_main();var Is=require_is3();var messages_1=require_messages2();var DiagnosticServerCancellationData;(function(DiagnosticServerCancellationData2){function is(value){var candidate=value;return candidate&&Is.boolean(candidate.retriggerRequest);}DiagnosticServerCancellationData2.is=is;})(DiagnosticServerCancellationData=exports.DiagnosticServerCancellationData||(exports.DiagnosticServerCancellationData={}));var DocumentDiagnosticReportKind;(function(DocumentDiagnosticReportKind2){DocumentDiagnosticReportKind2["full"]="full";DocumentDiagnosticReportKind2["unChanged"]="unChanged";})(DocumentDiagnosticReportKind=exports.DocumentDiagnosticReportKind||(exports.DocumentDiagnosticReportKind={}));var DocumentDiagnosticRequest;(function(DocumentDiagnosticRequest2){DocumentDiagnosticRequest2.method="textDocument/diagnostic";DocumentDiagnosticRequest2.type=new messages_1.ProtocolRequestType(DocumentDiagnosticRequest2.method);DocumentDiagnosticRequest2.partialResult=new vscode_jsonrpc_1.ProgressType();})(DocumentDiagnosticRequest=exports.DocumentDiagnosticRequest||(exports.DocumentDiagnosticRequest={}));var WorkspaceDiagnosticRequest;(function(WorkspaceDiagnosticRequest2){WorkspaceDiagnosticRequest2.method="workspace/diagnostic";WorkspaceDiagnosticRequest2.type=new messages_1.ProtocolRequestType(WorkspaceDiagnosticRequest2.method);WorkspaceDiagnosticRequest2.partialResult=new vscode_jsonrpc_1.ProgressType();})(WorkspaceDiagnosticRequest=exports.WorkspaceDiagnosticRequest||(exports.WorkspaceDiagnosticRequest={}));var DiagnosticRefreshRequest;(function(DiagnosticRefreshRequest2){DiagnosticRefreshRequest2.method="workspace/diagnostic/refresh";DiagnosticRefreshRequest2.type=new messages_1.ProtocolRequestType0(DiagnosticRefreshRequest2.method);})(DiagnosticRefreshRequest=exports.DiagnosticRefreshRequest||(exports.DiagnosticRefreshRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/proposed.typeHierarchy.js
var require_proposed_typeHierarchy=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/proposed.typeHierarchy.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProposedTypeHierarchyJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TypeHierarchySubtypesRequest=exports.TypeHierarchySupertypesRequest=exports.TypeHierarchyPrepareRequest=void 0;var messages_1=require_messages2();var TypeHierarchyPrepareRequest;(function(TypeHierarchyPrepareRequest2){TypeHierarchyPrepareRequest2.method="textDocument/prepareTypeHierarchy";TypeHierarchyPrepareRequest2.type=new messages_1.ProtocolRequestType(TypeHierarchyPrepareRequest2.method);})(TypeHierarchyPrepareRequest=exports.TypeHierarchyPrepareRequest||(exports.TypeHierarchyPrepareRequest={}));var TypeHierarchySupertypesRequest;(function(TypeHierarchySupertypesRequest2){TypeHierarchySupertypesRequest2.method="typeHierarchy/supertypes";TypeHierarchySupertypesRequest2.type=new messages_1.ProtocolRequestType(TypeHierarchySupertypesRequest2.method);})(TypeHierarchySupertypesRequest=exports.TypeHierarchySupertypesRequest||(exports.TypeHierarchySupertypesRequest={}));var TypeHierarchySubtypesRequest;(function(TypeHierarchySubtypesRequest2){TypeHierarchySubtypesRequest2.method="typeHierarchy/subtypes";TypeHierarchySubtypesRequest2.type=new messages_1.ProtocolRequestType(TypeHierarchySubtypesRequest2.method);})(TypeHierarchySubtypesRequest=exports.TypeHierarchySubtypesRequest||(exports.TypeHierarchySubtypesRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/proposed.inlineValue.js
var require_proposed_inlineValue=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/proposed.inlineValue.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonProposedInlineValueJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InlineValuesRefreshRequest=exports.InlineValuesRequest=void 0;var messages_1=require_messages2();var InlineValuesRequest;(function(InlineValuesRequest2){InlineValuesRequest2.method="textDocument/inlineValues";InlineValuesRequest2.type=new messages_1.ProtocolRequestType(InlineValuesRequest2.method);})(InlineValuesRequest=exports.InlineValuesRequest||(exports.InlineValuesRequest={}));var InlineValuesRefreshRequest;(function(InlineValuesRefreshRequest2){InlineValuesRefreshRequest2.method="workspace/inlineValues/refresh";InlineValuesRefreshRequest2.type=new messages_1.ProtocolRequestType0(InlineValuesRefreshRequest2.method);})(InlineValuesRefreshRequest=exports.InlineValuesRefreshRequest||(exports.InlineValuesRefreshRequest={}));}});// client/node_modules/vscode-languageserver-protocol/lib/common/api.js
var require_api2=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/common/api.js":function clientNode_modulesVscodeLanguageserverProtocolLibCommonApiJs(exports){"use strict";var __createBinding2=exports&&exports.__createBinding||(Object.create?function(o,m,k,k2){if(k2===void 0)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===void 0)k2=k;o[k2]=m[k];});var __exportStar=exports&&exports.__exportStar||function(m,exports2){for(var p in m){if(p!=="default"&&!Object.prototype.hasOwnProperty.call(exports2,p))__createBinding2(exports2,m,p);}};Object.defineProperty(exports,"__esModule",{value:true});exports.Proposed=exports.LSPErrorCodes=exports.createProtocolConnection=void 0;__exportStar(require_main(),exports);__exportStar(require_main2(),exports);__exportStar(require_messages2(),exports);__exportStar(require_protocol(),exports);var connection_1=require_connection2();Object.defineProperty(exports,"createProtocolConnection",{enumerable:true,get:function get(){return connection_1.createProtocolConnection;}});var LSPErrorCodes;(function(LSPErrorCodes2){LSPErrorCodes2.lspReservedErrorRangeStart=-32899;LSPErrorCodes2.RequestFailed=-32803;LSPErrorCodes2.ServerCancelled=-32802;LSPErrorCodes2.ContentModified=-32801;LSPErrorCodes2.RequestCancelled=-32800;LSPErrorCodes2.lspReservedErrorRangeEnd=-32800;})(LSPErrorCodes=exports.LSPErrorCodes||(exports.LSPErrorCodes={}));var diag=require_proposed_diagnostic();var typeh=require_proposed_typeHierarchy();var iv=require_proposed_inlineValue();var Proposed;(function(Proposed2){Proposed2.DiagnosticServerCancellationData=diag.DiagnosticServerCancellationData;Proposed2.DocumentDiagnosticReportKind=diag.DocumentDiagnosticReportKind;Proposed2.DocumentDiagnosticRequest=diag.DocumentDiagnosticRequest;Proposed2.WorkspaceDiagnosticRequest=diag.WorkspaceDiagnosticRequest;Proposed2.DiagnosticRefreshRequest=diag.DiagnosticRefreshRequest;Proposed2.TypeHierarchyPrepareRequest=typeh.TypeHierarchyPrepareRequest;Proposed2.TypeHierarchySupertypesRequest=typeh.TypeHierarchySupertypesRequest;Proposed2.TypeHierarchySubtypesRequest=typeh.TypeHierarchySubtypesRequest;Proposed2.InlineValuesRequest=iv.InlineValuesRequest;Proposed2.InlineValuesRefreshRequest=iv.InlineValuesRefreshRequest;})(Proposed=exports.Proposed||(exports.Proposed={}));}});// client/node_modules/vscode-languageserver-protocol/lib/node/main.js
var require_main3=__commonJS({"client/node_modules/vscode-languageserver-protocol/lib/node/main.js":function clientNode_modulesVscodeLanguageserverProtocolLibNodeMainJs(exports){"use strict";var __createBinding2=exports&&exports.__createBinding||(Object.create?function(o,m,k,k2){if(k2===void 0)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===void 0)k2=k;o[k2]=m[k];});var __exportStar=exports&&exports.__exportStar||function(m,exports2){for(var p in m){if(p!=="default"&&!Object.prototype.hasOwnProperty.call(exports2,p))__createBinding2(exports2,m,p);}};Object.defineProperty(exports,"__esModule",{value:true});exports.createProtocolConnection=void 0;var node_1=require_node();__exportStar(require_node(),exports);__exportStar(require_api2(),exports);function createProtocolConnection(input,output,logger,options){return(0,node_1.createMessageConnection)(input,output,logger,options);}exports.createProtocolConnection=createProtocolConnection;}});// client/node_modules/vscode-languageclient/lib/common/configuration.js
var require_configuration=__commonJS({"client/node_modules/vscode-languageclient/lib/common/configuration.js":function clientNode_modulesVscodeLanguageclientLibCommonConfigurationJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toJSONObject=exports.ConfigurationFeature=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var ConfigurationFeature=/*#__PURE__*/function(){function ConfigurationFeature(_client){_classCallCheck(this,ConfigurationFeature);this._client=_client;}_createClass(ConfigurationFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){capabilities.workspace=capabilities.workspace||{};capabilities.workspace.configuration=true;}},{key:"initialize",value:function initialize(){var _this42=this;var client=this._client;client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type,function(params,token){var configuration=function configuration(params2){var result=[];var _iterator18=_createForOfIteratorHelper(params2.items),_step15;try{for(_iterator18.s();!(_step15=_iterator18.n()).done;){var item=_step15.value;var resource=item.scopeUri!==void 0&&item.scopeUri!==null?_this42._client.protocol2CodeConverter.asUri(item.scopeUri):void 0;result.push(_this42.getConfiguration(resource,item.section!==null?item.section:void 0));}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}return result;};var middleware=client.clientOptions.middleware.workspace;return middleware&&middleware.configuration?middleware.configuration(params,token,configuration):configuration(params,token);});}},{key:"getConfiguration",value:function getConfiguration(resource,section){var result=null;if(section){var index=section.lastIndexOf(".");if(index===-1){result=toJSONObject(vscode_1.workspace.getConfiguration(void 0,resource).get(section));}else{var config=vscode_1.workspace.getConfiguration(section.substr(0,index),resource);if(config){result=toJSONObject(config.get(section.substr(index+1)));}}}else{var _config2=vscode_1.workspace.getConfiguration(void 0,resource);result={};for(var _i5=0,_Object$keys=Object.keys(_config2);_i5<_Object$keys.length;_i5++){var key=_Object$keys[_i5];if(_config2.has(key)){result[key]=toJSONObject(_config2.get(key));}}}if(result===void 0){result=null;}return result;}},{key:"dispose",value:function dispose(){}}]);return ConfigurationFeature;}();exports.ConfigurationFeature=ConfigurationFeature;function toJSONObject(obj){if(obj){if(Array.isArray(obj)){return obj.map(toJSONObject);}else if(_typeof(obj)==="object"){var res=Object.create(null);for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){res[key]=toJSONObject(obj[key]);}}return res;}}return obj;}exports.toJSONObject=toJSONObject;}});// client/node_modules/vscode-languageclient/lib/common/protocolCompletionItem.js
var require_protocolCompletionItem=__commonJS({"client/node_modules/vscode-languageclient/lib/common/protocolCompletionItem.js":function clientNode_modulesVscodeLanguageclientLibCommonProtocolCompletionItemJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var code=require("vscode");var ProtocolCompletionItem=/*#__PURE__*/function(_code$CompletionItem){_inherits(ProtocolCompletionItem,_code$CompletionItem);var _super40=_createSuper(ProtocolCompletionItem);function ProtocolCompletionItem(label){_classCallCheck(this,ProtocolCompletionItem);return _super40.call(this,label);}return _createClass(ProtocolCompletionItem);}(code.CompletionItem);exports.default=ProtocolCompletionItem;}});// client/node_modules/vscode-languageclient/lib/common/protocolCodeLens.js
var require_protocolCodeLens=__commonJS({"client/node_modules/vscode-languageclient/lib/common/protocolCodeLens.js":function clientNode_modulesVscodeLanguageclientLibCommonProtocolCodeLensJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var code=require("vscode");var ProtocolCodeLens=/*#__PURE__*/function(_code$CodeLens){_inherits(ProtocolCodeLens,_code$CodeLens);var _super41=_createSuper(ProtocolCodeLens);function ProtocolCodeLens(range){_classCallCheck(this,ProtocolCodeLens);return _super41.call(this,range);}return _createClass(ProtocolCodeLens);}(code.CodeLens);exports.default=ProtocolCodeLens;}});// client/node_modules/vscode-languageclient/lib/common/protocolDocumentLink.js
var require_protocolDocumentLink=__commonJS({"client/node_modules/vscode-languageclient/lib/common/protocolDocumentLink.js":function clientNode_modulesVscodeLanguageclientLibCommonProtocolDocumentLinkJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var code=require("vscode");var ProtocolDocumentLink=/*#__PURE__*/function(_code$DocumentLink){_inherits(ProtocolDocumentLink,_code$DocumentLink);var _super42=_createSuper(ProtocolDocumentLink);function ProtocolDocumentLink(range,target){_classCallCheck(this,ProtocolDocumentLink);return _super42.call(this,range,target);}return _createClass(ProtocolDocumentLink);}(code.DocumentLink);exports.default=ProtocolDocumentLink;}});// client/node_modules/vscode-languageclient/lib/common/protocolCodeAction.js
var require_protocolCodeAction=__commonJS({"client/node_modules/vscode-languageclient/lib/common/protocolCodeAction.js":function clientNode_modulesVscodeLanguageclientLibCommonProtocolCodeActionJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var vscode4=require("vscode");var ProtocolCodeAction=/*#__PURE__*/function(_vscode4$CodeAction){_inherits(ProtocolCodeAction,_vscode4$CodeAction);var _super43=_createSuper(ProtocolCodeAction);function ProtocolCodeAction(title,data){var _this43;_classCallCheck(this,ProtocolCodeAction);_this43=_super43.call(this,title);_this43.data=data;return _this43;}return _createClass(ProtocolCodeAction);}(vscode4.CodeAction);exports.default=ProtocolCodeAction;}});// client/node_modules/vscode-languageclient/lib/common/protocolDiagnostic.js
var require_protocolDiagnostic=__commonJS({"client/node_modules/vscode-languageclient/lib/common/protocolDiagnostic.js":function clientNode_modulesVscodeLanguageclientLibCommonProtocolDiagnosticJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProtocolDiagnostic=exports.DiagnosticCode=void 0;var vscode4=require("vscode");var Is=require_is();var DiagnosticCode;(function(DiagnosticCode2){function is(value){var candidate=value;return candidate!==void 0&&candidate!==null&&(Is.number(candidate.value)||Is.string(candidate.value))&&Is.string(candidate.target);}DiagnosticCode2.is=is;})(DiagnosticCode=exports.DiagnosticCode||(exports.DiagnosticCode={}));var ProtocolDiagnostic=/*#__PURE__*/function(_vscode4$Diagnostic){_inherits(ProtocolDiagnostic,_vscode4$Diagnostic);var _super44=_createSuper(ProtocolDiagnostic);function ProtocolDiagnostic(range,message,severity,data){var _this44;_classCallCheck(this,ProtocolDiagnostic);_this44=_super44.call(this,range,message,severity);_this44.data=data;_this44.hasDiagnosticCode=false;return _this44;}return _createClass(ProtocolDiagnostic);}(vscode4.Diagnostic);exports.ProtocolDiagnostic=ProtocolDiagnostic;}});// client/node_modules/vscode-languageclient/lib/common/protocolCallHierarchyItem.js
var require_protocolCallHierarchyItem=__commonJS({"client/node_modules/vscode-languageclient/lib/common/protocolCallHierarchyItem.js":function clientNode_modulesVscodeLanguageclientLibCommonProtocolCallHierarchyItemJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var code=require("vscode");var ProtocolCallHierarchyItem=/*#__PURE__*/function(_code$CallHierarchyIt){_inherits(ProtocolCallHierarchyItem,_code$CallHierarchyIt);var _super45=_createSuper(ProtocolCallHierarchyItem);function ProtocolCallHierarchyItem(kind,name,detail,uri,range,selectionRange,data){var _this45;_classCallCheck(this,ProtocolCallHierarchyItem);_this45=_super45.call(this,kind,name,detail,uri,range,selectionRange);if(data!==void 0){_this45.data=data;}return _this45;}return _createClass(ProtocolCallHierarchyItem);}(code.CallHierarchyItem);exports.default=ProtocolCallHierarchyItem;}});// client/node_modules/vscode-languageclient/lib/common/protocolTypeHierarchyItem.js
var require_protocolTypeHierarchyItem=__commonJS({"client/node_modules/vscode-languageclient/lib/common/protocolTypeHierarchyItem.js":function clientNode_modulesVscodeLanguageclientLibCommonProtocolTypeHierarchyItemJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var code=require("vscode");var ProtocolTypeHierarchyItem=/*#__PURE__*/function(_code$TypeHierarchyIt){_inherits(ProtocolTypeHierarchyItem,_code$TypeHierarchyIt);var _super46=_createSuper(ProtocolTypeHierarchyItem);function ProtocolTypeHierarchyItem(kind,name,detail,uri,range,selectionRange,data){var _this46;_classCallCheck(this,ProtocolTypeHierarchyItem);_this46=_super46.call(this,kind,name,detail,uri,range,selectionRange);if(data!==void 0){_this46.data=data;}return _this46;}return _createClass(ProtocolTypeHierarchyItem);}(code.TypeHierarchyItem);exports.default=ProtocolTypeHierarchyItem;}});// client/node_modules/vscode-languageclient/lib/common/protocolWorkspaceSymbol.js
var require_protocolWorkspaceSymbol=__commonJS({"client/node_modules/vscode-languageclient/lib/common/protocolWorkspaceSymbol.js":function clientNode_modulesVscodeLanguageclientLibCommonProtocolWorkspaceSymbolJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var code=require("vscode");var WorkspaceSymbol=/*#__PURE__*/function(_code$SymbolInformati){_inherits(WorkspaceSymbol,_code$SymbolInformati);var _super47=_createSuper(WorkspaceSymbol);function WorkspaceSymbol(name,kind,containerName,locationOrUri,data){var _this47;_classCallCheck(this,WorkspaceSymbol);var hasRange=!(locationOrUri instanceof code.Uri);_this47=_super47.call(this,name,kind,containerName,hasRange?locationOrUri:new code.Location(locationOrUri,new code.Range(0,0,0,0)));_this47.hasRange=hasRange;if(data!==void 0){_this47.data=data;}return _this47;}return _createClass(WorkspaceSymbol);}(code.SymbolInformation);exports.default=WorkspaceSymbol;}});// client/node_modules/vscode-languageclient/lib/common/codeConverter.js
var require_codeConverter=__commonJS({"client/node_modules/vscode-languageclient/lib/common/codeConverter.js":function clientNode_modulesVscodeLanguageclientLibCommonCodeConverterJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createConverter=void 0;var code=require("vscode");var proto=require_main3();var Is=require_is();var protocolCompletionItem_1=require_protocolCompletionItem();var protocolCodeLens_1=require_protocolCodeLens();var protocolDocumentLink_1=require_protocolDocumentLink();var protocolCodeAction_1=require_protocolCodeAction();var protocolDiagnostic_1=require_protocolDiagnostic();var protocolCallHierarchyItem_1=require_protocolCallHierarchyItem();var vscode_languageserver_protocol_1=require_main3();var protocolTypeHierarchyItem_1=require_protocolTypeHierarchyItem();var protocolWorkspaceSymbol_1=require_protocolWorkspaceSymbol();var InsertReplaceRange;(function(InsertReplaceRange2){function is(value){var candidate=value;return candidate&&!!candidate.inserting&&!!candidate.replacing;}InsertReplaceRange2.is=is;})(InsertReplaceRange||(InsertReplaceRange={}));function createConverter(uriConverter){var nullConverter=function nullConverter(value){return value.toString();};var _uriConverter=uriConverter||nullConverter;function asUri(value){return _uriConverter(value);}function asTextDocumentIdentifier(textDocument){return{uri:_uriConverter(textDocument.uri)};}function asVersionedTextDocumentIdentifier(textDocument){return{uri:_uriConverter(textDocument.uri),version:textDocument.version};}function asOpenTextDocumentParams(textDocument){return{textDocument:{uri:_uriConverter(textDocument.uri),languageId:textDocument.languageId,version:textDocument.version,text:textDocument.getText()}};}function isTextDocumentChangeEvent(value){var candidate=value;return!!candidate.document&&!!candidate.contentChanges;}function isTextDocument(value){var candidate=value;return!!candidate.uri&&!!candidate.version;}function asChangeTextDocumentParams(arg){if(isTextDocument(arg)){var result={textDocument:{uri:_uriConverter(arg.uri),version:arg.version},contentChanges:[{text:arg.getText()}]};return result;}else if(isTextDocumentChangeEvent(arg)){var document2=arg.document;var _result={textDocument:{uri:_uriConverter(document2.uri),version:document2.version},contentChanges:arg.contentChanges.map(function(change){var range=change.range;return{range:{start:{line:range.start.line,character:range.start.character},end:{line:range.end.line,character:range.end.character}},rangeLength:change.rangeLength,text:change.text};})};return _result;}else{throw Error("Unsupported text document change parameter");}}function asCloseTextDocumentParams(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)};}function asSaveTextDocumentParams(textDocument){var includeContent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var result={textDocument:asTextDocumentIdentifier(textDocument)};if(includeContent){result.text=textDocument.getText();}return result;}function asTextDocumentSaveReason(reason){switch(reason){case code.TextDocumentSaveReason.Manual:return proto.TextDocumentSaveReason.Manual;case code.TextDocumentSaveReason.AfterDelay:return proto.TextDocumentSaveReason.AfterDelay;case code.TextDocumentSaveReason.FocusOut:return proto.TextDocumentSaveReason.FocusOut;}return proto.TextDocumentSaveReason.Manual;}function asWillSaveTextDocumentParams(event){return{textDocument:asTextDocumentIdentifier(event.document),reason:asTextDocumentSaveReason(event.reason)};}function asDidCreateFilesParams(event){return{files:event.files.map(function(fileUri){return{uri:_uriConverter(fileUri)};})};}function asDidRenameFilesParams(event){return{files:event.files.map(function(file){return{oldUri:_uriConverter(file.oldUri),newUri:_uriConverter(file.newUri)};})};}function asDidDeleteFilesParams(event){return{files:event.files.map(function(fileUri){return{uri:_uriConverter(fileUri)};})};}function asWillCreateFilesParams(event){return{files:event.files.map(function(fileUri){return{uri:_uriConverter(fileUri)};})};}function asWillRenameFilesParams(event){return{files:event.files.map(function(file){return{oldUri:_uriConverter(file.oldUri),newUri:_uriConverter(file.newUri)};})};}function asWillDeleteFilesParams(event){return{files:event.files.map(function(fileUri){return{uri:_uriConverter(fileUri)};})};}function asTextDocumentPositionParams(textDocument,position){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position)};}function asCompletionTriggerKind(triggerKind){switch(triggerKind){case code.CompletionTriggerKind.TriggerCharacter:return proto.CompletionTriggerKind.TriggerCharacter;case code.CompletionTriggerKind.TriggerForIncompleteCompletions:return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return proto.CompletionTriggerKind.Invoked;}}function asCompletionParams(textDocument,position,context){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position),context:{triggerKind:asCompletionTriggerKind(context.triggerKind),triggerCharacter:context.triggerCharacter}};}function asSignatureHelpTriggerKind(triggerKind){switch(triggerKind){case code.SignatureHelpTriggerKind.Invoke:return proto.SignatureHelpTriggerKind.Invoked;case code.SignatureHelpTriggerKind.TriggerCharacter:return proto.SignatureHelpTriggerKind.TriggerCharacter;case code.SignatureHelpTriggerKind.ContentChange:return proto.SignatureHelpTriggerKind.ContentChange;}}function asParameterInformation(value){return{label:value.label};}function asParameterInformations(values){return values.map(asParameterInformation);}function asSignatureInformation(value){return{label:value.label,parameters:asParameterInformations(value.parameters)};}function asSignatureInformations(values){return values.map(asSignatureInformation);}function asSignatureHelp(value){if(value===void 0){return value;}return{signatures:asSignatureInformations(value.signatures),activeSignature:value.activeSignature,activeParameter:value.activeParameter};}function asSignatureHelpParams(textDocument,position,context){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position),context:{isRetrigger:context.isRetrigger,triggerCharacter:context.triggerCharacter,triggerKind:asSignatureHelpTriggerKind(context.triggerKind),activeSignatureHelp:asSignatureHelp(context.activeSignatureHelp)}};}function asWorkerPosition(position){return{line:position.line,character:position.character};}function asPosition(value){if(value===void 0||value===null){return value;}return{line:value.line>vscode_languageserver_protocol_1.uinteger.MAX_VALUE?vscode_languageserver_protocol_1.uinteger.MAX_VALUE:value.line,character:value.character>vscode_languageserver_protocol_1.uinteger.MAX_VALUE?vscode_languageserver_protocol_1.uinteger.MAX_VALUE:value.character};}function asPositions(value){var result=[];var _iterator19=_createForOfIteratorHelper(value),_step16;try{for(_iterator19.s();!(_step16=_iterator19.n()).done;){var elem=_step16.value;result.push(asPosition(elem));}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}return result;}function asRange(value){if(value===void 0||value===null){return value;}return{start:asPosition(value.start),end:asPosition(value.end)};}function asLocation(value){if(value===void 0||value===null){return value;}return proto.Location.create(asUri(value.uri),asRange(value.range));}function asDiagnosticSeverity(value){switch(value){case code.DiagnosticSeverity.Error:return proto.DiagnosticSeverity.Error;case code.DiagnosticSeverity.Warning:return proto.DiagnosticSeverity.Warning;case code.DiagnosticSeverity.Information:return proto.DiagnosticSeverity.Information;case code.DiagnosticSeverity.Hint:return proto.DiagnosticSeverity.Hint;}}function asDiagnosticTags(tags){if(!tags){return void 0;}var result=[];var _iterator20=_createForOfIteratorHelper(tags),_step17;try{for(_iterator20.s();!(_step17=_iterator20.n()).done;){var tag=_step17.value;var converted=asDiagnosticTag(tag);if(converted!==void 0){result.push(converted);}}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}return result.length>0?result:void 0;}function asDiagnosticTag(tag){switch(tag){case code.DiagnosticTag.Unnecessary:return proto.DiagnosticTag.Unnecessary;case code.DiagnosticTag.Deprecated:return proto.DiagnosticTag.Deprecated;default:return void 0;}}function asRelatedInformation(item){return{message:item.message,location:asLocation(item.location)};}function asRelatedInformations(items){return items.map(asRelatedInformation);}function asDiagnosticCode(value){if(value===void 0||value===null){return void 0;}if(Is.number(value)||Is.string(value)){return value;}return{value:value.value,target:asUri(value.target)};}function asDiagnostic(item){var result=proto.Diagnostic.create(asRange(item.range),item.message);var protocolDiagnostic=item instanceof protocolDiagnostic_1.ProtocolDiagnostic?item:void 0;if(protocolDiagnostic!==void 0&&protocolDiagnostic.data!==void 0){result.data=protocolDiagnostic.data;}var code2=asDiagnosticCode(item.code);if(protocolDiagnostic_1.DiagnosticCode.is(code2)){if(protocolDiagnostic!==void 0&&protocolDiagnostic.hasDiagnosticCode){result.code=code2;}else{result.code=code2.value;result.codeDescription={href:code2.target};}}else{result.code=code2;}if(Is.number(item.severity)){result.severity=asDiagnosticSeverity(item.severity);}if(Array.isArray(item.tags)){result.tags=asDiagnosticTags(item.tags);}if(item.relatedInformation){result.relatedInformation=asRelatedInformations(item.relatedInformation);}if(item.source){result.source=item.source;}return result;}function asDiagnostics(items){if(items===void 0||items===null){return items;}return items.map(asDiagnostic);}function asDocumentation(format,documentation){switch(format){case"$string":return documentation;case proto.MarkupKind.PlainText:return{kind:format,value:documentation};case proto.MarkupKind.Markdown:return{kind:format,value:documentation.value};default:return"Unsupported Markup content received. Kind is: ".concat(format);}}function asCompletionItemTag(tag){switch(tag){case code.CompletionItemTag.Deprecated:return proto.CompletionItemTag.Deprecated;}return void 0;}function asCompletionItemTags(tags){if(tags===void 0){return tags;}var result=[];var _iterator21=_createForOfIteratorHelper(tags),_step18;try{for(_iterator21.s();!(_step18=_iterator21.n()).done;){var tag=_step18.value;var converted=asCompletionItemTag(tag);if(converted!==void 0){result.push(converted);}}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}return result;}function asCompletionItemKind(value,original){if(original!==void 0){return original;}return value+1;}function asCompletionItem(item){var labelDetailsSupport=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var label;var labelDetails;if(Is.string(item.label)){label=item.label;}else{label=item.label.label;if(labelDetailsSupport&&(item.label.detail!==void 0||item.label.description!==void 0)){labelDetails={detail:item.label.detail,description:item.label.description};}}var result={label:label};if(labelDetails!==void 0){result.labelDetails=labelDetails;}var protocolItem=item instanceof protocolCompletionItem_1.default?item:void 0;if(item.detail){result.detail=item.detail;}if(item.documentation){if(!protocolItem||protocolItem.documentationFormat==="$string"){result.documentation=item.documentation;}else{result.documentation=asDocumentation(protocolItem.documentationFormat,item.documentation);}}if(item.filterText){result.filterText=item.filterText;}fillPrimaryInsertText(result,item);if(Is.number(item.kind)){result.kind=asCompletionItemKind(item.kind,protocolItem&&protocolItem.originalItemKind);}if(item.sortText){result.sortText=item.sortText;}if(item.additionalTextEdits){result.additionalTextEdits=asTextEdits(item.additionalTextEdits);}if(item.commitCharacters){result.commitCharacters=item.commitCharacters.slice();}if(item.command){result.command=asCommand(item.command);}if(item.preselect===true||item.preselect===false){result.preselect=item.preselect;}var tags=asCompletionItemTags(item.tags);if(protocolItem){if(protocolItem.data!==void 0){result.data=protocolItem.data;}if(protocolItem.deprecated===true||protocolItem.deprecated===false){if(protocolItem.deprecated===true&&tags!==void 0&&tags.length>0){var index=tags.indexOf(code.CompletionItemTag.Deprecated);if(index!==-1){tags.splice(index,1);}}result.deprecated=protocolItem.deprecated;}if(protocolItem.insertTextMode!==void 0){result.insertTextMode=protocolItem.insertTextMode;}}if(tags!==void 0&&tags.length>0){result.tags=tags;}if(result.insertTextMode===void 0&&item.keepWhitespace===true){result.insertTextMode=vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation;}return result;}function fillPrimaryInsertText(target,source){var format=proto.InsertTextFormat.PlainText;var text=void 0;var range=void 0;if(source.textEdit){text=source.textEdit.newText;range=source.textEdit.range;}else if(source.insertText instanceof code.SnippetString){format=proto.InsertTextFormat.Snippet;text=source.insertText.value;}else{text=source.insertText;}if(source.range){range=source.range;}target.insertTextFormat=format;if(source.fromEdit&&text!==void 0&&range!==void 0){target.textEdit=asCompletionTextEdit(text,range);}else{target.insertText=text;}}function asCompletionTextEdit(newText,range){if(InsertReplaceRange.is(range)){return proto.InsertReplaceEdit.create(newText,asRange(range.inserting),asRange(range.replacing));}else{return{newText:newText,range:asRange(range)};}}function asTextEdit(edit){return{range:asRange(edit.range),newText:edit.newText};}function asTextEdits(edits){if(edits===void 0||edits===null){return edits;}return edits.map(asTextEdit);}function asSymbolKind(item){if(item<=code.SymbolKind.TypeParameter){return item+1;}return proto.SymbolKind.Property;}function asSymbolTag(item){return item;}function asSymbolTags(items){return items.map(asSymbolTag);}function asReferenceParams(textDocument,position,options){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position),context:{includeDeclaration:options.includeDeclaration}};}function asCodeAction(item){var result=proto.CodeAction.create(item.title);if(item instanceof protocolCodeAction_1.default&&item.data!==void 0){result.data=item.data;}if(item.kind!==void 0){result.kind=asCodeActionKind(item.kind);}if(item.diagnostics!==void 0){result.diagnostics=asDiagnostics(item.diagnostics);}if(item.edit!==void 0){throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");}if(item.command!==void 0){result.command=asCommand(item.command);}if(item.isPreferred!==void 0){result.isPreferred=item.isPreferred;}if(item.disabled!==void 0){result.disabled={reason:item.disabled.reason};}return result;}function asCodeActionContext(context){if(context===void 0||context===null){return context;}var only;if(context.only&&Is.string(context.only.value)){only=[context.only.value];}return proto.CodeActionContext.create(asDiagnostics(context.diagnostics),only,asCodeActionTriggerKind(context.triggerKind));}function asCodeActionTriggerKind(kind){switch(kind){case code.CodeActionTriggerKind.Invoke:return proto.CodeActionTriggerKind.Invoked;case code.CodeActionTriggerKind.Automatic:return proto.CodeActionTriggerKind.Automatic;default:return void 0;}}function asCodeActionKind(item){if(item===void 0||item===null){return void 0;}return item.value;}function asInlineValuesContext(context){if(context===void 0||context===null){return context;}return proto.InlineValuesContext.create(context.stoppedLocation);}function asCommand(item){var result=proto.Command.create(item.title,item.command);if(item.arguments){result.arguments=item.arguments;}return result;}function asCodeLens(item){var result=proto.CodeLens.create(asRange(item.range));if(item.command){result.command=asCommand(item.command);}if(item instanceof protocolCodeLens_1.default){if(item.data){result.data=item.data;}}return result;}function asFormattingOptions(options,fileOptions){var result={tabSize:options.tabSize,insertSpaces:options.insertSpaces};if(fileOptions.trimTrailingWhitespace){result.trimTrailingWhitespace=true;}if(fileOptions.trimFinalNewlines){result.trimFinalNewlines=true;}if(fileOptions.insertFinalNewline){result.insertFinalNewline=true;}return result;}function asDocumentSymbolParams(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)};}function asCodeLensParams(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)};}function asDocumentLink(item){var result=proto.DocumentLink.create(asRange(item.range));if(item.target){result.target=asUri(item.target);}if(item.tooltip!==void 0){result.tooltip=item.tooltip;}var protocolItem=item instanceof protocolDocumentLink_1.default?item:void 0;if(protocolItem&&protocolItem.data){result.data=protocolItem.data;}return result;}function asDocumentLinkParams(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)};}function asCallHierarchyItem(value){var result={name:value.name,kind:asSymbolKind(value.kind),uri:asUri(value.uri),range:asRange(value.range),selectionRange:asRange(value.selectionRange)};if(value.detail!==void 0&&value.detail.length>0){result.detail=value.detail;}if(value.tags!==void 0){result.tags=asSymbolTags(value.tags);}if(value instanceof protocolCallHierarchyItem_1.default&&value.data!==void 0){result.data=value.data;}return result;}function asTypeHierarchyItem(value){var result={name:value.name,kind:asSymbolKind(value.kind),uri:asUri(value.uri),range:asRange(value.range),selectionRange:asRange(value.selectionRange)};if(value.detail!==void 0&&value.detail.length>0){result.detail=value.detail;}if(value.tags!==void 0){result.tags=asSymbolTags(value.tags);}if(value instanceof protocolTypeHierarchyItem_1.default&&value.data!==void 0){result.data=value.data;}return result;}function asWorkspaceSymbol(item){var result=item instanceof protocolWorkspaceSymbol_1.default?{name:item.name,kind:asSymbolKind(item.kind),location:item.hasRange?asLocation(item.location):{uri:_uriConverter(item.location.uri)},data:item.data}:{name:item.name,kind:asSymbolKind(item.kind),location:asLocation(item.location)};if(item.tags!==void 0){result.tags=asSymbolTags(item.tags);}if(item.containerName!==""){result.containerName=item.containerName;}return result;}return{asUri:asUri,asTextDocumentIdentifier:asTextDocumentIdentifier,asVersionedTextDocumentIdentifier:asVersionedTextDocumentIdentifier,asOpenTextDocumentParams:asOpenTextDocumentParams,asChangeTextDocumentParams:asChangeTextDocumentParams,asCloseTextDocumentParams:asCloseTextDocumentParams,asSaveTextDocumentParams:asSaveTextDocumentParams,asWillSaveTextDocumentParams:asWillSaveTextDocumentParams,asDidCreateFilesParams:asDidCreateFilesParams,asDidRenameFilesParams:asDidRenameFilesParams,asDidDeleteFilesParams:asDidDeleteFilesParams,asWillCreateFilesParams:asWillCreateFilesParams,asWillRenameFilesParams:asWillRenameFilesParams,asWillDeleteFilesParams:asWillDeleteFilesParams,asTextDocumentPositionParams:asTextDocumentPositionParams,asCompletionParams:asCompletionParams,asSignatureHelpParams:asSignatureHelpParams,asWorkerPosition:asWorkerPosition,asRange:asRange,asPosition:asPosition,asPositions:asPositions,asLocation:asLocation,asDiagnosticSeverity:asDiagnosticSeverity,asDiagnosticTag:asDiagnosticTag,asDiagnostic:asDiagnostic,asDiagnostics:asDiagnostics,asCompletionItem:asCompletionItem,asTextEdit:asTextEdit,asSymbolKind:asSymbolKind,asSymbolTag:asSymbolTag,asSymbolTags:asSymbolTags,asReferenceParams:asReferenceParams,asCodeAction:asCodeAction,asCodeActionContext:asCodeActionContext,asInlineValuesContext:asInlineValuesContext,asCommand:asCommand,asCodeLens:asCodeLens,asFormattingOptions:asFormattingOptions,asDocumentSymbolParams:asDocumentSymbolParams,asCodeLensParams:asCodeLensParams,asDocumentLink:asDocumentLink,asDocumentLinkParams:asDocumentLinkParams,asCallHierarchyItem:asCallHierarchyItem,asTypeHierarchyItem:asTypeHierarchyItem,asWorkspaceSymbol:asWorkspaceSymbol};}exports.createConverter=createConverter;}});// client/node_modules/vscode-languageclient/lib/common/protocolConverter.js
var require_protocolConverter=__commonJS({"client/node_modules/vscode-languageclient/lib/common/protocolConverter.js":function clientNode_modulesVscodeLanguageclientLibCommonProtocolConverterJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createConverter=void 0;var code=require("vscode");var ls=require_main3();var Is=require_is();var protocolCompletionItem_1=require_protocolCompletionItem();var protocolCodeLens_1=require_protocolCodeLens();var protocolDocumentLink_1=require_protocolDocumentLink();var protocolCodeAction_1=require_protocolCodeAction();var protocolDiagnostic_1=require_protocolDiagnostic();var protocolCallHierarchyItem_1=require_protocolCallHierarchyItem();var vscode_languageserver_protocol_1=require_main3();var protocolTypeHierarchyItem_1=require_protocolTypeHierarchyItem();var protocolWorkspaceSymbol_1=require_protocolWorkspaceSymbol();var CodeBlock;(function(CodeBlock2){function is(value){var candidate=value;return candidate&&Is.string(candidate.language)&&Is.string(candidate.value);}CodeBlock2.is=is;})(CodeBlock||(CodeBlock={}));function createConverter(uriConverter,trustMarkdown,supportHtml){var nullConverter=function nullConverter(value){return code.Uri.parse(value);};var _uriConverter=uriConverter||nullConverter;function asUri(value){return _uriConverter(value);}function asDiagnostics(diagnostics){return diagnostics.map(asDiagnostic);}function asDiagnostic(diagnostic){var result=new protocolDiagnostic_1.ProtocolDiagnostic(asRange(diagnostic.range),diagnostic.message,asDiagnosticSeverity(diagnostic.severity),diagnostic.data);if(diagnostic.code!==void 0){if(ls.CodeDescription.is(diagnostic.codeDescription)){result.code={value:diagnostic.code,target:asUri(diagnostic.codeDescription.href)};}else if(protocolDiagnostic_1.DiagnosticCode.is(diagnostic.code)){result.hasDiagnosticCode=true;result.code={value:diagnostic.code.value,target:asUri(diagnostic.code.target)};}else{result.code=diagnostic.code;}}if(diagnostic.source){result.source=diagnostic.source;}if(diagnostic.relatedInformation){result.relatedInformation=asRelatedInformation(diagnostic.relatedInformation);}if(Array.isArray(diagnostic.tags)){result.tags=asDiagnosticTags(diagnostic.tags);}return result;}function asRelatedInformation(relatedInformation){return relatedInformation.map(asDiagnosticRelatedInformation);}function asDiagnosticRelatedInformation(information){return new code.DiagnosticRelatedInformation(asLocation(information.location),information.message);}function asDiagnosticTags(tags){if(!tags){return void 0;}var result=[];var _iterator22=_createForOfIteratorHelper(tags),_step19;try{for(_iterator22.s();!(_step19=_iterator22.n()).done;){var tag=_step19.value;var converted=asDiagnosticTag(tag);if(converted!==void 0){result.push(converted);}}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}return result.length>0?result:void 0;}function asDiagnosticTag(tag){switch(tag){case ls.DiagnosticTag.Unnecessary:return code.DiagnosticTag.Unnecessary;case ls.DiagnosticTag.Deprecated:return code.DiagnosticTag.Deprecated;default:return void 0;}}function asPosition(value){if(!value){return void 0;}return new code.Position(value.line,value.character);}function asRange(value){if(!value){return void 0;}return new code.Range(asPosition(value.start),asPosition(value.end));}function asRanges(value){return value.map(function(value2){return asRange(value2);});}function asDiagnosticSeverity(value){if(value===void 0||value===null){return code.DiagnosticSeverity.Error;}switch(value){case ls.DiagnosticSeverity.Error:return code.DiagnosticSeverity.Error;case ls.DiagnosticSeverity.Warning:return code.DiagnosticSeverity.Warning;case ls.DiagnosticSeverity.Information:return code.DiagnosticSeverity.Information;case ls.DiagnosticSeverity.Hint:return code.DiagnosticSeverity.Hint;}return code.DiagnosticSeverity.Error;}function asHoverContent(value){if(Is.string(value)){return asMarkdownString(value);}else if(CodeBlock.is(value)){var result=asMarkdownString();return result.appendCodeblock(value.value,value.language);}else if(Array.isArray(value)){var _result2=[];var _iterator23=_createForOfIteratorHelper(value),_step20;try{for(_iterator23.s();!(_step20=_iterator23.n()).done;){var element=_step20.value;var item=asMarkdownString();if(CodeBlock.is(element)){item.appendCodeblock(element.value,element.language);}else{item.appendMarkdown(element);}_result2.push(item);}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}return _result2;}else{var _result3;switch(value.kind){case ls.MarkupKind.Markdown:return asMarkdownString(value.value);case ls.MarkupKind.PlainText:_result3=asMarkdownString();_result3.appendText(value.value);return _result3;default:_result3=asMarkdownString();_result3.appendText("Unsupported Markup content received. Kind is: ".concat(value.kind));return _result3;}}}function asDocumentation(value){if(Is.string(value)){return value;}else{switch(value.kind){case ls.MarkupKind.Markdown:return asMarkdownString(value.value);case ls.MarkupKind.PlainText:return value.value;default:return"Unsupported Markup content received. Kind is: ".concat(value.kind);}}}function asMarkdownString(value){var result=new code.MarkdownString(value);result.isTrusted=trustMarkdown;result.supportHtml=supportHtml;return result;}function asHover(hover){if(!hover){return void 0;}return new code.Hover(asHoverContent(hover.contents),asRange(hover.range));}function asCompletionResult(result,allCommitCharacters){var _list$itemDefaults,_list$itemDefaults$co,_list$itemDefaults2;if(!result){return void 0;}if(Array.isArray(result)){var items=result;return items.map(function(item){return asCompletionItem(item,allCommitCharacters);});}var list=result;var rangeDefaults=(_list$itemDefaults=list.itemDefaults)===null||_list$itemDefaults===void 0?void 0:_list$itemDefaults.editRange;var _ref3=ls.Range.is(rangeDefaults)?[asRange(rangeDefaults),void 0,void 0]:rangeDefaults!==void 0?[void 0,asRange(rangeDefaults.insert),asRange(rangeDefaults.replace)]:[void 0,void 0,void 0],_ref4=_slicedToArray(_ref3,3),range=_ref4[0],inserting=_ref4[1],replacing=_ref4[2];var commitCharacterDefaults=(_list$itemDefaults$co=(_list$itemDefaults2=list.itemDefaults)===null||_list$itemDefaults2===void 0?void 0:_list$itemDefaults2.commitCharacters)!==null&&_list$itemDefaults$co!==void 0?_list$itemDefaults$co:allCommitCharacters;return new code.CompletionList(list.items.map(function(item){var _list$itemDefaults3,_list$itemDefaults4;var result2=asCompletionItem(item,commitCharacterDefaults,(_list$itemDefaults3=list.itemDefaults)===null||_list$itemDefaults3===void 0?void 0:_list$itemDefaults3.insertTextMode,(_list$itemDefaults4=list.itemDefaults)===null||_list$itemDefaults4===void 0?void 0:_list$itemDefaults4.insertTextFormat);if(result2.range===void 0){if(range!==void 0){result2.range=range;}else if(inserting!==void 0&&replacing!==void 0){result2.range={inserting:inserting,replacing:replacing};}}return result2;}),list.isIncomplete);}function asCompletionItemKind(value){if(ls.CompletionItemKind.Text<=value&&value<=ls.CompletionItemKind.TypeParameter){return[value-1,void 0];}return[code.CompletionItemKind.Text,value];}function asCompletionItemTag(tag){switch(tag){case ls.CompletionItemTag.Deprecated:return code.CompletionItemTag.Deprecated;}return void 0;}function asCompletionItemTags(tags){if(tags===void 0||tags===null){return[];}var result=[];var _iterator24=_createForOfIteratorHelper(tags),_step21;try{for(_iterator24.s();!(_step21=_iterator24.n()).done;){var tag=_step21.value;var converted=asCompletionItemTag(tag);if(converted!==void 0){result.push(converted);}}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}return result;}function asCompletionItem(item,defaultCommitCharacters,defaultInsertTextMode,defaultInsertTextFormat){var _item$insertTextMode;var tags=asCompletionItemTags(item.tags);var label=asCompletionItemLabel(item);var result=new protocolCompletionItem_1.default(label);if(item.detail){result.detail=item.detail;}if(item.documentation){result.documentation=asDocumentation(item.documentation);result.documentationFormat=Is.string(item.documentation)?"$string":item.documentation.kind;}if(item.filterText){result.filterText=item.filterText;}var insertText=asCompletionInsertText(item,defaultInsertTextFormat);if(insertText){result.insertText=insertText.text;result.range=insertText.range;result.fromEdit=insertText.fromEdit;}if(Is.number(item.kind)){var _asCompletionItemKind=asCompletionItemKind(item.kind),_asCompletionItemKind2=_slicedToArray(_asCompletionItemKind,2),itemKind=_asCompletionItemKind2[0],original=_asCompletionItemKind2[1];result.kind=itemKind;if(original){result.originalItemKind=original;}}if(item.sortText){result.sortText=item.sortText;}if(item.additionalTextEdits){result.additionalTextEdits=asTextEdits(item.additionalTextEdits);}var commitCharacters=item.commitCharacters!==void 0?Is.stringArray(item.commitCharacters)?item.commitCharacters:void 0:defaultCommitCharacters;if(commitCharacters){result.commitCharacters=commitCharacters.slice();}if(item.command){result.command=asCommand(item.command);}if(item.deprecated===true||item.deprecated===false){result.deprecated=item.deprecated;if(item.deprecated===true){tags.push(code.CompletionItemTag.Deprecated);}}if(item.preselect===true||item.preselect===false){result.preselect=item.preselect;}if(item.data!==void 0){result.data=item.data;}if(tags.length>0){result.tags=tags;}var insertTextMode=(_item$insertTextMode=item.insertTextMode)!==null&&_item$insertTextMode!==void 0?_item$insertTextMode:defaultInsertTextMode;if(insertTextMode!==void 0){result.insertTextMode=insertTextMode;if(insertTextMode===vscode_languageserver_protocol_1.InsertTextMode.asIs){result.keepWhitespace=true;}}return result;}function asCompletionItemLabel(item){if(vscode_languageserver_protocol_1.CompletionItemLabelDetails.is(item.labelDetails)){return{label:item.label,detail:item.labelDetails.detail,description:item.labelDetails.description};}else{return item.label;}}function asCompletionInsertText(item,defaultInsertTextFormat){var _item$insertTextForma;var insertTextFormat=(_item$insertTextForma=item.insertTextFormat)!==null&&_item$insertTextForma!==void 0?_item$insertTextForma:defaultInsertTextFormat;if(item.textEdit){if(insertTextFormat===ls.InsertTextFormat.Snippet){return{text:new code.SnippetString(item.textEdit.newText),range:asCompletionRange(item.textEdit),fromEdit:true};}else{return{text:item.textEdit.newText,range:asCompletionRange(item.textEdit),fromEdit:true};}}else if(item.insertText){if(insertTextFormat===ls.InsertTextFormat.Snippet){return{text:new code.SnippetString(item.insertText),fromEdit:false};}else{return{text:item.insertText,fromEdit:false};}}else{return void 0;}}function asCompletionRange(value){if(ls.InsertReplaceEdit.is(value)){return{inserting:asRange(value.insert),replacing:asRange(value.replace)};}else{return asRange(value.range);}}function asTextEdit(edit){if(!edit){return void 0;}return new code.TextEdit(asRange(edit.range),edit.newText);}function asTextEdits(items){if(!items){return void 0;}return items.map(asTextEdit);}function asSignatureHelp(item){if(!item){return void 0;}var result=new code.SignatureHelp();if(Is.number(item.activeSignature)){result.activeSignature=item.activeSignature;}else{result.activeSignature=0;}if(Is.number(item.activeParameter)){result.activeParameter=item.activeParameter;}else{result.activeParameter=0;}if(item.signatures){result.signatures=asSignatureInformations(item.signatures);}return result;}function asSignatureInformations(items){return items.map(asSignatureInformation);}function asSignatureInformation(item){var result=new code.SignatureInformation(item.label);if(item.documentation!==void 0){result.documentation=asDocumentation(item.documentation);}if(item.parameters!==void 0){result.parameters=asParameterInformations(item.parameters);}if(item.activeParameter!==void 0){result.activeParameter=item.activeParameter;}{return result;}}function asParameterInformations(item){return item.map(asParameterInformation);}function asParameterInformation(item){var result=new code.ParameterInformation(item.label);if(item.documentation){result.documentation=asDocumentation(item.documentation);}return result;}function asLocation(item){if(!item){return void 0;}return new code.Location(_uriConverter(item.uri),asRange(item.range));}function asDeclarationResult(item){if(!item){return void 0;}return asLocationResult(item);}function asDefinitionResult(item){if(!item){return void 0;}return asLocationResult(item);}function asLocationLink(item){if(!item){return void 0;}var result={targetUri:_uriConverter(item.targetUri),targetRange:asRange(item.targetRange),originSelectionRange:asRange(item.originSelectionRange),targetSelectionRange:asRange(item.targetSelectionRange)};if(!result.targetSelectionRange){throw new Error("targetSelectionRange must not be undefined or null");}return result;}function asLocationResult(item){if(!item){return void 0;}if(Is.array(item)){if(item.length===0){return[];}else if(ls.LocationLink.is(item[0])){var links=item;return links.map(function(link){return asLocationLink(link);});}else{var locations=item;return locations.map(function(location2){return asLocation(location2);});}}else if(ls.LocationLink.is(item)){return[asLocationLink(item)];}else{return asLocation(item);}}function asReferences(values){if(!values){return void 0;}return values.map(function(location2){return asLocation(location2);});}function asDocumentHighlights(values){if(!values){return void 0;}return values.map(asDocumentHighlight);}function asDocumentHighlight(item){var result=new code.DocumentHighlight(asRange(item.range));if(Is.number(item.kind)){result.kind=asDocumentHighlightKind(item.kind);}return result;}function asDocumentHighlightKind(item){switch(item){case ls.DocumentHighlightKind.Text:return code.DocumentHighlightKind.Text;case ls.DocumentHighlightKind.Read:return code.DocumentHighlightKind.Read;case ls.DocumentHighlightKind.Write:return code.DocumentHighlightKind.Write;}return code.DocumentHighlightKind.Text;}function asSymbolInformations(values){if(!values){return void 0;}return values.map(function(information){return asSymbolInformation(information);});}function asSymbolKind(item){if(item<=ls.SymbolKind.TypeParameter){return item-1;}return code.SymbolKind.Property;}function asSymbolTag(value){switch(value){case ls.SymbolTag.Deprecated:return code.SymbolTag.Deprecated;default:return void 0;}}function asSymbolTags(items){if(items===void 0||items===null){return void 0;}var result=[];var _iterator25=_createForOfIteratorHelper(items),_step22;try{for(_iterator25.s();!(_step22=_iterator25.n()).done;){var item=_step22.value;var converted=asSymbolTag(item);if(converted!==void 0){result.push(converted);}}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}return result.length===0?void 0:result;}function asSymbolInformation(item){var _item$containerName,_item$containerName2;var data=item.data;var location2=item.location;var result=location2.range===void 0||data!==void 0?new protocolWorkspaceSymbol_1.default(item.name,asSymbolKind(item.kind),(_item$containerName=item.containerName)!==null&&_item$containerName!==void 0?_item$containerName:"",location2.range===void 0?_uriConverter(location2.uri):new code.Location(_uriConverter(item.location.uri),asRange(location2.range)),data):new code.SymbolInformation(item.name,asSymbolKind(item.kind),(_item$containerName2=item.containerName)!==null&&_item$containerName2!==void 0?_item$containerName2:"",new code.Location(_uriConverter(item.location.uri),asRange(location2.range)));fillTags(result,item);return result;}function asDocumentSymbols(values){if(values===void 0||values===null){return void 0;}return values.map(asDocumentSymbol);}function asDocumentSymbol(value){var result=new code.DocumentSymbol(value.name,value.detail||"",asSymbolKind(value.kind),asRange(value.range),asRange(value.selectionRange));fillTags(result,value);if(value.children!==void 0&&value.children.length>0){var children=[];var _iterator26=_createForOfIteratorHelper(value.children),_step23;try{for(_iterator26.s();!(_step23=_iterator26.n()).done;){var child=_step23.value;children.push(asDocumentSymbol(child));}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}result.children=children;}return result;}function fillTags(result,value){result.tags=asSymbolTags(value.tags);if(value.deprecated){if(!result.tags){result.tags=[code.SymbolTag.Deprecated];}else{if(!result.tags.includes(code.SymbolTag.Deprecated)){result.tags=result.tags.concat(code.SymbolTag.Deprecated);}}}}function asCommand(item){var result={title:item.title,command:item.command};if(item.arguments){result.arguments=item.arguments;}return result;}function asCommands(items){if(!items){return void 0;}return items.map(asCommand);}var kindMapping=new Map();kindMapping.set(ls.CodeActionKind.Empty,code.CodeActionKind.Empty);kindMapping.set(ls.CodeActionKind.QuickFix,code.CodeActionKind.QuickFix);kindMapping.set(ls.CodeActionKind.Refactor,code.CodeActionKind.Refactor);kindMapping.set(ls.CodeActionKind.RefactorExtract,code.CodeActionKind.RefactorExtract);kindMapping.set(ls.CodeActionKind.RefactorInline,code.CodeActionKind.RefactorInline);kindMapping.set(ls.CodeActionKind.RefactorRewrite,code.CodeActionKind.RefactorRewrite);kindMapping.set(ls.CodeActionKind.Source,code.CodeActionKind.Source);kindMapping.set(ls.CodeActionKind.SourceOrganizeImports,code.CodeActionKind.SourceOrganizeImports);function asCodeActionKind(item){if(item===void 0||item===null){return void 0;}var result=kindMapping.get(item);if(result){return result;}var parts=item.split(".");result=code.CodeActionKind.Empty;var _iterator27=_createForOfIteratorHelper(parts),_step24;try{for(_iterator27.s();!(_step24=_iterator27.n()).done;){var part=_step24.value;result=result.append(part);}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}return result;}function asCodeActionKinds(items){if(items===void 0||items===null){return void 0;}return items.map(function(kind){return asCodeActionKind(kind);});}function asCodeAction(item){if(item===void 0||item===null){return void 0;}var result=new protocolCodeAction_1.default(item.title,item.data);if(item.kind!==void 0){result.kind=asCodeActionKind(item.kind);}if(item.diagnostics!==void 0){result.diagnostics=asDiagnostics(item.diagnostics);}if(item.edit!==void 0){result.edit=asWorkspaceEdit(item.edit);}if(item.command!==void 0){result.command=asCommand(item.command);}if(item.isPreferred!==void 0){result.isPreferred=item.isPreferred;}if(item.disabled!==void 0){result.disabled={reason:item.disabled.reason};}return result;}function asCodeLens(item){if(!item){return void 0;}var result=new protocolCodeLens_1.default(asRange(item.range));if(item.command){result.command=asCommand(item.command);}if(item.data!==void 0&&item.data!==null){result.data=item.data;}return result;}function asCodeLenses(items){if(!items){return void 0;}return items.map(function(codeLens){return asCodeLens(codeLens);});}function asWorkspaceEdit(item){if(!item){return void 0;}var sharedMetadata=new Map();if(item.changeAnnotations!==void 0){for(var _i6=0,_Object$keys2=Object.keys(item.changeAnnotations);_i6<_Object$keys2.length;_i6++){var key=_Object$keys2[_i6];var metaData=asWorkspaceEditEntryMetadata(item.changeAnnotations[key]);sharedMetadata.set(key,metaData);}}var asMetadata=function asMetadata(annotation){if(annotation===void 0){return void 0;}else{return sharedMetadata.get(annotation);}};var result=new code.WorkspaceEdit();if(item.documentChanges){var _iterator28=_createForOfIteratorHelper(item.documentChanges),_step25;try{for(_iterator28.s();!(_step25=_iterator28.n()).done;){var change=_step25.value;if(ls.CreateFile.is(change)){result.createFile(_uriConverter(change.uri),change.options,asMetadata(change.annotationId));}else if(ls.RenameFile.is(change)){result.renameFile(_uriConverter(change.oldUri),_uriConverter(change.newUri),change.options,asMetadata(change.annotationId));}else if(ls.DeleteFile.is(change)){result.deleteFile(_uriConverter(change.uri),change.options,asMetadata(change.annotationId));}else if(ls.TextDocumentEdit.is(change)){var uri=_uriConverter(change.textDocument.uri);var _iterator29=_createForOfIteratorHelper(change.edits),_step26;try{for(_iterator29.s();!(_step26=_iterator29.n()).done;){var edit=_step26.value;if(vscode_languageserver_protocol_1.AnnotatedTextEdit.is(edit)){result.replace(uri,asRange(edit.range),edit.newText,asMetadata(edit.annotationId));}else{result.replace(uri,asRange(edit.range),edit.newText);}}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}}else{throw new Error("Unknown workspace edit change received:\n".concat(JSON.stringify(change,void 0,4)));}}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}}else if(item.changes){Object.keys(item.changes).forEach(function(key){result.set(_uriConverter(key),asTextEdits(item.changes[key]));});}return result;}function asWorkspaceEditEntryMetadata(annotation){if(annotation===void 0){return void 0;}return{label:annotation.label,needsConfirmation:!!annotation.needsConfirmation,description:annotation.description};}function asDocumentLink(item){var range=asRange(item.range);var target=item.target?asUri(item.target):void 0;var link=new protocolDocumentLink_1.default(range,target);if(item.tooltip!==void 0){link.tooltip=item.tooltip;}if(item.data!==void 0&&item.data!==null){link.data=item.data;}return link;}function asDocumentLinks(items){if(!items){return void 0;}return items.map(asDocumentLink);}function asColor(color){return new code.Color(color.red,color.green,color.blue,color.alpha);}function asColorInformation(ci){return new code.ColorInformation(asRange(ci.range),asColor(ci.color));}function asColorInformations(colorInformation){if(Array.isArray(colorInformation)){return colorInformation.map(asColorInformation);}return void 0;}function asColorPresentation(cp){var presentation=new code.ColorPresentation(cp.label);presentation.additionalTextEdits=asTextEdits(cp.additionalTextEdits);if(cp.textEdit){presentation.textEdit=asTextEdit(cp.textEdit);}return presentation;}function asColorPresentations(colorPresentations){if(Array.isArray(colorPresentations)){return colorPresentations.map(asColorPresentation);}return void 0;}function asFoldingRangeKind(kind){if(kind){switch(kind){case ls.FoldingRangeKind.Comment:return code.FoldingRangeKind.Comment;case ls.FoldingRangeKind.Imports:return code.FoldingRangeKind.Imports;case ls.FoldingRangeKind.Region:return code.FoldingRangeKind.Region;}}return void 0;}function asFoldingRange(r){return new code.FoldingRange(r.startLine,r.endLine,asFoldingRangeKind(r.kind));}function asFoldingRanges(foldingRanges){if(Array.isArray(foldingRanges)){return foldingRanges.map(asFoldingRange);}return void 0;}function asSelectionRange(selectionRange){return new code.SelectionRange(asRange(selectionRange.range),selectionRange.parent?asSelectionRange(selectionRange.parent):void 0);}function asSelectionRanges(selectionRanges){if(!Array.isArray(selectionRanges)){return[];}var result=[];var _iterator30=_createForOfIteratorHelper(selectionRanges),_step27;try{for(_iterator30.s();!(_step27=_iterator30.n()).done;){var range=_step27.value;result.push(asSelectionRange(range));}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}return result;}function asInlineValue(inlineValue){if(ls.InlineValueText.is(inlineValue)){return new code.InlineValueText(asRange(inlineValue.range),inlineValue.text);}else if(ls.InlineValueVariableLookup.is(inlineValue)){return new code.InlineValueVariableLookup(asRange(inlineValue.range),inlineValue.variableName,inlineValue.caseSensitiveLookup);}else{return new code.InlineValueEvaluatableExpression(asRange(inlineValue.range),inlineValue.expression);}}function asInlineValues(inlineValues){if(!Array.isArray(inlineValues)){return[];}var result=[];var _iterator31=_createForOfIteratorHelper(inlineValues),_step28;try{for(_iterator31.s();!(_step28=_iterator31.n()).done;){var inlineValue=_step28.value;result.push(asInlineValue(inlineValue));}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}return result;}function asCallHierarchyItem(item){if(item===null){return void 0;}var result=new protocolCallHierarchyItem_1.default(asSymbolKind(item.kind),item.name,item.detail||"",asUri(item.uri),asRange(item.range),asRange(item.selectionRange),item.data);if(item.tags!==void 0){result.tags=asSymbolTags(item.tags);}return result;}function asCallHierarchyItems(items){if(items===null){return void 0;}return items.map(function(item){return asCallHierarchyItem(item);});}function asCallHierarchyIncomingCall(item){return new code.CallHierarchyIncomingCall(asCallHierarchyItem(item.from),asRanges(item.fromRanges));}function asCallHierarchyIncomingCalls(items){if(items===null){return void 0;}return items.map(function(item){return asCallHierarchyIncomingCall(item);});}function asCallHierarchyOutgoingCall(item){return new code.CallHierarchyOutgoingCall(asCallHierarchyItem(item.to),asRanges(item.fromRanges));}function asCallHierarchyOutgoingCalls(items){if(items===null){return void 0;}return items.map(function(item){return asCallHierarchyOutgoingCall(item);});}function asSemanticTokens(value){if(value===void 0||value===null){return void 0;}return new code.SemanticTokens(new Uint32Array(value.data),value.resultId);}function asSemanticTokensEdit(value){return new code.SemanticTokensEdit(value.start,value.deleteCount,value.data!==void 0?new Uint32Array(value.data):void 0);}function asSemanticTokensEdits(value){if(value===void 0||value===null){return void 0;}return new code.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit),value.resultId);}function asSemanticTokensLegend(value){return value;}function asLinkedEditingRanges(value){if(value===null||value===void 0){return void 0;}return new code.LinkedEditingRanges(asRanges(value.ranges),asRegularExpression(value.wordPattern));}function asRegularExpression(value){if(value===null||value===void 0){return void 0;}return new RegExp(value);}function asTypeHierarchyItem(item){if(item===null){return void 0;}var result=new protocolTypeHierarchyItem_1.default(asSymbolKind(item.kind),item.name,item.detail||"",asUri(item.uri),asRange(item.range),asRange(item.selectionRange),item.data);if(item.tags!==void 0){result.tags=asSymbolTags(item.tags);}return result;}function asTypeHierarchyItems(items){if(items===null){return void 0;}return items.map(function(item){return asTypeHierarchyItem(item);});}return{asUri:asUri,asDiagnostics:asDiagnostics,asDiagnostic:asDiagnostic,asRange:asRange,asRanges:asRanges,asPosition:asPosition,asDiagnosticSeverity:asDiagnosticSeverity,asDiagnosticTag:asDiagnosticTag,asHover:asHover,asCompletionResult:asCompletionResult,asCompletionItem:asCompletionItem,asTextEdit:asTextEdit,asTextEdits:asTextEdits,asSignatureHelp:asSignatureHelp,asSignatureInformations:asSignatureInformations,asSignatureInformation:asSignatureInformation,asParameterInformations:asParameterInformations,asParameterInformation:asParameterInformation,asDeclarationResult:asDeclarationResult,asDefinitionResult:asDefinitionResult,asLocation:asLocation,asReferences:asReferences,asDocumentHighlights:asDocumentHighlights,asDocumentHighlight:asDocumentHighlight,asDocumentHighlightKind:asDocumentHighlightKind,asSymbolKind:asSymbolKind,asSymbolTag:asSymbolTag,asSymbolTags:asSymbolTags,asSymbolInformations:asSymbolInformations,asSymbolInformation:asSymbolInformation,asDocumentSymbols:asDocumentSymbols,asDocumentSymbol:asDocumentSymbol,asCommand:asCommand,asCommands:asCommands,asCodeAction:asCodeAction,asCodeActionKind:asCodeActionKind,asCodeActionKinds:asCodeActionKinds,asCodeLens:asCodeLens,asCodeLenses:asCodeLenses,asWorkspaceEdit:asWorkspaceEdit,asDocumentLink:asDocumentLink,asDocumentLinks:asDocumentLinks,asFoldingRangeKind:asFoldingRangeKind,asFoldingRange:asFoldingRange,asFoldingRanges:asFoldingRanges,asColor:asColor,asColorInformation:asColorInformation,asColorInformations:asColorInformations,asColorPresentation:asColorPresentation,asColorPresentations:asColorPresentations,asSelectionRange:asSelectionRange,asSelectionRanges:asSelectionRanges,asInlineValue:asInlineValue,asInlineValues:asInlineValues,asSemanticTokensLegend:asSemanticTokensLegend,asSemanticTokens:asSemanticTokens,asSemanticTokensEdit:asSemanticTokensEdit,asSemanticTokensEdits:asSemanticTokensEdits,asCallHierarchyItem:asCallHierarchyItem,asCallHierarchyItems:asCallHierarchyItems,asCallHierarchyIncomingCall:asCallHierarchyIncomingCall,asCallHierarchyIncomingCalls:asCallHierarchyIncomingCalls,asCallHierarchyOutgoingCall:asCallHierarchyOutgoingCall,asCallHierarchyOutgoingCalls:asCallHierarchyOutgoingCalls,asLinkedEditingRanges:asLinkedEditingRanges,asTypeHierarchyItem:asTypeHierarchyItem,asTypeHierarchyItems:asTypeHierarchyItems};}exports.createConverter=createConverter;}});// client/node_modules/vscode-languageclient/lib/common/utils/async.js
var require_async=__commonJS({"client/node_modules/vscode-languageclient/lib/common/utils/async.js":function clientNode_modulesVscodeLanguageclientLibCommonUtilsAsyncJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Delayer=void 0;var vscode_languageserver_protocol_1=require_main3();var Delayer=/*#__PURE__*/function(){function Delayer(defaultDelay){_classCallCheck(this,Delayer);this.defaultDelay=defaultDelay;this.timeout=void 0;this.completionPromise=void 0;this.onSuccess=void 0;this.task=void 0;}_createClass(Delayer,[{key:"trigger",value:function trigger(task){var _this48=this;var delay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.defaultDelay;this.task=task;if(delay>=0){this.cancelTimeout();}if(!this.completionPromise){this.completionPromise=new Promise(function(resolve){_this48.onSuccess=resolve;}).then(function(){_this48.completionPromise=void 0;_this48.onSuccess=void 0;var result=_this48.task();_this48.task=void 0;return result;});}if(delay>=0||this.timeout===void 0){this.timeout=(0,vscode_languageserver_protocol_1.RAL)().timer.setTimeout(function(){_this48.timeout=void 0;_this48.onSuccess(void 0);},delay>=0?delay:this.defaultDelay);}return this.completionPromise;}},{key:"forceDelivery",value:function forceDelivery(){if(!this.completionPromise){return void 0;}this.cancelTimeout();var result=this.task();this.completionPromise=void 0;this.onSuccess=void 0;this.task=void 0;return result;}},{key:"isTriggered",value:function isTriggered(){return this.timeout!==void 0;}},{key:"cancel",value:function cancel(){this.cancelTimeout();this.completionPromise=void 0;}},{key:"cancelTimeout",value:function cancelTimeout(){if(this.timeout!==void 0){this.timeout.dispose();this.timeout=void 0;}}}]);return Delayer;}();exports.Delayer=Delayer;}});// client/node_modules/vscode-languageclient/lib/common/utils/uuid.js
var require_uuid=__commonJS({"client/node_modules/vscode-languageclient/lib/common/utils/uuid.js":function clientNode_modulesVscodeLanguageclientLibCommonUtilsUuidJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generateUuid=exports.parse=exports.isUUID=exports.v4=exports.empty=void 0;var ValueUUID=/*#__PURE__*/function(){function ValueUUID(_value){_classCallCheck(this,ValueUUID);this._value=_value;}_createClass(ValueUUID,[{key:"asHex",value:function asHex(){return this._value;}},{key:"equals",value:function equals(other){return this.asHex()===other.asHex();}}]);return ValueUUID;}();var V4UUID=/*#__PURE__*/function(_ValueUUID){_inherits(V4UUID,_ValueUUID);var _super48=_createSuper(V4UUID);function V4UUID(){_classCallCheck(this,V4UUID);return _super48.call(this,[V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-","4",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._oneOf(V4UUID._timeHighBits),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex()].join(""));}_createClass(V4UUID,null,[{key:"_oneOf",value:function _oneOf(array){return array[Math.floor(array.length*Math.random())];}},{key:"_randomHex",value:function _randomHex(){return V4UUID._oneOf(V4UUID._chars);}}]);return V4UUID;}(ValueUUID);V4UUID._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];V4UUID._timeHighBits=["8","9","a","b"];exports.empty=new ValueUUID("00000000-0000-0000-0000-000000000000");function v4(){return new V4UUID();}exports.v4=v4;var _UUIDPattern=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function isUUID(value){return _UUIDPattern.test(value);}exports.isUUID=isUUID;function parse(value){if(!isUUID(value)){throw new Error("invalid uuid");}return new ValueUUID(value);}exports.parse=parse;function generateUuid(){return v4().asHex();}exports.generateUuid=generateUuid;}});// client/node_modules/vscode-languageclient/lib/common/progressPart.js
var require_progressPart=__commonJS({"client/node_modules/vscode-languageclient/lib/common/progressPart.js":function clientNode_modulesVscodeLanguageclientLibCommonProgressPartJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProgressPart=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var Is=require_is();var ProgressPart=/*#__PURE__*/function(){function ProgressPart(_client,_token,done){var _this49=this;_classCallCheck(this,ProgressPart);this._client=_client;this._token=_token;this._reported=0;this._infinite=false;this._lspProgressDisposable=this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type,this._token,function(value){switch(value.kind){case"begin":_this49.begin(value);break;case"report":_this49.report(value);break;case"end":_this49.done();done&&done(_this49);break;}});}_createClass(ProgressPart,[{key:"begin",value:function begin(params){var _this50=this;this._infinite=params.percentage===void 0;if(this._lspProgressDisposable===void 0){return;}void vscode_1.window.withProgress({location:vscode_1.ProgressLocation.Window,cancellable:params.cancellable,title:params.title},/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee5(progress,cancellationToken){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(_this50._lspProgressDisposable===void 0)){_context5.next=2;break;}return _context5.abrupt("return");case 2:_this50._progress=progress;_this50._cancellationToken=cancellationToken;_this50._tokenDisposable=_this50._cancellationToken.onCancellationRequested(function(){_this50._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type,{token:_this50._token});});_this50.report(params);return _context5.abrupt("return",new Promise(function(resolve,reject){_this50._resolve=resolve;_this50._reject=reject;}));case 7:case"end":return _context5.stop();}}},_callee5);}));return function(_x11,_x12){return _ref5.apply(this,arguments);};}());}},{key:"report",value:function report(params){if(this._infinite&&Is.string(params.message)){this._progress!==void 0&&this._progress.report({message:params.message});}else if(Is.number(params.percentage)){var percentage=Math.max(0,Math.min(params.percentage,100));var delta=Math.max(0,percentage-this._reported);this._reported+=delta;this._progress!==void 0&&this._progress.report({message:params.message,increment:delta});}}},{key:"cancel",value:function cancel(){this.cleanup();if(this._reject!==void 0){this._reject();this._resolve=void 0;this._reject=void 0;}}},{key:"done",value:function done(){this.cleanup();if(this._resolve!==void 0){this._resolve();this._resolve=void 0;this._reject=void 0;}}},{key:"cleanup",value:function cleanup(){if(this._lspProgressDisposable!==void 0){this._lspProgressDisposable.dispose();this._lspProgressDisposable=void 0;}if(this._tokenDisposable!==void 0){this._tokenDisposable.dispose();this._tokenDisposable=void 0;}this._progress=void 0;this._cancellationToken=void 0;}}]);return ProgressPart;}();exports.ProgressPart=ProgressPart;}});// client/node_modules/vscode-languageclient/lib/common/client.js
var require_client=__commonJS({"client/node_modules/vscode-languageclient/lib/common/client.js":function clientNode_modulesVscodeLanguageclientLibCommonClientJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseLanguageClient=exports.LSPCancellationError=exports.MessageTransports=exports.TextDocumentFeature=exports.State=exports.RevealOutputChannelOn=exports.DiagnosticPullMode=exports.CloseAction=exports.ErrorAction=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var configuration_1=require_configuration();var c2p=require_codeConverter();var p2c=require_protocolConverter();var Is=require_is();var async_1=require_async();var UUID=require_uuid();var progressPart_1=require_progressPart();var ConsoleLogger=/*#__PURE__*/function(){function ConsoleLogger(){_classCallCheck(this,ConsoleLogger);}_createClass(ConsoleLogger,[{key:"error",value:function error(message){(0,vscode_languageserver_protocol_1.RAL)().console.error(message);}},{key:"warn",value:function warn(message){(0,vscode_languageserver_protocol_1.RAL)().console.warn(message);}},{key:"info",value:function info(message){(0,vscode_languageserver_protocol_1.RAL)().console.info(message);}},{key:"log",value:function log(message){(0,vscode_languageserver_protocol_1.RAL)().console.log(message);}}]);return ConsoleLogger;}();function _createConnection(input,output,errorHandler,closeHandler,options){var logger=new ConsoleLogger();var connection=(0,vscode_languageserver_protocol_1.createProtocolConnection)(input,output,logger,options);connection.onError(function(data){errorHandler(data[0],data[1],data[2]);});connection.onClose(closeHandler);var result={listen:function listen(){return connection.listen();},sendRequest:function sendRequest(type){for(var _len8=arguments.length,params=new Array(_len8>1?_len8-1:0),_key8=1;_key8<_len8;_key8++){params[_key8-1]=arguments[_key8];}return connection.sendRequest.apply(connection,[type].concat(params));},onRequest:function onRequest(type,handler){return connection.onRequest(type,handler);},sendNotification:function sendNotification(type,params){return connection.sendNotification(type,params);},onNotification:function onNotification(type,handler){return connection.onNotification(type,handler);},onProgress:connection.onProgress,sendProgress:connection.sendProgress,trace:function trace(value,tracer,sendNotificationOrTraceOptions){var defaultTraceOptions={sendNotification:false,traceFormat:vscode_languageserver_protocol_1.TraceFormat.Text};if(sendNotificationOrTraceOptions===void 0){connection.trace(value,tracer,defaultTraceOptions);}else if(Is.boolean(sendNotificationOrTraceOptions)){connection.trace(value,tracer,sendNotificationOrTraceOptions);}else{connection.trace(value,tracer,sendNotificationOrTraceOptions);}},initialize:function initialize(params){return connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type,params);},shutdown:function shutdown(){return connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type,void 0);},exit:function exit(){return connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type);},onLogMessage:function onLogMessage(handler){return connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type,handler);},onShowMessage:function onShowMessage(handler){return connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type,handler);},onTelemetry:function onTelemetry(handler){return connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type,handler);},didChangeConfiguration:function didChangeConfiguration(params){return connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type,params);},didChangeWatchedFiles:function didChangeWatchedFiles(params){return connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type,params);},didOpenTextDocument:function didOpenTextDocument(params){return connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type,params);},didChangeTextDocument:function didChangeTextDocument(params){return connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params);},didCloseTextDocument:function didCloseTextDocument(params){return connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type,params);},didSaveTextDocument:function didSaveTextDocument(params){return connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type,params);},onDiagnostics:function onDiagnostics(handler){return connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type,handler);},end:function end(){return connection.end();},dispose:function dispose(){return connection.dispose();}};return result;}var ErrorAction;(function(ErrorAction2){ErrorAction2[ErrorAction2["Continue"]=1]="Continue";ErrorAction2[ErrorAction2["Shutdown"]=2]="Shutdown";})(ErrorAction=exports.ErrorAction||(exports.ErrorAction={}));var CloseAction;(function(CloseAction2){CloseAction2[CloseAction2["DoNotRestart"]=1]="DoNotRestart";CloseAction2[CloseAction2["Restart"]=2]="Restart";})(CloseAction=exports.CloseAction||(exports.CloseAction={}));var DefaultErrorHandler=/*#__PURE__*/function(){function DefaultErrorHandler(client,maxRestartCount){_classCallCheck(this,DefaultErrorHandler);this.client=client;this.maxRestartCount=maxRestartCount;this.restarts=[];}_createClass(DefaultErrorHandler,[{key:"error",value:function error(_error,_message,count){if(count&&count<=3){return{action:ErrorAction.Continue};}return{action:ErrorAction.Shutdown};}},{key:"closed",value:function closed(){this.restarts.push(Date.now());if(this.restarts.length<=this.maxRestartCount){return{action:CloseAction.Restart};}else{var diff=this.restarts[this.restarts.length-1]-this.restarts[0];if(diff<=3*60*1e3){return{action:CloseAction.DoNotRestart,message:"The ".concat(this.client.name," server crashed ").concat(this.maxRestartCount+1," times in the last 3 minutes. The server will not be restarted. The output for more information.")};}else{this.restarts.shift();return{action:CloseAction.Restart};}}}}]);return DefaultErrorHandler;}();var DiagnosticPullMode;(function(DiagnosticPullMode2){DiagnosticPullMode2["onType"]="onType";DiagnosticPullMode2["onSave"]="onSave";})(DiagnosticPullMode=exports.DiagnosticPullMode||(exports.DiagnosticPullMode={}));var RevealOutputChannelOn2;(function(RevealOutputChannelOn3){RevealOutputChannelOn3[RevealOutputChannelOn3["Info"]=1]="Info";RevealOutputChannelOn3[RevealOutputChannelOn3["Warn"]=2]="Warn";RevealOutputChannelOn3[RevealOutputChannelOn3["Error"]=3]="Error";RevealOutputChannelOn3[RevealOutputChannelOn3["Never"]=4]="Never";})(RevealOutputChannelOn2=exports.RevealOutputChannelOn||(exports.RevealOutputChannelOn={}));var State;(function(State2){State2[State2["Stopped"]=1]="Stopped";State2[State2["Starting"]=3]="Starting";State2[State2["Running"]=2]="Running";})(State=exports.State||(exports.State={}));var ClientState;(function(ClientState2){ClientState2[ClientState2["Initial"]=0]="Initial";ClientState2[ClientState2["Starting"]=1]="Starting";ClientState2[ClientState2["StartFailed"]=2]="StartFailed";ClientState2[ClientState2["Running"]=3]="Running";ClientState2[ClientState2["Stopping"]=4]="Stopping";ClientState2[ClientState2["Stopped"]=5]="Stopped";})(ClientState||(ClientState={}));var SupportedSymbolKinds=[vscode_languageserver_protocol_1.SymbolKind.File,vscode_languageserver_protocol_1.SymbolKind.Module,vscode_languageserver_protocol_1.SymbolKind.Namespace,vscode_languageserver_protocol_1.SymbolKind.Package,vscode_languageserver_protocol_1.SymbolKind.Class,vscode_languageserver_protocol_1.SymbolKind.Method,vscode_languageserver_protocol_1.SymbolKind.Property,vscode_languageserver_protocol_1.SymbolKind.Field,vscode_languageserver_protocol_1.SymbolKind.Constructor,vscode_languageserver_protocol_1.SymbolKind.Enum,vscode_languageserver_protocol_1.SymbolKind.Interface,vscode_languageserver_protocol_1.SymbolKind.Function,vscode_languageserver_protocol_1.SymbolKind.Variable,vscode_languageserver_protocol_1.SymbolKind.Constant,vscode_languageserver_protocol_1.SymbolKind.String,vscode_languageserver_protocol_1.SymbolKind.Number,vscode_languageserver_protocol_1.SymbolKind.Boolean,vscode_languageserver_protocol_1.SymbolKind.Array,vscode_languageserver_protocol_1.SymbolKind.Object,vscode_languageserver_protocol_1.SymbolKind.Key,vscode_languageserver_protocol_1.SymbolKind.Null,vscode_languageserver_protocol_1.SymbolKind.EnumMember,vscode_languageserver_protocol_1.SymbolKind.Struct,vscode_languageserver_protocol_1.SymbolKind.Event,vscode_languageserver_protocol_1.SymbolKind.Operator,vscode_languageserver_protocol_1.SymbolKind.TypeParameter];var SupportedCompletionItemKinds=[vscode_languageserver_protocol_1.CompletionItemKind.Text,vscode_languageserver_protocol_1.CompletionItemKind.Method,vscode_languageserver_protocol_1.CompletionItemKind.Function,vscode_languageserver_protocol_1.CompletionItemKind.Constructor,vscode_languageserver_protocol_1.CompletionItemKind.Field,vscode_languageserver_protocol_1.CompletionItemKind.Variable,vscode_languageserver_protocol_1.CompletionItemKind.Class,vscode_languageserver_protocol_1.CompletionItemKind.Interface,vscode_languageserver_protocol_1.CompletionItemKind.Module,vscode_languageserver_protocol_1.CompletionItemKind.Property,vscode_languageserver_protocol_1.CompletionItemKind.Unit,vscode_languageserver_protocol_1.CompletionItemKind.Value,vscode_languageserver_protocol_1.CompletionItemKind.Enum,vscode_languageserver_protocol_1.CompletionItemKind.Keyword,vscode_languageserver_protocol_1.CompletionItemKind.Snippet,vscode_languageserver_protocol_1.CompletionItemKind.Color,vscode_languageserver_protocol_1.CompletionItemKind.File,vscode_languageserver_protocol_1.CompletionItemKind.Reference,vscode_languageserver_protocol_1.CompletionItemKind.Folder,vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,vscode_languageserver_protocol_1.CompletionItemKind.Constant,vscode_languageserver_protocol_1.CompletionItemKind.Struct,vscode_languageserver_protocol_1.CompletionItemKind.Event,vscode_languageserver_protocol_1.CompletionItemKind.Operator,vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter];var SupportedSymbolTags=[vscode_languageserver_protocol_1.SymbolTag.Deprecated];function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var FileFormattingOptions;(function(FileFormattingOptions2){function fromConfiguration(document2){var filesConfig=vscode_1.workspace.getConfiguration("files",document2);return{trimTrailingWhitespace:filesConfig.get("trimTrailingWhitespace"),trimFinalNewlines:filesConfig.get("trimFinalNewlines"),insertFinalNewline:filesConfig.get("insertFinalNewline")};}FileFormattingOptions2.fromConfiguration=fromConfiguration;})(FileFormattingOptions||(FileFormattingOptions={}));var DynamicFeature;(function(DynamicFeature2){function is(value){var candidate=value;return candidate&&Is.func(candidate.register)&&Is.func(candidate.unregister)&&Is.func(candidate.dispose)&&candidate.registrationType!==void 0;}DynamicFeature2.is=is;})(DynamicFeature||(DynamicFeature={}));var DocumentNotifications=/*#__PURE__*/function(){function DocumentNotifications(_client,_event,_type,_middleware,_createParams,_selectorFilter){_classCallCheck(this,DocumentNotifications);this._client=_client;this._event=_event;this._type=_type;this._middleware=_middleware;this._createParams=_createParams;this._selectorFilter=_selectorFilter;this._selectors=new Map();this._onNotificationSent=new vscode_1.EventEmitter();}_createClass(DocumentNotifications,[{key:"register",value:function register(data){var _this51=this;if(!data.registerOptions.documentSelector){return;}if(!this._listener){this._listener=this._event(function(data2){_this51.callback(data2).catch(function(error){_this51._client.error("Sending document notification ".concat(_this51._type.method," failed."),error);});});}this._selectors.set(data.id,data.registerOptions.documentSelector);}},{key:"callback",value:function(){var _callback=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee7(data){var _this52=this;var doSend;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:doSend=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee6(data2){var params;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:params=_this52._createParams(data2);_context6.next=3;return _this52._client.sendNotification(_this52._type,params).catch();case 3:_this52.notificationSent(data2,_this52._type,params);case 4:case"end":return _context6.stop();}}},_callee6);}));return function doSend(_x14){return _ref6.apply(this,arguments);};}();if(!(!this._selectorFilter||this._selectorFilter(this._selectors.values(),data))){_context7.next=3;break;}return _context7.abrupt("return",this._middleware?this._middleware(data,function(data2){return doSend(data2);}):doSend(data));case 3:case"end":return _context7.stop();}}},_callee7,this);}));function callback(_x13){return _callback.apply(this,arguments);}return callback;}()},{key:"onNotificationSent",get:function get(){return this._onNotificationSent.event;}},{key:"notificationSent",value:function notificationSent(data,type,params){this._onNotificationSent.fire({original:data,type:type,params:params});}},{key:"unregister",value:function unregister(id){this._selectors.delete(id);if(this._selectors.size===0&&this._listener){this._listener.dispose();this._listener=void 0;}}},{key:"dispose",value:function dispose(){this._selectors.clear();this._onNotificationSent.dispose();if(this._listener){this._listener.dispose();this._listener=void 0;}}},{key:"getProvider",value:function getProvider(document2){var _this53=this;var _iterator32=_createForOfIteratorHelper(this._selectors.values()),_step29;try{for(_iterator32.s();!(_step29=_iterator32.n()).done;){var selector=_step29.value;if(vscode_1.languages.match(selector,document2)){return{send:function send(data){return _this53.callback(data);}};}}}catch(err){_iterator32.e(err);}finally{_iterator32.f();}return void 0;}}],[{key:"textDocumentFilter",value:function textDocumentFilter(selectors,textDocument){var _iterator33=_createForOfIteratorHelper(selectors),_step30;try{for(_iterator33.s();!(_step30=_iterator33.n()).done;){var selector=_step30.value;if(vscode_1.languages.match(selector,textDocument)){return true;}}}catch(err){_iterator33.e(err);}finally{_iterator33.f();}return false;}}]);return DocumentNotifications;}();var DidOpenTextDocumentFeature=/*#__PURE__*/function(_DocumentNotification){_inherits(DidOpenTextDocumentFeature,_DocumentNotification);var _super49=_createSuper(DidOpenTextDocumentFeature);function DidOpenTextDocumentFeature(client,_syncedDocuments){var _this54;_classCallCheck(this,DidOpenTextDocumentFeature);_this54=_super49.call(this,client,vscode_1.workspace.onDidOpenTextDocument,vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type,client.clientOptions.middleware.didOpen,function(textDocument){return client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument);},DocumentNotifications.textDocumentFilter);_this54._syncedDocuments=_syncedDocuments;return _this54;}_createClass(DidOpenTextDocumentFeature,[{key:"openDocuments",get:function get(){return this._syncedDocuments.values();}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;if(documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.openClose){this.register({id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}});}}},{key:"registrationType",get:function get(){return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;}},{key:"register",value:function register(data){var _this55=this;_get2(_getPrototypeOf(DidOpenTextDocumentFeature.prototype),"register",this).call(this,data);if(!data.registerOptions.documentSelector){return;}var documentSelector=data.registerOptions.documentSelector;vscode_1.workspace.textDocuments.forEach(function(textDocument){var uri=textDocument.uri.toString();if(_this55._syncedDocuments.has(uri)){return;}if(vscode_1.languages.match(documentSelector,textDocument)){var middleware=_this55._client.clientOptions.middleware;var didOpen=function didOpen(textDocument2){return _this55._client.sendNotification(_this55._type,_this55._createParams(textDocument2));};(middleware.didOpen?middleware.didOpen(textDocument,didOpen):didOpen(textDocument)).catch(function(error){_this55._client.error("Sending document notification ".concat(_this55._type.method," failed"),error);});_this55._syncedDocuments.set(uri,textDocument);}});}},{key:"notificationSent",value:function notificationSent(textDocument,type,params){_get2(_getPrototypeOf(DidOpenTextDocumentFeature.prototype),"notificationSent",this).call(this,textDocument,type,params);this._syncedDocuments.set(textDocument.uri.toString(),textDocument);}}]);return DidOpenTextDocumentFeature;}(DocumentNotifications);var DidCloseTextDocumentFeature=/*#__PURE__*/function(_DocumentNotification2){_inherits(DidCloseTextDocumentFeature,_DocumentNotification2);var _super50=_createSuper(DidCloseTextDocumentFeature);function DidCloseTextDocumentFeature(client,_syncedDocuments){var _this56;_classCallCheck(this,DidCloseTextDocumentFeature);_this56=_super50.call(this,client,vscode_1.workspace.onDidCloseTextDocument,vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type,client.clientOptions.middleware.didClose,function(textDocument){return client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument);},DocumentNotifications.textDocumentFilter);_this56._syncedDocuments=_syncedDocuments;return _this56;}_createClass(DidCloseTextDocumentFeature,[{key:"registrationType",get:function get(){return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;if(documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.openClose){this.register({id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}});}}},{key:"notificationSent",value:function notificationSent(textDocument,type,params){_get2(_getPrototypeOf(DidCloseTextDocumentFeature.prototype),"notificationSent",this).call(this,textDocument,type,params);this._syncedDocuments.delete(textDocument.uri.toString());}},{key:"unregister",value:function unregister(id){var _this57=this;var selector=this._selectors.get(id);_get2(_getPrototypeOf(DidCloseTextDocumentFeature.prototype),"unregister",this).call(this,id);var selectors=this._selectors.values();this._syncedDocuments.forEach(function(textDocument){if(vscode_1.languages.match(selector,textDocument)&&!_this57._selectorFilter(selectors,textDocument)){var middleware=_this57._client.clientOptions.middleware;var didClose=function didClose(textDocument2){return _this57._client.sendNotification(_this57._type,_this57._createParams(textDocument2));};_this57._syncedDocuments.delete(textDocument.uri.toString());(middleware.didClose?middleware.didClose(textDocument,didClose):didClose(textDocument)).catch(function(error){_this57._client.error("Sending document notification ".concat(_this57._type.method," failed"),error);});}});}}]);return DidCloseTextDocumentFeature;}(DocumentNotifications);var DidChangeTextDocumentFeature=/*#__PURE__*/function(){function DidChangeTextDocumentFeature(_client){_classCallCheck(this,DidChangeTextDocumentFeature);this._client=_client;this._changeData=new Map();this._forcingDelivery=false;this._onNotificationSent=new vscode_1.EventEmitter();}_createClass(DidChangeTextDocumentFeature,[{key:"registrationType",get:function get(){return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;if(documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.change!==void 0&&textDocumentSyncOptions.change!==vscode_languageserver_protocol_1.TextDocumentSyncKind.None){this.register({id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},{syncKind:textDocumentSyncOptions.change})});}}},{key:"register",value:function register(data){if(!data.registerOptions.documentSelector){return;}if(!this._listener){this._listener=vscode_1.workspace.onDidChangeTextDocument(this.callback,this);}this._changeData.set(data.id,{documentSelector:data.registerOptions.documentSelector,syncKind:data.registerOptions.syncKind});}},{key:"callback",value:function(){var _callback2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee11(event){var _this58=this;var promises,_iterator34,_step31,changeData,middleware;return regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(!(event.contentChanges.length===0)){_context11.next=2;break;}return _context11.abrupt("return");case 2:promises=[];_iterator34=_createForOfIteratorHelper(this._changeData.values());try{for(_iterator34.s();!(_step31=_iterator34.n()).done;){changeData=_step31.value;if(vscode_1.languages.match(changeData.documentSelector,event.document)){middleware=this._client.clientOptions.middleware;if(changeData.syncKind===vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental){(function(){var didChange=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee8(event2){var params;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:params=_this58._client.code2ProtocolConverter.asChangeTextDocumentParams(event2);_context8.next=3;return _this58._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params);case 3:_this58.notificationSent(event2,vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params);case 4:case"end":return _context8.stop();}}},_callee8);}));return function didChange(_x16){return _ref7.apply(this,arguments);};}();promises.push(middleware.didChange?middleware.didChange(event,function(event2){return didChange(event2);}):didChange(event));})();}else if(changeData.syncKind===vscode_languageserver_protocol_1.TextDocumentSyncKind.Full){(function(){var didChange=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee10(event2){var doSend;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:doSend=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee9(event3){var params;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:params=_this58._client.code2ProtocolConverter.asChangeTextDocumentParams(event3.document);_context9.next=3;return _this58._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params);case 3:_this58.notificationSent(event3,vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params);case 4:case"end":return _context9.stop();}}},_callee9);}));return function doSend(_x18){return _ref9.apply(this,arguments);};}();if(!_this58._changeDelayer){_context10.next=6;break;}if(_this58._changeDelayer.uri!==event2.document.uri.toString()){_this58.forceDelivery();_this58._changeDelayer.uri=event2.document.uri.toString();}return _context10.abrupt("return",_this58._changeDelayer.delayer.trigger(function(){return doSend(event2);}));case 6:_this58._changeDelayer={uri:event2.document.uri.toString(),delayer:new async_1.Delayer(200)};return _context10.abrupt("return",_this58._changeDelayer.delayer.trigger(function(){return doSend(event2);},-1));case 8:case"end":return _context10.stop();}}},_callee10);}));return function didChange(_x17){return _ref8.apply(this,arguments);};}();promises.push(middleware.didChange?middleware.didChange(event,function(event2){return didChange(event2);}):didChange(event));})();}}}}catch(err){_iterator34.e(err);}finally{_iterator34.f();}return _context11.abrupt("return",Promise.all(promises).then(void 0,function(error){_this58._client.error("Sending document notification ".concat(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method," failed"),error);throw error;}));case 6:case"end":return _context11.stop();}}},_callee11,this);}));function callback(_x15){return _callback2.apply(this,arguments);}return callback;}()},{key:"onNotificationSent",get:function get(){return this._onNotificationSent.event;}},{key:"notificationSent",value:function notificationSent(changeEvent,type,params){this._onNotificationSent.fire({original:changeEvent,type:type,params:params});}},{key:"unregister",value:function unregister(id){this._changeData.delete(id);if(this._changeData.size===0&&this._listener){this._listener.dispose();this._listener=void 0;}}},{key:"dispose",value:function dispose(){this._changeDelayer=void 0;this._forcingDelivery=false;this._changeData.clear();if(this._listener){this._listener.dispose();this._listener=void 0;}}},{key:"forceDelivery",value:function forceDelivery(){if(this._forcingDelivery||!this._changeDelayer){return;}try{this._forcingDelivery=true;this._changeDelayer.delayer.forceDelivery();}finally{this._forcingDelivery=false;}}},{key:"getProvider",value:function getProvider(document2){var _this59=this;var _iterator35=_createForOfIteratorHelper(this._changeData.values()),_step32;try{for(_iterator35.s();!(_step32=_iterator35.n()).done;){var changeData=_step32.value;if(vscode_1.languages.match(changeData.documentSelector,document2)){return{send:function send(event){return _this59.callback(event);}};}}}catch(err){_iterator35.e(err);}finally{_iterator35.f();}return void 0;}}]);return DidChangeTextDocumentFeature;}();var WillSaveFeature=/*#__PURE__*/function(_DocumentNotification3){_inherits(WillSaveFeature,_DocumentNotification3);var _super51=_createSuper(WillSaveFeature);function WillSaveFeature(client){_classCallCheck(this,WillSaveFeature);return _super51.call(this,client,vscode_1.workspace.onWillSaveTextDocument,vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type,client.clientOptions.middleware.willSave,function(willSaveEvent){return client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent);},function(selectors,willSaveEvent){return DocumentNotifications.textDocumentFilter(selectors,willSaveEvent.document);});}_createClass(WillSaveFeature,[{key:"registrationType",get:function get(){return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var value=ensure(ensure(capabilities,"textDocument"),"synchronization");value.willSave=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;if(documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.willSave){this.register({id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}});}}}]);return WillSaveFeature;}(DocumentNotifications);var WillSaveWaitUntilFeature=/*#__PURE__*/function(){function WillSaveWaitUntilFeature(_client){_classCallCheck(this,WillSaveWaitUntilFeature);this._client=_client;this._selectors=new Map();}_createClass(WillSaveWaitUntilFeature,[{key:"registrationType",get:function get(){return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var value=ensure(ensure(capabilities,"textDocument"),"synchronization");value.willSaveWaitUntil=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;if(documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.willSaveWaitUntil){this.register({id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}});}}},{key:"register",value:function register(data){if(!data.registerOptions.documentSelector){return;}if(!this._listener){this._listener=vscode_1.workspace.onWillSaveTextDocument(this.callback,this);}this._selectors.set(data.id,data.registerOptions.documentSelector);}},{key:"callback",value:function callback(event){var _this60=this;if(DocumentNotifications.textDocumentFilter(this._selectors.values(),event.document)){var middleware=this._client.clientOptions.middleware;var willSaveWaitUntil=function willSaveWaitUntil(event2){return _this60._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type,_this60._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event2)).then(function(edits){var vEdits=_this60._client.protocol2CodeConverter.asTextEdits(edits);return vEdits===void 0?[]:vEdits;});};event.waitUntil(middleware.willSaveWaitUntil?middleware.willSaveWaitUntil(event,willSaveWaitUntil):willSaveWaitUntil(event));}}},{key:"unregister",value:function unregister(id){this._selectors.delete(id);if(this._selectors.size===0&&this._listener){this._listener.dispose();this._listener=void 0;}}},{key:"dispose",value:function dispose(){this._selectors.clear();if(this._listener){this._listener.dispose();this._listener=void 0;}}}]);return WillSaveWaitUntilFeature;}();var DidSaveTextDocumentFeature=/*#__PURE__*/function(_DocumentNotification4){_inherits(DidSaveTextDocumentFeature,_DocumentNotification4);var _super52=_createSuper(DidSaveTextDocumentFeature);function DidSaveTextDocumentFeature(client){var _this61;_classCallCheck(this,DidSaveTextDocumentFeature);_this61=_super52.call(this,client,vscode_1.workspace.onDidSaveTextDocument,vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type,client.clientOptions.middleware.didSave,function(textDocument){return client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument,_this61._includeText);},DocumentNotifications.textDocumentFilter);_this61._includeText=false;return _this61;}_createClass(DidSaveTextDocumentFeature,[{key:"registrationType",get:function get(){return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").didSave=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;if(documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.save){var saveOptions=typeof textDocumentSyncOptions.save==="boolean"?{includeText:false}:{includeText:!!textDocumentSyncOptions.save.includeText};this.register({id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},saveOptions)});}}},{key:"register",value:function register(data){this._includeText=!!data.registerOptions.includeText;_get2(_getPrototypeOf(DidSaveTextDocumentFeature.prototype),"register",this).call(this,data);}}]);return DidSaveTextDocumentFeature;}(DocumentNotifications);var FileSystemWatcherFeature=/*#__PURE__*/function(){function FileSystemWatcherFeature(_client,_notifyFileEvent){_classCallCheck(this,FileSystemWatcherFeature);this._client=_client;this._notifyFileEvent=_notifyFileEvent;this._watchers=new Map();}_createClass(FileSystemWatcherFeature,[{key:"registrationType",get:function get(){return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"workspace"),"didChangeWatchedFiles").dynamicRegistration=true;}},{key:"initialize",value:function initialize(_capabilities,_documentSelector){}},{key:"register",value:function register(data){if(!Array.isArray(data.registerOptions.watchers)){return;}var disposables=[];var _iterator36=_createForOfIteratorHelper(data.registerOptions.watchers),_step33;try{for(_iterator36.s();!(_step33=_iterator36.n()).done;){var watcher=_step33.value;if(!Is.string(watcher.globPattern)){continue;}var watchCreate=true,watchChange=true,watchDelete=true;if(watcher.kind!==void 0&&watcher.kind!==null){watchCreate=(watcher.kind&vscode_languageserver_protocol_1.WatchKind.Create)!==0;watchChange=(watcher.kind&vscode_languageserver_protocol_1.WatchKind.Change)!==0;watchDelete=(watcher.kind&vscode_languageserver_protocol_1.WatchKind.Delete)!==0;}var fileSystemWatcher=vscode_1.workspace.createFileSystemWatcher(watcher.globPattern,!watchCreate,!watchChange,!watchDelete);this.hookListeners(fileSystemWatcher,watchCreate,watchChange,watchDelete);disposables.push(fileSystemWatcher);}}catch(err){_iterator36.e(err);}finally{_iterator36.f();}this._watchers.set(data.id,disposables);}},{key:"registerRaw",value:function registerRaw(id,fileSystemWatchers){var disposables=[];var _iterator37=_createForOfIteratorHelper(fileSystemWatchers),_step34;try{for(_iterator37.s();!(_step34=_iterator37.n()).done;){var fileSystemWatcher=_step34.value;this.hookListeners(fileSystemWatcher,true,true,true,disposables);}}catch(err){_iterator37.e(err);}finally{_iterator37.f();}this._watchers.set(id,disposables);}},{key:"hookListeners",value:function hookListeners(fileSystemWatcher,watchCreate,watchChange,watchDelete,listeners){var _this62=this;if(watchCreate){fileSystemWatcher.onDidCreate(function(resource){return _this62._notifyFileEvent({uri:_this62._client.code2ProtocolConverter.asUri(resource),type:vscode_languageserver_protocol_1.FileChangeType.Created});},null,listeners);}if(watchChange){fileSystemWatcher.onDidChange(function(resource){return _this62._notifyFileEvent({uri:_this62._client.code2ProtocolConverter.asUri(resource),type:vscode_languageserver_protocol_1.FileChangeType.Changed});},null,listeners);}if(watchDelete){fileSystemWatcher.onDidDelete(function(resource){return _this62._notifyFileEvent({uri:_this62._client.code2ProtocolConverter.asUri(resource),type:vscode_languageserver_protocol_1.FileChangeType.Deleted});},null,listeners);}}},{key:"unregister",value:function unregister(id){var disposables=this._watchers.get(id);if(disposables){var _iterator38=_createForOfIteratorHelper(disposables),_step35;try{for(_iterator38.s();!(_step35=_iterator38.n()).done;){var disposable=_step35.value;disposable.dispose();}}catch(err){_iterator38.e(err);}finally{_iterator38.f();}}}},{key:"dispose",value:function dispose(){this._watchers.forEach(function(disposables){var _iterator39=_createForOfIteratorHelper(disposables),_step36;try{for(_iterator39.s();!(_step36=_iterator39.n()).done;){var disposable=_step36.value;disposable.dispose();}}catch(err){_iterator39.e(err);}finally{_iterator39.f();}});this._watchers.clear();}}]);return FileSystemWatcherFeature;}();var TextDocumentFeature=/*#__PURE__*/function(){function TextDocumentFeature(_client,_registrationType){_classCallCheck(this,TextDocumentFeature);this._client=_client;this._registrationType=_registrationType;this._registrations=new Map();}_createClass(TextDocumentFeature,[{key:"registrationType",get:function get(){return this._registrationType;}},{key:"register",value:function register(data){if(!data.registerOptions.documentSelector){return;}var registration=this.registerLanguageProvider(data.registerOptions,data.id);this._registrations.set(data.id,{disposable:registration[0],data:data,provider:registration[1]});}},{key:"unregister",value:function unregister(id){var registration=this._registrations.get(id);if(registration!==void 0){registration.disposable.dispose();}}},{key:"dispose",value:function dispose(){this._registrations.forEach(function(value){value.disposable.dispose();});this._registrations.clear();}},{key:"getRegistration",value:function getRegistration(documentSelector,capability){if(!capability){return[void 0,void 0];}else if(vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)){var id=vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability)?capability.id:UUID.generateUuid();var selector=capability.documentSelector||documentSelector;if(selector){return[id,Object.assign({},capability,{documentSelector:selector})];}}else if(Is.boolean(capability)&&capability===true||vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)){if(!documentSelector){return[void 0,void 0];}var options=Is.boolean(capability)&&capability===true?{documentSelector:documentSelector}:Object.assign({},capability,{documentSelector:documentSelector});return[UUID.generateUuid(),options];}return[void 0,void 0];}},{key:"getRegistrationOptions",value:function getRegistrationOptions(documentSelector,capability){if(!documentSelector||!capability){return void 0;}return Is.boolean(capability)&&capability===true?{documentSelector:documentSelector}:Object.assign({},capability,{documentSelector:documentSelector});}},{key:"getProvider",value:function getProvider(textDocument){var _iterator40=_createForOfIteratorHelper(this._registrations.values()),_step37;try{for(_iterator40.s();!(_step37=_iterator40.n()).done;){var registration=_step37.value;var selector=registration.data.registerOptions.documentSelector;if(selector!==null&&vscode_1.languages.match(selector,textDocument)){return registration.provider;}}}catch(err){_iterator40.e(err);}finally{_iterator40.f();}return void 0;}},{key:"getAllProviders",value:function getAllProviders(){var result=[];var _iterator41=_createForOfIteratorHelper(this._registrations.values()),_step38;try{for(_iterator41.s();!(_step38=_iterator41.n()).done;){var item=_step38.value;result.push(item.provider);}}catch(err){_iterator41.e(err);}finally{_iterator41.f();}return result;}}]);return TextDocumentFeature;}();exports.TextDocumentFeature=TextDocumentFeature;var WorkspaceFeature=/*#__PURE__*/function(){function WorkspaceFeature(_client,_registrationType){_classCallCheck(this,WorkspaceFeature);this._client=_client;this._registrationType=_registrationType;this._registrations=new Map();}_createClass(WorkspaceFeature,[{key:"registrationType",get:function get(){return this._registrationType;}},{key:"register",value:function register(data){var registration=this.registerLanguageProvider(data.registerOptions);this._registrations.set(data.id,{disposable:registration[0],provider:registration[1]});}},{key:"unregister",value:function unregister(id){var registration=this._registrations.get(id);if(registration!==void 0){registration.disposable.dispose();}}},{key:"dispose",value:function dispose(){this._registrations.forEach(function(registration){registration.disposable.dispose();});this._registrations.clear();}},{key:"getProviders",value:function getProviders(){var result=[];var _iterator42=_createForOfIteratorHelper(this._registrations.values()),_step39;try{for(_iterator42.s();!(_step39=_iterator42.n()).done;){var registration=_step39.value;result.push(registration.provider);}}catch(err){_iterator42.e(err);}finally{_iterator42.f();}return result;}}]);return WorkspaceFeature;}();var CompletionItemFeature=/*#__PURE__*/function(_TextDocumentFeature){_inherits(CompletionItemFeature,_TextDocumentFeature);var _super53=_createSuper(CompletionItemFeature);function CompletionItemFeature(client){var _this63;_classCallCheck(this,CompletionItemFeature);_this63=_super53.call(this,client,vscode_languageserver_protocol_1.CompletionRequest.type);_this63.labelDetailsSupport=new Map();return _this63;}_createClass(CompletionItemFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var completion=ensure(ensure(capabilities,"textDocument"),"completion");completion.dynamicRegistration=true;completion.contextSupport=true;completion.completionItem={snippetSupport:true,commitCharactersSupport:true,documentationFormat:[vscode_languageserver_protocol_1.MarkupKind.Markdown,vscode_languageserver_protocol_1.MarkupKind.PlainText],deprecatedSupport:true,preselectSupport:true,tagSupport:{valueSet:[vscode_languageserver_protocol_1.CompletionItemTag.Deprecated]},insertReplaceSupport:true,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[vscode_languageserver_protocol_1.InsertTextMode.asIs,vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation]},labelDetailsSupport:true};completion.insertTextMode=vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation;completion.completionItemKind={valueSet:SupportedCompletionItemKinds};completion.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]};}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.completionProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options,id){var _options$completionIt,_options$triggerChara,_this64=this,_vscode_1$languages;this.labelDetailsSupport.set(id,!!((_options$completionIt=options.completionItem)!==null&&_options$completionIt!==void 0&&_options$completionIt.labelDetailsSupport));var triggerCharacters=(_options$triggerChara=options.triggerCharacters)!==null&&_options$triggerChara!==void 0?_options$triggerChara:[];var defaultCommitCharacters=options.allCommitCharacters;var provider={provideCompletionItems:function provideCompletionItems(document2,position,token,context){var client=_this64._client;var middleware=_this64._client.clientOptions.middleware;var provideCompletionItems=function provideCompletionItems(document3,position2,context2,token2){return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type,client.code2ProtocolConverter.asCompletionParams(document3,position2,context2),token2).then(function(result){return client.protocol2CodeConverter.asCompletionResult(result,defaultCommitCharacters);},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type,token2,error,null);});};return middleware.provideCompletionItem?middleware.provideCompletionItem(document2,position,context,token,provideCompletionItems):provideCompletionItems(document2,position,context,token);},resolveCompletionItem:options.resolveProvider?function(item,token){var client=_this64._client;var middleware=_this64._client.clientOptions.middleware;var resolveCompletionItem=function resolveCompletionItem(item2,token2){return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type,client.code2ProtocolConverter.asCompletionItem(item2,!!_this64.labelDetailsSupport.get(id)),token2).then(client.protocol2CodeConverter.asCompletionItem,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type,token2,error,item2);});};return middleware.resolveCompletionItem?middleware.resolveCompletionItem(item,token,resolveCompletionItem):resolveCompletionItem(item,token);}:void 0};return[(_vscode_1$languages=vscode_1.languages).registerCompletionItemProvider.apply(_vscode_1$languages,[options.documentSelector,provider].concat(_toConsumableArray(triggerCharacters))),provider];}}]);return CompletionItemFeature;}(TextDocumentFeature);var HoverFeature=/*#__PURE__*/function(_TextDocumentFeature2){_inherits(HoverFeature,_TextDocumentFeature2);var _super54=_createSuper(HoverFeature);function HoverFeature(client){_classCallCheck(this,HoverFeature);return _super54.call(this,client,vscode_languageserver_protocol_1.HoverRequest.type);}_createClass(HoverFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var hoverCapability=ensure(ensure(capabilities,"textDocument"),"hover");hoverCapability.dynamicRegistration=true;hoverCapability.contentFormat=[vscode_languageserver_protocol_1.MarkupKind.Markdown,vscode_languageserver_protocol_1.MarkupKind.PlainText];}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.hoverProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this65=this;var provider={provideHover:function provideHover(document2,position,token){var client=_this65._client;var provideHover=function provideHover(document3,position2,token2){return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document3,position2),token2).then(client.protocol2CodeConverter.asHover,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideHover?middleware.provideHover(document2,position,token,provideHover):provideHover(document2,position,token);}};return[vscode_1.languages.registerHoverProvider(options.documentSelector,provider),provider];}}]);return HoverFeature;}(TextDocumentFeature);var SignatureHelpFeature=/*#__PURE__*/function(_TextDocumentFeature3){_inherits(SignatureHelpFeature,_TextDocumentFeature3);var _super55=_createSuper(SignatureHelpFeature);function SignatureHelpFeature(client){_classCallCheck(this,SignatureHelpFeature);return _super55.call(this,client,vscode_languageserver_protocol_1.SignatureHelpRequest.type);}_createClass(SignatureHelpFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var config=ensure(ensure(capabilities,"textDocument"),"signatureHelp");config.dynamicRegistration=true;config.signatureInformation={documentationFormat:[vscode_languageserver_protocol_1.MarkupKind.Markdown,vscode_languageserver_protocol_1.MarkupKind.PlainText]};config.signatureInformation.parameterInformation={labelOffsetSupport:true};config.signatureInformation.activeParameterSupport=true;config.contextSupport=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.signatureHelpProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this66=this;var provider={provideSignatureHelp:function provideSignatureHelp(document2,position,token,context){var client=_this66._client;var providerSignatureHelp=function providerSignatureHelp(document3,position2,context2,token2){return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type,client.code2ProtocolConverter.asSignatureHelpParams(document3,position2,context2),token2).then(client.protocol2CodeConverter.asSignatureHelp,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideSignatureHelp?middleware.provideSignatureHelp(document2,position,context,token,providerSignatureHelp):providerSignatureHelp(document2,position,context,token);}};var disposable;if(options.retriggerCharacters===void 0){var _vscode_1$languages2;var triggerCharacters=options.triggerCharacters||[];disposable=(_vscode_1$languages2=vscode_1.languages).registerSignatureHelpProvider.apply(_vscode_1$languages2,[options.documentSelector,provider].concat(_toConsumableArray(triggerCharacters)));}else{var metaData={triggerCharacters:options.triggerCharacters||[],retriggerCharacters:options.retriggerCharacters||[]};disposable=vscode_1.languages.registerSignatureHelpProvider(options.documentSelector,provider,metaData);}return[disposable,provider];}}]);return SignatureHelpFeature;}(TextDocumentFeature);var DefinitionFeature=/*#__PURE__*/function(_TextDocumentFeature4){_inherits(DefinitionFeature,_TextDocumentFeature4);var _super56=_createSuper(DefinitionFeature);function DefinitionFeature(client){_classCallCheck(this,DefinitionFeature);return _super56.call(this,client,vscode_languageserver_protocol_1.DefinitionRequest.type);}_createClass(DefinitionFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var definitionSupport=ensure(ensure(capabilities,"textDocument"),"definition");definitionSupport.dynamicRegistration=true;definitionSupport.linkSupport=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.definitionProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this67=this;var provider={provideDefinition:function provideDefinition(document2,position,token){var client=_this67._client;var provideDefinition=function provideDefinition(document3,position2,token2){return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document3,position2),token2).then(client.protocol2CodeConverter.asDefinitionResult,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideDefinition?middleware.provideDefinition(document2,position,token,provideDefinition):provideDefinition(document2,position,token);}};return[vscode_1.languages.registerDefinitionProvider(options.documentSelector,provider),provider];}}]);return DefinitionFeature;}(TextDocumentFeature);var ReferencesFeature=/*#__PURE__*/function(_TextDocumentFeature5){_inherits(ReferencesFeature,_TextDocumentFeature5);var _super57=_createSuper(ReferencesFeature);function ReferencesFeature(client){_classCallCheck(this,ReferencesFeature);return _super57.call(this,client,vscode_languageserver_protocol_1.ReferencesRequest.type);}_createClass(ReferencesFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"references").dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.referencesProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this68=this;var provider={provideReferences:function provideReferences(document2,position,options2,token){var client=_this68._client;var _providerReferences=function _providerReferences(document3,position2,options3,token2){return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type,client.code2ProtocolConverter.asReferenceParams(document3,position2,options3),token2).then(client.protocol2CodeConverter.asReferences,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideReferences?middleware.provideReferences(document2,position,options2,token,_providerReferences):_providerReferences(document2,position,options2,token);}};return[vscode_1.languages.registerReferenceProvider(options.documentSelector,provider),provider];}}]);return ReferencesFeature;}(TextDocumentFeature);var DocumentHighlightFeature=/*#__PURE__*/function(_TextDocumentFeature6){_inherits(DocumentHighlightFeature,_TextDocumentFeature6);var _super58=_createSuper(DocumentHighlightFeature);function DocumentHighlightFeature(client){_classCallCheck(this,DocumentHighlightFeature);return _super58.call(this,client,vscode_languageserver_protocol_1.DocumentHighlightRequest.type);}_createClass(DocumentHighlightFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"documentHighlight").dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.documentHighlightProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this69=this;var provider={provideDocumentHighlights:function provideDocumentHighlights(document2,position,token){var client=_this69._client;var _provideDocumentHighlights=function _provideDocumentHighlights(document3,position2,token2){return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document3,position2),token2).then(client.protocol2CodeConverter.asDocumentHighlights,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideDocumentHighlights?middleware.provideDocumentHighlights(document2,position,token,_provideDocumentHighlights):_provideDocumentHighlights(document2,position,token);}};return[vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector,provider),provider];}}]);return DocumentHighlightFeature;}(TextDocumentFeature);var DocumentSymbolFeature=/*#__PURE__*/function(_TextDocumentFeature7){_inherits(DocumentSymbolFeature,_TextDocumentFeature7);var _super59=_createSuper(DocumentSymbolFeature);function DocumentSymbolFeature(client){_classCallCheck(this,DocumentSymbolFeature);return _super59.call(this,client,vscode_languageserver_protocol_1.DocumentSymbolRequest.type);}_createClass(DocumentSymbolFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var symbolCapabilities=ensure(ensure(capabilities,"textDocument"),"documentSymbol");symbolCapabilities.dynamicRegistration=true;symbolCapabilities.symbolKind={valueSet:SupportedSymbolKinds};symbolCapabilities.hierarchicalDocumentSymbolSupport=true;symbolCapabilities.tagSupport={valueSet:SupportedSymbolTags};symbolCapabilities.labelSupport=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.documentSymbolProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this70=this;var provider={provideDocumentSymbols:function provideDocumentSymbols(document2,token){var client=_this70._client;var _provideDocumentSymbols=function _provideDocumentSymbols(document3,token2){return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type,client.code2ProtocolConverter.asDocumentSymbolParams(document3),token2).then(function(data){if(data===null){return void 0;}if(data.length===0){return[];}else{var element=data[0];if(vscode_languageserver_protocol_1.DocumentSymbol.is(element)){return client.protocol2CodeConverter.asDocumentSymbols(data);}else{return client.protocol2CodeConverter.asSymbolInformations(data);}}},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideDocumentSymbols?middleware.provideDocumentSymbols(document2,token,_provideDocumentSymbols):_provideDocumentSymbols(document2,token);}};var metaData=options.label!==void 0?{label:options.label}:void 0;return[vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector,provider,metaData),provider];}}]);return DocumentSymbolFeature;}(TextDocumentFeature);var WorkspaceSymbolFeature=/*#__PURE__*/function(_WorkspaceFeature){_inherits(WorkspaceSymbolFeature,_WorkspaceFeature);var _super60=_createSuper(WorkspaceSymbolFeature);function WorkspaceSymbolFeature(client){_classCallCheck(this,WorkspaceSymbolFeature);return _super60.call(this,client,vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);}_createClass(WorkspaceSymbolFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var symbolCapabilities=ensure(ensure(capabilities,"workspace"),"symbol");symbolCapabilities.dynamicRegistration=true;symbolCapabilities.symbolKind={valueSet:SupportedSymbolKinds};symbolCapabilities.tagSupport={valueSet:SupportedSymbolTags};symbolCapabilities.resolveSupport={properties:["location.range"]};}},{key:"initialize",value:function initialize(capabilities){if(!capabilities.workspaceSymbolProvider){return;}this.register({id:UUID.generateUuid(),registerOptions:capabilities.workspaceSymbolProvider===true?{workDoneProgress:false}:capabilities.workspaceSymbolProvider});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this71=this;var provider={provideWorkspaceSymbols:function provideWorkspaceSymbols(query,token){var client=_this71._client;var provideWorkspaceSymbols=function provideWorkspaceSymbols(query2,token2){return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type,{query:query2},token2).then(client.protocol2CodeConverter.asSymbolInformations,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideWorkspaceSymbols?middleware.provideWorkspaceSymbols(query,token,provideWorkspaceSymbols):provideWorkspaceSymbols(query,token);},resolveWorkspaceSymbol:options.resolveProvider===true?function(item,token){var client=_this71._client;var resolveWorkspaceSymbol=function resolveWorkspaceSymbol(item2,token2){return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type,client.code2ProtocolConverter.asWorkspaceSymbol(item2),token2).then(client.protocol2CodeConverter.asSymbolInformation,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.resolveWorkspaceSymbol?middleware.resolveWorkspaceSymbol(item,token,resolveWorkspaceSymbol):resolveWorkspaceSymbol(item,token);}:void 0};return[vscode_1.languages.registerWorkspaceSymbolProvider(provider),provider];}}]);return WorkspaceSymbolFeature;}(WorkspaceFeature);var CodeActionFeature=/*#__PURE__*/function(_TextDocumentFeature8){_inherits(CodeActionFeature,_TextDocumentFeature8);var _super61=_createSuper(CodeActionFeature);function CodeActionFeature(client){_classCallCheck(this,CodeActionFeature);return _super61.call(this,client,vscode_languageserver_protocol_1.CodeActionRequest.type);}_createClass(CodeActionFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var cap=ensure(ensure(capabilities,"textDocument"),"codeAction");cap.dynamicRegistration=true;cap.isPreferredSupport=true;cap.disabledSupport=true;cap.dataSupport=true;cap.resolveSupport={properties:["edit"]};cap.codeActionLiteralSupport={codeActionKind:{valueSet:[vscode_languageserver_protocol_1.CodeActionKind.Empty,vscode_languageserver_protocol_1.CodeActionKind.QuickFix,vscode_languageserver_protocol_1.CodeActionKind.Refactor,vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,vscode_languageserver_protocol_1.CodeActionKind.Source,vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports]}};cap.honorsChangeAnnotations=false;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.codeActionProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this72=this;var provider={provideCodeActions:function provideCodeActions(document2,range,context,token){var client=_this72._client;var _provideCodeActions=function _provideCodeActions(document3,range2,context2,token2){var params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document3),range:client.code2ProtocolConverter.asRange(range2),context:client.code2ProtocolConverter.asCodeActionContext(context2)};return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type,params,token2).then(function(values){if(values===null){return void 0;}var result=[];var _iterator43=_createForOfIteratorHelper(values),_step40;try{for(_iterator43.s();!(_step40=_iterator43.n()).done;){var item=_step40.value;if(vscode_languageserver_protocol_1.Command.is(item)){result.push(client.protocol2CodeConverter.asCommand(item));}else{result.push(client.protocol2CodeConverter.asCodeAction(item));}}}catch(err){_iterator43.e(err);}finally{_iterator43.f();}return result;},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideCodeActions?middleware.provideCodeActions(document2,range,context,token,_provideCodeActions):_provideCodeActions(document2,range,context,token);},resolveCodeAction:options.resolveProvider?function(item,token){var client=_this72._client;var middleware=_this72._client.clientOptions.middleware;var resolveCodeAction=function resolveCodeAction(item2,token2){return client.sendRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type,client.code2ProtocolConverter.asCodeAction(item2),token2).then(client.protocol2CodeConverter.asCodeAction,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type,token2,error,item2);});};return middleware.resolveCodeAction?middleware.resolveCodeAction(item,token,resolveCodeAction):resolveCodeAction(item,token);}:void 0};return[vscode_1.languages.registerCodeActionsProvider(options.documentSelector,provider,options.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds)}:void 0),provider];}}]);return CodeActionFeature;}(TextDocumentFeature);var CodeLensFeature=/*#__PURE__*/function(_TextDocumentFeature9){_inherits(CodeLensFeature,_TextDocumentFeature9);var _super62=_createSuper(CodeLensFeature);function CodeLensFeature(client){_classCallCheck(this,CodeLensFeature);return _super62.call(this,client,vscode_languageserver_protocol_1.CodeLensRequest.type);}_createClass(CodeLensFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"codeLens").dynamicRegistration=true;ensure(ensure(capabilities,"workspace"),"codeLens").refreshSupport=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this73=this;var client=this._client;client.onRequest(vscode_languageserver_protocol_1.CodeLensRefreshRequest.type,/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee12(){var _iterator44,_step41,provider;return regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_iterator44=_createForOfIteratorHelper(_this73.getAllProviders());try{for(_iterator44.s();!(_step41=_iterator44.n()).done;){provider=_step41.value;provider.onDidChangeCodeLensEmitter.fire();}}catch(err){_iterator44.e(err);}finally{_iterator44.f();}case 2:case"end":return _context12.stop();}}},_callee12);})));var options=this.getRegistrationOptions(documentSelector,capabilities.codeLensProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this74=this;var eventEmitter=new vscode_1.EventEmitter();var provider={onDidChangeCodeLenses:eventEmitter.event,provideCodeLenses:function provideCodeLenses(document2,token){var client=_this74._client;var provideCodeLenses=function provideCodeLenses(document3,token2){return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type,client.code2ProtocolConverter.asCodeLensParams(document3),token2).then(client.protocol2CodeConverter.asCodeLenses,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideCodeLenses?middleware.provideCodeLenses(document2,token,provideCodeLenses):provideCodeLenses(document2,token);},resolveCodeLens:options.resolveProvider?function(codeLens,token){var client=_this74._client;var resolveCodeLens=function resolveCodeLens(codeLens2,token2){return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type,client.code2ProtocolConverter.asCodeLens(codeLens2),token2).then(client.protocol2CodeConverter.asCodeLens,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type,token2,error,codeLens2);});};var middleware=client.clientOptions.middleware;return middleware.resolveCodeLens?middleware.resolveCodeLens(codeLens,token,resolveCodeLens):resolveCodeLens(codeLens,token);}:void 0};return[vscode_1.languages.registerCodeLensProvider(options.documentSelector,provider),{provider:provider,onDidChangeCodeLensEmitter:eventEmitter}];}}]);return CodeLensFeature;}(TextDocumentFeature);var DocumentFormattingFeature=/*#__PURE__*/function(_TextDocumentFeature10){_inherits(DocumentFormattingFeature,_TextDocumentFeature10);var _super63=_createSuper(DocumentFormattingFeature);function DocumentFormattingFeature(client){_classCallCheck(this,DocumentFormattingFeature);return _super63.call(this,client,vscode_languageserver_protocol_1.DocumentFormattingRequest.type);}_createClass(DocumentFormattingFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"formatting").dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.documentFormattingProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this75=this;var provider={provideDocumentFormattingEdits:function provideDocumentFormattingEdits(document2,options2,token){var client=_this75._client;var provideDocumentFormattingEdits=function provideDocumentFormattingEdits(document3,options3,token2){var params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document3),options:client.code2ProtocolConverter.asFormattingOptions(options3,FileFormattingOptions.fromConfiguration(document3))};return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type,params,token2).then(client.protocol2CodeConverter.asTextEdits,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideDocumentFormattingEdits?middleware.provideDocumentFormattingEdits(document2,options2,token,provideDocumentFormattingEdits):provideDocumentFormattingEdits(document2,options2,token);}};return[vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector,provider),provider];}}]);return DocumentFormattingFeature;}(TextDocumentFeature);var DocumentRangeFormattingFeature=/*#__PURE__*/function(_TextDocumentFeature11){_inherits(DocumentRangeFormattingFeature,_TextDocumentFeature11);var _super64=_createSuper(DocumentRangeFormattingFeature);function DocumentRangeFormattingFeature(client){_classCallCheck(this,DocumentRangeFormattingFeature);return _super64.call(this,client,vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);}_createClass(DocumentRangeFormattingFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"rangeFormatting").dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.documentRangeFormattingProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this76=this;var provider={provideDocumentRangeFormattingEdits:function provideDocumentRangeFormattingEdits(document2,range,options2,token){var client=_this76._client;var provideDocumentRangeFormattingEdits=function provideDocumentRangeFormattingEdits(document3,range2,options3,token2){var params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document3),range:client.code2ProtocolConverter.asRange(range2),options:client.code2ProtocolConverter.asFormattingOptions(options3,FileFormattingOptions.fromConfiguration(document3))};return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type,params,token2).then(client.protocol2CodeConverter.asTextEdits,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideDocumentRangeFormattingEdits?middleware.provideDocumentRangeFormattingEdits(document2,range,options2,token,provideDocumentRangeFormattingEdits):provideDocumentRangeFormattingEdits(document2,range,options2,token);}};return[vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector,provider),provider];}}]);return DocumentRangeFormattingFeature;}(TextDocumentFeature);var DocumentOnTypeFormattingFeature=/*#__PURE__*/function(_TextDocumentFeature12){_inherits(DocumentOnTypeFormattingFeature,_TextDocumentFeature12);var _super65=_createSuper(DocumentOnTypeFormattingFeature);function DocumentOnTypeFormattingFeature(client){_classCallCheck(this,DocumentOnTypeFormattingFeature);return _super65.call(this,client,vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);}_createClass(DocumentOnTypeFormattingFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"onTypeFormatting").dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.documentOnTypeFormattingProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this77=this,_vscode_1$languages3;var provider={provideOnTypeFormattingEdits:function provideOnTypeFormattingEdits(document2,position,ch,options2,token){var client=_this77._client;var provideOnTypeFormattingEdits=function provideOnTypeFormattingEdits(document3,position2,ch2,options3,token2){var params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document3),position:client.code2ProtocolConverter.asPosition(position2),ch:ch2,options:client.code2ProtocolConverter.asFormattingOptions(options3,FileFormattingOptions.fromConfiguration(document3))};return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type,params,token2).then(client.protocol2CodeConverter.asTextEdits,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideOnTypeFormattingEdits?middleware.provideOnTypeFormattingEdits(document2,position,ch,options2,token,provideOnTypeFormattingEdits):provideOnTypeFormattingEdits(document2,position,ch,options2,token);}};var moreTriggerCharacter=options.moreTriggerCharacter||[];return[(_vscode_1$languages3=vscode_1.languages).registerOnTypeFormattingEditProvider.apply(_vscode_1$languages3,[options.documentSelector,provider,options.firstTriggerCharacter].concat(_toConsumableArray(moreTriggerCharacter))),provider];}}]);return DocumentOnTypeFormattingFeature;}(TextDocumentFeature);var RenameFeature=/*#__PURE__*/function(_TextDocumentFeature13){_inherits(RenameFeature,_TextDocumentFeature13);var _super66=_createSuper(RenameFeature);function RenameFeature(client){_classCallCheck(this,RenameFeature);return _super66.call(this,client,vscode_languageserver_protocol_1.RenameRequest.type);}_createClass(RenameFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var rename=ensure(ensure(capabilities,"textDocument"),"rename");rename.dynamicRegistration=true;rename.prepareSupport=true;rename.prepareSupportDefaultBehavior=vscode_languageserver_protocol_1.PrepareSupportDefaultBehavior.Identifier;rename.honorsChangeAnnotations=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.renameProvider);if(!options){return;}if(Is.boolean(capabilities.renameProvider)){options.prepareProvider=false;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this78=this;var provider={provideRenameEdits:function provideRenameEdits(document2,position,newName,token){var client=_this78._client;var provideRenameEdits=function provideRenameEdits(document3,position2,newName2,token2){var params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document3),position:client.code2ProtocolConverter.asPosition(position2),newName:newName2};return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type,params,token2).then(client.protocol2CodeConverter.asWorkspaceEdit,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type,token2,error,null,false);});};var middleware=client.clientOptions.middleware;return middleware.provideRenameEdits?middleware.provideRenameEdits(document2,position,newName,token,provideRenameEdits):provideRenameEdits(document2,position,newName,token);},prepareRename:options.prepareProvider?function(document2,position,token){var client=_this78._client;var prepareRename=function prepareRename(document3,position2,token2){var params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document3),position:client.code2ProtocolConverter.asPosition(position2)};return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type,params,token2).then(function(result){if(vscode_languageserver_protocol_1.Range.is(result)){return client.protocol2CodeConverter.asRange(result);}else if(_this78.isDefaultBehavior(result)){return result.defaultBehavior===true?null:Promise.reject(new Error("The element can't be renamed."));}else if(result&&vscode_languageserver_protocol_1.Range.is(result.range)){return{range:client.protocol2CodeConverter.asRange(result.range),placeholder:result.placeholder};}return Promise.reject(new Error("The element can't be renamed."));},function(error){if(typeof error.message==="string"){throw new Error(error.message);}else{throw new Error("The element can't be renamed.");}});};var middleware=client.clientOptions.middleware;return middleware.prepareRename?middleware.prepareRename(document2,position,token,prepareRename):prepareRename(document2,position,token);}:void 0};return[vscode_1.languages.registerRenameProvider(options.documentSelector,provider),provider];}},{key:"isDefaultBehavior",value:function isDefaultBehavior(value){var candidate=value;return candidate&&Is.boolean(candidate.defaultBehavior);}}]);return RenameFeature;}(TextDocumentFeature);var DocumentLinkFeature=/*#__PURE__*/function(_TextDocumentFeature14){_inherits(DocumentLinkFeature,_TextDocumentFeature14);var _super67=_createSuper(DocumentLinkFeature);function DocumentLinkFeature(client){_classCallCheck(this,DocumentLinkFeature);return _super67.call(this,client,vscode_languageserver_protocol_1.DocumentLinkRequest.type);}_createClass(DocumentLinkFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var documentLinkCapabilities=ensure(ensure(capabilities,"textDocument"),"documentLink");documentLinkCapabilities.dynamicRegistration=true;documentLinkCapabilities.tooltipSupport=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var options=this.getRegistrationOptions(documentSelector,capabilities.documentLinkProvider);if(!options){return;}this.register({id:UUID.generateUuid(),registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this79=this;var provider={provideDocumentLinks:function provideDocumentLinks(document2,token){var client=_this79._client;var provideDocumentLinks=function provideDocumentLinks(document3,token2){return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type,client.code2ProtocolConverter.asDocumentLinkParams(document3),token2).then(client.protocol2CodeConverter.asDocumentLinks,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideDocumentLinks?middleware.provideDocumentLinks(document2,token,provideDocumentLinks):provideDocumentLinks(document2,token);},resolveDocumentLink:options.resolveProvider?function(link,token){var client=_this79._client;var resolveDocumentLink=function resolveDocumentLink(link2,token2){return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type,client.code2ProtocolConverter.asDocumentLink(link2),token2).then(client.protocol2CodeConverter.asDocumentLink,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type,token2,error,link2);});};var middleware=client.clientOptions.middleware;return middleware.resolveDocumentLink?middleware.resolveDocumentLink(link,token,resolveDocumentLink):resolveDocumentLink(link,token);}:void 0};return[vscode_1.languages.registerDocumentLinkProvider(options.documentSelector,provider),provider];}}]);return DocumentLinkFeature;}(TextDocumentFeature);var ConfigurationFeature=/*#__PURE__*/function(){function ConfigurationFeature(_client){_classCallCheck(this,ConfigurationFeature);this._client=_client;this._listeners=new Map();}_createClass(ConfigurationFeature,[{key:"registrationType",get:function get(){return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"workspace"),"didChangeConfiguration").dynamicRegistration=true;}},{key:"initialize",value:function initialize(){var section=this._client.clientOptions.synchronize.configurationSection;if(section!==void 0){this.register({id:UUID.generateUuid(),registerOptions:{section:section}});}}},{key:"register",value:function register(data){var _this80=this;var disposable=vscode_1.workspace.onDidChangeConfiguration(function(event){_this80.onDidChangeConfiguration(data.registerOptions.section,event);});this._listeners.set(data.id,disposable);if(data.registerOptions.section!==void 0){this.onDidChangeConfiguration(data.registerOptions.section,void 0);}}},{key:"unregister",value:function unregister(id){var disposable=this._listeners.get(id);if(disposable){this._listeners.delete(id);disposable.dispose();}}},{key:"dispose",value:function dispose(){var _iterator45=_createForOfIteratorHelper(this._listeners.values()),_step42;try{for(_iterator45.s();!(_step42=_iterator45.n()).done;){var disposable=_step42.value;disposable.dispose();}}catch(err){_iterator45.e(err);}finally{_iterator45.f();}this._listeners.clear();}},{key:"onDidChangeConfiguration",value:function onDidChangeConfiguration(configurationSection,event){var _this81=this;var sections;if(Is.string(configurationSection)){sections=[configurationSection];}else{sections=configurationSection;}if(sections!==void 0&&event!==void 0){var affected=sections.some(function(section){return event.affectsConfiguration(section);});if(!affected){return;}}var didChangeConfiguration=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee13(sections2){return regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:if(!(sections2===void 0)){_context13.next=4;break;}return _context13.abrupt("return",_this81._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type,{settings:null}));case 4:return _context13.abrupt("return",_this81._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type,{settings:_this81.extractSettingsInformation(sections2)}));case 5:case"end":return _context13.stop();}}},_callee13);}));return function didChangeConfiguration(_x19){return _ref11.apply(this,arguments);};}();var middleware=this.getMiddleware();(middleware?middleware(sections,didChangeConfiguration):didChangeConfiguration(sections)).catch(function(error){_this81._client.error("Sending notification ".concat(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type.method," failed"),error);});}},{key:"extractSettingsInformation",value:function extractSettingsInformation(keys){function ensurePath(config,path){var current=config;for(var i=0;i<path.length-1;i++){var obj=current[path[i]];if(!obj){obj=Object.create(null);current[path[i]]=obj;}current=obj;}return current;}var resource=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0;var result=Object.create(null);for(var i=0;i<keys.length;i++){var key=keys[i];var index=key.indexOf(".");var config=null;if(index>=0){config=vscode_1.workspace.getConfiguration(key.substr(0,index),resource).get(key.substr(index+1));}else{config=vscode_1.workspace.getConfiguration(void 0,resource).get(key);}if(config){var path=keys[i].split(".");ensurePath(result,path)[path[path.length-1]]=(0,configuration_1.toJSONObject)(config);}}return result;}},{key:"getMiddleware",value:function getMiddleware(){var middleware=this._client.clientOptions.middleware;if(middleware.workspace&&middleware.workspace.didChangeConfiguration){return middleware.workspace.didChangeConfiguration;}else{return void 0;}}}]);return ConfigurationFeature;}();var ExecuteCommandFeature=/*#__PURE__*/function(){function ExecuteCommandFeature(_client){_classCallCheck(this,ExecuteCommandFeature);this._client=_client;this._commands=new Map();}_createClass(ExecuteCommandFeature,[{key:"registrationType",get:function get(){return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"workspace"),"executeCommand").dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities){if(!capabilities.executeCommandProvider){return;}this.register({id:UUID.generateUuid(),registerOptions:Object.assign({},capabilities.executeCommandProvider)});}},{key:"register",value:function register(data){var client=this._client;var middleware=client.clientOptions.middleware;var executeCommand=function executeCommand(command,args){var params={command:command,arguments:args};return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type,params).then(void 0,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type,void 0,error,void 0);});};if(data.registerOptions.commands){var disposables=[];var _iterator46=_createForOfIteratorHelper(data.registerOptions.commands),_step43;try{var _loop4=function _loop4(){var command=_step43.value;disposables.push(vscode_1.commands.registerCommand(command,function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++){args[_key9]=arguments[_key9];}return middleware.executeCommand?middleware.executeCommand(command,args,executeCommand):executeCommand(command,args);}));};for(_iterator46.s();!(_step43=_iterator46.n()).done;){_loop4();}}catch(err){_iterator46.e(err);}finally{_iterator46.f();}this._commands.set(data.id,disposables);}}},{key:"unregister",value:function unregister(id){var disposables=this._commands.get(id);if(disposables){disposables.forEach(function(disposable){return disposable.dispose();});}}},{key:"dispose",value:function dispose(){this._commands.forEach(function(value){value.forEach(function(disposable){return disposable.dispose();});});this._commands.clear();}}]);return ExecuteCommandFeature;}();var MessageTransports;(function(MessageTransports2){function is(value){var candidate=value;return candidate&&vscode_languageserver_protocol_1.MessageReader.is(value.reader)&&vscode_languageserver_protocol_1.MessageWriter.is(value.writer);}MessageTransports2.is=is;})(MessageTransports=exports.MessageTransports||(exports.MessageTransports={}));var OnReady=/*#__PURE__*/function(){function OnReady(_resolve,_reject){_classCallCheck(this,OnReady);this._resolve=_resolve;this._reject=_reject;this._used=false;}_createClass(OnReady,[{key:"isUsed",get:function get(){return this._used;}},{key:"resolve",value:function resolve(){this._used=true;this._resolve();}},{key:"reject",value:function reject(error){this._used=true;this._reject(error);}}]);return OnReady;}();var LSPCancellationError=/*#__PURE__*/function(_vscode_1$Cancellatio){_inherits(LSPCancellationError,_vscode_1$Cancellatio);var _super68=_createSuper(LSPCancellationError);function LSPCancellationError(data){var _this82;_classCallCheck(this,LSPCancellationError);_this82=_super68.call(this);_this82.data=data;return _this82;}return _createClass(LSPCancellationError);}(vscode_1.CancellationError);exports.LSPCancellationError=LSPCancellationError;var BaseLanguageClient=/*#__PURE__*/function(){function BaseLanguageClient(id,name,clientOptions){var _clientOptions$docume,_clientOptions$synchr,_clientOptions$output,_clientOptions$reveal,_clientOptions$stdioE,_clientOptions$errorH,_clientOptions$connec,_clientOptions$middle,_clientOptions$diagno,_this83=this;_classCallCheck(this,BaseLanguageClient);this._traceFormat=vscode_languageserver_protocol_1.TraceFormat.Text;this._features=[];this._dynamicFeatures=new Map();this._id=id;this._name=name;clientOptions=clientOptions||{};var markdown={isTrusted:false,supportHtml:false};if(clientOptions.markdown!==void 0){markdown.isTrusted=clientOptions.markdown.isTrusted===true;markdown.supportHtml=clientOptions.markdown.supportHtml===true;}this._clientOptions={documentSelector:(_clientOptions$docume=clientOptions.documentSelector)!==null&&_clientOptions$docume!==void 0?_clientOptions$docume:[],synchronize:(_clientOptions$synchr=clientOptions.synchronize)!==null&&_clientOptions$synchr!==void 0?_clientOptions$synchr:{},diagnosticCollectionName:clientOptions.diagnosticCollectionName,outputChannelName:(_clientOptions$output=clientOptions.outputChannelName)!==null&&_clientOptions$output!==void 0?_clientOptions$output:this._name,revealOutputChannelOn:(_clientOptions$reveal=clientOptions.revealOutputChannelOn)!==null&&_clientOptions$reveal!==void 0?_clientOptions$reveal:RevealOutputChannelOn2.Error,stdioEncoding:(_clientOptions$stdioE=clientOptions.stdioEncoding)!==null&&_clientOptions$stdioE!==void 0?_clientOptions$stdioE:"utf8",initializationOptions:clientOptions.initializationOptions,initializationFailedHandler:clientOptions.initializationFailedHandler,progressOnInitialization:!!clientOptions.progressOnInitialization,errorHandler:(_clientOptions$errorH=clientOptions.errorHandler)!==null&&_clientOptions$errorH!==void 0?_clientOptions$errorH:this.createDefaultErrorHandler((_clientOptions$connec=clientOptions.connectionOptions)===null||_clientOptions$connec===void 0?void 0:_clientOptions$connec.maxRestartCount),middleware:(_clientOptions$middle=clientOptions.middleware)!==null&&_clientOptions$middle!==void 0?_clientOptions$middle:{},uriConverters:clientOptions.uriConverters,workspaceFolder:clientOptions.workspaceFolder,connectionOptions:clientOptions.connectionOptions,markdown:markdown,diagnosticPullOptions:(_clientOptions$diagno=clientOptions.diagnosticPullOptions)!==null&&_clientOptions$diagno!==void 0?_clientOptions$diagno:{onChange:true,onSave:false}};this._clientOptions.synchronize=this._clientOptions.synchronize||{};this._state=ClientState.Initial;this._connectionPromise=void 0;this._resolvedConnection=void 0;this._initializeResult=void 0;if(clientOptions.outputChannel){this._outputChannel=clientOptions.outputChannel;this._disposeOutputChannel=false;}else{this._outputChannel=void 0;this._disposeOutputChannel=true;}this._traceOutputChannel=clientOptions.traceOutputChannel;this._listeners=void 0;this._providers=void 0;this._diagnostics=void 0;this._fileEvents=[];this._fileEventDelayer=new async_1.Delayer(250);this._onReady=new Promise(function(resolve,reject){_this83._onReadyCallbacks=new OnReady(resolve,reject);});this._onStop=void 0;this._telemetryEmitter=new vscode_languageserver_protocol_1.Emitter();this._stateChangeEmitter=new vscode_languageserver_protocol_1.Emitter();this._trace=vscode_languageserver_protocol_1.Trace.Off;this._tracer={log:function log(messageOrDataObject,data){if(Is.string(messageOrDataObject)){_this83.logTrace(messageOrDataObject,data);}else{_this83.logObjectTrace(messageOrDataObject);}}};this._c2p=c2p.createConverter(clientOptions.uriConverters?clientOptions.uriConverters.code2Protocol:void 0);this._p2c=p2c.createConverter(clientOptions.uriConverters?clientOptions.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml);this._syncedDocuments=new Map();this.registerBuiltinFeatures();}_createClass(BaseLanguageClient,[{key:"state",get:function get(){return this._state;},set:function set(value){var oldState=this.getPublicState();this._state=value;var newState=this.getPublicState();if(newState!==oldState){this._stateChangeEmitter.fire({oldState:oldState,newState:newState});}}},{key:"getPublicState",value:function getPublicState(){if(this.state===ClientState.Running){return State.Running;}else if(this.state===ClientState.Starting){return State.Starting;}else{return State.Stopped;}}},{key:"initializeResult",get:function get(){return this._initializeResult;}},{key:"sendRequest",value:function sendRequest(type){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet when handling ".concat(Is.string(type)?type:type.method));}this.forceDocumentSync();try{var _this$_resolvedConnec;for(var _len10=arguments.length,params=new Array(_len10>1?_len10-1:0),_key10=1;_key10<_len10;_key10++){params[_key10-1]=arguments[_key10];}return(_this$_resolvedConnec=this._resolvedConnection).sendRequest.apply(_this$_resolvedConnec,[type].concat(params));}catch(error){this.error("Sending request ".concat(Is.string(type)?type:type.method," failed."),error);throw error;}}},{key:"onRequest",value:function onRequest(type,handler){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet when handling ".concat(Is.string(type)?type:type.method));}try{return this._resolvedConnection.onRequest(type,handler);}catch(error){this.error("Registering request handler ".concat(Is.string(type)?type:type.method," failed."),error);throw error;}}},{key:"sendNotification",value:function sendNotification(type,params){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet when handling ".concat(Is.string(type)?type:type.method));}this.forceDocumentSync();try{return this._resolvedConnection.sendNotification(type,params);}catch(error){this.error("Sending notification ".concat(Is.string(type)?type:type.method," failed."),error);throw error;}}},{key:"onNotification",value:function onNotification(type,handler){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet when handling ".concat(Is.string(type)?type:type.method));}try{return this._resolvedConnection.onNotification(type,handler);}catch(error){this.error("Registering notification handler ".concat(Is.string(type)?type:type.method," failed."),error);throw error;}}},{key:"onProgress",value:function onProgress(type,token,handler){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet when trying to send progress");}try{if(vscode_languageserver_protocol_1.WorkDoneProgress.is(type)){var handleWorkDoneProgress=this._clientOptions.middleware.handleWorkDoneProgress;if(handleWorkDoneProgress!==void 0){return this._resolvedConnection.onProgress(type,token,function(params){handleWorkDoneProgress(token,params,function(){return handler(params);});});}}return this._resolvedConnection.onProgress(type,token,handler);}catch(error){this.error("Registering progress handler for token ".concat(token," failed."),error);throw error;}}},{key:"sendProgress",value:function sendProgress(type,token,value){var _this84=this;if(!this.isConnectionActive()){throw new Error("Language client is not ready yet when trying to send progress");}this.forceDocumentSync();return this._resolvedConnection.sendProgress(type,token,value).then(void 0,function(error){_this84.error("Sending progress for token ".concat(token," failed."),error);throw error;});}},{key:"name",get:function get(){return this._name;}},{key:"clientOptions",get:function get(){return this._clientOptions;}},{key:"protocol2CodeConverter",get:function get(){return this._p2c;}},{key:"code2ProtocolConverter",get:function get(){return this._c2p;}},{key:"onTelemetry",get:function get(){return this._telemetryEmitter.event;}},{key:"onDidChangeState",get:function get(){return this._stateChangeEmitter.event;}},{key:"outputChannel",get:function get(){if(!this._outputChannel){this._outputChannel=vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name);}return this._outputChannel;}},{key:"traceOutputChannel",get:function get(){if(this._traceOutputChannel){return this._traceOutputChannel;}return this.outputChannel;}},{key:"diagnostics",get:function get(){return this._diagnostics;}},{key:"createDefaultErrorHandler",value:function createDefaultErrorHandler(maxRestartCount){if(maxRestartCount!==void 0&&maxRestartCount<0){throw new Error("Invalid maxRestartCount: ".concat(maxRestartCount));}return new DefaultErrorHandler(this,maxRestartCount!==null&&maxRestartCount!==void 0?maxRestartCount:4);}},{key:"trace",set:function set(value){var _this85=this;this._trace=value;this.onReady().then(function(){_this85.resolveConnection().then(function(connection){connection.trace(_this85._trace,_this85._tracer,{sendNotification:false,traceFormat:_this85._traceFormat});},function(){return _this85.info("Setting trace value failed",void 0,false);});},function(){});}},{key:"data2String",value:function data2String(data){if(data instanceof vscode_languageserver_protocol_1.ResponseError){var responseError=data;return"  Message: ".concat(responseError.message,"\n  Code: ").concat(responseError.code," ").concat(responseError.data?"\n"+responseError.data.toString():"");}if(data instanceof Error){if(Is.string(data.stack)){return data.stack;}return data.message;}if(Is.string(data)){return data;}return data.toString();}},{key:"info",value:function info(message,data){var showNotification=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;this.outputChannel.appendLine("[Info  - ".concat(new Date().toLocaleTimeString(),"] ").concat(message));if(data!==null&&data!==void 0){this.outputChannel.appendLine(this.data2String(data));}if(showNotification&&this._clientOptions.revealOutputChannelOn<=RevealOutputChannelOn2.Info){this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Info,message);}}},{key:"warn",value:function warn(message,data){var showNotification=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;this.outputChannel.appendLine("[Warn  - ".concat(new Date().toLocaleTimeString(),"] ").concat(message));if(data!==null&&data!==void 0){this.outputChannel.appendLine(this.data2String(data));}if(showNotification&&this._clientOptions.revealOutputChannelOn<=RevealOutputChannelOn2.Warn){this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Warning,message);}}},{key:"error",value:function error(message,data){var showNotification=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;this.outputChannel.appendLine("[Error - ".concat(new Date().toLocaleTimeString(),"] ").concat(message));if(data!==null&&data!==void 0){this.outputChannel.appendLine(this.data2String(data));}if(showNotification==="force"||showNotification&&this._clientOptions.revealOutputChannelOn<=RevealOutputChannelOn2.Error){this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Error,message);}}},{key:"showNotificationMessage",value:function showNotificationMessage(type,message){var _message2,_this86=this;message=(_message2=message)!==null&&_message2!==void 0?_message2:"A request has failed. See the output for more information.";var messageFunc=type===vscode_languageserver_protocol_1.MessageType.Error?vscode_1.window.showErrorMessage:type===vscode_languageserver_protocol_1.MessageType.Warning?vscode_1.window.showWarningMessage:vscode_1.window.showInformationMessage;void messageFunc(message,"Go to output").then(function(selection){if(selection!==void 0){_this86.outputChannel.show(true);}});}},{key:"logTrace",value:function logTrace(message,data){this.traceOutputChannel.appendLine("[Trace - ".concat(new Date().toLocaleTimeString(),"] ").concat(message));if(data){this.traceOutputChannel.appendLine(this.data2String(data));}}},{key:"logObjectTrace",value:function logObjectTrace(data){if(data.isLSPMessage&&data.type){this.traceOutputChannel.append("[LSP   - ".concat(new Date().toLocaleTimeString(),"] "));}else{this.traceOutputChannel.append("[Trace - ".concat(new Date().toLocaleTimeString(),"] "));}if(data){this.traceOutputChannel.appendLine("".concat(JSON.stringify(data)));}}},{key:"needsStart",value:function needsStart(){return this.state===ClientState.Initial||this.state===ClientState.Stopping||this.state===ClientState.Stopped;}},{key:"needsStop",value:function needsStop(){return this.state===ClientState.Starting||this.state===ClientState.Running;}},{key:"onReady",value:function onReady(){return this._onReady;}},{key:"isConnectionActive",value:function isConnectionActive(){return this.state===ClientState.Running&&!!this._resolvedConnection;}},{key:"start",value:function start(){var _this87=this;if(this._onReadyCallbacks.isUsed){this._onReady=new Promise(function(resolve,reject){_this87._onReadyCallbacks=new OnReady(resolve,reject);});}this._listeners=[];this._providers=[];if(!this._diagnostics){this._diagnostics=this._clientOptions.diagnosticCollectionName?vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):vscode_1.languages.createDiagnosticCollection();}this.state=ClientState.Starting;this.resolveConnection().then(function(connection){connection.onLogMessage(function(message){switch(message.type){case vscode_languageserver_protocol_1.MessageType.Error:_this87.error(message.message,void 0,false);break;case vscode_languageserver_protocol_1.MessageType.Warning:_this87.warn(message.message,void 0,false);break;case vscode_languageserver_protocol_1.MessageType.Info:_this87.info(message.message,void 0,false);break;default:_this87.outputChannel.appendLine(message.message);}});connection.onShowMessage(function(message){switch(message.type){case vscode_languageserver_protocol_1.MessageType.Error:void vscode_1.window.showErrorMessage(message.message);break;case vscode_languageserver_protocol_1.MessageType.Warning:void vscode_1.window.showWarningMessage(message.message);break;case vscode_languageserver_protocol_1.MessageType.Info:void vscode_1.window.showInformationMessage(message.message);break;default:void vscode_1.window.showInformationMessage(message.message);}});connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type,function(params){var messageFunc;switch(params.type){case vscode_languageserver_protocol_1.MessageType.Error:messageFunc=vscode_1.window.showErrorMessage;break;case vscode_languageserver_protocol_1.MessageType.Warning:messageFunc=vscode_1.window.showWarningMessage;break;case vscode_languageserver_protocol_1.MessageType.Info:messageFunc=vscode_1.window.showInformationMessage;break;default:messageFunc=vscode_1.window.showInformationMessage;}var actions=params.actions||[];return messageFunc.apply(void 0,[params.message].concat(_toConsumableArray(actions)));});connection.onTelemetry(function(data){_this87._telemetryEmitter.fire(data);});connection.onRequest(vscode_languageserver_protocol_1.ShowDocumentRequest.type,/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee15(params){var _this87$_clientOption;var showDocument,middleware;return regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:showDocument=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee14(params2){var uri,success,options;return regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:uri=_this87.protocol2CodeConverter.asUri(params2.uri);_context14.prev=1;if(!(params2.external===true)){_context14.next=9;break;}_context14.next=5;return vscode_1.env.openExternal(uri);case 5:success=_context14.sent;return _context14.abrupt("return",{success:success});case 9:options={};if(params2.selection!==void 0){options.selection=_this87.protocol2CodeConverter.asRange(params2.selection);}if(params2.takeFocus===void 0||params2.takeFocus===false){options.preserveFocus=true;}else if(params2.takeFocus===true){options.preserveFocus=false;}_context14.next=14;return vscode_1.window.showTextDocument(uri,options);case 14:return _context14.abrupt("return",{success:true});case 15:_context14.next=20;break;case 17:_context14.prev=17;_context14.t0=_context14["catch"](1);return _context14.abrupt("return",{success:true});case 20:case"end":return _context14.stop();}}},_callee14,null,[[1,17]]);}));return function showDocument(_x21){return _ref13.apply(this,arguments);};}();middleware=(_this87$_clientOption=_this87._clientOptions.middleware.window)===null||_this87$_clientOption===void 0?void 0:_this87$_clientOption.showDocument;if(!(middleware!==void 0)){_context15.next=6;break;}return _context15.abrupt("return",middleware(params,showDocument));case 6:return _context15.abrupt("return",showDocument(params));case 7:case"end":return _context15.stop();}}},_callee15);}));return function(_x20){return _ref12.apply(this,arguments);};}());connection.listen();return _this87.initialize(connection);}).catch(function(error){_this87.state=ClientState.StartFailed;_this87._onReadyCallbacks.reject(error);_this87.error("".concat(_this87._name," client: couldn't create connection to server"),error,"force");});return new vscode_1.Disposable(function(){if(_this87.needsStop()){_this87.stop().catch(function(error){_this87.error("Stopping server failed.",error,false);});}});}},{key:"resolveConnection",value:function resolveConnection(){if(!this._connectionPromise){this._connectionPromise=this.createConnection();}return this._connectionPromise;}},{key:"initialize",value:function initialize(connection){this.refreshTrace(connection,false);var initOption=this._clientOptions.initializationOptions;var _ref14=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],_ref15=_slicedToArray(_ref14,2),rootPath=_ref15[0],workspaceFolders=_ref15[1];var initParams={processId:null,clientInfo:{name:vscode_1.env.appName,version:vscode_1.version},locale:this.getLocale(),rootPath:rootPath?rootPath:null,rootUri:rootPath?this._c2p.asUri(vscode_1.Uri.file(rootPath)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Is.func(initOption)?initOption():initOption,trace:vscode_languageserver_protocol_1.Trace.toString(this._trace),workspaceFolders:workspaceFolders};this.fillInitializeParams(initParams);if(this._clientOptions.progressOnInitialization){var token=UUID.generateUuid();var part=new progressPart_1.ProgressPart(connection,token);initParams.workDoneToken=token;return this.doInitialize(connection,initParams).then(function(result){part.done();return result;},function(error){part.cancel();throw error;});}else{return this.doInitialize(connection,initParams);}}},{key:"doInitialize",value:function doInitialize(connection,initParams){var _this88=this;return connection.initialize(initParams).then(function(result){_this88._resolvedConnection=connection;_this88._initializeResult=result;_this88.state=ClientState.Running;var textDocumentSyncOptions=void 0;if(Is.number(result.capabilities.textDocumentSync)){if(result.capabilities.textDocumentSync===vscode_languageserver_protocol_1.TextDocumentSyncKind.None){textDocumentSyncOptions={openClose:false,change:vscode_languageserver_protocol_1.TextDocumentSyncKind.None,save:void 0};}else{textDocumentSyncOptions={openClose:true,change:result.capabilities.textDocumentSync,save:{includeText:false}};}}else if(result.capabilities.textDocumentSync!==void 0&&result.capabilities.textDocumentSync!==null){textDocumentSyncOptions=result.capabilities.textDocumentSync;}_this88._capabilities=Object.assign({},result.capabilities,{resolvedTextDocumentSync:textDocumentSyncOptions});connection.onDiagnostics(function(params){return _this88.handleDiagnostics(params);});connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type,function(params){return _this88.handleRegistrationRequest(params);});connection.onRequest("client/registerFeature",function(params){return _this88.handleRegistrationRequest(params);});connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type,function(params){return _this88.handleUnregistrationRequest(params);});connection.onRequest("client/unregisterFeature",function(params){return _this88.handleUnregistrationRequest(params);});connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type,function(params){return _this88.handleApplyWorkspaceEdit(params);});return connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type,{}).then(function(){_this88.hookFileEvents(connection);_this88.hookConfigurationChanged(connection);_this88.initializeFeatures(connection);_this88._onReadyCallbacks.resolve();return result;});}).then(void 0,function(error){if(_this88._clientOptions.initializationFailedHandler){if(_this88._clientOptions.initializationFailedHandler(error)){void _this88.initialize(connection);}else{void _this88.stop();_this88._onReadyCallbacks.reject(error);}}else if(error instanceof vscode_languageserver_protocol_1.ResponseError&&error.data&&error.data.retry){void vscode_1.window.showErrorMessage(error.message,{title:"Retry",id:"retry"}).then(function(item){if(item&&item.id==="retry"){void _this88.initialize(connection);}else{void _this88.stop();_this88._onReadyCallbacks.reject(error);}});}else{if(error&&error.message){void vscode_1.window.showErrorMessage(error.message);}_this88.error("Server initialization failed.",error);void _this88.stop();_this88._onReadyCallbacks.reject(error);}throw error;});}},{key:"_clientGetRootPath",value:function _clientGetRootPath(){var folders=vscode_1.workspace.workspaceFolders;if(!folders||folders.length===0){return void 0;}var folder=folders[0];if(folder.uri.scheme==="file"){return folder.uri.fsPath;}return void 0;}},{key:"stop",value:function(){var _stop=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee16(){var _this89=this;var timeout,tp,shutdown,_args16=arguments;return regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:timeout=_args16.length>0&&_args16[0]!==undefined?_args16[0]:2e3;_context16.next=3;return this.onReady();case 3:this._initializeResult=void 0;if(this._connectionPromise){_context16.next=7;break;}this.state=ClientState.Stopped;return _context16.abrupt("return",Promise.resolve());case 7:if(!(this.state===ClientState.Stopping&&this._onStop)){_context16.next=9;break;}return _context16.abrupt("return",this._onStop);case 9:this.state=ClientState.Stopping;this.cleanUp(false);tp=new Promise(function(c){(0,vscode_languageserver_protocol_1.RAL)().timer.setTimeout(c,timeout);});shutdown=this.resolveConnection().then(function(connection){return connection.shutdown().then(function(){return connection.exit().then(function(){return connection;});});});return _context16.abrupt("return",this._onStop=Promise.race([tp,shutdown]).then(function(connection){if(connection!==void 0){connection.end();connection.dispose();}else{_this89.error("Stopping server timed out",void 0,false);throw new Error("Stopping the server timed out");}},function(error){_this89.error("Stopping server failed",error,false);throw error;}).finally(function(){_this89.state=ClientState.Stopped;_this89.cleanUpChannel();_this89._onStop=void 0;_this89._connectionPromise=void 0;_this89._resolvedConnection=void 0;}));case 14:case"end":return _context16.stop();}}},_callee16,this);}));function stop(){return _stop.apply(this,arguments);}return stop;}()},{key:"cleanUp",value:function cleanUp(){var channel=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var diagnostics=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(this._listeners){this._listeners.forEach(function(listener){return listener.dispose();});this._listeners=void 0;}if(this._providers){this._providers.forEach(function(provider){return provider.dispose();});this._providers=void 0;}if(this._syncedDocuments){this._syncedDocuments.clear();}var _iterator47=_createForOfIteratorHelper(this._features.values()),_step44;try{for(_iterator47.s();!(_step44=_iterator47.n()).done;){var feature=_step44.value;feature.dispose();}}catch(err){_iterator47.e(err);}finally{_iterator47.f();}if(channel){this.cleanUpChannel();}if(diagnostics&&this._diagnostics){this._diagnostics.dispose();this._diagnostics=void 0;}}},{key:"cleanUpChannel",value:function cleanUpChannel(){if(this._outputChannel&&this._disposeOutputChannel){this._outputChannel.dispose();this._outputChannel=void 0;}}},{key:"notifyFileEvent",value:function notifyFileEvent(event){var _this$clientOptions$m;var client=this;function didChangeWatchedFile(_x22){return _didChangeWatchedFile.apply(this,arguments);}function _didChangeWatchedFile(){_didChangeWatchedFile=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee18(event2){return regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:client._fileEvents.push(event2);return _context18.abrupt("return",client._fileEventDelayer.trigger(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee17(){var connection,promise;return regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return client.onReady();case 2:_context17.next=4;return client.resolveConnection();case 4:connection=_context17.sent;promise=Promise.resolve();if(client.isConnectionActive()){client.forceDocumentSync();promise=connection.didChangeWatchedFiles({changes:client._fileEvents});}client._fileEvents=[];return _context17.abrupt("return",promise);case 9:case"end":return _context17.stop();}}},_callee17);}))));case 2:case"end":return _context18.stop();}}},_callee18);}));return _didChangeWatchedFile.apply(this,arguments);}var workSpaceMiddleware=(_this$clientOptions$m=this.clientOptions.middleware)===null||_this$clientOptions$m===void 0?void 0:_this$clientOptions$m.workspace;(workSpaceMiddleware!==null&&workSpaceMiddleware!==void 0&&workSpaceMiddleware.didChangeWatchedFile?workSpaceMiddleware.didChangeWatchedFile(event,didChangeWatchedFile):didChangeWatchedFile(event)).catch(function(error){client.error("Notify file events failed.",error);});}},{key:"forceDocumentSync",value:function forceDocumentSync(){if(this._didChangeTextDocumentFeature===void 0){this._didChangeTextDocumentFeature=this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method);}this._didChangeTextDocumentFeature.forceDelivery();}},{key:"handleDiagnostics",value:function handleDiagnostics(params){var _this90=this;if(!this._diagnostics){return;}var uri=this._p2c.asUri(params.uri);var diagnostics=this._p2c.asDiagnostics(params.diagnostics);var middleware=this.clientOptions.middleware;if(middleware.handleDiagnostics){middleware.handleDiagnostics(uri,diagnostics,function(uri2,diagnostics2){return _this90.setDiagnostics(uri2,diagnostics2);});}else{this.setDiagnostics(uri,diagnostics);}}},{key:"setDiagnostics",value:function setDiagnostics(uri,diagnostics){if(!this._diagnostics){return;}this._diagnostics.set(uri,diagnostics);}},{key:"createConnection",value:function createConnection(){var _this91=this;var errorHandler=function errorHandler(error,message,count){_this91.handleConnectionError(error,message,count);};var closeHandler=function closeHandler(){_this91.handleConnectionClosed();};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(function(transports){return _createConnection(transports.reader,transports.writer,errorHandler,closeHandler,_this91._clientOptions.connectionOptions);});}},{key:"handleConnectionClosed",value:function handleConnectionClosed(){if(this.state===ClientState.Stopped){return;}try{if(this._resolvedConnection){this._resolvedConnection.dispose();}}catch(error){}var handlerResult={action:CloseAction.DoNotRestart};if(this.state!==ClientState.Stopping){try{handlerResult=this._clientOptions.errorHandler.closed();}catch(error){}}this._connectionPromise=void 0;this._resolvedConnection=void 0;if(handlerResult.action===CloseAction.DoNotRestart){var _handlerResult$messag;this.error((_handlerResult$messag=handlerResult.message)!==null&&_handlerResult$messag!==void 0?_handlerResult$messag:"Connection to server got closed. Server will not be restarted.",void 0,"force");if(this.state===ClientState.Starting){this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted."));this.state=ClientState.StartFailed;}else{this.state=ClientState.Stopped;}this.cleanUp(false,true);}else if(handlerResult.action===CloseAction.Restart){var _handlerResult$messag2;this.info((_handlerResult$messag2=handlerResult.message)!==null&&_handlerResult$messag2!==void 0?_handlerResult$messag2:"Connection to server got closed. Server will restart.");this.cleanUp(false,false);this.state=ClientState.Initial;this.start();}}},{key:"handleConnectionError",value:function handleConnectionError(error,message,count){var _this92=this;var handlerResult=this._clientOptions.errorHandler.error(error,message,count);if(handlerResult.action===ErrorAction.Shutdown){var _handlerResult$messag3;this.error((_handlerResult$messag3=handlerResult.message)!==null&&_handlerResult$messag3!==void 0?_handlerResult$messag3:"Client ".concat(this._name,": connection to server is erroring. Shutting down server."),void 0,"force");this.stop().catch(function(error2){_this92.error("Stopping server failed",error2,false);});}}},{key:"hookConfigurationChanged",value:function hookConfigurationChanged(connection){var _this93=this;vscode_1.workspace.onDidChangeConfiguration(function(){_this93.refreshTrace(connection,true);});}},{key:"refreshTrace",value:function refreshTrace(connection){var sendNotification=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var config=vscode_1.workspace.getConfiguration(this._id);var trace=vscode_languageserver_protocol_1.Trace.Off;var traceFormat=vscode_languageserver_protocol_1.TraceFormat.Text;if(config){var traceConfig=config.get("trace.server","off");if(typeof traceConfig==="string"){trace=vscode_languageserver_protocol_1.Trace.fromString(traceConfig);}else{trace=vscode_languageserver_protocol_1.Trace.fromString(config.get("trace.server.verbosity","off"));traceFormat=vscode_languageserver_protocol_1.TraceFormat.fromString(config.get("trace.server.format","text"));}}this._trace=trace;this._traceFormat=traceFormat;connection.trace(this._trace,this._tracer,{sendNotification:sendNotification,traceFormat:this._traceFormat});}},{key:"hookFileEvents",value:function hookFileEvents(_connection){var fileEvents=this._clientOptions.synchronize.fileEvents;if(!fileEvents){return;}var watchers;if(Is.array(fileEvents)){watchers=fileEvents;}else{watchers=[fileEvents];}if(!watchers){return;}this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(),watchers);}},{key:"registerFeatures",value:function registerFeatures(features){var _iterator48=_createForOfIteratorHelper(features),_step45;try{for(_iterator48.s();!(_step45=_iterator48.n()).done;){var feature=_step45.value;this.registerFeature(feature);}}catch(err){_iterator48.e(err);}finally{_iterator48.f();}}},{key:"registerFeature",value:function registerFeature(feature){this._features.push(feature);if(DynamicFeature.is(feature)){var registrationType=feature.registrationType;this._dynamicFeatures.set(registrationType.method,feature);}}},{key:"getFeature",value:function getFeature(request){return this._dynamicFeatures.get(request);}},{key:"registerBuiltinFeatures",value:function registerBuiltinFeatures(){var _this94=this;this.registerFeature(new ConfigurationFeature(this));this.registerFeature(new DidOpenTextDocumentFeature(this,this._syncedDocuments));this.registerFeature(new DidChangeTextDocumentFeature(this));this.registerFeature(new WillSaveFeature(this));this.registerFeature(new WillSaveWaitUntilFeature(this));this.registerFeature(new DidSaveTextDocumentFeature(this));this.registerFeature(new DidCloseTextDocumentFeature(this,this._syncedDocuments));this.registerFeature(new FileSystemWatcherFeature(this,function(event){return _this94.notifyFileEvent(event);}));this.registerFeature(new CompletionItemFeature(this));this.registerFeature(new HoverFeature(this));this.registerFeature(new SignatureHelpFeature(this));this.registerFeature(new DefinitionFeature(this));this.registerFeature(new ReferencesFeature(this));this.registerFeature(new DocumentHighlightFeature(this));this.registerFeature(new DocumentSymbolFeature(this));this.registerFeature(new WorkspaceSymbolFeature(this));this.registerFeature(new CodeActionFeature(this));this.registerFeature(new CodeLensFeature(this));this.registerFeature(new DocumentFormattingFeature(this));this.registerFeature(new DocumentRangeFormattingFeature(this));this.registerFeature(new DocumentOnTypeFormattingFeature(this));this.registerFeature(new RenameFeature(this));this.registerFeature(new DocumentLinkFeature(this));this.registerFeature(new ExecuteCommandFeature(this));}},{key:"fillInitializeParams",value:function fillInitializeParams(params){var _iterator49=_createForOfIteratorHelper(this._features),_step46;try{for(_iterator49.s();!(_step46=_iterator49.n()).done;){var feature=_step46.value;if(Is.func(feature.fillInitializeParams)){feature.fillInitializeParams(params);}}}catch(err){_iterator49.e(err);}finally{_iterator49.f();}}},{key:"computeClientCapabilities",value:function computeClientCapabilities(){var result={};ensure(result,"workspace").applyEdit=true;var workspaceEdit=ensure(ensure(result,"workspace"),"workspaceEdit");workspaceEdit.documentChanges=true;workspaceEdit.resourceOperations=[vscode_languageserver_protocol_1.ResourceOperationKind.Create,vscode_languageserver_protocol_1.ResourceOperationKind.Rename,vscode_languageserver_protocol_1.ResourceOperationKind.Delete];workspaceEdit.failureHandling=vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;workspaceEdit.normalizesLineEndings=true;workspaceEdit.changeAnnotationSupport={groupsOnLabel:true};var diagnostics=ensure(ensure(result,"textDocument"),"publishDiagnostics");diagnostics.relatedInformation=true;diagnostics.versionSupport=false;diagnostics.tagSupport={valueSet:[vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary,vscode_languageserver_protocol_1.DiagnosticTag.Deprecated]};diagnostics.codeDescriptionSupport=true;diagnostics.dataSupport=true;var windowCapabilities=ensure(result,"window");var showMessage=ensure(windowCapabilities,"showMessage");showMessage.messageActionItem={additionalPropertiesSupport:true};var showDocument=ensure(windowCapabilities,"showDocument");showDocument.support=true;var generalCapabilities=ensure(result,"general");generalCapabilities.staleRequestSupport={cancel:true,retryOnContentModified:Array.from(BaseLanguageClient.RequestsToCancelOnContentModified)};generalCapabilities.regularExpressions={engine:"ECMAScript",version:"ES2020"};generalCapabilities.markdown={parser:"marked",version:"1.1.0"};if(this._clientOptions.markdown.supportHtml){generalCapabilities.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"];}var _iterator50=_createForOfIteratorHelper(this._features),_step47;try{for(_iterator50.s();!(_step47=_iterator50.n()).done;){var feature=_step47.value;feature.fillClientCapabilities(result);}}catch(err){_iterator50.e(err);}finally{_iterator50.f();}return result;}},{key:"initializeFeatures",value:function initializeFeatures(_connection){var documentSelector=this._clientOptions.documentSelector;var _iterator51=_createForOfIteratorHelper(this._features),_step48;try{for(_iterator51.s();!(_step48=_iterator51.n()).done;){var feature=_step48.value;feature.initialize(this._capabilities,documentSelector);}}catch(err){_iterator51.e(err);}finally{_iterator51.f();}}},{key:"handleRegistrationRequest",value:function handleRegistrationRequest(params){var _this95=this;return new Promise(function(resolve,reject){var _iterator52=_createForOfIteratorHelper(params.registrations),_step49;try{for(_iterator52.s();!(_step49=_iterator52.n()).done;){var _registration$registe,_options$documentSele;var registration=_step49.value;var feature=_this95._dynamicFeatures.get(registration.method);if(feature===void 0){reject(new Error("No feature implementation for ".concat(registration.method," found. Registration failed.")));return;}var options=(_registration$registe=registration.registerOptions)!==null&&_registration$registe!==void 0?_registration$registe:{};options.documentSelector=(_options$documentSele=options.documentSelector)!==null&&_options$documentSele!==void 0?_options$documentSele:_this95._clientOptions.documentSelector;var data={id:registration.id,registerOptions:options};try{feature.register(data);}catch(err){reject(err);return;}}}catch(err){_iterator52.e(err);}finally{_iterator52.f();}resolve();});}},{key:"handleUnregistrationRequest",value:function handleUnregistrationRequest(params){var _this96=this;return new Promise(function(resolve,reject){var _iterator53=_createForOfIteratorHelper(params.unregisterations),_step50;try{for(_iterator53.s();!(_step50=_iterator53.n()).done;){var unregistration=_step50.value;var feature=_this96._dynamicFeatures.get(unregistration.method);if(!feature){reject(new Error("No feature implementation for ".concat(unregistration.method," found. Unregistration failed.")));return;}feature.unregister(unregistration.id);}}catch(err){_iterator53.e(err);}finally{_iterator53.f();}resolve();});}},{key:"handleApplyWorkspaceEdit",value:function handleApplyWorkspaceEdit(params){var workspaceEdit=params.edit;var openTextDocuments=new Map();vscode_1.workspace.textDocuments.forEach(function(document2){return openTextDocuments.set(document2.uri.toString(),document2);});var versionMismatch=false;if(workspaceEdit.documentChanges){var _iterator54=_createForOfIteratorHelper(workspaceEdit.documentChanges),_step51;try{for(_iterator54.s();!(_step51=_iterator54.n()).done;){var change=_step51.value;if(vscode_languageserver_protocol_1.TextDocumentEdit.is(change)&&change.textDocument.version&&change.textDocument.version>=0){var textDocument=openTextDocuments.get(change.textDocument.uri);if(textDocument&&textDocument.version!==change.textDocument.version){versionMismatch=true;break;}}}}catch(err){_iterator54.e(err);}finally{_iterator54.f();}}if(versionMismatch){return Promise.resolve({applied:false});}return Is.asPromise(vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then(function(value){return{applied:value};}));}},{key:"handleFailedRequest",value:function handleFailedRequest(type,token,error,defaultValue){var showNotification=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;if(error instanceof vscode_languageserver_protocol_1.ResponseError){if(error.code===vscode_languageserver_protocol_1.LSPErrorCodes.RequestCancelled||error.code===vscode_languageserver_protocol_1.LSPErrorCodes.ServerCancelled){if(token!==void 0&&token.isCancellationRequested){return defaultValue;}else{if(error.data!==void 0){throw new LSPCancellationError(error.data);}else{throw new vscode_1.CancellationError();}}}else if(error.code===vscode_languageserver_protocol_1.LSPErrorCodes.ContentModified){if(BaseLanguageClient.RequestsToCancelOnContentModified.has(type.method)){throw new vscode_1.CancellationError();}else{return defaultValue;}}}this.error("Request ".concat(type.method," failed."),error,showNotification);throw error;}}]);return BaseLanguageClient;}();exports.BaseLanguageClient=BaseLanguageClient;BaseLanguageClient.RequestsToCancelOnContentModified=new Set([vscode_languageserver_protocol_1.SemanticTokensRequest.method,vscode_languageserver_protocol_1.SemanticTokensRangeRequest.method,vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.method]);}});// client/node_modules/vscode-languageclient/lib/common/colorProvider.js
var require_colorProvider=__commonJS({"client/node_modules/vscode-languageclient/lib/common/colorProvider.js":function clientNode_modulesVscodeLanguageclientLibCommonColorProviderJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorProviderFeature=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var ColorProviderFeature=/*#__PURE__*/function(_client_1$TextDocumen){_inherits(ColorProviderFeature,_client_1$TextDocumen);var _super69=_createSuper(ColorProviderFeature);function ColorProviderFeature(client){_classCallCheck(this,ColorProviderFeature);return _super69.call(this,client,vscode_languageserver_protocol_1.DocumentColorRequest.type);}_createClass(ColorProviderFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"colorProvider").dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this$getRegistration=this.getRegistration(documentSelector,capabilities.colorProvider),_this$getRegistration2=_slicedToArray(_this$getRegistration,2),id=_this$getRegistration2[0],options=_this$getRegistration2[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this97=this;var provider={provideColorPresentations:function provideColorPresentations(color,context,token){var client=_this97._client;var provideColorPresentations=function provideColorPresentations(color2,context2,token2){var requestParams={color:color2,textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(context2.document),range:client.code2ProtocolConverter.asRange(context2.range)};return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type,requestParams,token2).then(_this97.asColorPresentations.bind(_this97),function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideColorPresentations?middleware.provideColorPresentations(color,context,token,provideColorPresentations):provideColorPresentations(color,context,token);},provideDocumentColors:function provideDocumentColors(document2,token){var client=_this97._client;var provideDocumentColors=function provideDocumentColors(document3,token2){var requestParams={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document3)};return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type,requestParams,token2).then(_this97.asColorInformations.bind(_this97),function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideDocumentColors?middleware.provideDocumentColors(document2,token,provideDocumentColors):provideDocumentColors(document2,token);}};return[vscode_1.languages.registerColorProvider(options.documentSelector,provider),provider];}},{key:"asColor",value:function asColor(color){return new vscode_1.Color(color.red,color.green,color.blue,color.alpha);}},{key:"asColorInformations",value:function asColorInformations(colorInformation){var _this98=this;if(Array.isArray(colorInformation)){return colorInformation.map(function(ci){return new vscode_1.ColorInformation(_this98._client.protocol2CodeConverter.asRange(ci.range),_this98.asColor(ci.color));});}return[];}},{key:"asColorPresentations",value:function asColorPresentations(colorPresentations){var _this99=this;if(Array.isArray(colorPresentations)){return colorPresentations.map(function(cp){var presentation=new vscode_1.ColorPresentation(cp.label);presentation.additionalTextEdits=_this99._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);presentation.textEdit=_this99._client.protocol2CodeConverter.asTextEdit(cp.textEdit);return presentation;});}return[];}}]);return ColorProviderFeature;}(client_1.TextDocumentFeature);exports.ColorProviderFeature=ColorProviderFeature;}});// client/node_modules/vscode-languageclient/lib/common/implementation.js
var require_implementation=__commonJS({"client/node_modules/vscode-languageclient/lib/common/implementation.js":function clientNode_modulesVscodeLanguageclientLibCommonImplementationJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ImplementationFeature=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var ImplementationFeature=/*#__PURE__*/function(_client_1$TextDocumen2){_inherits(ImplementationFeature,_client_1$TextDocumen2);var _super70=_createSuper(ImplementationFeature);function ImplementationFeature(client){_classCallCheck(this,ImplementationFeature);return _super70.call(this,client,vscode_languageserver_protocol_1.ImplementationRequest.type);}_createClass(ImplementationFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var implementationSupport=ensure(ensure(capabilities,"textDocument"),"implementation");implementationSupport.dynamicRegistration=true;implementationSupport.linkSupport=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this$getRegistration3=this.getRegistration(documentSelector,capabilities.implementationProvider),_this$getRegistration4=_slicedToArray(_this$getRegistration3,2),id=_this$getRegistration4[0],options=_this$getRegistration4[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this100=this;var provider={provideImplementation:function provideImplementation(document2,position,token){var client=_this100._client;var provideImplementation=function provideImplementation(document3,position2,token2){return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document3,position2),token2).then(client.protocol2CodeConverter.asDefinitionResult,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideImplementation?middleware.provideImplementation(document2,position,token,provideImplementation):provideImplementation(document2,position,token);}};return[vscode_1.languages.registerImplementationProvider(options.documentSelector,provider),provider];}}]);return ImplementationFeature;}(client_1.TextDocumentFeature);exports.ImplementationFeature=ImplementationFeature;}});// client/node_modules/vscode-languageclient/lib/common/typeDefinition.js
var require_typeDefinition=__commonJS({"client/node_modules/vscode-languageclient/lib/common/typeDefinition.js":function clientNode_modulesVscodeLanguageclientLibCommonTypeDefinitionJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TypeDefinitionFeature=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var TypeDefinitionFeature=/*#__PURE__*/function(_client_1$TextDocumen3){_inherits(TypeDefinitionFeature,_client_1$TextDocumen3);var _super71=_createSuper(TypeDefinitionFeature);function TypeDefinitionFeature(client){_classCallCheck(this,TypeDefinitionFeature);return _super71.call(this,client,vscode_languageserver_protocol_1.TypeDefinitionRequest.type);}_createClass(TypeDefinitionFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"typeDefinition").dynamicRegistration=true;var typeDefinitionSupport=ensure(ensure(capabilities,"textDocument"),"typeDefinition");typeDefinitionSupport.dynamicRegistration=true;typeDefinitionSupport.linkSupport=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this$getRegistration5=this.getRegistration(documentSelector,capabilities.typeDefinitionProvider),_this$getRegistration6=_slicedToArray(_this$getRegistration5,2),id=_this$getRegistration6[0],options=_this$getRegistration6[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this101=this;var provider={provideTypeDefinition:function provideTypeDefinition(document2,position,token){var client=_this101._client;var provideTypeDefinition=function provideTypeDefinition(document3,position2,token2){return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document3,position2),token2).then(client.protocol2CodeConverter.asDefinitionResult,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideTypeDefinition?middleware.provideTypeDefinition(document2,position,token,provideTypeDefinition):provideTypeDefinition(document2,position,token);}};return[vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector,provider),provider];}}]);return TypeDefinitionFeature;}(client_1.TextDocumentFeature);exports.TypeDefinitionFeature=TypeDefinitionFeature;}});// client/node_modules/vscode-languageclient/lib/common/workspaceFolders.js
var require_workspaceFolders=__commonJS({"client/node_modules/vscode-languageclient/lib/common/workspaceFolders.js":function clientNode_modulesVscodeLanguageclientLibCommonWorkspaceFoldersJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkspaceFoldersFeature=exports.arrayDiff=void 0;var UUID=require_uuid();var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();function access(target,key){if(target===void 0){return void 0;}return target[key];}function arrayDiff(left,right){return left.filter(function(element){return right.indexOf(element)<0;});}exports.arrayDiff=arrayDiff;var WorkspaceFoldersFeature=/*#__PURE__*/function(){function WorkspaceFoldersFeature(_client){_classCallCheck(this,WorkspaceFoldersFeature);this._client=_client;this._listeners=new Map();}_createClass(WorkspaceFoldersFeature,[{key:"registrationType",get:function get(){return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;}},{key:"fillInitializeParams",value:function fillInitializeParams(params){var _this102=this;var folders=vscode_1.workspace.workspaceFolders;this.initializeWithFolders(folders);if(folders===void 0){params.workspaceFolders=null;}else{params.workspaceFolders=folders.map(function(folder){return _this102.asProtocol(folder);});}}},{key:"initializeWithFolders",value:function initializeWithFolders(currentWorkspaceFolders){this._initialFolders=currentWorkspaceFolders;}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){capabilities.workspace=capabilities.workspace||{};capabilities.workspace.workspaceFolders=true;}},{key:"initialize",value:function initialize(capabilities){var _this103=this;var client=this._client;client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type,function(token){var workspaceFolders=function workspaceFolders(){var folders=vscode_1.workspace.workspaceFolders;if(folders===void 0){return null;}var result=folders.map(function(folder){return _this103.asProtocol(folder);});return result;};var middleware=client.clientOptions.middleware.workspace;return middleware&&middleware.workspaceFolders?middleware.workspaceFolders(token,workspaceFolders):workspaceFolders(token);});var value=access(access(access(capabilities,"workspace"),"workspaceFolders"),"changeNotifications");var id;if(typeof value==="string"){id=value;}else if(value===true){id=UUID.generateUuid();}if(id){this.register({id:id,registerOptions:void 0});}}},{key:"sendInitialEvent",value:function sendInitialEvent(currentWorkspaceFolders){var _this104=this;var promise;if(this._initialFolders&&currentWorkspaceFolders){var removed=arrayDiff(this._initialFolders,currentWorkspaceFolders);var added=arrayDiff(currentWorkspaceFolders,this._initialFolders);if(added.length>0||removed.length>0){promise=this.doSendEvent(added,removed);}}else if(this._initialFolders){promise=this.doSendEvent([],this._initialFolders);}else if(currentWorkspaceFolders){promise=this.doSendEvent(currentWorkspaceFolders,[]);}if(promise!==void 0){promise.catch(function(error){_this104._client.error("Sending notification ".concat(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type.method," failed"),error);});}}},{key:"doSendEvent",value:function doSendEvent(addedFolders,removedFolders){var _this105=this;var params={event:{added:addedFolders.map(function(folder){return _this105.asProtocol(folder);}),removed:removedFolders.map(function(folder){return _this105.asProtocol(folder);})}};return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type,params);}},{key:"register",value:function register(data){var _this106=this;var id=data.id;var client=this._client;var disposable=vscode_1.workspace.onDidChangeWorkspaceFolders(function(event){var didChangeWorkspaceFolders=function didChangeWorkspaceFolders(event2){return _this106.doSendEvent(event2.added,event2.removed);};var middleware=client.clientOptions.middleware.workspace;var promise=middleware&&middleware.didChangeWorkspaceFolders?middleware.didChangeWorkspaceFolders(event,didChangeWorkspaceFolders):didChangeWorkspaceFolders(event);promise.catch(function(error){_this106._client.error("Sending notification ".concat(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type.method," failed"),error);});});this._listeners.set(id,disposable);this.sendInitialEvent(vscode_1.workspace.workspaceFolders);}},{key:"unregister",value:function unregister(id){var disposable=this._listeners.get(id);if(disposable===void 0){return;}this._listeners.delete(id);disposable.dispose();}},{key:"dispose",value:function dispose(){var _iterator55=_createForOfIteratorHelper(this._listeners.values()),_step52;try{for(_iterator55.s();!(_step52=_iterator55.n()).done;){var disposable=_step52.value;disposable.dispose();}}catch(err){_iterator55.e(err);}finally{_iterator55.f();}this._listeners.clear();}},{key:"asProtocol",value:function asProtocol(workspaceFolder){if(workspaceFolder===void 0){return null;}return{uri:this._client.code2ProtocolConverter.asUri(workspaceFolder.uri),name:workspaceFolder.name};}}]);return WorkspaceFoldersFeature;}();exports.WorkspaceFoldersFeature=WorkspaceFoldersFeature;}});// client/node_modules/vscode-languageclient/lib/common/foldingRange.js
var require_foldingRange=__commonJS({"client/node_modules/vscode-languageclient/lib/common/foldingRange.js":function clientNode_modulesVscodeLanguageclientLibCommonFoldingRangeJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FoldingRangeFeature=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var FoldingRangeFeature=/*#__PURE__*/function(_client_1$TextDocumen4){_inherits(FoldingRangeFeature,_client_1$TextDocumen4);var _super72=_createSuper(FoldingRangeFeature);function FoldingRangeFeature(client){_classCallCheck(this,FoldingRangeFeature);return _super72.call(this,client,vscode_languageserver_protocol_1.FoldingRangeRequest.type);}_createClass(FoldingRangeFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var capability=ensure(ensure(capabilities,"textDocument"),"foldingRange");capability.dynamicRegistration=true;capability.rangeLimit=5e3;capability.lineFoldingOnly=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this$getRegistration7=this.getRegistration(documentSelector,capabilities.foldingRangeProvider),_this$getRegistration8=_slicedToArray(_this$getRegistration7,2),id=_this$getRegistration8[0],options=_this$getRegistration8[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this107=this;var provider={provideFoldingRanges:function provideFoldingRanges(document2,context,token){var client=_this107._client;var provideFoldingRanges=function provideFoldingRanges(document3,_,token2){var requestParams={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document3)};return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type,requestParams,token2).then(FoldingRangeFeature.asFoldingRanges,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideFoldingRanges?middleware.provideFoldingRanges(document2,context,token,provideFoldingRanges):provideFoldingRanges(document2,context,token);}};return[vscode_1.languages.registerFoldingRangeProvider(options.documentSelector,provider),provider];}}],[{key:"asFoldingRangeKind",value:function asFoldingRangeKind(kind){if(kind){switch(kind){case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:return vscode_1.FoldingRangeKind.Comment;case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:return vscode_1.FoldingRangeKind.Imports;case vscode_languageserver_protocol_1.FoldingRangeKind.Region:return vscode_1.FoldingRangeKind.Region;}}return void 0;}},{key:"asFoldingRanges",value:function asFoldingRanges(foldingRanges){if(Array.isArray(foldingRanges)){return foldingRanges.map(function(r){return new vscode_1.FoldingRange(r.startLine,r.endLine,FoldingRangeFeature.asFoldingRangeKind(r.kind));});}return[];}}]);return FoldingRangeFeature;}(client_1.TextDocumentFeature);exports.FoldingRangeFeature=FoldingRangeFeature;}});// client/node_modules/vscode-languageclient/lib/common/declaration.js
var require_declaration=__commonJS({"client/node_modules/vscode-languageclient/lib/common/declaration.js":function clientNode_modulesVscodeLanguageclientLibCommonDeclarationJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeclarationFeature=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var DeclarationFeature=/*#__PURE__*/function(_client_1$TextDocumen5){_inherits(DeclarationFeature,_client_1$TextDocumen5);var _super73=_createSuper(DeclarationFeature);function DeclarationFeature(client){_classCallCheck(this,DeclarationFeature);return _super73.call(this,client,vscode_languageserver_protocol_1.DeclarationRequest.type);}_createClass(DeclarationFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var declarationSupport=ensure(ensure(capabilities,"textDocument"),"declaration");declarationSupport.dynamicRegistration=true;declarationSupport.linkSupport=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this$getRegistration9=this.getRegistration(documentSelector,capabilities.declarationProvider),_this$getRegistration10=_slicedToArray(_this$getRegistration9,2),id=_this$getRegistration10[0],options=_this$getRegistration10[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this108=this;var provider={provideDeclaration:function provideDeclaration(document2,position,token){var client=_this108._client;var provideDeclaration=function provideDeclaration(document3,position2,token2){return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document3,position2),token2).then(client.protocol2CodeConverter.asDeclarationResult,function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideDeclaration?middleware.provideDeclaration(document2,position,token,provideDeclaration):provideDeclaration(document2,position,token);}};return[vscode_1.languages.registerDeclarationProvider(options.documentSelector,provider),provider];}}]);return DeclarationFeature;}(client_1.TextDocumentFeature);exports.DeclarationFeature=DeclarationFeature;}});// client/node_modules/vscode-languageclient/lib/common/selectionRange.js
var require_selectionRange=__commonJS({"client/node_modules/vscode-languageclient/lib/common/selectionRange.js":function clientNode_modulesVscodeLanguageclientLibCommonSelectionRangeJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SelectionRangeFeature=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]=Object.create(null);}return target[key];}var SelectionRangeFeature=/*#__PURE__*/function(_client_1$TextDocumen6){_inherits(SelectionRangeFeature,_client_1$TextDocumen6);var _super74=_createSuper(SelectionRangeFeature);function SelectionRangeFeature(client){_classCallCheck(this,SelectionRangeFeature);return _super74.call(this,client,vscode_languageserver_protocol_1.SelectionRangeRequest.type);}_createClass(SelectionRangeFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var capability=ensure(ensure(capabilities,"textDocument"),"selectionRange");capability.dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this$getRegistration11=this.getRegistration(documentSelector,capabilities.selectionRangeProvider),_this$getRegistration12=_slicedToArray(_this$getRegistration11,2),id=_this$getRegistration12[0],options=_this$getRegistration12[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this109=this;var provider={provideSelectionRanges:function provideSelectionRanges(document2,positions,token){var client=_this109._client;var provideSelectionRanges=function provideSelectionRanges(document3,positions2,token2){var requestParams={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document3),positions:client.code2ProtocolConverter.asPositions(positions2)};return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type,requestParams,token2).then(function(ranges){return client.protocol2CodeConverter.asSelectionRanges(ranges);},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideSelectionRanges?middleware.provideSelectionRanges(document2,positions,token,provideSelectionRanges):provideSelectionRanges(document2,positions,token);}};return[vscode_1.languages.registerSelectionRangeProvider(options.documentSelector,provider),provider];}}]);return SelectionRangeFeature;}(client_1.TextDocumentFeature);exports.SelectionRangeFeature=SelectionRangeFeature;}});// client/node_modules/vscode-languageclient/lib/common/progress.js
var require_progress=__commonJS({"client/node_modules/vscode-languageclient/lib/common/progress.js":function clientNode_modulesVscodeLanguageclientLibCommonProgressJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProgressFeature=void 0;var vscode_languageserver_protocol_1=require_main3();var progressPart_1=require_progressPart();function ensure(target,key){if(target[key]===void 0){target[key]=Object.create(null);}return target[key];}var ProgressFeature=/*#__PURE__*/function(){function ProgressFeature(_client){_classCallCheck(this,ProgressFeature);this._client=_client;this.activeParts=new Set();}_createClass(ProgressFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(capabilities,"window").workDoneProgress=true;}},{key:"initialize",value:function initialize(){var _this110=this;var client=this._client;var deleteHandler=function deleteHandler(part){_this110.activeParts.delete(part);};var createHandler=function createHandler(params){_this110.activeParts.add(new progressPart_1.ProgressPart(_this110._client,params.token,deleteHandler));};client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type,createHandler);}},{key:"dispose",value:function dispose(){var _iterator56=_createForOfIteratorHelper(this.activeParts),_step53;try{for(_iterator56.s();!(_step53=_iterator56.n()).done;){var part=_step53.value;part.done();}}catch(err){_iterator56.e(err);}finally{_iterator56.f();}this.activeParts.clear();}}]);return ProgressFeature;}();exports.ProgressFeature=ProgressFeature;}});// client/node_modules/vscode-languageclient/lib/common/callHierarchy.js
var require_callHierarchy=__commonJS({"client/node_modules/vscode-languageclient/lib/common/callHierarchy.js":function clientNode_modulesVscodeLanguageclientLibCommonCallHierarchyJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallHierarchyFeature=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var CallHierarchyProvider=/*#__PURE__*/function(){function CallHierarchyProvider(client){_classCallCheck(this,CallHierarchyProvider);this.client=client;this.middleware=client.clientOptions.middleware;}_createClass(CallHierarchyProvider,[{key:"prepareCallHierarchy",value:function prepareCallHierarchy(document2,position,token){var client=this.client;var middleware=this.middleware;var prepareCallHierarchy=function prepareCallHierarchy(document3,position2,token2){var params=client.code2ProtocolConverter.asTextDocumentPositionParams(document3,position2);return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type,params,token2).then(function(result){return client.protocol2CodeConverter.asCallHierarchyItems(result);},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type,token2,error,null);});};return middleware.prepareCallHierarchy?middleware.prepareCallHierarchy(document2,position,token,prepareCallHierarchy):prepareCallHierarchy(document2,position,token);}},{key:"provideCallHierarchyIncomingCalls",value:function provideCallHierarchyIncomingCalls(item,token){var client=this.client;var middleware=this.middleware;var provideCallHierarchyIncomingCalls=function provideCallHierarchyIncomingCalls(item2,token2){var params={item:client.code2ProtocolConverter.asCallHierarchyItem(item2)};return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type,params,token2).then(function(result){return client.protocol2CodeConverter.asCallHierarchyIncomingCalls(result);},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type,token2,error,null);});};return middleware.provideCallHierarchyIncomingCalls?middleware.provideCallHierarchyIncomingCalls(item,token,provideCallHierarchyIncomingCalls):provideCallHierarchyIncomingCalls(item,token);}},{key:"provideCallHierarchyOutgoingCalls",value:function provideCallHierarchyOutgoingCalls(item,token){var client=this.client;var middleware=this.middleware;var provideCallHierarchyOutgoingCalls=function provideCallHierarchyOutgoingCalls(item2,token2){var params={item:client.code2ProtocolConverter.asCallHierarchyItem(item2)};return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type,params,token2).then(function(result){return client.protocol2CodeConverter.asCallHierarchyOutgoingCalls(result);},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type,token2,error,null);});};return middleware.provideCallHierarchyOutgoingCalls?middleware.provideCallHierarchyOutgoingCalls(item,token,provideCallHierarchyOutgoingCalls):provideCallHierarchyOutgoingCalls(item,token);}}]);return CallHierarchyProvider;}();var CallHierarchyFeature=/*#__PURE__*/function(_client_1$TextDocumen7){_inherits(CallHierarchyFeature,_client_1$TextDocumen7);var _super75=_createSuper(CallHierarchyFeature);function CallHierarchyFeature(client){_classCallCheck(this,CallHierarchyFeature);return _super75.call(this,client,vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type);}_createClass(CallHierarchyFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(cap){var capabilities=cap;var capability=ensure(ensure(capabilities,"textDocument"),"callHierarchy");capability.dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this$getRegistration13=this.getRegistration(documentSelector,capabilities.callHierarchyProvider),_this$getRegistration14=_slicedToArray(_this$getRegistration13,2),id=_this$getRegistration14[0],options=_this$getRegistration14[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var client=this._client;var provider=new CallHierarchyProvider(client);return[vscode_1.languages.registerCallHierarchyProvider(options.documentSelector,provider),provider];}}]);return CallHierarchyFeature;}(client_1.TextDocumentFeature);exports.CallHierarchyFeature=CallHierarchyFeature;}});// client/node_modules/vscode-languageclient/lib/common/semanticTokens.js
var require_semanticTokens=__commonJS({"client/node_modules/vscode-languageclient/lib/common/semanticTokens.js":function clientNode_modulesVscodeLanguageclientLibCommonSemanticTokensJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SemanticTokensFeature=void 0;var vscode4=require("vscode");var client_1=require_client();var vscode_languageserver_protocol_1=require_main3();var Is=require_is();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var SemanticTokensFeature=/*#__PURE__*/function(_client_1$TextDocumen8){_inherits(SemanticTokensFeature,_client_1$TextDocumen8);var _super76=_createSuper(SemanticTokensFeature);function SemanticTokensFeature(client){_classCallCheck(this,SemanticTokensFeature);return _super76.call(this,client,vscode_languageserver_protocol_1.SemanticTokensRegistrationType.type);}_createClass(SemanticTokensFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var capability=ensure(ensure(capabilities,"textDocument"),"semanticTokens");capability.dynamicRegistration=true;capability.tokenTypes=[vscode_languageserver_protocol_1.SemanticTokenTypes.namespace,vscode_languageserver_protocol_1.SemanticTokenTypes.type,vscode_languageserver_protocol_1.SemanticTokenTypes.class,vscode_languageserver_protocol_1.SemanticTokenTypes.enum,vscode_languageserver_protocol_1.SemanticTokenTypes.interface,vscode_languageserver_protocol_1.SemanticTokenTypes.struct,vscode_languageserver_protocol_1.SemanticTokenTypes.typeParameter,vscode_languageserver_protocol_1.SemanticTokenTypes.parameter,vscode_languageserver_protocol_1.SemanticTokenTypes.variable,vscode_languageserver_protocol_1.SemanticTokenTypes.property,vscode_languageserver_protocol_1.SemanticTokenTypes.enumMember,vscode_languageserver_protocol_1.SemanticTokenTypes.event,vscode_languageserver_protocol_1.SemanticTokenTypes.function,vscode_languageserver_protocol_1.SemanticTokenTypes.method,vscode_languageserver_protocol_1.SemanticTokenTypes.macro,vscode_languageserver_protocol_1.SemanticTokenTypes.keyword,vscode_languageserver_protocol_1.SemanticTokenTypes.modifier,vscode_languageserver_protocol_1.SemanticTokenTypes.comment,vscode_languageserver_protocol_1.SemanticTokenTypes.string,vscode_languageserver_protocol_1.SemanticTokenTypes.number,vscode_languageserver_protocol_1.SemanticTokenTypes.regexp,vscode_languageserver_protocol_1.SemanticTokenTypes.operator,vscode_languageserver_protocol_1.SemanticTokenTypes.decorator];capability.tokenModifiers=[vscode_languageserver_protocol_1.SemanticTokenModifiers.declaration,vscode_languageserver_protocol_1.SemanticTokenModifiers.definition,vscode_languageserver_protocol_1.SemanticTokenModifiers.readonly,vscode_languageserver_protocol_1.SemanticTokenModifiers.static,vscode_languageserver_protocol_1.SemanticTokenModifiers.deprecated,vscode_languageserver_protocol_1.SemanticTokenModifiers.abstract,vscode_languageserver_protocol_1.SemanticTokenModifiers.async,vscode_languageserver_protocol_1.SemanticTokenModifiers.modification,vscode_languageserver_protocol_1.SemanticTokenModifiers.documentation,vscode_languageserver_protocol_1.SemanticTokenModifiers.defaultLibrary];capability.formats=[vscode_languageserver_protocol_1.TokenFormat.Relative];capability.requests={range:true,full:{delta:true}};capability.multilineTokenSupport=false;capability.overlappingTokenSupport=false;capability.serverCancelSupport=true;capability.augmentsSyntaxTokens=true;ensure(ensure(capabilities,"workspace"),"semanticTokens").refreshSupport=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this111=this;var client=this._client;client.onRequest(vscode_languageserver_protocol_1.SemanticTokensRefreshRequest.type,/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee19(){var _iterator57,_step54,provider;return regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_iterator57=_createForOfIteratorHelper(_this111.getAllProviders());try{for(_iterator57.s();!(_step54=_iterator57.n()).done;){provider=_step54.value;provider.onDidChangeSemanticTokensEmitter.fire();}}catch(err){_iterator57.e(err);}finally{_iterator57.f();}case 2:case"end":return _context19.stop();}}},_callee19);})));var _this$getRegistration15=this.getRegistration(documentSelector,capabilities.semanticTokensProvider),_this$getRegistration16=_slicedToArray(_this$getRegistration15,2),id=_this$getRegistration16[0],options=_this$getRegistration16[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this112=this;var fullProvider=Is.boolean(options.full)?options.full:options.full!==void 0;var hasEditProvider=options.full!==void 0&&typeof options.full!=="boolean"&&options.full.delta===true;var eventEmitter=new vscode4.EventEmitter();var documentProvider=fullProvider?{onDidChangeSemanticTokens:eventEmitter.event,provideDocumentSemanticTokens:function provideDocumentSemanticTokens(document2,token){var client2=_this112._client;var middleware=client2.clientOptions.middleware;var provideDocumentSemanticTokens=function provideDocumentSemanticTokens(document3,token2){var params={textDocument:client2.code2ProtocolConverter.asTextDocumentIdentifier(document3)};return client2.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRequest.type,params,token2).then(function(result){return client2.protocol2CodeConverter.asSemanticTokens(result);},function(error){return client2.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensRequest.type,token2,error,null);});};return middleware.provideDocumentSemanticTokens?middleware.provideDocumentSemanticTokens(document2,token,provideDocumentSemanticTokens):provideDocumentSemanticTokens(document2,token);},provideDocumentSemanticTokensEdits:hasEditProvider?function(document2,previousResultId,token){var client2=_this112._client;var middleware=client2.clientOptions.middleware;var provideDocumentSemanticTokensEdits=function provideDocumentSemanticTokensEdits(document3,previousResultId2,token2){var params={textDocument:client2.code2ProtocolConverter.asTextDocumentIdentifier(document3),previousResultId:previousResultId2};return client2.sendRequest(vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type,params,token2).then(function(result){if(vscode_languageserver_protocol_1.SemanticTokens.is(result)){return client2.protocol2CodeConverter.asSemanticTokens(result);}else{return client2.protocol2CodeConverter.asSemanticTokensEdits(result);}},function(error){return client2.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type,token2,error,null);});};return middleware.provideDocumentSemanticTokensEdits?middleware.provideDocumentSemanticTokensEdits(document2,previousResultId,token,provideDocumentSemanticTokensEdits):provideDocumentSemanticTokensEdits(document2,previousResultId,token);}:void 0}:void 0;var hasRangeProvider=options.range===true;var rangeProvider=hasRangeProvider?{provideDocumentRangeSemanticTokens:function provideDocumentRangeSemanticTokens(document2,range,token){var client2=_this112._client;var middleware=client2.clientOptions.middleware;var provideDocumentRangeSemanticTokens=function provideDocumentRangeSemanticTokens(document3,range2,token2){var params={textDocument:client2.code2ProtocolConverter.asTextDocumentIdentifier(document3),range:client2.code2ProtocolConverter.asRange(range2)};return client2.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type,params,token2).then(function(result){return client2.protocol2CodeConverter.asSemanticTokens(result);},function(error){return client2.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type,token2,error,null);});};return middleware.provideDocumentRangeSemanticTokens?middleware.provideDocumentRangeSemanticTokens(document2,range,token,provideDocumentRangeSemanticTokens):provideDocumentRangeSemanticTokens(document2,range,token);}}:void 0;var disposables=[];var client=this._client;var legend=client.protocol2CodeConverter.asSemanticTokensLegend(options.legend);if(documentProvider!==void 0){disposables.push(vscode4.languages.registerDocumentSemanticTokensProvider(options.documentSelector,documentProvider,legend));}if(rangeProvider!==void 0){disposables.push(vscode4.languages.registerDocumentRangeSemanticTokensProvider(options.documentSelector,rangeProvider,legend));}return[new vscode4.Disposable(function(){return disposables.forEach(function(item){return item.dispose();});}),{range:rangeProvider,full:documentProvider,onDidChangeSemanticTokensEmitter:eventEmitter}];}}]);return SemanticTokensFeature;}(client_1.TextDocumentFeature);exports.SemanticTokensFeature=SemanticTokensFeature;}});// client/node_modules/concat-map/index.js
var require_concat_map=__commonJS({"client/node_modules/concat-map/index.js":function clientNode_modulesConcatMapIndexJs(exports,module2){module2.exports=function(xs,fn){var res=[];for(var i=0;i<xs.length;i++){var x=fn(xs[i],i);if(isArray(x))res.push.apply(res,x);else res.push(x);}return res;};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]";};}});// client/node_modules/balanced-match/index.js
var require_balanced_match=__commonJS({"client/node_modules/balanced-match/index.js":function clientNode_modulesBalancedMatchIndexJs(exports,module2){"use strict";module2.exports=balanced;function balanced(a,b,str){if(a instanceof RegExp)a=maybeMatch(a,str);if(b instanceof RegExp)b=maybeMatch(b,str);var r=range(a,b,str);return r&&{start:r[0],end:r[1],pre:str.slice(0,r[0]),body:str.slice(r[0]+a.length,r[1]),post:str.slice(r[1]+b.length)};}function maybeMatch(reg,str){var m=str.match(reg);return m?m[0]:null;}balanced.range=range;function range(a,b,str){var begs,beg,left,right,result;var ai=str.indexOf(a);var bi=str.indexOf(b,ai+1);var i=ai;if(ai>=0&&bi>0){if(a===b){return[ai,bi];}begs=[];left=str.length;while(i>=0&&!result){if(i==ai){begs.push(i);ai=str.indexOf(a,i+1);}else if(begs.length==1){result=[begs.pop(),bi];}else{beg=begs.pop();if(beg<left){left=beg;right=bi;}bi=str.indexOf(b,i+1);}i=ai<bi&&ai>=0?ai:bi;}if(begs.length){result=[left,right];}}return result;}}});// client/node_modules/brace-expansion/index.js
var require_brace_expansion=__commonJS({"client/node_modules/brace-expansion/index.js":function clientNode_modulesBraceExpansionIndexJs(exports,module2){var concatMap=require_concat_map();var balanced=require_balanced_match();module2.exports=expandTop;var escSlash="\0SLASH"+Math.random()+"\0";var escOpen="\0OPEN"+Math.random()+"\0";var escClose="\0CLOSE"+Math.random()+"\0";var escComma="\0COMMA"+Math.random()+"\0";var escPeriod="\0PERIOD"+Math.random()+"\0";function numeric(str){return parseInt(str,10)==str?parseInt(str,10):str.charCodeAt(0);}function escapeBraces(str){return str.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod);}function unescapeBraces(str){return str.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".");}function parseCommaParts(str){if(!str)return[""];var parts=[];var m=balanced("{","}",str);if(!m)return str.split(",");var pre=m.pre;var body=m.body;var post=m.post;var p=pre.split(",");p[p.length-1]+="{"+body+"}";var postParts=parseCommaParts(post);if(post.length){p[p.length-1]+=postParts.shift();p.push.apply(p,postParts);}parts.push.apply(parts,p);return parts;}function expandTop(str){if(!str)return[];if(str.substr(0,2)==="{}"){str="\\{\\}"+str.substr(2);}return expand(escapeBraces(str),true).map(unescapeBraces);}function embrace(str){return"{"+str+"}";}function isPadded(el){return /^-?0\d/.test(el);}function lte(i,y){return i<=y;}function gte(i,y){return i>=y;}function expand(str,isTop){var expansions=[];var m=balanced("{","}",str);if(!m||/\$$/.test(m.pre))return[str];var isNumericSequence=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(m.body);var isAlphaSequence=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(m.body);var isSequence=isNumericSequence||isAlphaSequence;var isOptions=m.body.indexOf(",")>=0;if(!isSequence&&!isOptions){if(m.post.match(/,.*\}/)){str=m.pre+"{"+m.body+escClose+m.post;return expand(str);}return[str];}var n;if(isSequence){n=m.body.split(/\.\./);}else{n=parseCommaParts(m.body);if(n.length===1){n=expand(n[0],false).map(embrace);if(n.length===1){var post=m.post.length?expand(m.post,false):[""];return post.map(function(p){return m.pre+n[0]+p;});}}}var pre=m.pre;var post=m.post.length?expand(m.post,false):[""];var N;if(isSequence){var x=numeric(n[0]);var y=numeric(n[1]);var width=Math.max(n[0].length,n[1].length);var incr=n.length==3?Math.abs(numeric(n[2])):1;var test=lte;var reverse=y<x;if(reverse){incr*=-1;test=gte;}var pad=n.some(isPadded);N=[];for(var i=x;test(i,y);i+=incr){var c;if(isAlphaSequence){c=String.fromCharCode(i);if(c==="\\")c="";}else{c=String(i);if(pad){var need=width-c.length;if(need>0){var z=new Array(need+1).join("0");if(i<0)c="-"+z+c.slice(1);else c=z+c;}}}N.push(c);}}else{N=concatMap(n,function(el){return expand(el,false);});}for(var j=0;j<N.length;j++){for(var k=0;k<post.length;k++){var expansion=pre+N[j]+post[k];if(!isTop||isSequence||expansion)expansions.push(expansion);}}return expansions;}}});// client/node_modules/minimatch/minimatch.js
var require_minimatch=__commonJS({"client/node_modules/minimatch/minimatch.js":function clientNode_modulesMinimatchMinimatchJs(exports,module2){module2.exports=minimatch;minimatch.Minimatch=Minimatch;var path={sep:"/"};try{path=require("path");}catch(er){}var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var expand=require_brace_expansion();var plTypes={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var qmark="[^/]";var star=qmark+"*?";var twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?";var reSpecials=charSet("().*{}+?[]^$\\!");function charSet(s){return s.split("").reduce(function(set,c){set[c]=true;return set;},{});}var slashSplit=/\/+/;minimatch.filter=filter;function filter(pattern,options){options=options||{};return function(p,i,list){return minimatch(p,pattern,options);};}function ext(a,b){a=a||{};b=b||{};var t={};Object.keys(b).forEach(function(k){t[k]=b[k];});Object.keys(a).forEach(function(k){t[k]=a[k];});return t;}minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return minimatch;var orig=minimatch;var m=function minimatch2(p,pattern,options){return orig.minimatch(p,pattern,ext(def,options));};m.Minimatch=function Minimatch2(pattern,options){return new orig.Minimatch(pattern,ext(def,options));};return m;};Minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return Minimatch;return minimatch.defaults(def).Minimatch;};function minimatch(p,pattern,options){if(typeof pattern!=="string"){throw new TypeError("glob pattern string required");}if(!options)options={};if(!options.nocomment&&pattern.charAt(0)==="#"){return false;}if(pattern.trim()==="")return p==="";return new Minimatch(pattern,options).match(p);}function Minimatch(pattern,options){if(!(this instanceof Minimatch)){return new Minimatch(pattern,options);}if(typeof pattern!=="string"){throw new TypeError("glob pattern string required");}if(!options)options={};pattern=pattern.trim();if(path.sep!=="/"){pattern=pattern.split(path.sep).join("/");}this.options=options;this.set=[];this.pattern=pattern;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make();}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){if(this._made)return;var pattern=this.pattern;var options=this.options;if(!options.nocomment&&pattern.charAt(0)==="#"){this.comment=true;return;}if(!pattern){this.empty=true;return;}this.parseNegate();var set=this.globSet=this.braceExpand();if(options.debug)this.debug=console.error;this.debug(this.pattern,set);set=this.globParts=set.map(function(s){return s.split(slashSplit);});this.debug(this.pattern,set);set=set.map(function(s,si,set2){return s.map(this.parse,this);},this);this.debug(this.pattern,set);set=set.filter(function(s){return s.indexOf(false)===-1;});this.debug(this.pattern,set);this.set=set;}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var pattern=this.pattern;var negate=false;var options=this.options;var negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&pattern.charAt(i)==="!";i++){negate=!negate;negateOffset++;}if(negateOffset)this.pattern=pattern.substr(negateOffset);this.negate=negate;}minimatch.braceExpand=function(pattern,options){return braceExpand(pattern,options);};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(pattern,options){if(!options){if(this instanceof Minimatch){options=this.options;}else{options={};}}pattern=typeof pattern==="undefined"?this.pattern:pattern;if(typeof pattern==="undefined"){throw new TypeError("undefined pattern");}if(options.nobrace||!pattern.match(/\{.*\}/)){return[pattern];}return expand(pattern);}Minimatch.prototype.parse=parse;var SUBPARSE={};function parse(pattern,isSub){if(pattern.length>1024*64){throw new TypeError("pattern is too long");}var options=this.options;if(!options.noglobstar&&pattern==="**")return GLOBSTAR;if(pattern==="")return"";var re="";var hasMagic=!!options.nocase;var escaping=false;var patternListStack=[];var negativeLists=[];var stateChar;var inClass=false;var reClassStart=-1;var classStart=-1;var patternStart=pattern.charAt(0)==="."?"":options.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var self2=this;function clearStateChar(){if(stateChar){switch(stateChar){case"*":re+=star;hasMagic=true;break;case"?":re+=qmark;hasMagic=true;break;default:re+="\\"+stateChar;break;}self2.debug("clearStateChar %j %j",stateChar,re);stateChar=false;}}for(var i=0,len=pattern.length,c;i<len&&(c=pattern.charAt(i));i++){this.debug("%s	%s %s %j",pattern,i,re,c);if(escaping&&reSpecials[c]){re+="\\"+c;escaping=false;continue;}switch(c){case"/":return false;case"\\":clearStateChar();escaping=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s	%s %s %j <-- stateChar",pattern,i,re,c);if(inClass){this.debug("  in class");if(c==="!"&&i===classStart+1)c="^";re+=c;continue;}self2.debug("call clearStateChar %j",stateChar);clearStateChar();stateChar=c;if(options.noext)clearStateChar();continue;case"(":if(inClass){re+="(";continue;}if(!stateChar){re+="\\(";continue;}patternListStack.push({type:stateChar,start:i-1,reStart:re.length,open:plTypes[stateChar].open,close:plTypes[stateChar].close});re+=stateChar==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",stateChar,re);stateChar=false;continue;case")":if(inClass||!patternListStack.length){re+="\\)";continue;}clearStateChar();hasMagic=true;var pl=patternListStack.pop();re+=pl.close;if(pl.type==="!"){negativeLists.push(pl);}pl.reEnd=re.length;continue;case"|":if(inClass||!patternListStack.length||escaping){re+="\\|";escaping=false;continue;}clearStateChar();re+="|";continue;case"[":clearStateChar();if(inClass){re+="\\"+c;continue;}inClass=true;classStart=i;reClassStart=re.length;re+=c;continue;case"]":if(i===classStart+1||!inClass){re+="\\"+c;escaping=false;continue;}if(inClass){var cs=pattern.substring(classStart+1,i);try{RegExp("["+cs+"]");}catch(er){var sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0]+"\\]";hasMagic=hasMagic||sp[1];inClass=false;continue;}}hasMagic=true;inClass=false;re+=c;continue;default:clearStateChar();if(escaping){escaping=false;}else if(reSpecials[c]&&!(c==="^"&&inClass)){re+="\\";}re+=c;}}if(inClass){cs=pattern.substr(classStart+1);sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0];hasMagic=hasMagic||sp[1];}for(pl=patternListStack.pop();pl;pl=patternListStack.pop()){var tail=re.slice(pl.reStart+pl.open.length);this.debug("setting tail",re,pl);tail=tail.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(_,$1,$2){if(!$2){$2="\\";}return $1+$1+$2+"|";});this.debug("tail=%j\n   %s",tail,tail,pl,re);var t=pl.type==="*"?star:pl.type==="?"?qmark:"\\"+pl.type;hasMagic=true;re=re.slice(0,pl.reStart)+t+"\\("+tail;}clearStateChar();if(escaping){re+="\\\\";}var addPatternStart=false;switch(re.charAt(0)){case".":case"[":case"(":addPatternStart=true;}for(var n=negativeLists.length-1;n>-1;n--){var nl=negativeLists[n];var nlBefore=re.slice(0,nl.reStart);var nlFirst=re.slice(nl.reStart,nl.reEnd-8);var nlLast=re.slice(nl.reEnd-8,nl.reEnd);var nlAfter=re.slice(nl.reEnd);nlLast+=nlAfter;var openParensBefore=nlBefore.split("(").length-1;var cleanAfter=nlAfter;for(i=0;i<openParensBefore;i++){cleanAfter=cleanAfter.replace(/\)[+*?]?/,"");}nlAfter=cleanAfter;var dollar="";if(nlAfter===""&&isSub!==SUBPARSE){dollar="$";}var newRe=nlBefore+nlFirst+nlAfter+dollar+nlLast;re=newRe;}if(re!==""&&hasMagic){re="(?=.)"+re;}if(addPatternStart){re=patternStart+re;}if(isSub===SUBPARSE){return[re,hasMagic];}if(!hasMagic){return globUnescape(pattern);}var flags=options.nocase?"i":"";try{var regExp=new RegExp("^"+re+"$",flags);}catch(er){return new RegExp("$.");}regExp._glob=pattern;regExp._src=re;return regExp;}minimatch.makeRe=function(pattern,options){return new Minimatch(pattern,options||{}).makeRe();};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var set=this.set;if(!set.length){this.regexp=false;return this.regexp;}var options=this.options;var twoStar=options.noglobstar?star:options.dot?twoStarDot:twoStarNoDot;var flags=options.nocase?"i":"";var re=set.map(function(pattern){return pattern.map(function(p){return p===GLOBSTAR?twoStar:typeof p==="string"?regExpEscape(p):p._src;}).join("\\/");}).join("|");re="^(?:"+re+")$";if(this.negate)re="^(?!"+re+").*$";try{this.regexp=new RegExp(re,flags);}catch(ex){this.regexp=false;}return this.regexp;}minimatch.match=function(list,pattern,options){options=options||{};var mm=new Minimatch(pattern,options);list=list.filter(function(f){return mm.match(f);});if(mm.options.nonull&&!list.length){list.push(pattern);}return list;};Minimatch.prototype.match=match;function match(f,partial){this.debug("match",f,this.pattern);if(this.comment)return false;if(this.empty)return f==="";if(f==="/"&&partial)return true;var options=this.options;if(path.sep!=="/"){f=f.split(path.sep).join("/");}f=f.split(slashSplit);this.debug(this.pattern,"split",f);var set=this.set;this.debug(this.pattern,"set",set);var filename;var i;for(i=f.length-1;i>=0;i--){filename=f[i];if(filename)break;}for(i=0;i<set.length;i++){var pattern=set[i];var file=f;if(options.matchBase&&pattern.length===1){file=[filename];}var hit=this.matchOne(file,pattern,partial);if(hit){if(options.flipNegate)return true;return!this.negate;}}if(options.flipNegate)return false;return this.negate;}Minimatch.prototype.matchOne=function(file,pattern,partial){var options=this.options;this.debug("matchOne",{"this":this,file:file,pattern:pattern});this.debug("matchOne",file.length,pattern.length);for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){this.debug("matchOne loop");var p=pattern[pi];var f=file[fi];this.debug(pattern,p,f);if(p===false)return false;if(p===GLOBSTAR){this.debug("GLOBSTAR",[pattern,p,f]);var fr=fi;var pr=pi+1;if(pr===pl){this.debug("** at the end");for(;fi<fl;fi++){if(file[fi]==="."||file[fi]===".."||!options.dot&&file[fi].charAt(0)===".")return false;}return true;}while(fr<fl){var swallowee=file[fr];this.debug("\nglobstar while",file,fr,pattern,pr,swallowee);if(this.matchOne(file.slice(fr),pattern.slice(pr),partial)){this.debug("globstar found match!",fr,fl,swallowee);return true;}else{if(swallowee==="."||swallowee===".."||!options.dot&&swallowee.charAt(0)==="."){this.debug("dot detected!",file,fr,pattern,pr);break;}this.debug("globstar swallow a segment, and continue");fr++;}}if(partial){this.debug("\n>>> no match, partial?",file,fr,pattern,pr);if(fr===fl)return true;}return false;}var hit;if(typeof p==="string"){if(options.nocase){hit=f.toLowerCase()===p.toLowerCase();}else{hit=f===p;}this.debug("string match",p,f,hit);}else{hit=f.match(p);this.debug("pattern match",p,f,hit);}if(!hit)return false;}if(fi===fl&&pi===pl){return true;}else if(fi===fl){return partial;}else if(pi===pl){var emptyFileEnd=fi===fl-1&&file[fi]==="";return emptyFileEnd;}throw new Error("wtf?");};function globUnescape(s){return s.replace(/\\(.)/g,"$1");}function regExpEscape(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");}}});// client/node_modules/vscode-languageclient/lib/common/fileOperations.js
var require_fileOperations=__commonJS({"client/node_modules/vscode-languageclient/lib/common/fileOperations.js":function clientNode_modulesVscodeLanguageclientLibCommonFileOperationsJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WillDeleteFilesFeature=exports.WillRenameFilesFeature=exports.WillCreateFilesFeature=exports.DidDeleteFilesFeature=exports.DidRenameFilesFeature=exports.DidCreateFilesFeature=void 0;var code=require("vscode");var minimatch=require_minimatch();var proto=require_main3();var UUID=require_uuid();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}function access(target,key){return target[key];}function assign(target,key,value){target[key]=value;}var FileOperationFeature=/*#__PURE__*/function(){function FileOperationFeature(client,event,registrationType,clientCapability,serverCapability){_classCallCheck(this,FileOperationFeature);this._filters=new Map();this._client=client;this._event=event;this._registrationType=registrationType;this._clientCapability=clientCapability;this._serverCapability=serverCapability;}_createClass(FileOperationFeature,[{key:"registrationType",get:function get(){return this._registrationType;}},{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var value=ensure(ensure(capabilities,"workspace"),"fileOperations");assign(value,"dynamicRegistration",true);assign(value,this._clientCapability,true);}},{key:"initialize",value:function initialize(capabilities){var _capabilities$workspa;var options=(_capabilities$workspa=capabilities.workspace)===null||_capabilities$workspa===void 0?void 0:_capabilities$workspa.fileOperations;var capability=options!==void 0?access(options,this._serverCapability):void 0;if((capability===null||capability===void 0?void 0:capability.filters)!==void 0){try{this.register({id:UUID.generateUuid(),registerOptions:{filters:capability.filters}});}catch(e){this._client.warn("Ignoring invalid glob pattern for ".concat(this._serverCapability," registration: ").concat(e));}}}},{key:"register",value:function register(data){if(!this._listener){this._listener=this._event(this.send,this);}var minimatchFilter=data.registerOptions.filters.map(function(filter){var matcher=new minimatch.Minimatch(filter.pattern.glob,FileOperationFeature.asMinimatchOptions(filter.pattern.options));if(!matcher.makeRe()){throw new Error("Invalid pattern ".concat(filter.pattern.glob,"!"));}return{scheme:filter.scheme,matcher:matcher,kind:filter.pattern.matches};});this._filters.set(data.id,minimatchFilter);}},{key:"unregister",value:function unregister(id){this._filters.delete(id);if(this._filters.size===0&&this._listener){this._listener.dispose();this._listener=void 0;}}},{key:"dispose",value:function dispose(){this._filters.clear();if(this._listener){this._listener.dispose();this._listener=void 0;}}},{key:"getFileType",value:function getFileType(uri){return FileOperationFeature.getFileType(uri);;}},{key:"filter",value:function(){var _filter=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee21(event,prop){var _this113=this;var fileMatches,files;return regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.next=2;return Promise.all(event.files.map(/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee20(item){var uri,path,_iterator58,_step55,filters,_iterator59,_step56,_filter2,fileType,_fileType;return regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:uri=prop(item);path=uri.fsPath.replace(/\\/g,"/");_iterator58=_createForOfIteratorHelper(_this113._filters.values());_context20.prev=3;_iterator58.s();case 5:if((_step55=_iterator58.n()).done){_context20.next=45;break;}filters=_step55.value;_iterator59=_createForOfIteratorHelper(filters);_context20.prev=8;_iterator59.s();case 10:if((_step56=_iterator59.n()).done){_context20.next=35;break;}_filter2=_step56.value;if(!(_filter2.scheme!==void 0&&_filter2.scheme!==uri.scheme)){_context20.next=14;break;}return _context20.abrupt("continue",33);case 14:if(!_filter2.matcher.match(path)){_context20.next=27;break;}if(!(_filter2.kind===void 0)){_context20.next=17;break;}return _context20.abrupt("return",true);case 17:_context20.next=19;return _this113.getFileType(uri);case 19:fileType=_context20.sent;if(!(fileType===void 0)){_context20.next=23;break;}_this113._client.error("Failed to determine file type for ".concat(uri.toString(),"."));return _context20.abrupt("return",true);case 23:if(!(fileType===code.FileType.File&&_filter2.kind===proto.FileOperationPatternKind.file||fileType===code.FileType.Directory&&_filter2.kind===proto.FileOperationPatternKind.folder)){_context20.next=25;break;}return _context20.abrupt("return",true);case 25:_context20.next=33;break;case 27:if(!(_filter2.kind===proto.FileOperationPatternKind.folder)){_context20.next=33;break;}_context20.next=30;return FileOperationFeature.getFileType(uri);case 30:_fileType=_context20.sent;if(!(_fileType===code.FileType.Directory&&_filter2.matcher.match("".concat(path,"/")))){_context20.next=33;break;}return _context20.abrupt("return",true);case 33:_context20.next=10;break;case 35:_context20.next=40;break;case 37:_context20.prev=37;_context20.t0=_context20["catch"](8);_iterator59.e(_context20.t0);case 40:_context20.prev=40;_iterator59.f();return _context20.finish(40);case 43:_context20.next=5;break;case 45:_context20.next=50;break;case 47:_context20.prev=47;_context20.t1=_context20["catch"](3);_iterator58.e(_context20.t1);case 50:_context20.prev=50;_iterator58.f();return _context20.finish(50);case 53:return _context20.abrupt("return",false);case 54:case"end":return _context20.stop();}}},_callee20,null,[[3,47,50,53],[8,37,40,43]]);}));return function(_x25){return _ref18.apply(this,arguments);};}()));case 2:fileMatches=_context21.sent;files=event.files.filter(function(_,index){return fileMatches[index];});return _context21.abrupt("return",_objectSpread(_objectSpread({},event),{},{files:files}));case 5:case"end":return _context21.stop();}}},_callee21);}));function filter(_x23,_x24){return _filter.apply(this,arguments);}return filter;}()}],[{key:"getFileType",value:function(){var _getFileType=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee22(uri){return regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.prev=0;_context22.next=3;return code.workspace.fs.stat(uri);case 3:return _context22.abrupt("return",_context22.sent.type);case 6:_context22.prev=6;_context22.t0=_context22["catch"](0);return _context22.abrupt("return",void 0);case 9:case"end":return _context22.stop();}}},_callee22,null,[[0,6]]);}));function getFileType(_x26){return _getFileType.apply(this,arguments);}return getFileType;}()},{key:"asMinimatchOptions",value:function asMinimatchOptions(options){if(options===void 0){return void 0;}if(options.ignoreCase===true){return{nocase:true};}return void 0;}}]);return FileOperationFeature;}();var NotificationFileOperationFeature=/*#__PURE__*/function(_FileOperationFeature){_inherits(NotificationFileOperationFeature,_FileOperationFeature);var _super77=_createSuper(NotificationFileOperationFeature);function NotificationFileOperationFeature(client,event,notificationType,clientCapability,serverCapability,accessUri,createParams){var _this114;_classCallCheck(this,NotificationFileOperationFeature);_this114=_super77.call(this,client,event,notificationType,clientCapability,serverCapability);_this114._notificationType=notificationType;_this114._accessUri=accessUri;_this114._createParams=createParams;return _this114;}_createClass(NotificationFileOperationFeature,[{key:"send",value:function(){var _send=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee24(originalEvent){var _this115=this;var filteredEvent,next;return regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:_context24.next=2;return this.filter(originalEvent,this._accessUri);case 2:filteredEvent=_context24.sent;if(!filteredEvent.files.length){_context24.next=6;break;}next=/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee23(event){return regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:return _context23.abrupt("return",_this115._client.sendNotification(_this115._notificationType,_this115._createParams(event)));case 1:case"end":return _context23.stop();}}},_callee23);}));return function next(_x28){return _ref19.apply(this,arguments);};}();return _context24.abrupt("return",this.doSend(filteredEvent,next));case 6:case"end":return _context24.stop();}}},_callee24,this);}));function send(_x27){return _send.apply(this,arguments);}return send;}()}]);return NotificationFileOperationFeature;}(FileOperationFeature);var CachingNotificationFileOperationFeature=/*#__PURE__*/function(_NotificationFileOper){_inherits(CachingNotificationFileOperationFeature,_NotificationFileOper);var _super78=_createSuper(CachingNotificationFileOperationFeature);function CachingNotificationFileOperationFeature(){var _this116;_classCallCheck(this,CachingNotificationFileOperationFeature);_this116=_super78.apply(this,arguments);_this116._fsPathFileTypes=new Map();return _this116;}_createClass(CachingNotificationFileOperationFeature,[{key:"getFileType",value:function(){var _getFileType2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee25(uri){var fsPath,type;return regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:fsPath=uri.fsPath;if(!this._fsPathFileTypes.has(fsPath)){_context25.next=3;break;}return _context25.abrupt("return",this._fsPathFileTypes.get(fsPath));case 3:_context25.next=5;return FileOperationFeature.getFileType(uri);case 5:type=_context25.sent;if(type)this._fsPathFileTypes.set(fsPath,type);return _context25.abrupt("return",type);case 8:case"end":return _context25.stop();}}},_callee25,this);}));function getFileType(_x29){return _getFileType2.apply(this,arguments);}return getFileType;}()},{key:"cacheFileTypes",value:function(){var _cacheFileTypes=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee26(event,prop){return regeneratorRuntime.wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:_context26.next=2;return this.filter(event,prop);case 2:case"end":return _context26.stop();}}},_callee26,this);}));function cacheFileTypes(_x30,_x31){return _cacheFileTypes.apply(this,arguments);}return cacheFileTypes;}()},{key:"clearFileTypeCache",value:function clearFileTypeCache(){this._fsPathFileTypes.clear();}},{key:"unregister",value:function unregister(id){_get2(_getPrototypeOf(CachingNotificationFileOperationFeature.prototype),"unregister",this).call(this,id);if(this._filters.size===0&&this._willListener){this._willListener.dispose();this._willListener=void 0;}}},{key:"dispose",value:function dispose(){_get2(_getPrototypeOf(CachingNotificationFileOperationFeature.prototype),"dispose",this).call(this);if(this._willListener){this._willListener.dispose();this._willListener=void 0;}}}]);return CachingNotificationFileOperationFeature;}(NotificationFileOperationFeature);var DidCreateFilesFeature=/*#__PURE__*/function(_NotificationFileOper2){_inherits(DidCreateFilesFeature,_NotificationFileOper2);var _super79=_createSuper(DidCreateFilesFeature);function DidCreateFilesFeature(client){_classCallCheck(this,DidCreateFilesFeature);return _super79.call(this,client,code.workspace.onDidCreateFiles,proto.DidCreateFilesNotification.type,"didCreate","didCreate",function(i){return i;},client.code2ProtocolConverter.asDidCreateFilesParams);}_createClass(DidCreateFilesFeature,[{key:"doSend",value:function doSend(event,next){var _this$_client$clientO;var middleware=(_this$_client$clientO=this._client.clientOptions.middleware)===null||_this$_client$clientO===void 0?void 0:_this$_client$clientO.workspace;return middleware!==null&&middleware!==void 0&&middleware.didCreateFiles?middleware.didCreateFiles(event,next):next(event);}}]);return DidCreateFilesFeature;}(NotificationFileOperationFeature);exports.DidCreateFilesFeature=DidCreateFilesFeature;var DidRenameFilesFeature=/*#__PURE__*/function(_CachingNotificationF){_inherits(DidRenameFilesFeature,_CachingNotificationF);var _super80=_createSuper(DidRenameFilesFeature);function DidRenameFilesFeature(client){_classCallCheck(this,DidRenameFilesFeature);return _super80.call(this,client,code.workspace.onDidRenameFiles,proto.DidRenameFilesNotification.type,"didRename","didRename",function(i){return i.oldUri;},client.code2ProtocolConverter.asDidRenameFilesParams);}_createClass(DidRenameFilesFeature,[{key:"register",value:function register(data){if(!this._willListener){this._willListener=code.workspace.onWillRenameFiles(this.willRename,this);}_get2(_getPrototypeOf(DidRenameFilesFeature.prototype),"register",this).call(this,data);}},{key:"willRename",value:function willRename(e){e.waitUntil(this.cacheFileTypes(e,function(i){return i.oldUri;}));}},{key:"doSend",value:function doSend(event,next){var _this$_client$clientO2;this.clearFileTypeCache();var middleware=(_this$_client$clientO2=this._client.clientOptions.middleware)===null||_this$_client$clientO2===void 0?void 0:_this$_client$clientO2.workspace;return middleware!==null&&middleware!==void 0&&middleware.didRenameFiles?middleware.didRenameFiles(event,next):next(event);}}]);return DidRenameFilesFeature;}(CachingNotificationFileOperationFeature);exports.DidRenameFilesFeature=DidRenameFilesFeature;var DidDeleteFilesFeature=/*#__PURE__*/function(_CachingNotificationF2){_inherits(DidDeleteFilesFeature,_CachingNotificationF2);var _super81=_createSuper(DidDeleteFilesFeature);function DidDeleteFilesFeature(client){_classCallCheck(this,DidDeleteFilesFeature);return _super81.call(this,client,code.workspace.onDidDeleteFiles,proto.DidDeleteFilesNotification.type,"didDelete","didDelete",function(i){return i;},client.code2ProtocolConverter.asDidDeleteFilesParams);}_createClass(DidDeleteFilesFeature,[{key:"register",value:function register(data){if(!this._willListener){this._willListener=code.workspace.onWillDeleteFiles(this.willDelete,this);}_get2(_getPrototypeOf(DidDeleteFilesFeature.prototype),"register",this).call(this,data);}},{key:"willDelete",value:function willDelete(e){e.waitUntil(this.cacheFileTypes(e,function(i){return i;}));}},{key:"doSend",value:function doSend(event,next){var _this$_client$clientO3;this.clearFileTypeCache();var middleware=(_this$_client$clientO3=this._client.clientOptions.middleware)===null||_this$_client$clientO3===void 0?void 0:_this$_client$clientO3.workspace;return middleware!==null&&middleware!==void 0&&middleware.didDeleteFiles?middleware.didDeleteFiles(event,next):next(event);}}]);return DidDeleteFilesFeature;}(CachingNotificationFileOperationFeature);exports.DidDeleteFilesFeature=DidDeleteFilesFeature;var RequestFileOperationFeature=/*#__PURE__*/function(_FileOperationFeature2){_inherits(RequestFileOperationFeature,_FileOperationFeature2);var _super82=_createSuper(RequestFileOperationFeature);function RequestFileOperationFeature(client,event,requestType,clientCapability,serverCapability,accessUri,createParams){var _this117;_classCallCheck(this,RequestFileOperationFeature);_this117=_super82.call(this,client,event,requestType,clientCapability,serverCapability);_this117._requestType=requestType;_this117._accessUri=accessUri;_this117._createParams=createParams;return _this117;}_createClass(RequestFileOperationFeature,[{key:"send",value:function(){var _send2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee27(originalEvent){var waitUntil;return regeneratorRuntime.wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:waitUntil=this.waitUntil(originalEvent);originalEvent.waitUntil(waitUntil);case 2:case"end":return _context27.stop();}}},_callee27,this);}));function send(_x32){return _send2.apply(this,arguments);}return send;}()},{key:"waitUntil",value:function(){var _waitUntil=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee28(originalEvent){var _this118=this;var filteredEvent,next;return regeneratorRuntime.wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:_context28.next=2;return this.filter(originalEvent,this._accessUri);case 2:filteredEvent=_context28.sent;if(!filteredEvent.files.length){_context28.next=8;break;}next=function next(event){return _this118._client.sendRequest(_this118._requestType,_this118._createParams(event)).then(_this118._client.protocol2CodeConverter.asWorkspaceEdit);};return _context28.abrupt("return",this.doSend(filteredEvent,next));case 8:return _context28.abrupt("return",void 0);case 9:case"end":return _context28.stop();}}},_callee28,this);}));function waitUntil(_x33){return _waitUntil.apply(this,arguments);}return waitUntil;}()}]);return RequestFileOperationFeature;}(FileOperationFeature);var WillCreateFilesFeature=/*#__PURE__*/function(_RequestFileOperation){_inherits(WillCreateFilesFeature,_RequestFileOperation);var _super83=_createSuper(WillCreateFilesFeature);function WillCreateFilesFeature(client){_classCallCheck(this,WillCreateFilesFeature);return _super83.call(this,client,code.workspace.onWillCreateFiles,proto.WillCreateFilesRequest.type,"willCreate","willCreate",function(i){return i;},client.code2ProtocolConverter.asWillCreateFilesParams);}_createClass(WillCreateFilesFeature,[{key:"doSend",value:function doSend(event,next){var _this$_client$clientO4;var middleware=(_this$_client$clientO4=this._client.clientOptions.middleware)===null||_this$_client$clientO4===void 0?void 0:_this$_client$clientO4.workspace;return middleware!==null&&middleware!==void 0&&middleware.willCreateFiles?middleware.willCreateFiles(event,next):next(event);}}]);return WillCreateFilesFeature;}(RequestFileOperationFeature);exports.WillCreateFilesFeature=WillCreateFilesFeature;var WillRenameFilesFeature=/*#__PURE__*/function(_RequestFileOperation2){_inherits(WillRenameFilesFeature,_RequestFileOperation2);var _super84=_createSuper(WillRenameFilesFeature);function WillRenameFilesFeature(client){_classCallCheck(this,WillRenameFilesFeature);return _super84.call(this,client,code.workspace.onWillRenameFiles,proto.WillRenameFilesRequest.type,"willRename","willRename",function(i){return i.oldUri;},client.code2ProtocolConverter.asWillRenameFilesParams);}_createClass(WillRenameFilesFeature,[{key:"doSend",value:function doSend(event,next){var _this$_client$clientO5;var middleware=(_this$_client$clientO5=this._client.clientOptions.middleware)===null||_this$_client$clientO5===void 0?void 0:_this$_client$clientO5.workspace;return middleware!==null&&middleware!==void 0&&middleware.willRenameFiles?middleware.willRenameFiles(event,next):next(event);}}]);return WillRenameFilesFeature;}(RequestFileOperationFeature);exports.WillRenameFilesFeature=WillRenameFilesFeature;var WillDeleteFilesFeature=/*#__PURE__*/function(_RequestFileOperation3){_inherits(WillDeleteFilesFeature,_RequestFileOperation3);var _super85=_createSuper(WillDeleteFilesFeature);function WillDeleteFilesFeature(client){_classCallCheck(this,WillDeleteFilesFeature);return _super85.call(this,client,code.workspace.onWillDeleteFiles,proto.WillDeleteFilesRequest.type,"willDelete","willDelete",function(i){return i;},client.code2ProtocolConverter.asWillDeleteFilesParams);}_createClass(WillDeleteFilesFeature,[{key:"doSend",value:function doSend(event,next){var _this$_client$clientO6;var middleware=(_this$_client$clientO6=this._client.clientOptions.middleware)===null||_this$_client$clientO6===void 0?void 0:_this$_client$clientO6.workspace;return middleware!==null&&middleware!==void 0&&middleware.willDeleteFiles?middleware.willDeleteFiles(event,next):next(event);}}]);return WillDeleteFilesFeature;}(RequestFileOperationFeature);exports.WillDeleteFilesFeature=WillDeleteFilesFeature;}});// client/node_modules/vscode-languageclient/lib/common/linkedEditingRange.js
var require_linkedEditingRange=__commonJS({"client/node_modules/vscode-languageclient/lib/common/linkedEditingRange.js":function clientNode_modulesVscodeLanguageclientLibCommonLinkedEditingRangeJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LinkedEditingFeature=void 0;var code=require("vscode");var proto=require_main3();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var LinkedEditingFeature=/*#__PURE__*/function(_client_1$TextDocumen9){_inherits(LinkedEditingFeature,_client_1$TextDocumen9);var _super86=_createSuper(LinkedEditingFeature);function LinkedEditingFeature(client){_classCallCheck(this,LinkedEditingFeature);return _super86.call(this,client,proto.LinkedEditingRangeRequest.type);}_createClass(LinkedEditingFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var linkedEditingSupport=ensure(ensure(capabilities,"textDocument"),"linkedEditingRange");linkedEditingSupport.dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this$getRegistration17=this.getRegistration(documentSelector,capabilities.linkedEditingRangeProvider),_this$getRegistration18=_slicedToArray(_this$getRegistration17,2),id=_this$getRegistration18[0],options=_this$getRegistration18[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this119=this;var provider={provideLinkedEditingRanges:function provideLinkedEditingRanges(document2,position,token){var client=_this119._client;var provideLinkedEditing=function provideLinkedEditing(document3,position2,token2){return client.sendRequest(proto.LinkedEditingRangeRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document3,position2),token2).then(client.protocol2CodeConverter.asLinkedEditingRanges,function(error){return client.handleFailedRequest(proto.LinkedEditingRangeRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideLinkedEditingRange?middleware.provideLinkedEditingRange(document2,position,token,provideLinkedEditing):provideLinkedEditing(document2,position,token);}};return[code.languages.registerLinkedEditingRangeProvider(options.documentSelector,provider),provider];}}]);return LinkedEditingFeature;}(client_1.TextDocumentFeature);exports.LinkedEditingFeature=LinkedEditingFeature;}});// client/node_modules/vscode-languageclient/lib/common/proposed.diagnostic.js
var require_proposed_diagnostic2=__commonJS({"client/node_modules/vscode-languageclient/lib/common/proposed.diagnostic.js":function clientNode_modulesVscodeLanguageclientLibCommonProposedDiagnosticJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiagnosticFeature=exports.vsdiag=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var uuid_1=require_uuid();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var vsdiag;(function(vsdiag2){var DocumentDiagnosticReportKind;(function(DocumentDiagnosticReportKind2){DocumentDiagnosticReportKind2["full"]="full";DocumentDiagnosticReportKind2["unChanged"]="unChanged";})(DocumentDiagnosticReportKind=vsdiag2.DocumentDiagnosticReportKind||(vsdiag2.DocumentDiagnosticReportKind={}));})(vsdiag=exports.vsdiag||(exports.vsdiag={}));var RequestStateKind;(function(RequestStateKind2){RequestStateKind2["active"]="open";RequestStateKind2["reschedule"]="reschedule";RequestStateKind2["outDated"]="drop";})(RequestStateKind||(RequestStateKind={}));var EditorTracker=/*#__PURE__*/function(){function EditorTracker(){var _this120=this;_classCallCheck(this,EditorTracker);this.open=new Set();var openTabsHandler=function openTabsHandler(){_this120.open.clear();if(vscode_1.window.tabs!==void 0){var _iterator60=_createForOfIteratorHelper(vscode_1.window.tabs),_step57;try{for(_iterator60.s();!(_step57=_iterator60.n()).done;){var tab=_step57.value;if(tab.resource!==void 0){_this120.open.add(tab.resource.toString());}}}catch(err){_iterator60.e(err);}finally{_iterator60.f();}}else if(vscode_1.window.openEditors!==void 0){var _iterator61=_createForOfIteratorHelper(vscode_1.window.openEditors),_step58;try{for(_iterator61.s();!(_step58=_iterator61.n()).done;){var info=_step58.value;if(info.resource!==void 0){_this120.open.add(info.resource.toString());}}}catch(err){_iterator61.e(err);}finally{_iterator61.f();}}};openTabsHandler();if(vscode_1.window.onDidChangeTabs!==void 0){this.disposable=vscode_1.window.onDidChangeTabs(openTabsHandler);}else if(vscode_1.window.onDidChangeOpenEditors!==void 0){this.disposable=vscode_1.window.onDidChangeOpenEditors(openTabsHandler);}else{this.disposable={dispose:function dispose(){}};}}_createClass(EditorTracker,[{key:"dispose",value:function dispose(){this.disposable.dispose();}},{key:"isActive",value:function isActive(textDocument){var _vscode_1$window$acti;return((_vscode_1$window$acti=vscode_1.window.activeTextEditor)===null||_vscode_1$window$acti===void 0?void 0:_vscode_1$window$acti.document)===textDocument;}},{key:"isVisible",value:function isVisible(textDocument){return this.open.has(textDocument.uri.toString());}}]);return EditorTracker;}();var PullState;(function(PullState2){PullState2[PullState2["document"]=1]="document";PullState2[PullState2["workspace"]=2]="workspace";})(PullState||(PullState={}));var DocumentPullStateTracker=/*#__PURE__*/function(){function DocumentPullStateTracker(){_classCallCheck(this,DocumentPullStateTracker);this.documentPullStates=new Map();this.workspacePullStates=new Map();}_createClass(DocumentPullStateTracker,[{key:"track",value:function track(kind,document2,arg1){var states=kind===PullState.document?this.documentPullStates:this.workspacePullStates;var _ref20=typeof document2==="string"?[document2,vscode_1.Uri.parse(document2),arg1]:[document2.uri.toString(),document2.uri,document2.version],_ref21=_slicedToArray(_ref20,3),key=_ref21[0],uri=_ref21[1],version=_ref21[2];var state=states.get(key);if(state===void 0){state={document:uri,pulledVersion:version,resultId:void 0};states.set(key,state);}return state;}},{key:"update",value:function update(kind,document2,arg1,arg2){var states=kind===PullState.document?this.documentPullStates:this.workspacePullStates;var _ref22=typeof document2==="string"?[document2,vscode_1.Uri.parse(document2),arg1,arg2]:[document2.uri.toString(),document2.uri,document2.version,arg1],_ref23=_slicedToArray(_ref22,4),key=_ref23[0],uri=_ref23[1],version=_ref23[2],resultId=_ref23[3];var state=states.get(key);if(state===void 0){state={document:uri,pulledVersion:version,resultId:resultId};states.set(key,state);}else{state.pulledVersion=version;state.resultId=resultId;}}},{key:"unTrack",value:function unTrack(kind,textDocument){var states=kind===PullState.document?this.documentPullStates:this.workspacePullStates;states.delete(textDocument.uri.toString());}},{key:"tracks",value:function tracks(kind,document2){var key=typeof document2==="string"?document2:document2.uri.toString();var states=kind===PullState.document?this.documentPullStates:this.workspacePullStates;return states.has(key);}},{key:"getResultId",value:function getResultId(kind,textDocument){var _states$get;var states=kind===PullState.document?this.documentPullStates:this.workspacePullStates;return(_states$get=states.get(textDocument.uri.toString()))===null||_states$get===void 0?void 0:_states$get.resultId;}},{key:"getAllResultIds",value:function getAllResultIds(){var result=[];var _iterator62=_createForOfIteratorHelper(this.workspacePullStates),_step59;try{for(_iterator62.s();!(_step59=_iterator62.n()).done;){var _step59$value=_slicedToArray(_step59.value,2),uri=_step59$value[0],value=_step59$value[1];if(this.documentPullStates.has(uri)){value=this.documentPullStates.get(uri);}if(value.resultId!==void 0){result.push({uri:uri,value:value.resultId});}}}catch(err){_iterator62.e(err);}finally{_iterator62.f();}return result;}}]);return DocumentPullStateTracker;}();var DiagnosticRequestor=/*#__PURE__*/function(){function DiagnosticRequestor(client,editorTracker,options){_classCallCheck(this,DiagnosticRequestor);this.client=client;this.editorTracker=editorTracker;this.options=options;this.isDisposed=false;this.onDidChangeDiagnosticsEmitter=new vscode_1.EventEmitter();this.provider=this.createProvider();this.diagnostics=vscode_1.languages.createDiagnosticCollection(options.identifier);this.openRequests=new Map();this.documentStates=new DocumentPullStateTracker();this.workspaceErrorCounter=0;}_createClass(DiagnosticRequestor,[{key:"knows",value:function knows(kind,textDocument){return this.documentStates.tracks(kind,textDocument);}},{key:"pull",value:function pull(textDocument,cb){var _this121=this;this.pullAsync(textDocument).then(function(){if(cb){cb();}},function(error){_this121.client.error("Document pull failed for text document ".concat(textDocument.uri.toString()),error,false);});}},{key:"pullAsync",value:function(){var _pullAsync=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee29(textDocument){var key,version,currentRequestState,documentState,_afterState,tokenSource,report,afterState,_yield$this$provider$;return regeneratorRuntime.wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:key=textDocument.uri.toString();version=textDocument.version;currentRequestState=this.openRequests.get(key);documentState=this.documentStates.track(PullState.document,textDocument);if(!(currentRequestState===void 0)){_context29.next=45;break;}tokenSource=new vscode_1.CancellationTokenSource();this.openRequests.set(key,{state:RequestStateKind.active,version:version,textDocument:textDocument,tokenSource:tokenSource});_context29.prev=7;_context29.next=10;return this.provider.provideDiagnostics(textDocument,documentState.resultId,tokenSource.token);case 10:_context29.t1=_yield$this$provider$=_context29.sent;_context29.t0=_context29.t1!==null;if(!_context29.t0){_context29.next=14;break;}_context29.t0=_yield$this$provider$!==void 0;case 14:if(!_context29.t0){_context29.next=18;break;}_context29.t2=_yield$this$provider$;_context29.next=19;break;case 18:_context29.t2={kind:vsdiag.DocumentDiagnosticReportKind.full,items:[]};case 19:report=_context29.t2;_context29.next=30;break;case 22:_context29.prev=22;_context29.t3=_context29["catch"](7);if(_context29.t3 instanceof client_1.LSPCancellationError&&vscode_languageserver_protocol_1.Proposed.DiagnosticServerCancellationData.is(_context29.t3.data)&&_context29.t3.data.retriggerRequest===false){afterState={state:RequestStateKind.outDated,textDocument:textDocument};}if(!(afterState===void 0&&_context29.t3 instanceof vscode_1.CancellationError)){_context29.next=29;break;}afterState={state:RequestStateKind.reschedule,textDocument:textDocument};_context29.next=30;break;case 29:throw _context29.t3;case 30:afterState=(_afterState=afterState)!==null&&_afterState!==void 0?_afterState:this.openRequests.get(key);if(!(afterState===void 0)){_context29.next=35;break;}this.client.error("Lost request state in diagnostic pull model. Clearing diagnostics for ".concat(key));this.diagnostics.delete(textDocument.uri);return _context29.abrupt("return");case 35:this.openRequests.delete(key);if(this.editorTracker.isVisible(textDocument)){_context29.next=39;break;}this.documentStates.unTrack(PullState.document,textDocument);return _context29.abrupt("return");case 39:if(!(afterState.state===RequestStateKind.outDated)){_context29.next=41;break;}return _context29.abrupt("return");case 41:if(report!==void 0){if(report.kind===vsdiag.DocumentDiagnosticReportKind.full){this.diagnostics.set(textDocument.uri,report.items);}documentState.pulledVersion=version;documentState.resultId=report.resultId;}if(afterState.state===RequestStateKind.reschedule){this.pull(textDocument);}_context29.next=46;break;case 45:if(currentRequestState.state===RequestStateKind.active){currentRequestState.tokenSource.cancel();this.openRequests.set(key,{state:RequestStateKind.reschedule,textDocument:currentRequestState.textDocument});}else if(currentRequestState.state===RequestStateKind.outDated){this.openRequests.set(key,{state:RequestStateKind.reschedule,textDocument:currentRequestState.textDocument});}case 46:case"end":return _context29.stop();}}},_callee29,this,[[7,22]]);}));function pullAsync(_x34){return _pullAsync.apply(this,arguments);}return pullAsync;}()},{key:"cleanupPull",value:function cleanupPull(textDocument){var key=textDocument.uri.toString();var request=this.openRequests.get(key);if(this.options.workspaceDiagnostics||this.options.interFileDependencies){if(request!==void 0){this.openRequests.set(key,{state:RequestStateKind.reschedule,textDocument:textDocument});}else{this.pull(textDocument);}}else{if(request!==void 0){if(request.state===RequestStateKind.active){request.tokenSource.cancel();}this.openRequests.set(key,{state:RequestStateKind.outDated,textDocument:textDocument});}this.diagnostics.delete(textDocument.uri);}}},{key:"pullWorkspace",value:function pullWorkspace(){var _this122=this;this.pullWorkspaceAsync().then(function(){_this122.workspaceTimeout=(0,vscode_languageserver_protocol_1.RAL)().timer.setTimeout(function(){_this122.pullWorkspace();},2e3);},function(error){if(!(error instanceof client_1.LSPCancellationError)&&!vscode_languageserver_protocol_1.Proposed.DiagnosticServerCancellationData.is(error.data)){_this122.client.error("Workspace diagnostic pull failed.",error,false);_this122.workspaceErrorCounter++;}if(_this122.workspaceErrorCounter<=5){_this122.workspaceTimeout=(0,vscode_languageserver_protocol_1.RAL)().timer.setTimeout(function(){_this122.pullWorkspace();},2e3);}});}},{key:"pullWorkspaceAsync",value:function(){var _pullWorkspaceAsync=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee30(){var _this123=this;var previousResultIds;return regeneratorRuntime.wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:if(this.provider.provideWorkspaceDiagnostics){_context30.next=2;break;}return _context30.abrupt("return");case 2:if(this.workspaceCancellation!==void 0){this.workspaceCancellation.cancel();this.workspaceCancellation=void 0;}this.workspaceCancellation=new vscode_1.CancellationTokenSource();previousResultIds=this.documentStates.getAllResultIds().map(function(item){return{uri:_this123.client.protocol2CodeConverter.asUri(item.uri),value:item.value};});_context30.next=7;return this.provider.provideWorkspaceDiagnostics(previousResultIds,this.workspaceCancellation.token,function(chunk){if(!chunk||_this123.isDisposed){return;}var _iterator63=_createForOfIteratorHelper(chunk.items),_step60;try{for(_iterator63.s();!(_step60=_iterator63.n()).done;){var _item$version;var item=_step60.value;if(item.kind===vsdiag.DocumentDiagnosticReportKind.full){if(!_this123.documentStates.tracks(PullState.document,item.uri.toString())){_this123.diagnostics.set(item.uri,item.items);}}_this123.documentStates.update(PullState.workspace,item.uri.toString(),(_item$version=item.version)!==null&&_item$version!==void 0?_item$version:void 0,item.resultId);}}catch(err){_iterator63.e(err);}finally{_iterator63.f();}});case 7:case"end":return _context30.stop();}}},_callee30,this);}));function pullWorkspaceAsync(){return _pullWorkspaceAsync.apply(this,arguments);}return pullWorkspaceAsync;}()},{key:"createProvider",value:function createProvider(){var _this124=this;var result={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:function provideDiagnostics(textDocument,previousResultId,token){var provideDiagnostics=function provideDiagnostics(textDocument2,previousResultId2,token2){var params={identifier:_this124.options.identifier,textDocument:{uri:_this124.client.code2ProtocolConverter.asUri(textDocument2.uri)},previousResultId:previousResultId2};return _this124.client.sendRequest(vscode_languageserver_protocol_1.Proposed.DocumentDiagnosticRequest.type,params,token2).then(function(result2){if(result2===void 0||result2===null||_this124.isDisposed){return{kind:vsdiag.DocumentDiagnosticReportKind.full,items:[]};}if(result2.kind===vscode_languageserver_protocol_1.Proposed.DocumentDiagnosticReportKind.full){return{kind:vsdiag.DocumentDiagnosticReportKind.full,resultId:result2.resultId,items:_this124.client.protocol2CodeConverter.asDiagnostics(result2.items)};}else{return{kind:vsdiag.DocumentDiagnosticReportKind.unChanged,resultId:result2.resultId};}},function(error){return _this124.client.handleFailedRequest(vscode_languageserver_protocol_1.Proposed.DocumentDiagnosticRequest.type,token2,error,{kind:vsdiag.DocumentDiagnosticReportKind.full,items:[]});});};var middleware=_this124.client.clientOptions.middleware;return middleware.provideDiagnostics?middleware.provideDiagnostics(textDocument,previousResultId,token,provideDiagnostics):provideDiagnostics(textDocument,previousResultId,token);}};if(this.options.workspaceDiagnostics){result.provideWorkspaceDiagnostics=function(resultIds,token,resultReporter){var convertReport=function convertReport(report){if(report.kind===vscode_languageserver_protocol_1.Proposed.DocumentDiagnosticReportKind.full){return{kind:vsdiag.DocumentDiagnosticReportKind.full,uri:_this124.client.protocol2CodeConverter.asUri(report.uri),resultId:report.resultId,version:report.version,items:_this124.client.protocol2CodeConverter.asDiagnostics(report.items)};}else{return{kind:vsdiag.DocumentDiagnosticReportKind.unChanged,uri:_this124.client.protocol2CodeConverter.asUri(report.uri),resultId:report.resultId,version:report.version};}};var convertPreviousResultIds=function convertPreviousResultIds(resultIds2){var converted=[];var _iterator64=_createForOfIteratorHelper(resultIds2),_step61;try{for(_iterator64.s();!(_step61=_iterator64.n()).done;){var item=_step61.value;converted.push({uri:_this124.client.code2ProtocolConverter.asUri(item.uri),value:item.value});}}catch(err){_iterator64.e(err);}finally{_iterator64.f();}return converted;};var provideDiagnostics=function provideDiagnostics(resultIds2,token2){var partialResultToken=(0,uuid_1.generateUuid)();var disposable=_this124.client.onProgress(vscode_languageserver_protocol_1.Proposed.WorkspaceDiagnosticRequest.partialResult,partialResultToken,function(partialResult){if(partialResult===void 0||partialResult===null){resultReporter(null);return;}var converted={items:[]};var _iterator65=_createForOfIteratorHelper(partialResult.items),_step62;try{for(_iterator65.s();!(_step62=_iterator65.n()).done;){var item=_step62.value;converted.items.push(convertReport(item));}}catch(err){_iterator65.e(err);}finally{_iterator65.f();}resultReporter(converted);});var params={identifier:_this124.options.identifier,previousResultIds:convertPreviousResultIds(resultIds2),partialResultToken:partialResultToken};return _this124.client.sendRequest(vscode_languageserver_protocol_1.Proposed.WorkspaceDiagnosticRequest.type,params,token2).then(function(result2){var converted={items:[]};var _iterator66=_createForOfIteratorHelper(result2.items),_step63;try{for(_iterator66.s();!(_step63=_iterator66.n()).done;){var item=_step63.value;converted.items.push(convertReport(item));}}catch(err){_iterator66.e(err);}finally{_iterator66.f();}disposable.dispose();resultReporter(converted);return{items:[]};},function(error){disposable.dispose();return _this124.client.handleFailedRequest(vscode_languageserver_protocol_1.Proposed.DocumentDiagnosticRequest.type,token2,error,{items:[]});});};var middleware=_this124.client.clientOptions.middleware;return middleware.provideWorkspaceDiagnostics?middleware.provideWorkspaceDiagnostics(resultIds,token,resultReporter,provideDiagnostics):provideDiagnostics(resultIds,token,resultReporter);};}return result;}},{key:"dispose",value:function dispose(){var _this$workspaceCancel,_this$workspaceTimeou;this.isDisposed=true;(_this$workspaceCancel=this.workspaceCancellation)===null||_this$workspaceCancel===void 0?void 0:_this$workspaceCancel.cancel();(_this$workspaceTimeou=this.workspaceTimeout)===null||_this$workspaceTimeou===void 0?void 0:_this$workspaceTimeou.dispose();var _iterator67=_createForOfIteratorHelper(this.openRequests),_step64;try{for(_iterator67.s();!(_step64=_iterator67.n()).done;){var _step64$value=_slicedToArray(_step64.value,2),key=_step64$value[0],request=_step64$value[1];if(request.state===RequestStateKind.active){request.tokenSource.cancel();}this.openRequests.set(key,{state:RequestStateKind.outDated,textDocument:request.textDocument});}}catch(err){_iterator67.e(err);}finally{_iterator67.f();}}}]);return DiagnosticRequestor;}();var BackgroundScheduler=/*#__PURE__*/function(){function BackgroundScheduler(diagnosticRequestor){_classCallCheck(this,BackgroundScheduler);this.diagnosticRequestor=diagnosticRequestor;this.documents=new vscode_languageserver_protocol_1.LinkedMap();}_createClass(BackgroundScheduler,[{key:"add",value:function add(textDocument){var key=textDocument.uri.toString();if(this.documents.has(key)){return;}this.documents.set(textDocument.uri.toString(),textDocument,vscode_languageserver_protocol_1.Touch.Last);this.trigger();}},{key:"remove",value:function remove(textDocument){var key=textDocument.uri.toString();if(this.documents.has(key)){this.documents.delete(key);this.diagnosticRequestor.pull(textDocument);}if(this.documents.size===0){this.stop();}else if(textDocument===this.endDocument){this.endDocument=this.documents.last;}}},{key:"trigger",value:function trigger(){var _this125=this;if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return;}this.endDocument=this.documents.last;this.intervalHandle=(0,vscode_languageserver_protocol_1.RAL)().timer.setInterval(function(){var document2=_this125.documents.first;if(document2!==void 0){_this125.diagnosticRequestor.pull(document2);_this125.documents.set(document2.uri.toString(),document2,vscode_languageserver_protocol_1.Touch.Last);if(document2===_this125.endDocument){_this125.stop();}}},200);}},{key:"dispose",value:function dispose(){this.stop();this.documents.clear();}},{key:"stop",value:function stop(){var _this$intervalHandle;(_this$intervalHandle=this.intervalHandle)===null||_this$intervalHandle===void 0?void 0:_this$intervalHandle.dispose();this.intervalHandle=void 0;this.endDocument=void 0;}}]);return BackgroundScheduler;}();var DiagnosticFeatureProviderImpl=/*#__PURE__*/function(){function DiagnosticFeatureProviderImpl(client,editorTracker,options){var _client$clientOptions,_this126=this,_vscode_1$window$acti2,_vscode_1$Disposable;_classCallCheck(this,DiagnosticFeatureProviderImpl);var diagnosticPullOptions=(_client$clientOptions=client.clientOptions.diagnosticPullOptions)!==null&&_client$clientOptions!==void 0?_client$clientOptions:{onChange:true,onSave:false};var documentSelector=options.documentSelector;var disposables=[];var matches=function matches(textDocument){return vscode_1.languages.match(documentSelector,textDocument)>0&&editorTracker.isVisible(textDocument);};this.diagnosticRequestor=new DiagnosticRequestor(client,editorTracker,options);this.backgroundScheduler=new BackgroundScheduler(this.diagnosticRequestor);var addToBackgroundIfNeeded=function addToBackgroundIfNeeded(textDocument){if(!matches(textDocument)||!options.interFileDependencies||_this126.activeTextDocument===textDocument){return;}_this126.backgroundScheduler.add(textDocument);};this.activeTextDocument=(_vscode_1$window$acti2=vscode_1.window.activeTextEditor)===null||_vscode_1$window$acti2===void 0?void 0:_vscode_1$window$acti2.document;vscode_1.window.onDidChangeActiveTextEditor(function(editor){var oldActive=_this126.activeTextDocument;_this126.activeTextDocument=editor===null||editor===void 0?void 0:editor.document;if(oldActive!==void 0){addToBackgroundIfNeeded(oldActive);}if(_this126.activeTextDocument!==void 0){_this126.backgroundScheduler.remove(_this126.activeTextDocument);}});var openFeature=client.getFeature(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.method);disposables.push(openFeature.onNotificationSent(function(event){var textDocument=event.original;if(matches(textDocument)){_this126.diagnosticRequestor.pull(textDocument,function(){addToBackgroundIfNeeded(textDocument);});}}));var _iterator68=_createForOfIteratorHelper(vscode_1.workspace.textDocuments),_step65;try{var _loop5=function _loop5(){var textDocument=_step65.value;if(matches(textDocument)){_this126.diagnosticRequestor.pull(textDocument,function(){addToBackgroundIfNeeded(textDocument);});}};for(_iterator68.s();!(_step65=_iterator68.n()).done;){_loop5();}}catch(err){_iterator68.e(err);}finally{_iterator68.f();}if(diagnosticPullOptions.onChange){var changeFeature=client.getFeature(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.method);disposables.push(changeFeature.onNotificationSent(/*#__PURE__*/function(){var _ref24=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee31(event){var textDocument;return regeneratorRuntime.wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:textDocument=event.original.document;if((diagnosticPullOptions.filter===void 0||!diagnosticPullOptions.filter(textDocument,client_1.DiagnosticPullMode.onType))&&_this126.diagnosticRequestor.knows(PullState.document,textDocument)&&event.original.contentChanges.length>0){_this126.diagnosticRequestor.pull(textDocument,function(){_this126.backgroundScheduler.trigger();});}case 2:case"end":return _context31.stop();}}},_callee31);}));return function(_x35){return _ref24.apply(this,arguments);};}()));}if(diagnosticPullOptions.onSave){var saveFeature=client.getFeature(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.method);disposables.push(saveFeature.onNotificationSent(function(event){var textDocument=event.original;if((diagnosticPullOptions.filter===void 0||!diagnosticPullOptions.filter(textDocument,client_1.DiagnosticPullMode.onSave))&&_this126.diagnosticRequestor.knows(PullState.document,textDocument)){_this126.diagnosticRequestor.pull(event.original,function(){_this126.backgroundScheduler.trigger();});}}));}var closeFeature=client.getFeature(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.method);disposables.push(closeFeature.onNotificationSent(function(event){var textDocument=event.original;_this126.diagnosticRequestor.cleanupPull(textDocument);_this126.backgroundScheduler.remove(textDocument);}));this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(function(){var _iterator69=_createForOfIteratorHelper(vscode_1.workspace.textDocuments),_step66;try{for(_iterator69.s();!(_step66=_iterator69.n()).done;){var textDocument=_step66.value;if(matches(textDocument)){_this126.diagnosticRequestor.pull(textDocument);}}}catch(err){_iterator69.e(err);}finally{_iterator69.f();}});if(options.workspaceDiagnostics===true&&options.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"){this.diagnosticRequestor.pullWorkspace();}this.disposable=(_vscode_1$Disposable=vscode_1.Disposable).from.apply(_vscode_1$Disposable,disposables.concat([this.backgroundScheduler,this.diagnosticRequestor]));}_createClass(DiagnosticFeatureProviderImpl,[{key:"onDidChangeDiagnosticsEmitter",get:function get(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter;}},{key:"diagnostics",get:function get(){return this.diagnosticRequestor.provider;}}]);return DiagnosticFeatureProviderImpl;}();var DiagnosticFeature=/*#__PURE__*/function(_client_1$TextDocumen10){_inherits(DiagnosticFeature,_client_1$TextDocumen10);var _super87=_createSuper(DiagnosticFeature);function DiagnosticFeature(client){var _this127;_classCallCheck(this,DiagnosticFeature);_this127=_super87.call(this,client,vscode_languageserver_protocol_1.Proposed.DocumentDiagnosticRequest.type);_this127.editorTracker=new EditorTracker();return _this127;}_createClass(DiagnosticFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){var capability=ensure(ensure(capabilities,"textDocument"),"diagnostic");capability.dynamicRegistration=true;capability.relatedDocumentSupport=false;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this128=this;var client=this._client;client.onRequest(vscode_languageserver_protocol_1.Proposed.DiagnosticRefreshRequest.type,/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee32(){var _iterator70,_step67,provider;return regeneratorRuntime.wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_iterator70=_createForOfIteratorHelper(_this128.getAllProviders());try{for(_iterator70.s();!(_step67=_iterator70.n()).done;){provider=_step67.value;provider.onDidChangeDiagnosticsEmitter.fire();}}catch(err){_iterator70.e(err);}finally{_iterator70.f();}case 2:case"end":return _context32.stop();}}},_callee32);})));var _this$getRegistration19=this.getRegistration(documentSelector,capabilities.diagnosticProvider),_this$getRegistration20=_slicedToArray(_this$getRegistration19,2),id=_this$getRegistration20[0],options=_this$getRegistration20[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"dispose",value:function dispose(){this.editorTracker.dispose();_get2(_getPrototypeOf(DiagnosticFeature.prototype),"dispose",this).call(this);}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var provider=new DiagnosticFeatureProviderImpl(this._client,this.editorTracker,options);return[provider.disposable,provider];}}]);return DiagnosticFeature;}(client_1.TextDocumentFeature);exports.DiagnosticFeature=DiagnosticFeature;}});// client/node_modules/vscode-languageclient/lib/common/proposed.typeHierarchy.js
var require_proposed_typeHierarchy2=__commonJS({"client/node_modules/vscode-languageclient/lib/common/proposed.typeHierarchy.js":function clientNode_modulesVscodeLanguageclientLibCommonProposedTypeHierarchyJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TypeHierarchyFeature=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]={};}return target[key];}var TypeHierarchyProvider=/*#__PURE__*/function(){function TypeHierarchyProvider(client){_classCallCheck(this,TypeHierarchyProvider);this.client=client;this.middleware=client.clientOptions.middleware;}_createClass(TypeHierarchyProvider,[{key:"prepareTypeHierarchy",value:function prepareTypeHierarchy(document2,position,token){var client=this.client;var middleware=this.middleware;var prepareTypeHierarchy=function prepareTypeHierarchy(document3,position2,token2){var params=client.code2ProtocolConverter.asTextDocumentPositionParams(document3,position2);return client.sendRequest(vscode_languageserver_protocol_1.Proposed.TypeHierarchyPrepareRequest.type,params,token2).then(function(result){return client.protocol2CodeConverter.asTypeHierarchyItems(result);},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.Proposed.TypeHierarchyPrepareRequest.type,token2,error,null);});};return middleware.prepareTypeHierarchy?middleware.prepareTypeHierarchy(document2,position,token,prepareTypeHierarchy):prepareTypeHierarchy(document2,position,token);}},{key:"provideTypeHierarchySupertypes",value:function provideTypeHierarchySupertypes(item,token){var client=this.client;var middleware=this.middleware;var provideTypeHierarchySupertypes=function provideTypeHierarchySupertypes(item2,token2){var params={item:client.code2ProtocolConverter.asTypeHierarchyItem(item2)};return client.sendRequest(vscode_languageserver_protocol_1.Proposed.TypeHierarchySupertypesRequest.type,params,token2).then(function(result){return client.protocol2CodeConverter.asTypeHierarchyItems(result);},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.Proposed.TypeHierarchySupertypesRequest.type,token2,error,null);});};return middleware.provideTypeHierarchySupertypes?middleware.provideTypeHierarchySupertypes(item,token,provideTypeHierarchySupertypes):provideTypeHierarchySupertypes(item,token);}},{key:"provideTypeHierarchySubtypes",value:function provideTypeHierarchySubtypes(item,token){var client=this.client;var middleware=this.middleware;var provideTypeHierarchySubtypes=function provideTypeHierarchySubtypes(item2,token2){var params={item:client.code2ProtocolConverter.asTypeHierarchyItem(item2)};return client.sendRequest(vscode_languageserver_protocol_1.Proposed.TypeHierarchySubtypesRequest.type,params,token2).then(function(result){return client.protocol2CodeConverter.asTypeHierarchyItems(result);},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.Proposed.TypeHierarchySubtypesRequest.type,token2,error,null);});};return middleware.provideTypeHierarchySubtypes?middleware.provideTypeHierarchySubtypes(item,token,provideTypeHierarchySubtypes):provideTypeHierarchySubtypes(item,token);}}]);return TypeHierarchyProvider;}();var TypeHierarchyFeature=/*#__PURE__*/function(_client_1$TextDocumen11){_inherits(TypeHierarchyFeature,_client_1$TextDocumen11);var _super88=_createSuper(TypeHierarchyFeature);function TypeHierarchyFeature(client){_classCallCheck(this,TypeHierarchyFeature);return _super88.call(this,client,vscode_languageserver_protocol_1.Proposed.TypeHierarchyPrepareRequest.type);}_createClass(TypeHierarchyFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(cap){var capabilities=cap;var capability=ensure(ensure(capabilities,"textDocument"),"typeHierarchy");capability.dynamicRegistration=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this$getRegistration21=this.getRegistration(documentSelector,capabilities.typeHierarchyProvider),_this$getRegistration22=_slicedToArray(_this$getRegistration21,2),id=_this$getRegistration22[0],options=_this$getRegistration22[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var client=this._client;var provider=new TypeHierarchyProvider(client);return[vscode_1.languages.registerTypeHierarchyProvider(options.documentSelector,provider),provider];}}]);return TypeHierarchyFeature;}(client_1.TextDocumentFeature);exports.TypeHierarchyFeature=TypeHierarchyFeature;}});// client/node_modules/vscode-languageclient/lib/common/proposed.inlineValues.js
var require_proposed_inlineValues=__commonJS({"client/node_modules/vscode-languageclient/lib/common/proposed.inlineValues.js":function clientNode_modulesVscodeLanguageclientLibCommonProposedInlineValuesJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InlineValueFeature=void 0;var vscode_1=require("vscode");var vscode_languageserver_protocol_1=require_main3();var client_1=require_client();function ensure(target,key){if(target[key]===void 0){target[key]=Object.create(null);}return target[key];}var InlineValueFeature=/*#__PURE__*/function(_client_1$TextDocumen12){_inherits(InlineValueFeature,_client_1$TextDocumen12);var _super89=_createSuper(InlineValueFeature);function InlineValueFeature(client){_classCallCheck(this,InlineValueFeature);return _super89.call(this,client,vscode_languageserver_protocol_1.Proposed.InlineValuesRequest.type);}_createClass(InlineValueFeature,[{key:"fillClientCapabilities",value:function fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"inlineValues").dynamicRegistration=true;ensure(ensure(capabilities,"workspace"),"codeLens").refreshSupport=true;}},{key:"initialize",value:function initialize(capabilities,documentSelector){var _this129=this;this._client.onRequest(vscode_languageserver_protocol_1.Proposed.InlineValuesRefreshRequest.type,/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee33(){var _iterator71,_step68,provider;return regeneratorRuntime.wrap(function _callee33$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_iterator71=_createForOfIteratorHelper(_this129.getAllProviders());try{for(_iterator71.s();!(_step68=_iterator71.n()).done;){provider=_step68.value;provider.onDidChangeInlineValues.fire();}}catch(err){_iterator71.e(err);}finally{_iterator71.f();}case 2:case"end":return _context33.stop();}}},_callee33);})));var _this$getRegistration23=this.getRegistration(documentSelector,capabilities.inlineValuesProvider),_this$getRegistration24=_slicedToArray(_this$getRegistration23,2),id=_this$getRegistration24[0],options=_this$getRegistration24[1];if(!id||!options){return;}this.register({id:id,registerOptions:options});}},{key:"registerLanguageProvider",value:function registerLanguageProvider(options){var _this130=this;var eventEmitter=new vscode_1.EventEmitter();var provider={onDidChangeInlineValues:eventEmitter.event,provideInlineValues:function provideInlineValues(document2,viewPort,context,token){var client=_this130._client;var provideInlineValues=function provideInlineValues(document3,viewPort2,context2,token2){var requestParams={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document3),viewPort:client.code2ProtocolConverter.asRange(viewPort2),context:client.code2ProtocolConverter.asInlineValuesContext(context2)};return client.sendRequest(vscode_languageserver_protocol_1.Proposed.InlineValuesRequest.type,requestParams,token2).then(function(values){return client.protocol2CodeConverter.asInlineValues(values);},function(error){return client.handleFailedRequest(vscode_languageserver_protocol_1.Proposed.InlineValuesRequest.type,token2,error,null);});};var middleware=client.clientOptions.middleware;return middleware.provideInlineValues?middleware.provideInlineValues(document2,viewPort,context,token,provideInlineValues):provideInlineValues(document2,viewPort,context,token);}};return[vscode_1.languages.registerInlineValuesProvider(options.documentSelector,provider),{provider:provider,onDidChangeInlineValues:eventEmitter}];}}]);return InlineValueFeature;}(client_1.TextDocumentFeature);exports.InlineValueFeature=InlineValueFeature;}});// client/node_modules/vscode-languageclient/lib/common/commonClient.js
var require_commonClient=__commonJS({"client/node_modules/vscode-languageclient/lib/common/commonClient.js":function clientNode_modulesVscodeLanguageclientLibCommonCommonClientJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProposedFeatures=exports.CommonLanguageClient=void 0;var client_1=require_client();var colorProvider_1=require_colorProvider();var configuration_1=require_configuration();var implementation_1=require_implementation();var typeDefinition_1=require_typeDefinition();var workspaceFolders_1=require_workspaceFolders();var foldingRange_1=require_foldingRange();var declaration_1=require_declaration();var selectionRange_1=require_selectionRange();var progress_1=require_progress();var callHierarchy_1=require_callHierarchy();var semanticTokens_1=require_semanticTokens();var fileOperations_1=require_fileOperations();var linkedEditingRange_1=require_linkedEditingRange();var CommonLanguageClient=/*#__PURE__*/function(_client_1$BaseLanguag){_inherits(CommonLanguageClient,_client_1$BaseLanguag);var _super90=_createSuper(CommonLanguageClient);function CommonLanguageClient(id,name,clientOptions){_classCallCheck(this,CommonLanguageClient);return _super90.call(this,id,name,clientOptions);}_createClass(CommonLanguageClient,[{key:"registerProposedFeatures",value:function registerProposedFeatures(){this.registerFeatures(ProposedFeatures.createAll(this));}},{key:"registerBuiltinFeatures",value:function registerBuiltinFeatures(){_get2(_getPrototypeOf(CommonLanguageClient.prototype),"registerBuiltinFeatures",this).call(this);this.registerFeature(new configuration_1.ConfigurationFeature(this));this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));this.registerFeature(new implementation_1.ImplementationFeature(this));this.registerFeature(new colorProvider_1.ColorProviderFeature(this));if(this.clientOptions.workspaceFolder===void 0){this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));}this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));this.registerFeature(new declaration_1.DeclarationFeature(this));this.registerFeature(new selectionRange_1.SelectionRangeFeature(this));this.registerFeature(new progress_1.ProgressFeature(this));this.registerFeature(new callHierarchy_1.CallHierarchyFeature(this));this.registerFeature(new semanticTokens_1.SemanticTokensFeature(this));this.registerFeature(new linkedEditingRange_1.LinkedEditingFeature(this));this.registerFeature(new fileOperations_1.DidCreateFilesFeature(this));this.registerFeature(new fileOperations_1.DidRenameFilesFeature(this));this.registerFeature(new fileOperations_1.DidDeleteFilesFeature(this));this.registerFeature(new fileOperations_1.WillCreateFilesFeature(this));this.registerFeature(new fileOperations_1.WillRenameFilesFeature(this));this.registerFeature(new fileOperations_1.WillDeleteFilesFeature(this));}}]);return CommonLanguageClient;}(client_1.BaseLanguageClient);exports.CommonLanguageClient=CommonLanguageClient;var pd=require_proposed_diagnostic2();var pt=require_proposed_typeHierarchy2();var iv=require_proposed_inlineValues();var ProposedFeatures;(function(ProposedFeatures2){function createAll(_client){var result=[new pd.DiagnosticFeature(_client),new pt.TypeHierarchyFeature(_client),new iv.InlineValueFeature(_client)];return result;}ProposedFeatures2.createAll=createAll;})(ProposedFeatures=exports.ProposedFeatures||(exports.ProposedFeatures={}));}});// client/node_modules/vscode-languageclient/lib/node/processes.js
var require_processes=__commonJS({"client/node_modules/vscode-languageclient/lib/node/processes.js":function clientNode_modulesVscodeLanguageclientLibNodeProcessesJs(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.terminate=void 0;var cp=require("child_process");var path_1=require("path");var isWindows=process.platform==="win32";var isMacintosh=process.platform==="darwin";var isLinux=process.platform==="linux";function terminate(process2,cwd){if(isWindows){try{var options={stdio:["pipe","pipe","ignore"]};if(cwd){options.cwd=cwd;}cp.execFileSync("taskkill",["/T","/F","/PID",process2.pid.toString()],options);return true;}catch(err){return false;}}else if(isLinux||isMacintosh){try{var cmd=(0,path_1.join)(__dirname,"terminateProcess.sh");var result=cp.spawnSync(cmd,[process2.pid.toString()]);return result.error?false:true;}catch(err){return false;}}else{process2.kill("SIGKILL");return true;}}exports.terminate=terminate;}});// client/node_modules/vscode-languageserver-protocol/node.js
var require_node2=__commonJS({"client/node_modules/vscode-languageserver-protocol/node.js":function clientNode_modulesVscodeLanguageserverProtocolNodeJs(exports,module2){"use strict";module2.exports=require_main3();}});// client/node_modules/vscode-languageclient/lib/common/api.js
var require_api3=__commonJS({"client/node_modules/vscode-languageclient/lib/common/api.js":function clientNode_modulesVscodeLanguageclientLibCommonApiJs(exports){"use strict";var __createBinding2=exports&&exports.__createBinding||(Object.create?function(o,m,k,k2){if(k2===void 0)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===void 0)k2=k;o[k2]=m[k];});var __exportStar=exports&&exports.__exportStar||function(m,exports2){for(var p in m){if(p!=="default"&&!Object.prototype.hasOwnProperty.call(exports2,p))__createBinding2(exports2,m,p);}};Object.defineProperty(exports,"__esModule",{value:true});__exportStar(require_main3(),exports);__exportStar(require_client(),exports);__exportStar(require_commonClient(),exports);}});// client/node_modules/vscode-languageclient/lib/node/main.js
var require_main4=__commonJS({"client/node_modules/vscode-languageclient/lib/node/main.js":function clientNode_modulesVscodeLanguageclientLibNodeMainJs(exports){"use strict";var __createBinding2=exports&&exports.__createBinding||(Object.create?function(o,m,k,k2){if(k2===void 0)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===void 0)k2=k;o[k2]=m[k];});var __exportStar=exports&&exports.__exportStar||function(m,exports2){for(var p in m){if(p!=="default"&&!Object.prototype.hasOwnProperty.call(exports2,p))__createBinding2(exports2,m,p);}};Object.defineProperty(exports,"__esModule",{value:true});exports.SettingMonitor=exports.LanguageClient=exports.TransportKind=void 0;var cp=require("child_process");var fs=require("fs");var path=require("path");var SemVer=require_semver2();var vscode_1=require("vscode");var Is=require_is();var commonClient_1=require_commonClient();var client_1=require_client();var processes_1=require_processes();var node_1=require_node2();__exportStar(require_node2(),exports);__exportStar(require_api3(),exports);var REQUIRED_VSCODE_VERSION="^1.61.0";var TransportKind2;(function(TransportKind3){TransportKind3[TransportKind3["stdio"]=0]="stdio";TransportKind3[TransportKind3["ipc"]=1]="ipc";TransportKind3[TransportKind3["pipe"]=2]="pipe";TransportKind3[TransportKind3["socket"]=3]="socket";})(TransportKind2=exports.TransportKind||(exports.TransportKind={}));var Transport;(function(Transport2){function isSocket(value){var candidate=value;return candidate&&candidate.kind===TransportKind2.socket&&Is.number(candidate.port);}Transport2.isSocket=isSocket;})(Transport||(Transport={}));var Executable;(function(Executable2){function is(value){return Is.string(value.command);}Executable2.is=is;})(Executable||(Executable={}));var NodeModule;(function(NodeModule2){function is(value){return Is.string(value.module);}NodeModule2.is=is;})(NodeModule||(NodeModule={}));var StreamInfo;(function(StreamInfo2){function is(value){var candidate=value;return candidate&&candidate.writer!==void 0&&candidate.reader!==void 0;}StreamInfo2.is=is;})(StreamInfo||(StreamInfo={}));var ChildProcessInfo;(function(ChildProcessInfo2){function is(value){var candidate=value;return candidate&&candidate.process!==void 0&&typeof candidate.detached==="boolean";}ChildProcessInfo2.is=is;})(ChildProcessInfo||(ChildProcessInfo={}));var LanguageClient2=/*#__PURE__*/function(_commonClient_1$Commo){_inherits(LanguageClient2,_commonClient_1$Commo);var _super91=_createSuper(LanguageClient2);function LanguageClient2(arg1,arg2,arg3,arg4,arg5){var _this131;_classCallCheck(this,LanguageClient2);var id;var name;var serverOptions;var clientOptions;var forceDebug;if(Is.string(arg2)){id=arg1;name=arg2;serverOptions=arg3;clientOptions=arg4;forceDebug=!!arg5;}else{id=arg1.toLowerCase();name=arg1;serverOptions=arg2;clientOptions=arg3;forceDebug=arg4;}if(forceDebug===void 0){forceDebug=false;}_this131=_super91.call(this,id,name,clientOptions);_this131._serverOptions=serverOptions;_this131._forceDebug=forceDebug;_this131._isInDebugMode=forceDebug;try{_this131.checkVersion();}catch(error){if(Is.string(error.message)){_this131.outputChannel.appendLine(error.message);}throw error;}return _this131;}_createClass(LanguageClient2,[{key:"checkVersion",value:function checkVersion(){var codeVersion=SemVer.parse(vscode_1.version);if(!codeVersion){throw new Error("No valid VS Code version detected. Version string is: ".concat(vscode_1.version));}if(codeVersion.prerelease&&codeVersion.prerelease.length>0){codeVersion.prerelease=[];}if(!SemVer.satisfies(codeVersion,REQUIRED_VSCODE_VERSION)){throw new Error("The language client requires VS Code version ".concat(REQUIRED_VSCODE_VERSION," but received version ").concat(vscode_1.version));}}},{key:"isInDebugMode",get:function get(){return this._isInDebugMode;}},{key:"restart",value:function(){var _restart=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee34(){return regeneratorRuntime.wrap(function _callee34$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_context34.next=2;return this.stop();case 2:if(!this.isInDebugMode){_context34.next=8;break;}_context34.next=5;return new Promise(function(resolve){return setTimeout(resolve,1e3);});case 5:this.start();_context34.next=9;break;case 8:this.start();case 9:case"end":return _context34.stop();}}},_callee34,this);}));function restart(){return _restart.apply(this,arguments);}return restart;}()},{key:"stop",value:function stop(){var _this132=this;var timeout=arguments.length>0&&arguments[0]!==undefined?arguments[0]:2e3;return _get2(_getPrototypeOf(LanguageClient2.prototype),"stop",this).call(this,timeout).finally(function(){if(_this132._serverProcess){var toCheck=_this132._serverProcess;_this132._serverProcess=void 0;if(_this132._isDetached===void 0||!_this132._isDetached){_this132.checkProcessDied(toCheck);}_this132._isDetached=void 0;}});}},{key:"checkProcessDied",value:function checkProcessDied(childProcess){if(!childProcess){return;}setTimeout(function(){try{process.kill(childProcess.pid,0);(0,processes_1.terminate)(childProcess);}catch(error){}},2e3);}},{key:"handleConnectionClosed",value:function handleConnectionClosed(){this._serverProcess=void 0;_get2(_getPrototypeOf(LanguageClient2.prototype),"handleConnectionClosed",this).call(this);}},{key:"fillInitializeParams",value:function fillInitializeParams(params){_get2(_getPrototypeOf(LanguageClient2.prototype),"fillInitializeParams",this).call(this,params);if(params.processId===null){params.processId=process.pid;}}},{key:"createMessageTransports",value:function createMessageTransports(encoding){var _this133=this;function getEnvironment(env,fork){if(!env&&!fork){return void 0;}var result=Object.create(null);Object.keys(process.env).forEach(function(key){return result[key]=process.env[key];});if(fork){result["ELECTRON_RUN_AS_NODE"]="1";result["ELECTRON_NO_ASAR"]="1";}if(env){Object.keys(env).forEach(function(key){return result[key]=env[key];});}return result;}var debugStartWith=["--debug=","--debug-brk=","--inspect=","--inspect-brk="];var debugEquals=["--debug","--debug-brk","--inspect","--inspect-brk"];function startedInDebugMode(){var args=process.execArgv;if(args){return args.some(function(arg){return debugStartWith.some(function(value){return arg.startsWith(value);})||debugEquals.some(function(value){return arg===value;});});}return false;}function assertStdio(process2){if(process2.stdin===null||process2.stdout===null||process2.stderr===null){throw new Error("Process created without stdio streams");}}var server=this._serverOptions;if(Is.func(server)){return server().then(function(result){if(client_1.MessageTransports.is(result)){_this133._isDetached=!!result.detached;return result;}else if(StreamInfo.is(result)){_this133._isDetached=!!result.detached;return{reader:new node_1.StreamMessageReader(result.reader),writer:new node_1.StreamMessageWriter(result.writer)};}else{var cp2;if(ChildProcessInfo.is(result)){cp2=result.process;_this133._isDetached=result.detached;}else{cp2=result;_this133._isDetached=false;}cp2.stderr.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});return{reader:new node_1.StreamMessageReader(cp2.stdout),writer:new node_1.StreamMessageWriter(cp2.stdin)};}});}var json;var runDebug=server;if(runDebug.run||runDebug.debug){if(this._forceDebug||startedInDebugMode()){json=runDebug.debug;this._isInDebugMode=true;}else{json=runDebug.run;this._isInDebugMode=false;}}else{json=server;}return this._getServerWorkingDir(json.options).then(function(serverWorkingDir){if(NodeModule.is(json)&&json.module){var node=json;var transport=node.transport||TransportKind2.stdio;if(node.runtime){var _node$options;var args=[];var options=(_node$options=node.options)!==null&&_node$options!==void 0?_node$options:Object.create(null);if(options.execArgv){options.execArgv.forEach(function(element){return args.push(element);});}args.push(node.module);if(node.args){node.args.forEach(function(element){return args.push(element);});}var execOptions=Object.create(null);execOptions.cwd=serverWorkingDir;execOptions.env=getEnvironment(options.env,false);var runtime=_this133._getRuntimePath(node.runtime,serverWorkingDir);var pipeName=void 0;if(transport===TransportKind2.ipc){execOptions.stdio=[null,null,null,"ipc"];args.push("--node-ipc");}else if(transport===TransportKind2.stdio){args.push("--stdio");}else if(transport===TransportKind2.pipe){pipeName=(0,node_1.generateRandomPipeName)();args.push("--pipe=".concat(pipeName));}else if(Transport.isSocket(transport)){args.push("--socket=".concat(transport.port));}args.push("--clientProcessId=".concat(process.pid.toString()));if(transport===TransportKind2.ipc||transport===TransportKind2.stdio){var serverProcess=cp.spawn(runtime,args,execOptions);if(!serverProcess||!serverProcess.pid){return Promise.reject("Launching server using runtime ".concat(runtime," failed."));}_this133._serverProcess=serverProcess;serverProcess.stderr.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});if(transport===TransportKind2.ipc){serverProcess.stdout.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});return Promise.resolve({reader:new node_1.IPCMessageReader(serverProcess),writer:new node_1.IPCMessageWriter(serverProcess)});}else{return Promise.resolve({reader:new node_1.StreamMessageReader(serverProcess.stdout),writer:new node_1.StreamMessageWriter(serverProcess.stdin)});}}else if(transport===TransportKind2.pipe){return(0,node_1.createClientPipeTransport)(pipeName).then(function(transport2){var process2=cp.spawn(runtime,args,execOptions);if(!process2||!process2.pid){return Promise.reject("Launching server using runtime ".concat(runtime," failed."));}_this133._serverProcess=process2;process2.stderr.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});process2.stdout.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});return transport2.onConnected().then(function(protocol){return{reader:protocol[0],writer:protocol[1]};});});}else if(Transport.isSocket(transport)){return(0,node_1.createClientSocketTransport)(transport.port).then(function(transport2){var process2=cp.spawn(runtime,args,execOptions);if(!process2||!process2.pid){return Promise.reject("Launching server using runtime ".concat(runtime," failed."));}_this133._serverProcess=process2;process2.stderr.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});process2.stdout.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});return transport2.onConnected().then(function(protocol){return{reader:protocol[0],writer:protocol[1]};});});}}else{var _pipeName=void 0;return new Promise(function(resolve,reject){var _ref27,_node$options2;var args=(_ref27=node.args&&node.args.slice())!==null&&_ref27!==void 0?_ref27:[];if(transport===TransportKind2.ipc){args.push("--node-ipc");}else if(transport===TransportKind2.stdio){args.push("--stdio");}else if(transport===TransportKind2.pipe){_pipeName=(0,node_1.generateRandomPipeName)();args.push("--pipe=".concat(_pipeName));}else if(Transport.isSocket(transport)){args.push("--socket=".concat(transport.port));}args.push("--clientProcessId=".concat(process.pid.toString()));var options=(_node$options2=node.options)!==null&&_node$options2!==void 0?_node$options2:Object.create(null);options.env=getEnvironment(options.env,true);options.execArgv=options.execArgv||[];options.cwd=serverWorkingDir;options.silent=true;if(transport===TransportKind2.ipc||transport===TransportKind2.stdio){var sp=cp.fork(node.module,args||[],options);assertStdio(sp);_this133._serverProcess=sp;sp.stderr.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});if(transport===TransportKind2.ipc){sp.stdout.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});resolve({reader:new node_1.IPCMessageReader(_this133._serverProcess),writer:new node_1.IPCMessageWriter(_this133._serverProcess)});}else{resolve({reader:new node_1.StreamMessageReader(sp.stdout),writer:new node_1.StreamMessageWriter(sp.stdin)});}}else if(transport===TransportKind2.pipe){(0,node_1.createClientPipeTransport)(_pipeName).then(function(transport2){var sp=cp.fork(node.module,args||[],options);assertStdio(sp);_this133._serverProcess=sp;sp.stderr.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});sp.stdout.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});transport2.onConnected().then(function(protocol){resolve({reader:protocol[0],writer:protocol[1]});},reject);},reject);}else if(Transport.isSocket(transport)){(0,node_1.createClientSocketTransport)(transport.port).then(function(transport2){var sp=cp.fork(node.module,args||[],options);assertStdio(sp);_this133._serverProcess=sp;sp.stderr.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});sp.stdout.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});transport2.onConnected().then(function(protocol){resolve({reader:protocol[0],writer:protocol[1]});},reject);},reject);}});}}else if(Executable.is(json)&&json.command){var command=json;var _args35=json.args!==void 0?json.args.slice(0):[];var _pipeName2=void 0;var _transport=json.transport;if(_transport===TransportKind2.stdio){_args35.push("--stdio");}else if(_transport===TransportKind2.pipe){_pipeName2=(0,node_1.generateRandomPipeName)();_args35.push("--pipe=".concat(_pipeName2));}else if(Transport.isSocket(_transport)){_args35.push("--socket=".concat(_transport.port));}else if(_transport===TransportKind2.ipc){throw new Error("Transport kind ipc is not support for command executable");}var _options2=Object.assign({},command.options);_options2.cwd=_options2.cwd||serverWorkingDir;if(_transport===void 0||_transport===TransportKind2.stdio){var _serverProcess=cp.spawn(command.command,_args35,_options2);if(!_serverProcess||!_serverProcess.pid){return Promise.reject("Launching server using command ".concat(command.command," failed."));}_serverProcess.stderr.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});_this133._serverProcess=_serverProcess;_this133._isDetached=!!_options2.detached;return Promise.resolve({reader:new node_1.StreamMessageReader(_serverProcess.stdout),writer:new node_1.StreamMessageWriter(_serverProcess.stdin)});}else if(_transport===TransportKind2.pipe){return(0,node_1.createClientPipeTransport)(_pipeName2).then(function(transport2){var serverProcess=cp.spawn(command.command,_args35,_options2);if(!serverProcess||!serverProcess.pid){throw new Error("Launching server using command ".concat(command.command," failed."));}_this133._serverProcess=serverProcess;_this133._isDetached=!!_options2.detached;serverProcess.stderr.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});serverProcess.stdout.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});return transport2.onConnected().then(function(protocol){return{reader:protocol[0],writer:protocol[1]};});});}else if(Transport.isSocket(_transport)){return(0,node_1.createClientSocketTransport)(_transport.port).then(function(transport2){var serverProcess=cp.spawn(command.command,_args35,_options2);if(!serverProcess||!serverProcess.pid){throw new Error("Launching server using command ".concat(command.command," failed."));}_this133._serverProcess=serverProcess;_this133._isDetached=!!_options2.detached;serverProcess.stderr.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});serverProcess.stdout.on("data",function(data){return _this133.outputChannel.append(Is.string(data)?data:data.toString(encoding));});return transport2.onConnected().then(function(protocol){return{reader:protocol[0],writer:protocol[1]};});});}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(server,null,4)));});}},{key:"_getRuntimePath",value:function _getRuntimePath(runtime,serverWorkingDirectory){if(path.isAbsolute(runtime)){return runtime;}var mainRootPath=this._mainGetRootPath();if(mainRootPath!==void 0){var result=path.join(mainRootPath,runtime);if(fs.existsSync(result)){return result;}}if(serverWorkingDirectory!==void 0){var _result4=path.join(serverWorkingDirectory,runtime);if(fs.existsSync(_result4)){return _result4;}}return runtime;}},{key:"_mainGetRootPath",value:function _mainGetRootPath(){var folders=vscode_1.workspace.workspaceFolders;if(!folders||folders.length===0){return void 0;}var folder=folders[0];if(folder.uri.scheme==="file"){return folder.uri.fsPath;}return void 0;}},{key:"_getServerWorkingDir",value:function _getServerWorkingDir(options){var cwd=options&&options.cwd;if(!cwd){cwd=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath();}if(cwd){return new Promise(function(s){fs.lstat(cwd,function(err,stats){s(!err&&stats.isDirectory()?cwd:void 0);});});}return Promise.resolve(void 0);}},{key:"getLocale",value:function getLocale(){var envValue=process.env["VSCODE_NLS_CONFIG"];if(envValue===void 0){return"en";}var config=void 0;try{config=JSON.parse(envValue);}catch(err){}if(config===void 0||typeof config.locale!=="string"){return"en";}return config.locale;}}]);return LanguageClient2;}(commonClient_1.CommonLanguageClient);exports.LanguageClient=LanguageClient2;var SettingMonitor=/*#__PURE__*/function(){function SettingMonitor(_client,_setting){_classCallCheck(this,SettingMonitor);this._client=_client;this._setting=_setting;this._listeners=[];}_createClass(SettingMonitor,[{key:"start",value:function start(){var _this134=this;vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners);this.onDidChangeConfiguration();return new vscode_1.Disposable(function(){if(_this134._client.needsStop()){void _this134._client.stop();}});}},{key:"onDidChangeConfiguration",value:function onDidChangeConfiguration(){var index=this._setting.indexOf(".");var primary=index>=0?this._setting.substr(0,index):this._setting;var rest=index>=0?this._setting.substr(index+1):void 0;var enabled=rest?vscode_1.workspace.getConfiguration(primary).get(rest,false):vscode_1.workspace.getConfiguration(primary);if(enabled&&this._client.needsStart()){this._client.start();}else if(!enabled&&this._client.needsStop()){void this._client.stop();}}}]);return SettingMonitor;}();exports.SettingMonitor=SettingMonitor;}});// client/node_modules/vscode-languageclient/node.js
var require_node3=__commonJS({"client/node_modules/vscode-languageclient/node.js":function clientNode_modulesVscodeLanguageclientNodeJs(exports,module2){"use strict";module2.exports=require_main4();}});// client/node_modules/@microsoft/applicationinsights-shims/dist/umd/applicationinsights-shims.js
var require_applicationinsights_shims=__commonJS({"client/node_modules/@microsoft/applicationinsights-shims/dist/umd/applicationinsights-shims.js":function clientNode_modulesMicrosoftApplicationinsightsShimsDistUmdApplicationinsightsShimsJs(exports,module2){(function(global2,factory){_typeof(exports)==="object"&&typeof module2!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global2=typeof globalThis!=="undefined"?globalThis:global2||self,factory((global2.Microsoft=global2.Microsoft||{},global2.Microsoft.ApplicationInsights=global2.Microsoft.ApplicationInsights||{},global2.Microsoft.ApplicationInsights.Shims={})));})(exports,function(exports2){"use strict";var strShimFunction="function";var strShimObject="object";var strShimUndefined="undefined";var strShimPrototype="prototype";var strShimHasOwnProperty="hasOwnProperty";var strDefault="default";var ObjClass=Object;var ObjProto=ObjClass[strShimPrototype];var ObjAssign=ObjClass["assign"];var ObjCreate=ObjClass["create"];var ObjDefineProperty=ObjClass["defineProperty"];var ObjHasOwnProperty=ObjProto[strShimHasOwnProperty];var _cachedGlobal=null;function getGlobal(useCached){if(useCached===void 0){useCached=true;}if(!_cachedGlobal||!useCached){if((typeof globalThis==="undefined"?"undefined":_typeof(globalThis))!==strShimUndefined&&globalThis){_cachedGlobal=globalThis;}if((typeof self==="undefined"?"undefined":_typeof(self))!==strShimUndefined&&self){_cachedGlobal=self;}if((typeof window==="undefined"?"undefined":_typeof(window))!==strShimUndefined&&window){_cachedGlobal=window;}if((typeof global==="undefined"?"undefined":_typeof(global))!==strShimUndefined&&global){_cachedGlobal=global;}}return _cachedGlobal;}function throwTypeError(message){throw new TypeError(message);}function objCreateFn(obj){var func=ObjCreate;if(func){return func(obj);}if(obj==null){return{};}var type=_typeof(obj);if(type!==strShimObject&&type!==strShimFunction){throwTypeError("Object prototype may only be an Object:"+obj);}function tmpFunc(){}tmpFunc[strShimPrototype]=obj;return new tmpFunc();}var SymbolObj=(getGlobal()||{})["Symbol"];var ReflectObj=(getGlobal()||{})["Reflect"];var __hasReflect=!!ReflectObj;var strDecorate="decorate";var strMetadata="metadata";var strGetOwnPropertySymbols="getOwnPropertySymbols";var strIterator="iterator";var __objAssignFnImpl=function __objAssignFnImpl(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(ObjProto[strShimHasOwnProperty].call(s,p)){t[p]=s[p];}}}return t;};var __assignFn=ObjAssign||__objAssignFnImpl;var _extendStaticsFn=function extendStaticsFn(d,b){_extendStaticsFn=ObjClass["setPrototypeOf"]||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2;}||function(d2,b2){for(var p in b2){if(b2[strShimHasOwnProperty](p)){d2[p]=b2[p];}}};return _extendStaticsFn(d,b);};function __extendsFn(d,b){if(_typeof(b)!==strShimFunction&&b!==null){throwTypeError("Class extends value "+String(b)+" is not a constructor or null");}_extendStaticsFn(d,b);function __(){this.constructor=d;}d[strShimPrototype]=b===null?objCreateFn(b):(__[strShimPrototype]=b[strShimPrototype],new __());}function __restFn(s,e){var t={};for(var k in s){if(ObjHasOwnProperty.call(s,k)&&e.indexOf(k)<0){t[k]=s[k];}}if(s!=null&&_typeof(ObjClass[strGetOwnPropertySymbols])===strShimFunction){for(var i=0,p=ObjClass[strGetOwnPropertySymbols](s);i<p.length;i++){if(e.indexOf(p[i])<0&&ObjProto["propertyIsEnumerable"].call(s,p[i])){t[p[i]]=s[p[i]];}}}return t;}function __decorateFn(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=ObjClass["getOwnPropertyDescriptor"](target,key):desc,d;if(__hasReflect&&_typeof(ReflectObj[strDecorate])===strShimFunction){r=ReflectObj[strDecorate](decorators,target,key,desc);}else{for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i]){r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}}}return c>3&&r&&ObjDefineProperty(target,key,r),r;}function __paramFn(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};}function __metadataFn(metadataKey,metadataValue){if(__hasReflect&&ReflectObj[strMetadata]===strShimFunction){return ReflectObj[strMetadata](metadataKey,metadataValue);}}function __exportStarFn(m,o){for(var p in m){if(p!==strDefault&&!ObjHasOwnProperty.call(o,p)){__createBindingFn(o,m,p);}}}function __createBindingFn(o,m,k,k2){if(k2===void 0){k2=k;}if(ObjCreate){ObjDefineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}else{o[k2]=m[k];}}function __valuesFn(o){var s=_typeof(SymbolObj)===strShimFunction&&SymbolObj[strIterator],m=s&&o[s],i=0;if(m){return m.call(o);}if(o&&typeof o.length==="number"){return{next:function next(){if(o&&i>=o.length){o=void 0;}return{value:o&&o[i++],done:!o};}};}throwTypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.");}function __readFn(o,n){var m=_typeof(SymbolObj)===strShimFunction&&o[SymbolObj[strIterator]];if(!m){return o;}var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-->0)&&!(r=i.next()).done){ar.push(r.value);}}catch(error){e={error:error};}finally{try{if(r&&!r.done&&(m=i["return"])){m.call(i);}}finally{if(e){throw e.error;}}}return ar;}function __spreadArraysFn(){var theArgs=arguments;for(var s=0,i=0,il=theArgs.length;i<il;i++){s+=theArgs[i].length;}for(var r=Array(s),k=0,i=0;i<il;i++){for(var a=theArgs[i],j=0,jl=a.length;j<jl;j++,k++){r[k]=a[j];}}return r;}function __spreadArrayFn(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++){to[j]=from[i];}return to;}function __makeTemplateObjectFn(cooked,raw){if(ObjDefineProperty){ObjDefineProperty(cooked,"raw",{value:raw});}else{cooked.raw=raw;}return cooked;}function __importStarFn(mod){if(mod&&mod.__esModule){return mod;}var result={};if(mod!=null){for(var k in mod){if(k!==strDefault&&Object.prototype.hasOwnProperty.call(mod,k)){__createBindingFn(result,mod,k);}}}if(ObjCreate){ObjDefineProperty(result,strDefault,{enumerable:true,value:mod});}else{result[strDefault]=mod;}return result;}function __importDefaultFn(mod){return mod&&mod.__esModule?mod:{strDefault:mod};}function __exposeGlobalTsLib(){var globalObj=getGlobal()||{};(function(root,assignFn,extendsFn,createBindingFn){if(!root.__assign){root.__assign=ObjAssign||assignFn;}if(!root.__extends){root.__extends=extendsFn;}if(!root.__createBinding){root.__createBinding=createBindingFn;}})(globalObj,__assignFn,__extendsFn,__createBindingFn);if(!__assign){__assign=globalObj.__assign;}if(!__extends){__extends=globalObj.__extends;}if(!__createBinding){__createBinding=globalObj.__createBinding;}}exports2.ObjAssign=ObjAssign;exports2.ObjClass=ObjClass;exports2.ObjCreate=ObjCreate;exports2.ObjDefineProperty=ObjDefineProperty;exports2.ObjHasOwnProperty=ObjHasOwnProperty;exports2.ObjProto=ObjProto;exports2.__assignFn=__assignFn;exports2.__createBindingFn=__createBindingFn;exports2.__decorateFn=__decorateFn;exports2.__exportStarFn=__exportStarFn;exports2.__exposeGlobalTsLib=__exposeGlobalTsLib;exports2.__extendsFn=__extendsFn;exports2.__importDefaultFn=__importDefaultFn;exports2.__importStarFn=__importStarFn;exports2.__makeTemplateObjectFn=__makeTemplateObjectFn;exports2.__metadataFn=__metadataFn;exports2.__paramFn=__paramFn;exports2.__readFn=__readFn;exports2.__restFn=__restFn;exports2.__spreadArrayFn=__spreadArrayFn;exports2.__spreadArraysFn=__spreadArraysFn;exports2.__valuesFn=__valuesFn;exports2.getGlobal=getGlobal;exports2.objCreateFn=objCreateFn;exports2.strDefault=strDefault;exports2.strShimFunction=strShimFunction;exports2.strShimHasOwnProperty=strShimHasOwnProperty;exports2.strShimObject=strShimObject;exports2.strShimPrototype=strShimPrototype;exports2.strShimUndefined=strShimUndefined;exports2.throwTypeError=throwTypeError;(function(obj,prop,descriptor){var func=Object["defineProperty"];if(func){try{return func(obj,prop,descriptor);}catch(e){}}if(descriptor&&_typeof(descriptor.value)!==void 0){obj[prop]=descriptor.value;}return obj;})(exports2,"__esModule",{value:true});});}});// client/node_modules/@microsoft/applicationinsights-core-js/dist/applicationinsights-core-js.js
var require_applicationinsights_core_js=__commonJS({"client/node_modules/@microsoft/applicationinsights-core-js/dist/applicationinsights-core-js.js":function clientNode_modulesMicrosoftApplicationinsightsCoreJsDistApplicationinsightsCoreJsJs(exports,module2){(function(global2,factory){_typeof(exports)==="object"&&typeof module2!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global2=typeof globalThis!=="undefined"?globalThis:global2||self,factory((global2.Microsoft=global2.Microsoft||{},global2.Microsoft.ApplicationInsights=global2.Microsoft.ApplicationInsights||{})));})(exports,function(exports2){"use strict";var MinChannelPriorty=100;var strShimFunction="function";var strShimObject="object";var strShimUndefined="undefined";var strShimPrototype="prototype";var strShimHasOwnProperty="hasOwnProperty";var ObjClass=Object;var ObjProto=ObjClass[strShimPrototype];var ObjAssign=ObjClass["assign"];var ObjCreate=ObjClass["create"];var ObjDefineProperty=ObjClass["defineProperty"];var ObjHasOwnProperty=ObjProto[strShimHasOwnProperty];var _cachedGlobal=null;function getGlobal(useCached){if(useCached===void 0){useCached=true;}if(!_cachedGlobal||!useCached){if((typeof globalThis==="undefined"?"undefined":_typeof(globalThis))!==strShimUndefined&&globalThis){_cachedGlobal=globalThis;}if((typeof self==="undefined"?"undefined":_typeof(self))!==strShimUndefined&&self){_cachedGlobal=self;}if((typeof window==="undefined"?"undefined":_typeof(window))!==strShimUndefined&&window){_cachedGlobal=window;}if((typeof global==="undefined"?"undefined":_typeof(global))!==strShimUndefined&&global){_cachedGlobal=global;}}return _cachedGlobal;}function throwTypeError(message){throw new TypeError(message);}function objCreateFn(obj){var func=ObjCreate;if(func){return func(obj);}if(obj==null){return{};}var type=_typeof(obj);if(type!==strShimObject&&type!==strShimFunction){throwTypeError("Object prototype may only be an Object:"+obj);}function tmpFunc(){}tmpFunc[strShimPrototype]=obj;return new tmpFunc();}(getGlobal()||{})["Symbol"];(getGlobal()||{})["Reflect"];var _extendStaticsFn2=function extendStaticsFn(d,b){_extendStaticsFn2=ObjClass["setPrototypeOf"]||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2;}||function(d2,b2){for(var p in b2){if(b2[strShimHasOwnProperty](p)){d2[p]=b2[p];}}};return _extendStaticsFn2(d,b);};function __extendsFn(d,b){if(_typeof(b)!==strShimFunction&&b!==null){throwTypeError("Class extends value "+String(b)+" is not a constructor or null");}_extendStaticsFn2(d,b);function __(){this.constructor=d;}d[strShimPrototype]=b===null?objCreateFn(b):(__[strShimPrototype]=b[strShimPrototype],new __());}function __spreadArrayFn(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++){to[j]=from[i];}return to;}var strEmpty="";var strProcessTelemetry="processTelemetry";var strPriority="priority";var strSetNextPlugin="setNextPlugin";var strIsInitialized="isInitialized";var strTeardown="teardown";var strCore="core";var strUpdate="update";var strDisabled="disabled";var strDoTeardown="_doTeardown";var strProcessNext="processNext";var strResume="resume";var strPause="pause";var strNotificationListener="NotificationListener";var strAddNotificationListener="add"+strNotificationListener;var strRemoveNotificationListener="remove"+strNotificationListener;var strEventsSent="eventsSent";var strEventsDiscarded="eventsDiscarded";var strEventsSendRequest="eventsSendRequest";var strPerfEvent="perfEvent";var strToISOString="toISOString";var cStrEndsWith="endsWith";var cStrStartsWith="startsWith";var strIndexOf="indexOf";var strMap="map";var strReduce="reduce";var cStrTrim="trim";var strToString="toString";var str__Proto$1="__proto__";var strConstructor="constructor";var _objDefineProperty$1=ObjDefineProperty;var _objFreeze=ObjClass.freeze;var _objSeal=ObjClass.seal;var _objKeys=ObjClass.keys;var StringProto=String[strShimPrototype];var _strTrim=StringProto[cStrTrim];var _strEndsWith=StringProto[cStrEndsWith];var _strStartsWith=StringProto[cStrStartsWith];var DateProto=Date[strShimPrototype];var _dataToISOString=DateProto[strToISOString];var _isArray=Array.isArray;var _objToString=ObjProto[strToString];var _fnToString=ObjHasOwnProperty[strToString];var _objFunctionString=_fnToString.call(ObjClass);var rCamelCase=/-([a-z])/g;var rNormalizeInvalid=/([^\w\d_$])/g;var rLeadingNumeric=/^(\d+[\w\d_$])/;var _objGetPrototypeOf$1=Object["getPrototypeOf"];function _getObjProto$1(target){if(target){if(_objGetPrototypeOf$1){return _objGetPrototypeOf$1(target);}var newProto=target[str__Proto$1]||target[strShimPrototype]||target[strConstructor];if(newProto){return newProto;}}return null;}function objToString(obj){return _objToString.call(obj);}function isTypeof(value,theType){return _typeof(value)===theType;}function isUndefined(value){return value===void 0||_typeof(value)===strShimUndefined;}function isNotUndefined(value){return!isUndefined(value);}function isNullOrUndefined(value){return value===null||isUndefined(value);}function isNotNullOrUndefined(value){return!isNullOrUndefined(value);}function hasOwnProperty(obj,prop){return!!(obj&&ObjHasOwnProperty.call(obj,prop));}function isObject(value){return!!(value&&_typeof(value)===strShimObject);}function isFunction(value){return!!(value&&_typeof(value)===strShimFunction);}function normalizeJsName(name){var value=name;if(value&&isString(value)){value=value.replace(rCamelCase,function(_all,letter){return letter.toUpperCase();});value=value.replace(rNormalizeInvalid,"_");value=value.replace(rLeadingNumeric,function(_all,match){return"_"+match;});}return value;}function objForEachKey(target,callbackfn){if(target){for(var prop in target){if(ObjHasOwnProperty.call(target,prop)){callbackfn.call(target,prop,target[prop]);}}}}function strEndsWith(value,search){var result=false;if(value&&search&&!(result=value===search)){result=_strEndsWith?value[cStrEndsWith](search):_strEndsWithPoly(value,search);}return result;}function _strEndsWithPoly(value,search){var result=false;var searchLen=search?search.length:0;var valLen=value?value.length:0;if(searchLen&&valLen&&valLen>=searchLen&&!(result=value===search)){var pos=valLen-1;for(var lp=searchLen-1;lp>=0;lp--){if(value[pos]!=search[lp]){return false;}pos--;}result=true;}return result;}function strStartsWith(value,checkValue){var result=false;if(value&&checkValue&&!(result=value===checkValue)){result=_strStartsWith?value[cStrStartsWith](checkValue):_strStartsWithPoly(value,checkValue);}return result;}function _strStartsWithPoly(value,checkValue){var result=false;var chkLen=checkValue?checkValue.length:0;if(value&&chkLen&&value.length>=chkLen&&!(result=value===checkValue)){for(var lp=0;lp<chkLen;lp++){if(value[lp]!==checkValue[lp]){return false;}}result=true;}return result;}function strContains(value,search){if(value&&search){return value.indexOf(search)!==-1;}return false;}function isDate(obj){return!!(obj&&_objToString.call(obj)==="[object Date]");}var isArray=_isArray||_isArrayPoly;function _isArrayPoly(obj){return!!(obj&&_objToString.call(obj)==="[object Array]");}function isError(obj){return!!(obj&&_objToString.call(obj)==="[object Error]");}function isString(value){return typeof value==="string";}function isNumber(value){return typeof value==="number";}function isBoolean(value){return typeof value==="boolean";}function isSymbol(value){return _typeof(value)==="symbol";}function isPlainObject(value){var result=false;if(value&&_typeof(value)==="object"){var proto=_objGetPrototypeOf$1?_objGetPrototypeOf$1(value):_getObjProto$1(value);if(!proto){result=true;}else{if(proto[strConstructor]&&ObjHasOwnProperty.call(proto,strConstructor)){proto=proto[strConstructor];}result=_typeof(proto)===strShimFunction&&_fnToString.call(proto)===_objFunctionString;}}return result;}function toISOString(date){if(date){return _dataToISOString?date[strToISOString]():_toISOStringPoly(date);}}function _toISOStringPoly(date){if(date&&date.getUTCFullYear){var pad=function pad(num){var r=String(num);if(r.length===1){r="0"+r;}return r;};return date.getUTCFullYear()+"-"+pad(date.getUTCMonth()+1)+"-"+pad(date.getUTCDate())+"T"+pad(date.getUTCHours())+":"+pad(date.getUTCMinutes())+":"+pad(date.getUTCSeconds())+"."+String((date.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z";}}function arrForEach(arr,callbackfn,thisArg){var len=arr.length;try{for(var idx=0;idx<len;idx++){if(idx in arr){if(callbackfn.call(thisArg||arr,arr[idx],idx,arr)===-1){break;}}}}catch(e){}}function arrIndexOf(arr,searchElement,fromIndex){if(arr){if(arr[strIndexOf]){return arr[strIndexOf](searchElement,fromIndex);}var len=arr.length;var from=fromIndex||0;try{for(var lp=Math.max(from>=0?from:len-Math.abs(from),0);lp<len;lp++){if(lp in arr&&arr[lp]===searchElement){return lp;}}}catch(e){}}return-1;}function arrMap(arr,callbackfn,thisArg){var results;if(arr){if(arr[strMap]){return arr[strMap](callbackfn,thisArg);}var len=arr.length;var _this=thisArg||arr;results=new Array(len);try{for(var lp=0;lp<len;lp++){if(lp in arr){results[lp]=callbackfn.call(_this,arr[lp],arr);}}}catch(e){}}return results;}function arrReduce(arr,callbackfn,initialValue){var value;if(arr){if(arr[strReduce]){return arr[strReduce](callbackfn,initialValue);}var len=arr.length;var lp=0;if(arguments.length>=3){value=arguments[2];}else{while(lp<len&&!(lp in arr)){lp++;}value=arr[lp++];}while(lp<len){if(lp in arr){value=callbackfn(value,arr[lp],lp,arr);}lp++;}}return value;}function strTrim(str){if(str){str=_strTrim&&str[cStrTrim]?str[cStrTrim]():str.replace?str.replace(/^\s+|\s+$/g,""):str;}return str;}var _objKeysHasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString");var _objKeysDontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function objKeys(obj){var objType=_typeof(obj);if(objType!==strShimFunction&&(objType!==strShimObject||obj===null)){throwTypeError("objKeys called on non-object");}if(!_objKeysHasDontEnumBug&&_objKeys){return _objKeys(obj);}var result=[];for(var prop in obj){if(obj&&ObjHasOwnProperty.call(obj,prop)){result.push(prop);}}if(_objKeysHasDontEnumBug){var dontEnumsLength=_objKeysDontEnums.length;for(var lp=0;lp<dontEnumsLength;lp++){if(obj&&ObjHasOwnProperty.call(obj,_objKeysDontEnums[lp])){result.push(_objKeysDontEnums[lp]);}}}return result;}function objDefineAccessors(target,prop,getProp,setProp){if(_objDefineProperty$1){try{var descriptor={enumerable:true,configurable:true};if(getProp){descriptor.get=getProp;}if(setProp){descriptor.set=setProp;}_objDefineProperty$1(target,prop,descriptor);return true;}catch(e){}}return false;}function _doNothing(value){return value;}function deepFreeze(obj){if(_objFreeze){objForEachKey(obj,function(name,value){if(isArray(value)||isObject(value)){_objFreeze(value);}});}return objFreeze(obj);}var objFreeze=_objFreeze||_doNothing;var objSeal=_objSeal||_doNothing;function dateNow(){var dt=Date;return dt.now?dt.now():new dt().getTime();}function getExceptionName(object){if(isError(object)){return object.name;}return strEmpty;}function setValue(target,field,value,valChk,srcChk){var theValue=value;if(target){theValue=target[field];if(theValue!==value&&(!srcChk||srcChk(theValue))&&(!valChk||valChk(value))){theValue=value;target[field]=theValue;}}return theValue;}function getSetValue(target,field,defValue){var theValue;if(target){theValue=target[field];if(!theValue&&isNullOrUndefined(theValue)){theValue=!isUndefined(defValue)?defValue:{};target[field]=theValue;}}else{theValue=!isUndefined(defValue)?defValue:{};}return theValue;}function isNotTruthy(value){return!value;}function isTruthy(value){return!!value;}function throwError(message){throw new Error(message);}function _createProxyFunction(source,funcName){var srcFunc=null;var src=null;if(isFunction(source)){srcFunc=source;}else{src=source;}return function(){var originalArguments=arguments;if(srcFunc){src=srcFunc();}if(src){return src[funcName].apply(src,originalArguments);}};}function proxyAssign(target,source,chkSet){if(target&&source&&isObject(target)&&isObject(source)){var _loop_1=function _loop_1(field2){if(isString(field2)){var value=source[field2];if(isFunction(value)){if(!chkSet||chkSet(field2,true,source,target)){target[field2]=_createProxyFunction(source,field2);}}else if(!chkSet||chkSet(field2,false,source,target)){if(hasOwnProperty(target,field2)){delete target[field2];}if(!objDefineAccessors(target,field2,function(){return source[field2];},function(theValue){source[field2]=theValue;})){target[field2]=value;}}}};for(var field in source){_loop_1(field);}}return target;}function proxyFunctionAs(target,name,source,theFunc,overwriteTarget){if(target&&name&&source){if(overwriteTarget!==false||isUndefined(target[name])){target[name]=_createProxyFunction(source,theFunc);}}}function proxyFunctions(target,source,functionsToProxy,overwriteTarget){if(target&&source&&isObject(target)&&isArray(functionsToProxy)){arrForEach(functionsToProxy,function(theFuncName){if(isString(theFuncName)){proxyFunctionAs(target,theFuncName,source,theFuncName,overwriteTarget);}});}return target;}function createClassFromInterface(defaults){return function(){function class_1(){var _this_1=this;if(defaults){objForEachKey(defaults,function(field,value){_this_1[field]=value;});}}return class_1;}();}function optimizeObject(theObject){if(theObject&&ObjAssign){theObject=ObjClass(ObjAssign({},theObject));}return theObject;}function objExtend(obj1,obj2,obj3,obj4,obj5,obj6){var theArgs=arguments;var extended=theArgs[0]||{};var argLen=theArgs.length;var deep=false;var idx=1;if(argLen>0&&isBoolean(extended)){deep=extended;extended=theArgs[idx]||{};idx++;}if(!isObject(extended)){extended={};}for(;idx<argLen;idx++){var arg=theArgs[idx];var isArgArray=isArray(arg);var isArgObj=isObject(arg);for(var prop in arg){var propOk=isArgArray&&prop in arg||isArgObj&&ObjHasOwnProperty.call(arg,prop);if(!propOk){continue;}var newValue=arg[prop];var isNewArray=void 0;if(deep&&newValue&&((isNewArray=isArray(newValue))||isPlainObject(newValue))){var clone=extended[prop];if(isNewArray){if(!isArray(clone)){clone=[];}}else if(!isPlainObject(clone)){clone={};}newValue=objExtend(deep,clone,newValue);}if(newValue!==void 0){extended[prop]=newValue;}}}return extended;}function createEnumStyle(values){var enumClass={};objForEachKey(values,function(field,value){enumClass[field]=value;enumClass[value]=field;});return deepFreeze(enumClass);}function createEnumMap(values){var mapClass={};objForEachKey(values,function(field,value){mapClass[field]=field;mapClass[value]=field;});return deepFreeze(mapClass);}function createValueMap(values){var mapClass={};objForEachKey(values,function(field,value){mapClass[field]=value[1];mapClass[value[0]]=value[1];});return deepFreeze(mapClass);}var EventsDiscardedReason=createEnumStyle({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5});var Constructor="constructor";var Prototype="prototype";var strFunction="function";var DynInstFuncTable="_dynInstFuncs";var DynProxyTag="_isDynProxy";var DynClassName="_dynClass";var DynClassNamePrefix="_dynCls$";var DynInstChkTag="_dynInstChk";var DynAllowInstChkTag=DynInstChkTag;var DynProtoDefaultOptions="_dfOpts";var UnknownValue="_unknown_";var str__Proto="__proto__";var DynProtoBaseProto="_dyn"+str__Proto;var DynProtoCurrent="_dynInstProto";var strUseBaseInst="useBaseInst";var strSetInstFuncs="setInstFuncs";var Obj=Object;var _objGetPrototypeOf=Obj["getPrototypeOf"];var _objGetOwnProps=Obj["getOwnPropertyNames"];var _dynamicNames=0;function _hasOwnProperty(obj,prop){return obj&&Obj[Prototype].hasOwnProperty.call(obj,prop);}function _isObjectOrArrayPrototype(target){return target&&(target===Obj[Prototype]||target===Array[Prototype]);}function _isObjectArrayOrFunctionPrototype(target){return _isObjectOrArrayPrototype(target)||target===Function[Prototype];}function _getObjProto(target){var newProto;if(target){if(_objGetPrototypeOf){return _objGetPrototypeOf(target);}var curProto=target[str__Proto]||target[Prototype]||(target[Constructor]?target[Constructor][Prototype]:null);newProto=target[DynProtoBaseProto]||curProto;if(!_hasOwnProperty(target,DynProtoBaseProto)){delete target[DynProtoCurrent];newProto=target[DynProtoBaseProto]=target[DynProtoCurrent]||target[DynProtoBaseProto];target[DynProtoCurrent]=curProto;}}return newProto;}function _forEachProp(target,func){var props=[];if(_objGetOwnProps){props=_objGetOwnProps(target);}else{for(var name_1 in target){if(typeof name_1==="string"&&_hasOwnProperty(target,name_1)){props.push(name_1);}}}if(props&&props.length>0){for(var lp=0;lp<props.length;lp++){func(props[lp]);}}}function _isDynamicCandidate(target,funcName,skipOwn){return funcName!==Constructor&&_typeof(target[funcName])===strFunction&&(skipOwn||_hasOwnProperty(target,funcName));}function _throwTypeError(message){throw new TypeError("DynamicProto: "+message);}function _getInstanceFuncs(thisTarget){var instFuncs={};_forEachProp(thisTarget,function(name){if(!instFuncs[name]&&_isDynamicCandidate(thisTarget,name,false)){instFuncs[name]=thisTarget[name];}});return instFuncs;}function _hasVisited(values,value){for(var lp=values.length-1;lp>=0;lp--){if(values[lp]===value){return true;}}return false;}function _getBaseFuncs(classProto,thisTarget,instFuncs,useBaseInst){function _instFuncProxy(target,funcHost,funcName){var theFunc=funcHost[funcName];if(theFunc[DynProxyTag]&&useBaseInst){var instFuncTable=target[DynInstFuncTable]||{};if(instFuncTable[DynAllowInstChkTag]!==false){theFunc=(instFuncTable[funcHost[DynClassName]]||{})[funcName]||theFunc;}}return function(){return theFunc.apply(target,arguments);};}var baseFuncs={};_forEachProp(instFuncs,function(name){baseFuncs[name]=_instFuncProxy(thisTarget,instFuncs,name);});var baseProto=_getObjProto(classProto);var visited=[];while(baseProto&&!_isObjectArrayOrFunctionPrototype(baseProto)&&!_hasVisited(visited,baseProto)){_forEachProp(baseProto,function(name){if(!baseFuncs[name]&&_isDynamicCandidate(baseProto,name,!_objGetPrototypeOf)){baseFuncs[name]=_instFuncProxy(thisTarget,baseProto,name);}});visited.push(baseProto);baseProto=_getObjProto(baseProto);}return baseFuncs;}function _getInstFunc(target,funcName,proto,currentDynProtoProxy){var instFunc=null;if(target&&_hasOwnProperty(proto,DynClassName)){var instFuncTable=target[DynInstFuncTable]||{};instFunc=(instFuncTable[proto[DynClassName]]||{})[funcName];if(!instFunc){_throwTypeError("Missing ["+funcName+"] "+strFunction);}if(!instFunc[DynInstChkTag]&&instFuncTable[DynAllowInstChkTag]!==false){var canAddInst=!_hasOwnProperty(target,funcName);var objProto=_getObjProto(target);var visited=[];while(canAddInst&&objProto&&!_isObjectArrayOrFunctionPrototype(objProto)&&!_hasVisited(visited,objProto)){var protoFunc=objProto[funcName];if(protoFunc){canAddInst=protoFunc===currentDynProtoProxy;break;}visited.push(objProto);objProto=_getObjProto(objProto);}try{if(canAddInst){target[funcName]=instFunc;}instFunc[DynInstChkTag]=1;}catch(e){instFuncTable[DynAllowInstChkTag]=false;}}}return instFunc;}function _getProtoFunc(funcName,proto,currentDynProtoProxy){var protoFunc=proto[funcName];if(protoFunc===currentDynProtoProxy){protoFunc=_getObjProto(proto)[funcName];}if(_typeof(protoFunc)!==strFunction){_throwTypeError("["+funcName+"] is not a "+strFunction);}return protoFunc;}function _populatePrototype(proto,className,target,baseInstFuncs,setInstanceFunc){function _createDynamicPrototype(proto2,funcName){var dynProtoProxy=function dynProtoProxy(){var instFunc=_getInstFunc(this,funcName,proto2,dynProtoProxy)||_getProtoFunc(funcName,proto2,dynProtoProxy);return instFunc.apply(this,arguments);};dynProtoProxy[DynProxyTag]=1;return dynProtoProxy;}if(!_isObjectOrArrayPrototype(proto)){var instFuncTable=target[DynInstFuncTable]=target[DynInstFuncTable]||{};var instFuncs_1=instFuncTable[className]=instFuncTable[className]||{};if(instFuncTable[DynAllowInstChkTag]!==false){instFuncTable[DynAllowInstChkTag]=!!setInstanceFunc;}_forEachProp(target,function(name){if(_isDynamicCandidate(target,name,false)&&target[name]!==baseInstFuncs[name]){instFuncs_1[name]=target[name];delete target[name];if(!_hasOwnProperty(proto,name)||proto[name]&&!proto[name][DynProxyTag]){proto[name]=_createDynamicPrototype(proto,name);}}});}}function _checkPrototype(classProto,thisTarget){if(_objGetPrototypeOf){var visited=[];var thisProto=_getObjProto(thisTarget);while(thisProto&&!_isObjectArrayOrFunctionPrototype(thisProto)&&!_hasVisited(visited,thisProto)){if(thisProto===classProto){return true;}visited.push(thisProto);thisProto=_getObjProto(thisProto);}return false;}return true;}function _getObjName(target,unknownValue){if(_hasOwnProperty(target,Prototype)){return target.name||unknownValue||UnknownValue;}return((target||{})[Constructor]||{}).name||unknownValue||UnknownValue;}function dynamicProto(theClass,target,delegateFunc,options){if(!_hasOwnProperty(theClass,Prototype)){_throwTypeError("theClass is an invalid class definition.");}var classProto=theClass[Prototype];if(!_checkPrototype(classProto,target)){_throwTypeError("["+_getObjName(theClass)+"] is not in class hierarchy of ["+_getObjName(target)+"]");}var className=null;if(_hasOwnProperty(classProto,DynClassName)){className=classProto[DynClassName];}else{className=DynClassNamePrefix+_getObjName(theClass,"_")+"$"+_dynamicNames;_dynamicNames++;classProto[DynClassName]=className;}var perfOptions=dynamicProto[DynProtoDefaultOptions];var useBaseInst=!!perfOptions[strUseBaseInst];if(useBaseInst&&options&&options[strUseBaseInst]!==void 0){useBaseInst=!!options[strUseBaseInst];}var instFuncs=_getInstanceFuncs(target);var baseFuncs=_getBaseFuncs(classProto,target,instFuncs,useBaseInst);delegateFunc(target,baseFuncs);var setInstanceFunc=!!_objGetPrototypeOf&&!!perfOptions[strSetInstFuncs];if(setInstanceFunc&&options){setInstanceFunc=!!options[strSetInstFuncs];}_populatePrototype(classProto,className,target,instFuncs,setInstanceFunc!==false);}var perfDefaults={setInstFuncs:true,useBaseInst:true};dynamicProto[DynProtoDefaultOptions]=perfDefaults;var strWindow="window";var strDocument="document";var strDocumentMode="documentMode";var strNavigator="navigator";var strHistory="history";var strLocation="location";var strConsole="console";var strPerformance="performance";var strJSON="JSON";var strCrypto="crypto";var strMsCrypto="msCrypto";var strReactNative="ReactNative";var strMsie="msie";var strTrident="trident/";var strXMLHttpRequest="XMLHttpRequest";var _isTrident=null;var _navUserAgentCheck=null;var _enableMocks=false;var _useXDomainRequest=null;var _beaconsSupported=null;function _hasProperty(theClass,property){var supported=false;if(theClass){try{supported=property in theClass;if(!supported){var proto=theClass[strShimPrototype];if(proto){supported=property in proto;}}}catch(e){}if(!supported){try{var tmp=new theClass();supported=!isUndefined(tmp[property]);}catch(e){}}}return supported;}function setEnableEnvMocks(enabled){_enableMocks=enabled;}function getGlobalInst(name){var gbl=getGlobal();if(gbl&&gbl[name]){return gbl[name];}if(name===strWindow&&hasWindow()){return window;}return null;}function hasWindow(){return Boolean((typeof window==="undefined"?"undefined":_typeof(window))===strShimObject&&window);}function getWindow(){if(hasWindow()){return window;}return getGlobalInst(strWindow);}function hasDocument(){return Boolean((typeof document==="undefined"?"undefined":_typeof(document))===strShimObject&&document);}function getDocument(){if(hasDocument()){return document;}return getGlobalInst(strDocument);}function hasNavigator(){return Boolean((typeof navigator==="undefined"?"undefined":_typeof(navigator))===strShimObject&&navigator);}function getNavigator(){if(hasNavigator()){return navigator;}return getGlobalInst(strNavigator);}function hasHistory(){return Boolean((typeof history==="undefined"?"undefined":_typeof(history))===strShimObject&&history);}function getHistory(){if(hasHistory()){return history;}return getGlobalInst(strHistory);}function getLocation(checkForMock){if(checkForMock&&_enableMocks){var mockLocation=getGlobalInst("__mockLocation");if(mockLocation){return mockLocation;}}if((typeof location==="undefined"?"undefined":_typeof(location))===strShimObject&&location){return location;}return getGlobalInst(strLocation);}function getConsole(){if((typeof console==="undefined"?"undefined":_typeof(console))!==strShimUndefined){return console;}return getGlobalInst(strConsole);}function getPerformance(){return getGlobalInst(strPerformance);}function hasJSON(){return Boolean((typeof JSON==="undefined"?"undefined":_typeof(JSON))===strShimObject&&JSON||getGlobalInst(strJSON)!==null);}function getJSON(){if(hasJSON()){return JSON||getGlobalInst(strJSON);}return null;}function getCrypto(){return getGlobalInst(strCrypto);}function getMsCrypto(){return getGlobalInst(strMsCrypto);}function isReactNative(){var nav=getNavigator();if(nav&&nav.product){return nav.product===strReactNative;}return false;}function isIE(){var nav=getNavigator();if(nav&&(nav.userAgent!==_navUserAgentCheck||_isTrident===null)){_navUserAgentCheck=nav.userAgent;var userAgent=(_navUserAgentCheck||strEmpty).toLowerCase();_isTrident=strContains(userAgent,strMsie)||strContains(userAgent,strTrident);}return _isTrident;}function getIEVersion(userAgentStr){if(userAgentStr===void 0){userAgentStr=null;}if(!userAgentStr){var navigator_1=getNavigator()||{};userAgentStr=navigator_1?(navigator_1.userAgent||strEmpty).toLowerCase():strEmpty;}var ua=(userAgentStr||strEmpty).toLowerCase();if(strContains(ua,strMsie)){var doc=getDocument()||{};return Math.max(parseInt(ua.split(strMsie)[1]),doc[strDocumentMode]||0);}else if(strContains(ua,strTrident)){var tridentVer=parseInt(ua.split(strTrident)[1]);if(tridentVer){return tridentVer+4;}}return null;}function dumpObj(object){var objectTypeDump=Object[strShimPrototype].toString.call(object);var propertyValueDump=strEmpty;if(objectTypeDump==="[object Error]"){propertyValueDump="{ stack: '"+object.stack+"', message: '"+object.message+"', name: '"+object.name+"'";}else if(hasJSON()){propertyValueDump=getJSON().stringify(object);}return objectTypeDump+propertyValueDump;}function isSafari(userAgentStr){if(!userAgentStr||!isString(userAgentStr)){var navigator_2=getNavigator()||{};userAgentStr=navigator_2?(navigator_2.userAgent||strEmpty).toLowerCase():strEmpty;}var ua=(userAgentStr||strEmpty).toLowerCase();return ua.indexOf("safari")>=0;}function isBeaconsSupported(){if(_beaconsSupported===null){_beaconsSupported=hasNavigator()&&Boolean(getNavigator().sendBeacon);}return _beaconsSupported;}function isFetchSupported(withKeepAlive){var isSupported=false;try{isSupported=!!getGlobalInst("fetch");var request=getGlobalInst("Request");if(isSupported&&withKeepAlive&&request){isSupported=_hasProperty(request,"keepalive");}}catch(e){}return isSupported;}function useXDomainRequest(){if(_useXDomainRequest===null){_useXDomainRequest=(typeof XDomainRequest==="undefined"?"undefined":_typeof(XDomainRequest))!==strShimUndefined;if(_useXDomainRequest&&isXhrSupported()){_useXDomainRequest=_useXDomainRequest&&!_hasProperty(getGlobalInst(strXMLHttpRequest),"withCredentials");}}return _useXDomainRequest;}function isXhrSupported(){var isSupported=false;try{var xmlHttpRequest=getGlobalInst(strXMLHttpRequest);isSupported=!!xmlHttpRequest;}catch(e){}return isSupported;}function _getNamedValue(values,name){if(values){for(var i=0;i<values.length;i++){var value=values[i];if(value.name){if(value.name===name){return value;}}}}return{};}function findMetaTag(name){var doc=getDocument();if(doc&&name){return _getNamedValue(doc.querySelectorAll("meta"),name).content;}return null;}function findNamedServerTiming(name){var value;var perf=getPerformance();if(perf){var navPerf=perf.getEntriesByType("navigation")||[];value=_getNamedValue((navPerf.length>0?navPerf[0]:{}).serverTiming,name).description;}return value;}var listenerFuncs=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"];var _aiNamespace=null;var _debugListener;function _listenerProxyFunc(name,config){return function(){var args=arguments;var dbgExt=getDebugExt(config);if(dbgExt){var listener=dbgExt.listener;if(listener&&listener[name]){listener[name].apply(listener,args);}}};}function _getExtensionNamespace(){var target=getGlobalInst("Microsoft");if(target){_aiNamespace=target["ApplicationInsights"];}return _aiNamespace;}function getDebugExt(config){var ns=_aiNamespace;if(!ns&&config.disableDbgExt!==true){ns=_aiNamespace||_getExtensionNamespace();}return ns?ns["ChromeDbgExt"]:null;}function getDebugListener(config){if(!_debugListener){_debugListener={};for(var lp=0;lp<listenerFuncs.length;lp++){_debugListener[listenerFuncs[lp]]=_listenerProxyFunc(listenerFuncs[lp],config);}}return _debugListener;}var AiNonUserActionablePrefix="AI (Internal): ";var AiUserActionablePrefix="AI: ";var AIInternalMessagePrefix="AITR_";var strErrorToConsole="errorToConsole";var strWarnToConsole="warnToConsole";function _sanitizeDiagnosticText(text){if(text){return'"'+text.replace(/\"/g,strEmpty)+'"';}return strEmpty;}function _logToConsole(func,message){var theConsole=getConsole();if(!!theConsole){var logFunc="log";if(theConsole[func]){logFunc=func;}if(isFunction(theConsole[logFunc])){theConsole[logFunc](message);}}}var _InternalLogMessage=function(){function _InternalLogMessage2(msgId,msg,isUserAct,properties){if(isUserAct===void 0){isUserAct=false;}var _self=this;_self.messageId=msgId;_self.message=(isUserAct?AiUserActionablePrefix:AiNonUserActionablePrefix)+msgId;var strProps=strEmpty;if(hasJSON()){strProps=getJSON().stringify(properties);}var diagnosticText=(msg?" message:"+_sanitizeDiagnosticText(msg):strEmpty)+(properties?" props:"+_sanitizeDiagnosticText(strProps):strEmpty);_self.message+=diagnosticText;}_InternalLogMessage2.dataType="MessageData";return _InternalLogMessage2;}();function safeGetLogger(core,config){return(core||{}).logger||new DiagnosticLogger(config);}var DiagnosticLogger=function(){function DiagnosticLogger2(config){this.identifier="DiagnosticLogger";this.queue=[];var _messageCount=0;var _messageLogged={};dynamicProto(DiagnosticLogger2,this,function(_self){if(isNullOrUndefined(config)){config={};}_self.consoleLoggingLevel=function(){return _getConfigValue("loggingLevelConsole",0);};_self.telemetryLoggingLevel=function(){return _getConfigValue("loggingLevelTelemetry",1);};_self.maxInternalMessageLimit=function(){return _getConfigValue("maxMessageLimit",25);};_self.enableDebugExceptions=function(){return _getConfigValue("enableDebugExceptions",false);};_self.throwInternal=function(severity,msgId,msg,properties,isUserAct){if(isUserAct===void 0){isUserAct=false;}var message=new _InternalLogMessage(msgId,msg,isUserAct,properties);if(_self.enableDebugExceptions()){throw dumpObj(message);}else{var logFunc=severity===1?strErrorToConsole:strWarnToConsole;if(!isUndefined(message.message)){var logLevel=_self.consoleLoggingLevel();if(isUserAct){var messageKey=+message.messageId;if(!_messageLogged[messageKey]&&logLevel>=severity){_self[logFunc](message.message);_messageLogged[messageKey]=true;}}else{if(logLevel>=severity){_self[logFunc](message.message);}}_self.logInternalMessage(severity,message);}else{_debugExtMsg("throw"+(severity===1?"Critical":"Warning"),message);}}};_self.warnToConsole=function(message){_logToConsole("warn",message);_debugExtMsg("warning",message);};_self.errorToConsole=function(message){_logToConsole("error",message);_debugExtMsg("error",message);};_self.resetInternalMessageCount=function(){_messageCount=0;_messageLogged={};};_self.logInternalMessage=function(severity,message){if(_areInternalMessagesThrottled()){return;}var logMessage=true;var messageKey=AIInternalMessagePrefix+message.messageId;if(_messageLogged[messageKey]){logMessage=false;}else{_messageLogged[messageKey]=true;}if(logMessage){if(severity<=_self.telemetryLoggingLevel()){_self.queue.push(message);_messageCount++;_debugExtMsg(severity===1?"error":"warn",message);}if(_messageCount===_self.maxInternalMessageLimit()){var throttleLimitMessage="Internal events throttle limit per PageView reached for this app.";var throttleMessage=new _InternalLogMessage(23,throttleLimitMessage,false);_self.queue.push(throttleMessage);if(severity===1){_self.errorToConsole(throttleLimitMessage);}else{_self.warnToConsole(throttleLimitMessage);}}}};function _getConfigValue(name,defValue){var value=config[name];if(!isNullOrUndefined(value)){return value;}return defValue;}function _areInternalMessagesThrottled(){return _messageCount>=_self.maxInternalMessageLimit();}function _debugExtMsg(name,data){var dbgExt=getDebugExt(config);if(dbgExt&&dbgExt.diagLog){dbgExt.diagLog(name,data);}}});}return DiagnosticLogger2;}();function _getLogger(logger){return logger||new DiagnosticLogger();}function _throwInternal(logger,severity,msgId,msg,properties,isUserAct){if(isUserAct===void 0){isUserAct=false;}(logger||new DiagnosticLogger()).throwInternal(severity,msgId,msg,properties,isUserAct);}function _warnToConsole(logger,message){_getLogger(logger).warnToConsole(message);}function _logInternalMessage(logger,severity,message){_getLogger(logger).logInternalMessage(severity,message);}var strExecutionContextKey="ctx";var _defaultPerfManager=null;var PerfEvent=function(){function PerfEvent2(name,payloadDetails,isAsync){var _self=this;var accessorDefined=false;_self.start=dateNow();_self.name=name;_self.isAsync=isAsync;_self.isChildEvt=function(){return false;};if(isFunction(payloadDetails)){var theDetails_1;accessorDefined=objDefineAccessors(_self,"payload",function(){if(!theDetails_1&&isFunction(payloadDetails)){theDetails_1=payloadDetails();payloadDetails=null;}return theDetails_1;});}_self.getCtx=function(key){if(key){if(key===PerfEvent2.ParentContextKey||key===PerfEvent2.ChildrenContextKey){return _self[key];}return(_self[strExecutionContextKey]||{})[key];}return null;};_self.setCtx=function(key,value){if(key){if(key===PerfEvent2.ParentContextKey){if(!_self[key]){_self.isChildEvt=function(){return true;};}_self[key]=value;}else if(key===PerfEvent2.ChildrenContextKey){_self[key]=value;}else{var ctx=_self[strExecutionContextKey]=_self[strExecutionContextKey]||{};ctx[key]=value;}}};_self.complete=function(){var childTime=0;var childEvts=_self.getCtx(PerfEvent2.ChildrenContextKey);if(isArray(childEvts)){for(var lp=0;lp<childEvts.length;lp++){var childEvt=childEvts[lp];if(childEvt){childTime+=childEvt.time;}}}_self.time=dateNow()-_self.start;_self.exTime=_self.time-childTime;_self.complete=function(){};if(!accessorDefined&&isFunction(payloadDetails)){_self.payload=payloadDetails();}};}PerfEvent2.ParentContextKey="parent";PerfEvent2.ChildrenContextKey="childEvts";return PerfEvent2;}();var PerfManager=function(){function PerfManager2(manager){this.ctx={};dynamicProto(PerfManager2,this,function(_self){_self.create=function(src,payloadDetails,isAsync){return new PerfEvent(src,payloadDetails,isAsync);};_self.fire=function(perfEvent){if(perfEvent){perfEvent.complete();if(manager&&isFunction(manager.perfEvent)){manager.perfEvent(perfEvent);}}};_self.setCtx=function(key,value){if(key){var ctx=_self[strExecutionContextKey]=_self[strExecutionContextKey]||{};ctx[key]=value;}};_self.getCtx=function(key){return(_self[strExecutionContextKey]||{})[key];};});}return PerfManager2;}();var doPerfActiveKey="CoreUtils.doPerf";function doPerf(mgrSource,getSource,func,details,isAsync){if(mgrSource){var perfMgr=mgrSource;if(isFunction(perfMgr["getPerfMgr"])){perfMgr=perfMgr["getPerfMgr"]();}if(perfMgr){var perfEvt=void 0;var currentActive=perfMgr.getCtx(doPerfActiveKey);try{perfEvt=perfMgr.create(getSource(),details,isAsync);if(perfEvt){if(currentActive&&perfEvt.setCtx){perfEvt.setCtx(PerfEvent.ParentContextKey,currentActive);if(currentActive.getCtx&&currentActive.setCtx){var children=currentActive.getCtx(PerfEvent.ChildrenContextKey);if(!children){children=[];currentActive.setCtx(PerfEvent.ChildrenContextKey,children);}children.push(perfEvt);}}perfMgr.setCtx(doPerfActiveKey,perfEvt);return func(perfEvt);}}catch(ex){if(perfEvt&&perfEvt.setCtx){perfEvt.setCtx("exception",ex);}}finally{if(perfEvt){perfMgr.fire(perfEvt);}perfMgr.setCtx(doPerfActiveKey,currentActive);}}}return func();}function setGblPerfMgr(perfManager){_defaultPerfManager=perfManager;}function getGblPerfMgr(){return _defaultPerfManager;}var UInt32Mask=4294967296;var MaxUInt32=4294967295;var _mwcSeeded=false;var _mwcW=123456789;var _mwcZ=987654321;function _mwcSeed(seedValue){if(seedValue<0){seedValue>>>=0;}_mwcW=123456789+seedValue&MaxUInt32;_mwcZ=987654321-seedValue&MaxUInt32;_mwcSeeded=true;}function _autoSeedMwc(){try{var now=dateNow()&2147483647;_mwcSeed((Math.random()*UInt32Mask^now)+now);}catch(e){}}function randomValue(maxValue){if(maxValue>0){return Math.floor(random32()/MaxUInt32*(maxValue+1))>>>0;}return 0;}function random32(signed){var value=0;var c=getCrypto()||getMsCrypto();if(c&&c.getRandomValues){value=c.getRandomValues(new Uint32Array(1))[0]&MaxUInt32;}if(value===0&&isIE()){if(!_mwcSeeded){_autoSeedMwc();}value=mwcRandom32()&MaxUInt32;}if(value===0){value=Math.floor(UInt32Mask*Math.random()|0);}if(!signed){value>>>=0;}return value;}function mwcRandomSeed(value){if(!value){_autoSeedMwc();}else{_mwcSeed(value);}}function mwcRandom32(signed){_mwcZ=36969*(_mwcZ&65535)+(_mwcZ>>16)&MaxUInt32;_mwcW=18e3*(_mwcW&65535)+(_mwcW>>16)&MaxUInt32;var value=(_mwcZ<<16)+(_mwcW&65535)>>>0&MaxUInt32|0;if(!signed){value>>>=0;}return value;}function newId(maxLength){if(maxLength===void 0){maxLength=22;}var base64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var number=random32()>>>0;var chars=0;var result=strEmpty;while(result.length<maxLength){chars++;result+=base64chars.charAt(number&63);number>>>=6;if(chars===5){number=(random32()<<2&4294967295|number&3)>>>0;chars=0;}}return result;}var _objDefineProperty=ObjDefineProperty;var version="2.8.4";var instanceName="."+newId(6);var _dataUid=0;function _createAccessor(target,prop,value){if(_objDefineProperty){try{_objDefineProperty(target,prop,{value:value,enumerable:false,configurable:true});return true;}catch(e){}}return false;}function _canAcceptData(target){return target.nodeType===1||target.nodeType===9||!+target.nodeType;}function _getCache(data,target){var theCache=target[data.id];if(!theCache){theCache={};try{if(_canAcceptData(target)){if(!_createAccessor(target,data.id,theCache)){target[data.id]=theCache;}}}catch(e){}}return theCache;}function createUniqueNamespace(name,includeVersion){if(includeVersion===void 0){includeVersion=false;}return normalizeJsName(name+_dataUid++ +(includeVersion?"."+version:"")+instanceName);}function createElmNodeData(name){var data={id:createUniqueNamespace("_aiData-"+(name||"")+"."+version),accept:function accept(target){return _canAcceptData(target);},get:function get(target,name2,defValue,addDefault){var theCache=target[data.id];if(!theCache){if(addDefault){theCache=_getCache(data,target);theCache[normalizeJsName(name2)]=defValue;}return defValue;}return theCache[normalizeJsName(name2)];},kill:function kill(target,name2){if(target&&target[name2]){try{delete target[name2];}catch(e){}}}};return data;}var strToGMTString="toGMTString";var strToUTCString="toUTCString";var strCookie="cookie";var strExpires="expires";var strEnabled="enabled";var strIsCookieUseDisabled="isCookieUseDisabled";var strDisableCookiesUsage="disableCookiesUsage";var strConfigCookieMgr="_ckMgr";var _supportsCookies=null;var _allowUaSameSite=null;var _parsedCookieValue=null;var _doc=getDocument();var _cookieCache={};var _globalCookieConfig={};function _gblCookieMgr(config,logger){var inst=createCookieMgr[strConfigCookieMgr]||_globalCookieConfig[strConfigCookieMgr];if(!inst){inst=createCookieMgr[strConfigCookieMgr]=createCookieMgr(config,logger);_globalCookieConfig[strConfigCookieMgr]=inst;}return inst;}function _isMgrEnabled(cookieMgr){if(cookieMgr){return cookieMgr.isEnabled();}return true;}function _createCookieMgrConfig(rootConfig){var cookieMgrCfg=rootConfig.cookieCfg=rootConfig.cookieCfg||{};setValue(cookieMgrCfg,"domain",rootConfig.cookieDomain,isNotNullOrUndefined,isNullOrUndefined);setValue(cookieMgrCfg,"path",rootConfig.cookiePath||"/",null,isNullOrUndefined);if(isNullOrUndefined(cookieMgrCfg[strEnabled])){var cookieEnabled=void 0;if(!isUndefined(rootConfig[strIsCookieUseDisabled])){cookieEnabled=!rootConfig[strIsCookieUseDisabled];}if(!isUndefined(rootConfig[strDisableCookiesUsage])){cookieEnabled=!rootConfig[strDisableCookiesUsage];}cookieMgrCfg[strEnabled]=cookieEnabled;}return cookieMgrCfg;}function safeGetCookieMgr(core,config){var cookieMgr;if(core){cookieMgr=core.getCookieMgr();}else if(config){var cookieCfg=config.cookieCfg;if(cookieCfg[strConfigCookieMgr]){cookieMgr=cookieCfg[strConfigCookieMgr];}else{cookieMgr=createCookieMgr(config);}}if(!cookieMgr){cookieMgr=_gblCookieMgr(config,(core||{}).logger);}return cookieMgr;}function createCookieMgr(rootConfig,logger){var cookieMgrConfig=_createCookieMgrConfig(rootConfig||_globalCookieConfig);var _path=cookieMgrConfig.path||"/";var _domain=cookieMgrConfig.domain;var _enabled=cookieMgrConfig[strEnabled]!==false;var cookieMgr={isEnabled:function isEnabled(){var enabled=_enabled&&areCookiesSupported(logger);var gblManager=_globalCookieConfig[strConfigCookieMgr];if(enabled&&gblManager&&cookieMgr!==gblManager){enabled=_isMgrEnabled(gblManager);}return enabled;},setEnabled:function setEnabled(value){_enabled=value!==false;},set:function set(name,value,maxAgeSec,domain,path){var result=false;if(_isMgrEnabled(cookieMgr)){var values={};var theValue=strTrim(value||strEmpty);var idx=theValue.indexOf(";");if(idx!==-1){theValue=strTrim(value.substring(0,idx));values=_extractParts(value.substring(idx+1));}setValue(values,"domain",domain||_domain,isTruthy,isUndefined);if(!isNullOrUndefined(maxAgeSec)){var _isIE=isIE();if(isUndefined(values[strExpires])){var nowMs=dateNow();var expireMs=nowMs+maxAgeSec*1e3;if(expireMs>0){var expiry=new Date();expiry.setTime(expireMs);setValue(values,strExpires,_formatDate(expiry,!_isIE?strToUTCString:strToGMTString)||_formatDate(expiry,_isIE?strToGMTString:strToUTCString)||strEmpty,isTruthy);}}if(!_isIE){setValue(values,"max-age",strEmpty+maxAgeSec,null,isUndefined);}}var location_1=getLocation();if(location_1&&location_1.protocol==="https:"){setValue(values,"secure",null,null,isUndefined);if(_allowUaSameSite===null){_allowUaSameSite=!uaDisallowsSameSiteNone((getNavigator()||{}).userAgent);}if(_allowUaSameSite){setValue(values,"SameSite","None",null,isUndefined);}}setValue(values,"path",path||_path,null,isUndefined);var setCookieFn=cookieMgrConfig.setCookie||_setCookieValue;setCookieFn(name,_formatCookieValue(theValue,values));result=true;}return result;},get:function get(name){var value=strEmpty;if(_isMgrEnabled(cookieMgr)){value=(cookieMgrConfig.getCookie||_getCookieValue)(name);}return value;},del:function del(name,path){var result=false;if(_isMgrEnabled(cookieMgr)){result=cookieMgr.purge(name,path);}return result;},purge:function purge(name,path){var _a;var result=false;if(areCookiesSupported(logger)){var values=(_a={},_a["path"]=path?path:"/",_a[strExpires]="Thu, 01 Jan 1970 00:00:01 GMT",_a);if(!isIE()){values["max-age"]="0";}var delCookie=cookieMgrConfig.delCookie||_setCookieValue;delCookie(name,_formatCookieValue(strEmpty,values));result=true;}return result;}};cookieMgr[strConfigCookieMgr]=cookieMgr;return cookieMgr;}function areCookiesSupported(logger){if(_supportsCookies===null){_supportsCookies=false;try{var doc=_doc||{};_supportsCookies=doc[strCookie]!==void 0;}catch(e){_throwInternal(logger,2,68,"Cannot access document.cookie - "+getExceptionName(e),{exception:dumpObj(e)});}}return _supportsCookies;}function _extractParts(theValue){var values={};if(theValue&&theValue.length){var parts=strTrim(theValue).split(";");arrForEach(parts,function(thePart){thePart=strTrim(thePart||strEmpty);if(thePart){var idx=thePart.indexOf("=");if(idx===-1){values[thePart]=null;}else{values[strTrim(thePart.substring(0,idx))]=strTrim(thePart.substring(idx+1));}}});}return values;}function _formatDate(theDate,func){if(isFunction(theDate[func])){return theDate[func]();}return null;}function _formatCookieValue(value,values){var cookieValue=value||strEmpty;objForEachKey(values,function(name,theValue){cookieValue+="; "+name+(!isNullOrUndefined(theValue)?"="+theValue:strEmpty);});return cookieValue;}function _getCookieValue(name){var cookieValue=strEmpty;if(_doc){var theCookie=_doc[strCookie]||strEmpty;if(_parsedCookieValue!==theCookie){_cookieCache=_extractParts(theCookie);_parsedCookieValue=theCookie;}cookieValue=strTrim(_cookieCache[name]||strEmpty);}return cookieValue;}function _setCookieValue(name,cookieValue){if(_doc){_doc[strCookie]=name+"="+cookieValue;}}function uaDisallowsSameSiteNone(userAgent){if(!isString(userAgent)){return false;}if(strContains(userAgent,"CPU iPhone OS 12")||strContains(userAgent,"iPad; CPU OS 12")){return true;}if(strContains(userAgent,"Macintosh; Intel Mac OS X 10_14")&&strContains(userAgent,"Version/")&&strContains(userAgent,"Safari")){return true;}if(strContains(userAgent,"Macintosh; Intel Mac OS X 10_14")&&strEndsWith(userAgent,"AppleWebKit/605.1.15 (KHTML, like Gecko)")){return true;}if(strContains(userAgent,"Chrome/5")||strContains(userAgent,"Chrome/6")){return true;}if(strContains(userAgent,"UnrealEngine")&&!strContains(userAgent,"Chrome")){return true;}if(strContains(userAgent,"UCBrowser/12")||strContains(userAgent,"UCBrowser/11")){return true;}return false;}var strOnPrefix="on";var strAttachEvent="attachEvent";var strAddEventHelper="addEventListener";var strDetachEvent="detachEvent";var strRemoveEventListener="removeEventListener";var strEvents="events";var strVisibilityChangeEvt="visibilitychange";var strPageHide="pagehide";var strPageShow="pageshow";var strUnload="unload";var strBeforeUnload="beforeunload";var strPageHideNamespace=createUniqueNamespace("aiEvtPageHide");var strPageShowNamespace=createUniqueNamespace("aiEvtPageShow");var rRemoveEmptyNs=/\.[\.]+/g;var rRemoveTrailingEmptyNs=/[\.]+$/;var _guid=1;var elmNodeData=createElmNodeData("events");var eventNamespace=/^([^.]*)(?:\.(.+)|)/;function _normalizeNamespace(name){if(name&&name.replace){return name.replace(/^\s*\.*|\.*\s*$/g,"");}return name;}function _getEvtNamespace(eventName,evtNamespace){if(evtNamespace){var theNamespace_1="";if(isArray(evtNamespace)){theNamespace_1="";arrForEach(evtNamespace,function(name){name=_normalizeNamespace(name);if(name){if(name[0]!=="."){name="."+name;}theNamespace_1+=name;}});}else{theNamespace_1=_normalizeNamespace(evtNamespace);}if(theNamespace_1){if(theNamespace_1[0]!=="."){theNamespace_1="."+theNamespace_1;}eventName=(eventName||"")+theNamespace_1;}}var parsedEvent=eventNamespace.exec(eventName||"")||[];return{type:parsedEvent[1],ns:(parsedEvent[2]||"").replace(rRemoveEmptyNs,".").replace(rRemoveTrailingEmptyNs,"").split(".").sort().join(".")};}function __getRegisteredEvents(target,eventName,evtNamespace){var theEvents=[];var eventCache=elmNodeData.get(target,strEvents,{},false);var evtName=_getEvtNamespace(eventName,evtNamespace);objForEachKey(eventCache,function(evtType,registeredEvents){arrForEach(registeredEvents,function(value){if(!evtName.type||evtName.type===value.evtName.type){if(!evtName.ns||evtName.ns===evtName.ns){theEvents.push({name:value.evtName.type+(value.evtName.ns?"."+value.evtName.ns:""),handler:value.handler});}}});});return theEvents;}function _getRegisteredEvents(target,evtName,addDefault){if(addDefault===void 0){addDefault=true;}var aiEvts=elmNodeData.get(target,strEvents,{},addDefault);var registeredEvents=aiEvts[evtName];if(!registeredEvents){registeredEvents=aiEvts[evtName]=[];}return registeredEvents;}function _doDetach(obj,evtName,handlerRef,useCapture){if(obj&&evtName&&evtName.type){if(obj[strRemoveEventListener]){obj[strRemoveEventListener](evtName.type,handlerRef,useCapture);}else if(obj[strDetachEvent]){obj[strDetachEvent](strOnPrefix+evtName.type,handlerRef);}}}function _doAttach(obj,evtName,handlerRef,useCapture){var result=false;if(obj&&evtName&&evtName.type&&handlerRef){if(obj[strAddEventHelper]){obj[strAddEventHelper](evtName.type,handlerRef,useCapture);result=true;}else if(obj[strAttachEvent]){obj[strAttachEvent](strOnPrefix+evtName.type,handlerRef);result=true;}}return result;}function _doUnregister(target,events,evtName,unRegFn){var idx=events.length;while(idx--){var theEvent=events[idx];if(theEvent){if(!evtName.ns||evtName.ns===theEvent.evtName.ns){if(!unRegFn||unRegFn(theEvent)){_doDetach(target,theEvent.evtName,theEvent.handler,theEvent.capture);events.splice(idx,1);}}}}}function _unregisterEvents(target,evtName,unRegFn){if(evtName.type){_doUnregister(target,_getRegisteredEvents(target,evtName.type),evtName,unRegFn);}else{var eventCache=elmNodeData.get(target,strEvents,{});objForEachKey(eventCache,function(evtType,events){_doUnregister(target,events,evtName,unRegFn);});if(objKeys(eventCache).length===0){elmNodeData.kill(target,strEvents);}}}function mergeEvtNamespace(theNamespace,namespaces){var newNamespaces;if(namespaces){if(isArray(namespaces)){newNamespaces=[theNamespace].concat(namespaces);}else{newNamespaces=[theNamespace,namespaces];}newNamespaces=_getEvtNamespace("xx",newNamespaces).ns.split(".");}else{newNamespaces=theNamespace;}return newNamespaces;}function eventOn(target,eventName,handlerRef,evtNamespace,useCapture){if(useCapture===void 0){useCapture=false;}var result=false;if(target){try{var evtName=_getEvtNamespace(eventName,evtNamespace);result=_doAttach(target,evtName,handlerRef,useCapture);if(result&&elmNodeData.accept(target)){var registeredEvent={guid:_guid++,evtName:evtName,handler:handlerRef,capture:useCapture};_getRegisteredEvents(target,evtName.type).push(registeredEvent);}}catch(e){}}return result;}function eventOff(target,eventName,handlerRef,evtNamespace,useCapture){if(useCapture===void 0){useCapture=false;}if(target){try{var evtName_1=_getEvtNamespace(eventName,evtNamespace);var found_1=false;_unregisterEvents(target,evtName_1,function(regEvent){if(evtName_1.ns&&!handlerRef||regEvent.handler===handlerRef){found_1=true;return true;}return false;});if(!found_1){_doDetach(target,evtName_1,handlerRef,useCapture);}}catch(e){}}}function attachEvent(obj,eventNameWithoutOn,handlerRef,useCapture){if(useCapture===void 0){useCapture=false;}return eventOn(obj,eventNameWithoutOn,handlerRef,null,useCapture);}function detachEvent(obj,eventNameWithoutOn,handlerRef,useCapture){if(useCapture===void 0){useCapture=false;}eventOff(obj,eventNameWithoutOn,handlerRef,null,useCapture);}function addEventHandler(eventName,callback,evtNamespace){var result=false;var w=getWindow();if(w){result=eventOn(w,eventName,callback,evtNamespace);result=eventOn(w["body"],eventName,callback,evtNamespace)||result;}var doc=getDocument();if(doc){result=eventOn(doc,eventName,callback,evtNamespace)||result;}return result;}function removeEventHandler(eventName,callback,evtNamespace){var w=getWindow();if(w){eventOff(w,eventName,callback,evtNamespace);eventOff(w["body"],eventName,callback,evtNamespace);}var doc=getDocument();if(doc){eventOff(doc,eventName,callback,evtNamespace);}}function _addEventListeners(events,listener,excludeEvents,evtNamespace){var added=false;if(listener&&events&&events.length>0){arrForEach(events,function(name){if(name){if(!excludeEvents||arrIndexOf(excludeEvents,name)===-1){added=addEventHandler(name,listener,evtNamespace)||added;}}});}return added;}function addEventListeners(events,listener,excludeEvents,evtNamespace){var added=false;if(listener&&events&&isArray(events)){added=_addEventListeners(events,listener,excludeEvents,evtNamespace);if(!added&&excludeEvents&&excludeEvents.length>0){added=_addEventListeners(events,listener,null,evtNamespace);}}return added;}function removeEventListeners(events,listener,evtNamespace){if(events&&isArray(events)){arrForEach(events,function(name){if(name){removeEventHandler(name,listener,evtNamespace);}});}}function addPageUnloadEventListener(listener,excludeEvents,evtNamespace){return addEventListeners([strBeforeUnload,strUnload,strPageHide],listener,excludeEvents,evtNamespace);}function removePageUnloadEventListener(listener,evtNamespace){removeEventListeners([strBeforeUnload,strUnload,strPageHide],listener,evtNamespace);}function addPageHideEventListener(listener,excludeEvents,evtNamespace){function _handlePageVisibility(evt){var doc=getDocument();if(listener&&doc&&doc.visibilityState==="hidden"){listener(evt);}}var newNamespaces=mergeEvtNamespace(strPageHideNamespace,evtNamespace);var pageUnloadAdded=_addEventListeners([strPageHide],listener,excludeEvents,newNamespaces);if(!excludeEvents||arrIndexOf(excludeEvents,strVisibilityChangeEvt)===-1){pageUnloadAdded=_addEventListeners([strVisibilityChangeEvt],_handlePageVisibility,excludeEvents,newNamespaces)||pageUnloadAdded;}if(!pageUnloadAdded&&excludeEvents){pageUnloadAdded=addPageHideEventListener(listener,null,evtNamespace);}return pageUnloadAdded;}function removePageHideEventListener(listener,evtNamespace){var newNamespaces=mergeEvtNamespace(strPageHideNamespace,evtNamespace);removeEventListeners([strPageHide],listener,newNamespaces);removeEventListeners([strVisibilityChangeEvt],null,newNamespaces);}function addPageShowEventListener(listener,excludeEvents,evtNamespace){function _handlePageVisibility(evt){var doc=getDocument();if(listener&&doc&&doc.visibilityState==="visible"){listener(evt);}}var newNamespaces=mergeEvtNamespace(strPageShowNamespace,evtNamespace);var pageShowAdded=_addEventListeners([strPageShow],listener,excludeEvents,newNamespaces);pageShowAdded=_addEventListeners([strVisibilityChangeEvt],_handlePageVisibility,excludeEvents,newNamespaces)||pageShowAdded;if(!pageShowAdded&&excludeEvents){pageShowAdded=addPageShowEventListener(listener,null,evtNamespace);}return pageShowAdded;}function removePageShowEventListener(listener,evtNamespace){var newNamespaces=mergeEvtNamespace(strPageShowNamespace,evtNamespace);removeEventListeners([strPageShow],listener,newNamespaces);removeEventListeners([strVisibilityChangeEvt],null,newNamespaces);}var _cookieMgrs=null;var _canUseCookies;var Undefined=strShimUndefined;function newGuid(){function randomHexDigit(){return randomValue(15);}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(GuidRegex,function(c){var r=randomHexDigit()|0,v=c==="x"?r:r&3|8;return v.toString(16);});}function perfNow(){var perf=getPerformance();if(perf&&perf.now){return perf.now();}return dateNow();}function generateW3CId(){var hexValues=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];var oct=strEmpty,tmp;for(var a=0;a<4;a++){tmp=random32();oct+=hexValues[tmp&15]+hexValues[tmp>>4&15]+hexValues[tmp>>8&15]+hexValues[tmp>>12&15]+hexValues[tmp>>16&15]+hexValues[tmp>>20&15]+hexValues[tmp>>24&15]+hexValues[tmp>>28&15];}var clockSequenceHi=hexValues[8+(random32()&3)|0];return oct.substr(0,8)+oct.substr(9,4)+"4"+oct.substr(13,3)+clockSequenceHi+oct.substr(16,3)+oct.substr(19,12);}var CoreUtils={_canUseCookies:void 0,isTypeof:isTypeof,isUndefined:isUndefined,isNullOrUndefined:isNullOrUndefined,hasOwnProperty:hasOwnProperty,isFunction:isFunction,isObject:isObject,isDate:isDate,isArray:isArray,isError:isError,isString:isString,isNumber:isNumber,isBoolean:isBoolean,toISOString:toISOString,arrForEach:arrForEach,arrIndexOf:arrIndexOf,arrMap:arrMap,arrReduce:arrReduce,strTrim:strTrim,objCreate:objCreateFn,objKeys:objKeys,objDefineAccessors:objDefineAccessors,addEventHandler:addEventHandler,dateNow:dateNow,isIE:isIE,disableCookies:disableCookies,newGuid:newGuid,perfNow:perfNow,newId:newId,randomValue:randomValue,random32:random32,mwcRandomSeed:mwcRandomSeed,mwcRandom32:mwcRandom32,generateW3CId:generateW3CId};var GuidRegex=/[xy]/g;var EventHelper={Attach:attachEvent,AttachEvent:attachEvent,Detach:detachEvent,DetachEvent:detachEvent};function _legacyCookieMgr(config,logger){var cookieMgr=_gblCookieMgr(config,logger);var legacyCanUseCookies=CoreUtils._canUseCookies;if(_cookieMgrs===null){_cookieMgrs=[];_canUseCookies=legacyCanUseCookies;objDefineAccessors(CoreUtils,"_canUseCookies",function(){return _canUseCookies;},function(value){_canUseCookies=value;arrForEach(_cookieMgrs,function(mgr){mgr.setEnabled(value);});});}if(arrIndexOf(_cookieMgrs,cookieMgr)===-1){_cookieMgrs.push(cookieMgr);}if(isBoolean(legacyCanUseCookies)){cookieMgr.setEnabled(legacyCanUseCookies);}if(isBoolean(_canUseCookies)){cookieMgr.setEnabled(_canUseCookies);}return cookieMgr;}function disableCookies(){_legacyCookieMgr().setEnabled(false);}function canUseCookies(logger){return _legacyCookieMgr(null,logger).isEnabled();}function getCookie(logger,name){return _legacyCookieMgr(null,logger).get(name);}function setCookie(logger,name,value,domain){_legacyCookieMgr(null,logger).set(name,value,null,domain);}function deleteCookie(logger,name){return _legacyCookieMgr(null,logger).del(name);}var TRACE_PARENT_REGEX=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/;var DEFAULT_VERSION="00";var INVALID_VERSION="ff";var INVALID_TRACE_ID="00000000000000000000000000000000";var INVALID_SPAN_ID="0000000000000000";var SAMPLED_FLAG=1;function _isValid(value,len,invalidValue){if(value&&value.length===len&&value!==invalidValue){return!!value.match(/^[\da-f]*$/);}return false;}function _formatValue(value,len,defValue){if(_isValid(value,len)){return value;}return defValue;}function _formatFlags(value){if(isNaN(value)||value<0||value>255){value=1;}var result=value.toString(16);while(result.length<2){result="0"+result;}return result;}function createTraceParent(traceId,spanId,flags,version2){return{version:_isValid(version2,2,INVALID_VERSION)?version2:DEFAULT_VERSION,traceId:isValidTraceId(traceId)?traceId:generateW3CId(),spanId:isValidSpanId(spanId)?spanId:generateW3CId().substr(0,16),traceFlags:flags>=0&&flags<=255?flags:1};}function parseTraceParent(value){if(!value){return null;}if(isArray(value)){value=value[0]||"";}if(!value||!isString(value)||value.length>8192){return null;}var match=TRACE_PARENT_REGEX.exec(strTrim(value));if(!match||match[1]===INVALID_VERSION||match[2]===INVALID_TRACE_ID||match[3]===INVALID_SPAN_ID){return null;}return{version:match[1],traceId:match[2],spanId:match[3],traceFlags:parseInt(match[4],16)};}function isValidTraceId(value){return _isValid(value,32,INVALID_TRACE_ID);}function isValidSpanId(value){return _isValid(value,16,INVALID_SPAN_ID);}function isValidTraceParent(value){if(!value||!_isValid(value.version,2,INVALID_VERSION)||!_isValid(value.traceId,32,INVALID_TRACE_ID)||!_isValid(value.spanId,16,INVALID_SPAN_ID)||!_isValid(_formatFlags(value.traceFlags),2)){return false;}return true;}function isSampledFlag(value){if(isValidTraceParent(value)){return(value.traceFlags&SAMPLED_FLAG)===SAMPLED_FLAG;}return false;}function formatTraceParent(value){if(value){var flags=_formatFlags(value.traceFlags);if(!_isValid(flags,2)){flags="01";}var version2=value.version||DEFAULT_VERSION;if(version2!=="00"&&version2!=="ff"){version2=DEFAULT_VERSION;}return"".concat(version2,"-").concat(_formatValue(value.traceId,32,INVALID_TRACE_ID),"-").concat(_formatValue(value.spanId,16,INVALID_SPAN_ID),"-").concat(flags);}return"";}function findW3cTraceParent(){var name="traceparent";var traceParent=parseTraceParent(findMetaTag(name));if(!traceParent){traceParent=parseTraceParent(findNamedServerTiming(name));}return traceParent;}var strDoUnload="_doUnload";var pluginStateData=createElmNodeData("plugin");function _getPluginState(plugin){return pluginStateData.get(plugin,"state",{},true);}function initializePlugins(processContext,extensions3){var initPlugins=[];var lastPlugin=null;var proxy=processContext.getNext();var pluginState;while(proxy){var thePlugin=proxy.getPlugin();if(thePlugin){if(lastPlugin&&isFunction(lastPlugin[strSetNextPlugin])&&isFunction(thePlugin[strProcessTelemetry])){lastPlugin[strSetNextPlugin](thePlugin);}var isInitialized=false;if(isFunction(thePlugin[strIsInitialized])){isInitialized=thePlugin[strIsInitialized]();}else{pluginState=_getPluginState(thePlugin);isInitialized=pluginState[strIsInitialized];}if(!isInitialized){initPlugins.push(thePlugin);}lastPlugin=thePlugin;proxy=proxy.getNext();}}arrForEach(initPlugins,function(thePlugin2){var core=processContext.core();thePlugin2.initialize(processContext.getCfg(),core,extensions3,processContext.getNext());pluginState=_getPluginState(thePlugin2);if(!thePlugin2[strCore]&&!pluginState[strCore]){pluginState[strCore]=core;}pluginState[strIsInitialized]=true;delete pluginState[strTeardown];});}function sortPlugins(plugins){return plugins.sort(function(extA,extB){var result=0;if(extB){var bHasProcess=isFunction(extB[strProcessTelemetry]);if(isFunction(extA[strProcessTelemetry])){result=bHasProcess?extA[strPriority]-extB[strPriority]:1;}else if(bHasProcess){result=-1;}}else{result=extA?1:-1;}return result;});}function unloadComponents(components,unloadCtx,unloadState,asyncCallback){var idx=0;function _doUnload(){while(idx<components.length){var component=components[idx++];if(component){var func=component[strDoUnload]||component[strDoTeardown];if(isFunction(func)){if(func.call(component,unloadCtx,unloadState,_doUnload)===true){return true;}}}}}return _doUnload();}function createDistributedTraceContext(parentCtx){var trace={};return{getName:function getName(){return trace.name;},setName:function setName(newValue){parentCtx&&parentCtx.setName(newValue);trace.name=newValue;},getTraceId:function getTraceId(){return trace.traceId;},setTraceId:function setTraceId(newValue){parentCtx&&parentCtx.setTraceId(newValue);if(isValidTraceId(newValue)){trace.traceId=newValue;}},getSpanId:function getSpanId(){return trace.spanId;},setSpanId:function setSpanId(newValue){parentCtx&&parentCtx.setSpanId(newValue);if(isValidSpanId(newValue)){trace.spanId=newValue;}},getTraceFlags:function getTraceFlags(){return trace.traceFlags;},setTraceFlags:function setTraceFlags(newTraceFlags){parentCtx&&parentCtx.setTraceFlags(newTraceFlags);trace.traceFlags=newTraceFlags;}};}var strTelemetryPluginChain="TelemetryPluginChain";var strHasRunFlags="_hasRun";var strGetTelCtx="_getTelCtx";var _chainId=0;function _getNextProxyStart(proxy,core,startAt){while(proxy){if(proxy.getPlugin()===startAt){return proxy;}proxy=proxy.getNext();}return createTelemetryProxyChain([startAt],core.config||{},core);}function _createInternalContext(telemetryChain,config,_core2,startAt){var _nextProxy=null;var _onComplete=[];if(startAt!==null){_nextProxy=startAt?_getNextProxyStart(telemetryChain,_core2,startAt):telemetryChain;}var context={_next:_moveNext,ctx:{core:function core(){return _core2;},diagLog:function diagLog(){return safeGetLogger(_core2,config);},getCfg:function getCfg(){return config;},getExtCfg:_getExtCfg,getConfig:_getConfig,hasNext:function hasNext(){return!!_nextProxy;},getNext:function getNext(){return _nextProxy;},setNext:function setNext(nextPlugin){_nextProxy=nextPlugin;},iterate:_iterateChain,onComplete:_addOnComplete}};function _addOnComplete(onComplete,that){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i];}if(onComplete){_onComplete.push({func:onComplete,self:!isUndefined(that)?that:context.ctx,args:args});}}function _moveNext(){var nextProxy=_nextProxy;_nextProxy=nextProxy?nextProxy.getNext():null;if(!nextProxy){var onComplete=_onComplete;if(onComplete&&onComplete.length>0){arrForEach(onComplete,function(completeDetails){try{completeDetails.func.call(completeDetails.self,completeDetails.args);}catch(e){_throwInternal(_core2.logger,2,73,"Unexpected Exception during onComplete - "+dumpObj(e));}});_onComplete=[];}}return nextProxy;}function _getExtCfg(identifier,defaultValue,mergeDefault){if(defaultValue===void 0){defaultValue={};}if(mergeDefault===void 0){mergeDefault=0;}var theConfig;if(config){var extConfig=config.extensionConfig;if(extConfig&&identifier){theConfig=extConfig[identifier];}}if(!theConfig){theConfig=defaultValue;}else if(isObject(defaultValue)){if(mergeDefault!==0){var newConfig_1=objExtend(true,defaultValue,theConfig);if(config&&mergeDefault===2){objForEachKey(defaultValue,function(field){if(isNullOrUndefined(newConfig_1[field])){var cfgValue=config[field];if(!isNullOrUndefined(cfgValue)){newConfig_1[field]=cfgValue;}}});}theConfig=newConfig_1;}}return theConfig;}function _getConfig(identifier,field,defaultValue){if(defaultValue===void 0){defaultValue=false;}var theValue;var extConfig=_getExtCfg(identifier,null);if(extConfig&&!isNullOrUndefined(extConfig[field])){theValue=extConfig[field];}else if(config&&!isNullOrUndefined(config[field])){theValue=config[field];}return!isNullOrUndefined(theValue)?theValue:defaultValue;}function _iterateChain(cb){var nextPlugin;while(!!(nextPlugin=context._next())){var plugin=nextPlugin.getPlugin();if(plugin){cb(plugin);}}}return context;}function createProcessTelemetryContext(telemetryChain,config,core,startAt){var internalContext=_createInternalContext(telemetryChain,config,core,startAt);var context=internalContext.ctx;function _processNext(env){var nextPlugin=internalContext._next();nextPlugin&&nextPlugin.processTelemetry(env,context);return!nextPlugin;}function _createNew(plugins,startAt2){if(plugins===void 0){plugins=null;}if(isArray(plugins)){plugins=createTelemetryProxyChain(plugins,config,core,startAt2);}return createProcessTelemetryContext(plugins||context.getNext(),config,core,startAt2);}context.processNext=_processNext;context.createNew=_createNew;return context;}function createProcessTelemetryUnloadContext(telemetryChain,core,startAt){var config=core.config||{};var internalContext=_createInternalContext(telemetryChain,config,core,startAt);var context=internalContext.ctx;function _processNext(unloadState){var nextPlugin=internalContext._next();nextPlugin&&nextPlugin.unload(context,unloadState);return!nextPlugin;}function _createNew(plugins,startAt2){if(plugins===void 0){plugins=null;}if(isArray(plugins)){plugins=createTelemetryProxyChain(plugins,config,core,startAt2);}return createProcessTelemetryUnloadContext(plugins||context.getNext(),core,startAt2);}context.processNext=_processNext;context.createNew=_createNew;return context;}function createProcessTelemetryUpdateContext(telemetryChain,core,startAt){var config=core.config||{};var internalContext=_createInternalContext(telemetryChain,config,core,startAt);var context=internalContext.ctx;function _processNext(updateState){return context.iterate(function(plugin){if(isFunction(plugin.update)){plugin.update(context,updateState);}});}function _createNew(plugins,startAt2){if(plugins===void 0){plugins=null;}if(isArray(plugins)){plugins=createTelemetryProxyChain(plugins,config,core,startAt2);}return createProcessTelemetryUpdateContext(plugins||context.getNext(),core,startAt2);}context.processNext=_processNext;context.createNew=_createNew;return context;}function createTelemetryProxyChain(plugins,config,core,startAt){var firstProxy=null;var add=startAt?false:true;if(isArray(plugins)&&plugins.length>0){var lastProxy_1=null;arrForEach(plugins,function(thePlugin){if(!add&&startAt===thePlugin){add=true;}if(add&&thePlugin&&isFunction(thePlugin.processTelemetry)){var newProxy=createTelemetryPluginProxy(thePlugin,config,core);if(!firstProxy){firstProxy=newProxy;}if(lastProxy_1){lastProxy_1._setNext(newProxy);}lastProxy_1=newProxy;}});}if(startAt&&!firstProxy){return createTelemetryProxyChain([startAt],config,core);}return firstProxy;}function createTelemetryPluginProxy(plugin,config,core){var nextProxy=null;var hasProcessTelemetry=isFunction(plugin.processTelemetry);var hasSetNext=isFunction(plugin.setNextPlugin);var chainId;if(plugin){chainId=plugin.identifier+"-"+plugin.priority+"-"+_chainId++;}else{chainId="Unknown-0-"+_chainId++;}var proxyChain={getPlugin:function getPlugin(){return plugin;},getNext:function getNext(){return nextProxy;},processTelemetry:_processTelemetry,unload:_unloadPlugin,update:_updatePlugin,_id:chainId,_setNext:function _setNext(nextPlugin){nextProxy=nextPlugin;}};function _getTelCtx(){var itemCtx;if(plugin&&isFunction(plugin[strGetTelCtx])){itemCtx=plugin[strGetTelCtx]();}if(!itemCtx){itemCtx=createProcessTelemetryContext(proxyChain,config,core);}return itemCtx;}function _processChain(itemCtx,processPluginFn,name,details,isAsync){var hasRun=false;var identifier=plugin?plugin.identifier:strTelemetryPluginChain;var hasRunContext=itemCtx[strHasRunFlags];if(!hasRunContext){hasRunContext=itemCtx[strHasRunFlags]={};}itemCtx.setNext(nextProxy);if(plugin){doPerf(itemCtx[strCore](),function(){return identifier+":"+name;},function(){hasRunContext[chainId]=true;try{var nextId=nextProxy?nextProxy._id:strEmpty;if(nextId){hasRunContext[nextId]=false;}hasRun=processPluginFn(itemCtx);}catch(error){var hasNextRun=nextProxy?hasRunContext[nextProxy._id]:true;if(hasNextRun){hasRun=true;}if(!nextProxy||!hasNextRun){_throwInternal(itemCtx.diagLog(),1,73,"Plugin ["+identifier+"] failed during "+name+" - "+dumpObj(error)+", run flags: "+dumpObj(hasRunContext));}}},details,isAsync);}return hasRun;}function _processTelemetry(env,itemCtx){itemCtx=itemCtx||_getTelCtx();function _callProcessTelemetry(itemCtx2){if(!plugin||!hasProcessTelemetry){return false;}var pluginState=_getPluginState(plugin);if(pluginState.teardown||pluginState[strDisabled]){return false;}if(hasSetNext){plugin.setNextPlugin(nextProxy);}plugin.processTelemetry(env,itemCtx2);return true;}if(!_processChain(itemCtx,_callProcessTelemetry,"processTelemetry",function(){return{item:env};},!env.sync)){itemCtx.processNext(env);}}function _unloadPlugin(unloadCtx,unloadState){function _callTeardown(){var hasRun=false;if(plugin){var pluginState=_getPluginState(plugin);var pluginCore=plugin[strCore]||pluginState.core;if(plugin&&(!pluginCore||pluginCore===unloadCtx[strCore]())&&!pluginState[strTeardown]){pluginState[strCore]=null;pluginState[strTeardown]=true;pluginState[strIsInitialized]=false;if(plugin[strTeardown]&&plugin[strTeardown](unloadCtx,unloadState)===true){hasRun=true;}}}return hasRun;}if(!_processChain(unloadCtx,_callTeardown,"unload",function(){},unloadState.isAsync)){unloadCtx.processNext(unloadState);}}function _updatePlugin(updateCtx,updateState){function _callUpdate(){var hasRun=false;if(plugin){var pluginState=_getPluginState(plugin);var pluginCore=plugin[strCore]||pluginState.core;if(plugin&&(!pluginCore||pluginCore===updateCtx[strCore]())&&!pluginState[strTeardown]){if(plugin[strUpdate]&&plugin[strUpdate](updateCtx,updateState)===true){hasRun=true;}}}return hasRun;}if(!_processChain(updateCtx,_callUpdate,"update",function(){},false)){updateCtx.processNext(updateState);}}return objFreeze(proxyChain);}var ProcessTelemetryContext=function(){function ProcessTelemetryContext2(pluginChain,config,core,startAt){var _self=this;var context=createProcessTelemetryContext(pluginChain,config,core,startAt);proxyFunctions(_self,context,objKeys(context));}return ProcessTelemetryContext2;}();var strIKey="iKey";var strExtensionConfig="extensionConfig";var ChannelControllerPriority=500;var ChannelValidationMessage="Channel has invalid priority - ";function _addChannelQueue(channelQueue,queue,config,core){if(queue&&isArray(queue)&&queue.length>0){queue=queue.sort(function(a,b){return a.priority-b.priority;});arrForEach(queue,function(queueItem){if(queueItem.priority<ChannelControllerPriority){throwError(ChannelValidationMessage+queueItem.identifier);}});channelQueue.push({queue:objFreeze(queue),chain:createTelemetryProxyChain(queue,config,core)});}}function createChannelControllerPlugin(channelQueue,core){var _a;function _getTelCtx(){return createProcessTelemetryContext(null,core.config,core,null);}function _processChannelQueue(theChannels,itemCtx,processFn,onComplete){var waiting=theChannels?theChannels.length+1:1;function _runChainOnComplete(){waiting--;if(waiting===0){onComplete&&onComplete();onComplete=null;}}if(waiting>0){arrForEach(theChannels,function(channels){if(channels&&channels.queue.length>0){var channelChain=channels.chain;var chainCtx=itemCtx.createNew(channelChain);chainCtx.onComplete(_runChainOnComplete);processFn(chainCtx);}else{waiting--;}});}_runChainOnComplete();}function _doUpdate(updateCtx,updateState){var theUpdateState=updateState||{reason:0};_processChannelQueue(channelQueue,updateCtx,function(chainCtx){chainCtx[strProcessNext](theUpdateState);},function(){updateCtx[strProcessNext](theUpdateState);});return true;}function _doTeardown(unloadCtx,unloadState){var theUnloadState=unloadState||{reason:0,isAsync:false};_processChannelQueue(channelQueue,unloadCtx,function(chainCtx){chainCtx[strProcessNext](theUnloadState);},function(){unloadCtx[strProcessNext](theUnloadState);_isInitialized2=false;});return true;}function _getChannel(pluginIdentifier){var thePlugin=null;if(channelQueue&&channelQueue.length>0){arrForEach(channelQueue,function(channels){if(channels&&channels.queue.length>0){arrForEach(channels.queue,function(ext){if(ext.identifier===pluginIdentifier){thePlugin=ext;return-1;}});if(thePlugin){return-1;}}});}return thePlugin;}var _isInitialized2=false;var channelController=(_a={identifier:"ChannelControllerPlugin",priority:ChannelControllerPriority,initialize:function initialize(config,core2,extensions3,pluginChain){_isInitialized2=true;arrForEach(channelQueue,function(channels){if(channels&&channels.queue.length>0){initializePlugins(createProcessTelemetryContext(channels.chain,config,core2),extensions3);}});},isInitialized:function isInitialized(){return _isInitialized2;},processTelemetry:function processTelemetry(item,itemCtx){_processChannelQueue(channelQueue,itemCtx||_getTelCtx(),function(chainCtx){chainCtx[strProcessNext](item);},function(){itemCtx[strProcessNext](item);});},update:_doUpdate},_a[strPause]=function(){_processChannelQueue(channelQueue,_getTelCtx(),function(chainCtx){chainCtx.iterate(function(plugin){plugin[strPause]&&plugin[strPause]();});},null);},_a[strResume]=function(){_processChannelQueue(channelQueue,_getTelCtx(),function(chainCtx){chainCtx.iterate(function(plugin){plugin[strResume]&&plugin[strResume]();});},null);},_a[strTeardown]=_doTeardown,_a.getChannel=_getChannel,_a.flush=function(isAsync,callBack,sendReason,cbTimeout){var waiting=1;var doneIterating=false;var cbTimer=null;cbTimeout=cbTimeout||5e3;function doCallback(){waiting--;if(doneIterating&&waiting===0){if(cbTimer){clearTimeout(cbTimer);cbTimer=null;}callBack&&callBack(doneIterating);callBack=null;}}_processChannelQueue(channelQueue,_getTelCtx(),function(chainCtx){chainCtx.iterate(function(plugin){if(plugin.flush){waiting++;var handled_1=false;if(!plugin.flush(isAsync,function(){handled_1=true;doCallback();},sendReason)){if(!handled_1){if(isAsync&&cbTimer==null){cbTimer=setTimeout(function(){cbTimer=null;doCallback();},cbTimeout);}else{doCallback();}}}}});},function(){doneIterating=true;doCallback();});return true;},_a._setQueue=function(queue){channelQueue=queue;},_a);return channelController;}function createChannelQueues(channels,extensions3,config,core){var channelQueue=[];if(channels){arrForEach(channels,function(queue){return _addChannelQueue(channelQueue,queue,config,core);});}if(extensions3){var extensionQueue_1=[];arrForEach(extensions3,function(plugin){if(plugin.priority>ChannelControllerPriority){extensionQueue_1.push(plugin);}});_addChannelQueue(channelQueue,extensionQueue_1,config,core);}return channelQueue;}function createUnloadHandlerContainer(){var handlers=[];function _addHandler(handler){if(handler){handlers.push(handler);}}function _runHandlers(unloadCtx,unloadState){arrForEach(handlers,function(handler){try{handler(unloadCtx,unloadState);}catch(e){_throwInternal(unloadCtx.diagLog(),2,73,"Unexpected error calling unload handler - "+dumpObj(e));}});handlers=[];}return{add:_addHandler,run:_runHandlers};}var strGetPlugin="getPlugin";var BaseTelemetryPlugin=function(){function BaseTelemetryPlugin2(){var _self=this;var _isinitialized;var _rootCtx;var _nextPlugin;var _unloadHandlerContainer;var _hooks;_initDefaults();dynamicProto(BaseTelemetryPlugin2,_self,function(_self2){_self2.initialize=function(config,core,extensions3,pluginChain){_setDefaults(config,core,pluginChain);_isinitialized=true;};_self2.teardown=function(unloadCtx,unloadState){var core=_self2.core;if(!core||unloadCtx&&core!==unloadCtx.core()){return;}var result;var unloadDone=false;var theUnloadCtx=unloadCtx||createProcessTelemetryUnloadContext(null,core,_nextPlugin&&_nextPlugin[strGetPlugin]?_nextPlugin[strGetPlugin]():_nextPlugin);var theUnloadState=unloadState||{reason:0,isAsync:false};function _unloadCallback(){if(!unloadDone){unloadDone=true;_unloadHandlerContainer.run(theUnloadCtx,unloadState);arrForEach(_hooks,function(fn){fn.rm();});_hooks=[];if(result===true){theUnloadCtx.processNext(theUnloadState);}_initDefaults();}}if(!_self2[strDoTeardown]||_self2[strDoTeardown](theUnloadCtx,theUnloadState,_unloadCallback)!==true){_unloadCallback();}else{result=true;}return result;};_self2.update=function(updateCtx,updateState){var core=_self2.core;if(!core||updateCtx&&core!==updateCtx.core()){return;}var result;var updateDone=false;var theUpdateCtx=updateCtx||createProcessTelemetryUpdateContext(null,core,_nextPlugin&&_nextPlugin[strGetPlugin]?_nextPlugin[strGetPlugin]():_nextPlugin);var theUpdateState=updateState||{reason:0};function _updateCallback(){if(!updateDone){updateDone=true;_setDefaults(theUpdateCtx.getCfg(),theUpdateCtx.core(),theUpdateCtx.getNext());}}if(!_self2._doUpdate||_self2._doUpdate(theUpdateCtx,theUpdateState,_updateCallback)!==true){_updateCallback();}else{result=true;}return result;};_self2._addHook=function(hooks){if(hooks){if(isArray(hooks)){_hooks=_hooks.concat(hooks);}else{_hooks.push(hooks);}}};proxyFunctionAs(_self2,"_addUnloadCb",function(){return _unloadHandlerContainer;},"add");});_self.diagLog=function(itemCtx){return _getTelCtx(itemCtx).diagLog();};_self[strIsInitialized]=function(){return _isinitialized;};_self.setInitialized=function(isInitialized){_isinitialized=isInitialized;};_self[strSetNextPlugin]=function(next){_nextPlugin=next;};_self.processNext=function(env,itemCtx){if(itemCtx){itemCtx.processNext(env);}else if(_nextPlugin&&isFunction(_nextPlugin.processTelemetry)){_nextPlugin.processTelemetry(env,null);}};_self._getTelCtx=_getTelCtx;function _getTelCtx(currentCtx){if(currentCtx===void 0){currentCtx=null;}var itemCtx=currentCtx;if(!itemCtx){var rootCtx=_rootCtx||createProcessTelemetryContext(null,{},_self.core);if(_nextPlugin&&_nextPlugin[strGetPlugin]){itemCtx=rootCtx.createNew(null,_nextPlugin[strGetPlugin]);}else{itemCtx=rootCtx.createNew(null,_nextPlugin);}}return itemCtx;}function _setDefaults(config,core,pluginChain){if(config){setValue(config,strExtensionConfig,[],null,isNullOrUndefined);}if(!pluginChain&&core){pluginChain=core.getProcessTelContext().getNext();}var nextPlugin=_nextPlugin;if(_nextPlugin&&_nextPlugin[strGetPlugin]){nextPlugin=_nextPlugin[strGetPlugin]();}_self.core=core;_rootCtx=createProcessTelemetryContext(pluginChain,config,core,nextPlugin);}function _initDefaults(){_isinitialized=false;_self.core=null;_rootCtx=null;_nextPlugin=null;_hooks=[];_unloadHandlerContainer=createUnloadHandlerContainer();}}return BaseTelemetryPlugin2;}();var TelemetryInitializerPlugin=function(_super){__extendsFn(TelemetryInitializerPlugin2,_super);function TelemetryInitializerPlugin2(){var _this=_super.call(this)||this;_this.identifier="TelemetryInitializerPlugin";_this.priority=199;var _id;var _initializers;_initDefaults();dynamicProto(TelemetryInitializerPlugin2,_this,function(_self,_base){_self.addTelemetryInitializer=function(telemetryInitializer){var theInitializer={id:_id++,fn:telemetryInitializer};_initializers.push(theInitializer);var handler={remove:function remove(){arrForEach(_initializers,function(initializer,idx){if(initializer.id===theInitializer.id){_initializers.splice(idx,1);return-1;}});}};return handler;};_self.processTelemetry=function(item,itemCtx){var doNotSendItem=false;var telemetryInitializersCount=_initializers.length;for(var i=0;i<telemetryInitializersCount;++i){var telemetryInitializer=_initializers[i];if(telemetryInitializer){try{if(telemetryInitializer.fn.apply(null,[item])===false){doNotSendItem=true;break;}}catch(e){_throwInternal(itemCtx.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+getExceptionName(e),{exception:dumpObj(e)},true);}}}if(!doNotSendItem){_self.processNext(item,itemCtx);}};_self[strDoTeardown]=function(){_initDefaults();};});function _initDefaults(){_id=0;_initializers=[];}return _this;}return TelemetryInitializerPlugin2;}(BaseTelemetryPlugin);var strValidationError="Plugins must provide initialize method";var strNotificationManager="_notificationManager";var strSdkUnloadingError="SDK is still unloading...";var strSdkNotInitialized="SDK is not initialized";var defaultInitConfig={loggingLevelConsole:1};function _createPerfManager(core,notificationMgr){return new PerfManager(notificationMgr);}function _validateExtensions(logger,channelPriority,allExtensions){var coreExtensions=[];var extPriorities={};arrForEach(allExtensions,function(ext){if(isNullOrUndefined(ext)||isNullOrUndefined(ext.initialize)){throwError(strValidationError);}var extPriority=ext.priority;var identifier=ext.identifier;if(ext&&extPriority){if(!isNullOrUndefined(extPriorities[extPriority])){_warnToConsole(logger,"Two extensions have same priority #"+extPriority+" - "+extPriorities[extPriority]+", "+identifier);}else{extPriorities[extPriority]=identifier;}}if(!extPriority||extPriority<channelPriority){coreExtensions.push(ext);}});return{all:allExtensions,core:coreExtensions};}function _isPluginPresent(thePlugin,plugins){var exists=false;arrForEach(plugins,function(plugin){if(plugin===thePlugin){exists=true;return-1;}});return exists;}function _createDummyNotificationManager(){var _a;return objCreateFn((_a={},_a[strAddNotificationListener]=function(listener){},_a[strRemoveNotificationListener]=function(listener){},_a[strEventsSent]=function(events){},_a[strEventsDiscarded]=function(events,reason){},_a[strEventsSendRequest]=function(sendReason,isAsync){},_a));}var BaseCore=function(){function BaseCore2(){var _isInitialized;var _eventQueue;var _notificationManager;var _perfManager;var _cfgPerfManager;var _cookieManager;var _pluginChain;var _configExtensions;var _coreExtensions;var _channelControl;var _channelConfig;var _channelQueue;var _isUnloading;var _telemetryInitializerPlugin;var _internalLogsEventName;var _evtNamespace;var _unloadHandlers;var _debugListener2;var _traceCtx;var _internalLogPoller=0;dynamicProto(BaseCore2,this,function(_self){_initDefaults();_self.isInitialized=function(){return _isInitialized;};_self.initialize=function(config,extensions3,logger,notificationManager){if(_isUnloading){throwError(strSdkUnloadingError);}if(_self.isInitialized()){throwError("Core should not be initialized more than once");}if(!config||isNullOrUndefined(config.instrumentationKey)){throwError("Please provide instrumentation key");}_notificationManager=notificationManager;_self[strNotificationManager]=notificationManager;_self.config=config||{};_initDebugListener(config);_initPerfManager(config);config.extensions=isNullOrUndefined(config.extensions)?[]:config.extensions;_initExtConfig(config);if(logger){_self.logger=logger;}_configExtensions=[];_configExtensions.push.apply(_configExtensions,__spreadArrayFn(__spreadArrayFn([],extensions3,false),config.extensions));_channelConfig=(config||{}).channels;_initPluginChain(config,null);if(!_channelQueue||_channelQueue.length===0){throwError("No channels available");}_isInitialized=true;_self.releaseQueue();};_self.getTransmissionControls=function(){var controls=[];if(_channelQueue){arrForEach(_channelQueue,function(channels){controls.push(channels.queue);});}return objFreeze(controls);};_self.track=function(telemetryItem){setValue(telemetryItem,strIKey,_self.config.instrumentationKey,null,isNotTruthy);setValue(telemetryItem,"time",toISOString(new Date()),null,isNotTruthy);setValue(telemetryItem,"ver","4.0",null,isNullOrUndefined);if(!_isUnloading&&_self.isInitialized()){_createTelCtx().processNext(telemetryItem);}else{_eventQueue.push(telemetryItem);}};_self.getProcessTelContext=_createTelCtx;_self.getNotifyMgr=function(){if(!_notificationManager){_notificationManager=_createDummyNotificationManager();_self[strNotificationManager]=_notificationManager;}return _notificationManager;};_self[strAddNotificationListener]=function(listener){if(_notificationManager){_notificationManager[strAddNotificationListener](listener);}};_self[strRemoveNotificationListener]=function(listener){if(_notificationManager){_notificationManager[strRemoveNotificationListener](listener);}};_self.getCookieMgr=function(){if(!_cookieManager){_cookieManager=createCookieMgr(_self.config,_self.logger);}return _cookieManager;};_self.setCookieMgr=function(cookieMgr){_cookieManager=cookieMgr;};_self.getPerfMgr=function(){if(!_perfManager&&!_cfgPerfManager){if(_self.config&&_self.config.enablePerfMgr&&isFunction(_self.config.createPerfMgr)){_cfgPerfManager=_self.config.createPerfMgr(_self,_self.getNotifyMgr());}}return _perfManager||_cfgPerfManager||getGblPerfMgr();};_self.setPerfMgr=function(perfMgr){_perfManager=perfMgr;};_self.eventCnt=function(){return _eventQueue.length;};_self.releaseQueue=function(){if(_isInitialized&&_eventQueue.length>0){var eventQueue=_eventQueue;_eventQueue=[];arrForEach(eventQueue,function(event){_createTelCtx().processNext(event);});}};_self.pollInternalLogs=function(eventName){_internalLogsEventName=eventName||null;var interval=_self.config.diagnosticLogInterval;if(!interval||!(interval>0)){interval=1e4;}if(_internalLogPoller){clearInterval(_internalLogPoller);}_internalLogPoller=setInterval(function(){_flushInternalLogs();},interval);return _internalLogPoller;};_self.stopPollingInternalLogs=function(){if(_internalLogPoller){clearInterval(_internalLogPoller);_internalLogPoller=0;_flushInternalLogs();}};proxyFunctions(_self,function(){return _telemetryInitializerPlugin;},["addTelemetryInitializer"]);_self.unload=function(isAsync,unloadComplete,cbTimeout){if(isAsync===void 0){isAsync=true;}if(!_isInitialized){throwError(strSdkNotInitialized);}if(_isUnloading){throwError(strSdkUnloadingError);}var unloadState={reason:50,isAsync:isAsync,flushComplete:false};var processUnloadCtx=createProcessTelemetryUnloadContext(_getPluginChain(),_self);processUnloadCtx.onComplete(function(){_initDefaults();unloadComplete&&unloadComplete(unloadState);},_self);function _doUnload(flushComplete){unloadState.flushComplete=flushComplete;_isUnloading=true;_unloadHandlers.run(processUnloadCtx,unloadState);_self.stopPollingInternalLogs();processUnloadCtx.processNext(unloadState);}if(!_flushChannels(isAsync,_doUnload,6,cbTimeout)){_doUnload(false);}};_self.getPlugin=_getPlugin;_self.addPlugin=function(plugin,replaceExisting,isAsync,addCb){if(!plugin){addCb&&addCb(false);_logOrThrowError(strValidationError);return;}var existingPlugin=_getPlugin(plugin.identifier);if(existingPlugin&&!replaceExisting){addCb&&addCb(false);_logOrThrowError("Plugin ["+plugin.identifier+"] is already loaded!");return;}var updateState={reason:16};function _addPlugin(removed){_configExtensions.push(plugin);updateState.added=[plugin];_initPluginChain(_self.config,updateState);addCb&&addCb(true);}if(existingPlugin){var removedPlugins_1=[existingPlugin.plugin];var unloadState={reason:2,isAsync:!!isAsync};_removePlugins(removedPlugins_1,unloadState,function(removed){if(!removed){addCb&&addCb(false);}else{updateState.removed=removedPlugins_1;updateState.reason|=32;_addPlugin();}});}else{_addPlugin();}};_self.evtNamespace=function(){return _evtNamespace;};_self.flush=_flushChannels;_self.getTraceCtx=function(createNew){if(!_traceCtx){_traceCtx=createDistributedTraceContext();}return _traceCtx;};_self.setTraceCtx=function(traceCtx){_traceCtx=traceCtx||null;};proxyFunctionAs(_self,"addUnloadCb",function(){return _unloadHandlers;},"add");function _initDefaults(){_isInitialized=false;_self.config=objExtend(true,{},defaultInitConfig);_self.logger=new DiagnosticLogger(_self.config);_self._extensions=[];_telemetryInitializerPlugin=new TelemetryInitializerPlugin();_eventQueue=[];_notificationManager=null;_perfManager=null;_cfgPerfManager=null;_cookieManager=null;_pluginChain=null;_coreExtensions=null;_configExtensions=[];_channelControl=null;_channelConfig=null;_channelQueue=null;_isUnloading=false;_internalLogsEventName=null;_evtNamespace=createUniqueNamespace("AIBaseCore",true);_unloadHandlers=createUnloadHandlerContainer();_traceCtx=null;}function _createTelCtx(){return createProcessTelemetryContext(_getPluginChain(),_self.config,_self);}function _initPluginChain(config,updateState){var theExtensions=_validateExtensions(_self.logger,ChannelControllerPriority,_configExtensions);_coreExtensions=theExtensions.core;_pluginChain=null;var allExtensions=theExtensions.all;_channelQueue=objFreeze(createChannelQueues(_channelConfig,allExtensions,config,_self));if(_channelControl){var idx=arrIndexOf(allExtensions,_channelControl);if(idx!==-1){allExtensions.splice(idx,1);}idx=arrIndexOf(_coreExtensions,_channelControl);if(idx!==-1){_coreExtensions.splice(idx,1);}_channelControl._setQueue(_channelQueue);}else{_channelControl=createChannelControllerPlugin(_channelQueue,_self);}allExtensions.push(_channelControl);_coreExtensions.push(_channelControl);_self._extensions=sortPlugins(allExtensions);_channelControl.initialize(config,_self,allExtensions);initializePlugins(_createTelCtx(),allExtensions);_self._extensions=objFreeze(sortPlugins(_coreExtensions||[])).slice();if(updateState){_doUpdate(updateState);}}function _getPlugin(pluginIdentifier){var theExt=null;var thePlugin=null;arrForEach(_self._extensions,function(ext){if(ext.identifier===pluginIdentifier&&ext!==_channelControl&&ext!==_telemetryInitializerPlugin){thePlugin=ext;return-1;}});if(!thePlugin&&_channelControl){thePlugin=_channelControl.getChannel(pluginIdentifier);}if(thePlugin){theExt={plugin:thePlugin,setEnabled:function setEnabled(enabled){_getPluginState(thePlugin)[strDisabled]=!enabled;},isEnabled:function isEnabled(){var pluginState=_getPluginState(thePlugin);return!pluginState[strTeardown]&&!pluginState[strDisabled];},remove:function remove(isAsync,removeCb){if(isAsync===void 0){isAsync=true;}var pluginsToRemove=[thePlugin];var unloadState={reason:1,isAsync:isAsync};_removePlugins(pluginsToRemove,unloadState,function(removed){if(removed){_initPluginChain(_self.config,{reason:32,removed:pluginsToRemove});}removeCb&&removeCb(removed);});}};}return theExt;}function _getPluginChain(){if(!_pluginChain){var extensions3=(_coreExtensions||[]).slice();if(arrIndexOf(extensions3,_telemetryInitializerPlugin)===-1){extensions3.push(_telemetryInitializerPlugin);}_pluginChain=createTelemetryProxyChain(sortPlugins(extensions3),_self.config,_self);}return _pluginChain;}function _removePlugins(thePlugins,unloadState,removeComplete){if(thePlugins&&thePlugins.length>0){var unloadChain=createTelemetryProxyChain(thePlugins,_self.config,_self);var unloadCtx=createProcessTelemetryUnloadContext(unloadChain,_self);unloadCtx.onComplete(function(){var removed=false;var newConfigExtensions=[];arrForEach(_configExtensions,function(plugin,idx){if(!_isPluginPresent(plugin,thePlugins)){newConfigExtensions.push(plugin);}else{removed=true;}});_configExtensions=newConfigExtensions;var newChannelConfig=[];if(_channelConfig){arrForEach(_channelConfig,function(queue,idx){var newQueue=[];arrForEach(queue,function(channel){if(!_isPluginPresent(channel,thePlugins)){newQueue.push(channel);}else{removed=true;}});newChannelConfig.push(newQueue);});_channelConfig=newChannelConfig;}removeComplete&&removeComplete(removed);});unloadCtx.processNext(unloadState);}else{removeComplete(false);}}function _flushInternalLogs(){var queue=_self.logger?_self.logger.queue:[];if(queue){arrForEach(queue,function(logMessage){var item={name:_internalLogsEventName?_internalLogsEventName:"InternalMessageId: "+logMessage.messageId,iKey:_self.config.instrumentationKey,time:toISOString(new Date()),baseType:_InternalLogMessage.dataType,baseData:{message:logMessage.message}};_self.track(item);});queue.length=0;}}function _flushChannels(isAsync,callBack,sendReason,cbTimeout){if(_channelControl){return _channelControl.flush(isAsync,callBack,sendReason||6,cbTimeout);}callBack&&callBack(false);return true;}function _initDebugListener(config){if(config.disableDbgExt===true&&_debugListener2){_notificationManager[strRemoveNotificationListener](_debugListener2);_debugListener2=null;}if(_notificationManager&&!_debugListener2&&config.disableDbgExt!==true){_debugListener2=getDebugListener(config);_notificationManager[strAddNotificationListener](_debugListener2);}}function _initPerfManager(config){if(!config.enablePerfMgr&&_cfgPerfManager){_cfgPerfManager=null;}if(config.enablePerfMgr){setValue(_self.config,"createPerfMgr",_createPerfManager);}}function _initExtConfig(config){var extConfig=getSetValue(config,strExtensionConfig);extConfig.NotificationManager=_notificationManager;}function _doUpdate(updateState){var updateCtx=createProcessTelemetryUpdateContext(_getPluginChain(),_self);if(!_self._updateHook||_self._updateHook(updateCtx,updateState)!==true){updateCtx.processNext(updateState);}}function _logOrThrowError(message){var logger=_self.logger;if(logger){_throwInternal(logger,2,73,message);}else{throwError(message);}}});}return BaseCore2;}();function _runListeners(listeners,name,isAsync,callback){arrForEach(listeners,function(listener){if(listener&&listener[name]){if(isAsync){setTimeout(function(){return callback(listener);},0);}else{try{callback(listener);}catch(e){}}}});}var NotificationManager=function(){function NotificationManager2(config){this.listeners=[];var perfEvtsSendAll=!!(config||{}).perfEvtsSendAll;dynamicProto(NotificationManager2,this,function(_self){_self[strAddNotificationListener]=function(listener){_self.listeners.push(listener);};_self[strRemoveNotificationListener]=function(listener){var index=arrIndexOf(_self.listeners,listener);while(index>-1){_self.listeners.splice(index,1);index=arrIndexOf(_self.listeners,listener);}};_self[strEventsSent]=function(events){_runListeners(_self.listeners,strEventsSent,true,function(listener){listener[strEventsSent](events);});};_self[strEventsDiscarded]=function(events,reason){_runListeners(_self.listeners,strEventsDiscarded,true,function(listener){listener[strEventsDiscarded](events,reason);});};_self[strEventsSendRequest]=function(sendReason,isAsync){_runListeners(_self.listeners,strEventsSendRequest,isAsync,function(listener){listener[strEventsSendRequest](sendReason,isAsync);});};_self[strPerfEvent]=function(perfEvent){if(perfEvent){if(perfEvtsSendAll||!perfEvent.isChildEvt()){_runListeners(_self.listeners,strPerfEvent,false,function(listener){if(perfEvent.isAsync){setTimeout(function(){return listener[strPerfEvent](perfEvent);},0);}else{listener[strPerfEvent](perfEvent);}});}}};});}return NotificationManager2;}();var AppInsightsCore=function(_super){__extendsFn(AppInsightsCore2,_super);function AppInsightsCore2(){var _this=_super.call(this)||this;dynamicProto(AppInsightsCore2,_this,function(_self,_base){_self.initialize=function(config,extensions3,logger,notificationManager){_base.initialize(config,extensions3,logger||new DiagnosticLogger(config),notificationManager||new NotificationManager(config));};_self.track=function(telemetryItem){doPerf(_self.getPerfMgr(),function(){return"AppInsightsCore:track";},function(){if(telemetryItem===null){_notifyInvalidEvent(telemetryItem);throwError("Invalid telemetry item");}_validateTelemetryItem(telemetryItem);_base.track(telemetryItem);},function(){return{item:telemetryItem};},!telemetryItem.sync);};function _validateTelemetryItem(telemetryItem){if(isNullOrUndefined(telemetryItem.name)){_notifyInvalidEvent(telemetryItem);throwError("telemetry name required");}}function _notifyInvalidEvent(telemetryItem){var manager=_self.getNotifyMgr();if(manager){manager.eventsDiscarded([telemetryItem],2);}}});return _this;}return AppInsightsCore2;}(BaseCore);var LoggingSeverity=createEnumStyle({CRITICAL:1,WARNING:2});var _InternalMessageId=createEnumStyle({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106});var aiInstrumentHooks="_aiHooks";var cbNames=["req","rsp","hkErr","fnErr"];function _arrLoop(arr,fn){if(arr){for(var lp=0;lp<arr.length;lp++){if(fn(arr[lp],lp)){break;}}}}function _doCallbacks(hooks,callDetails,cbArgs,hookCtx,type){if(type>=0&&type<=2){_arrLoop(hooks,function(hook,idx){var cbks=hook.cbks;var cb=cbks[cbNames[type]];if(cb){callDetails.ctx=function(){var ctx=hookCtx[idx]=hookCtx[idx]||{};return ctx;};try{cb.apply(callDetails.inst,cbArgs);}catch(err){var orgEx=callDetails.err;try{var hookErrorCb=cbks[cbNames[2]];if(hookErrorCb){callDetails.err=err;hookErrorCb.apply(callDetails.inst,cbArgs);}}catch(e){}finally{callDetails.err=orgEx;}}}});}}function _createFunctionHook(aiHook){return function(){var funcThis=this;var orgArgs=arguments;var hooks=aiHook.h;var funcArgs={name:aiHook.n,inst:funcThis,ctx:null,set:_replaceArg};var hookCtx=[];var cbArgs=_createArgs([funcArgs],orgArgs);funcArgs.evt=getGlobalInst("event");function _createArgs(target,theArgs){_arrLoop(theArgs,function(arg){target.push(arg);});return target;}function _replaceArg(idx,value){orgArgs=_createArgs([],orgArgs);orgArgs[idx]=value;cbArgs=_createArgs([funcArgs],orgArgs);}_doCallbacks(hooks,funcArgs,cbArgs,hookCtx,0);var theFunc=aiHook.f;if(theFunc){try{funcArgs.rslt=theFunc.apply(funcThis,orgArgs);}catch(err){funcArgs.err=err;_doCallbacks(hooks,funcArgs,cbArgs,hookCtx,3);throw err;}}_doCallbacks(hooks,funcArgs,cbArgs,hookCtx,1);return funcArgs.rslt;};}function _getOwner(target,name,checkPrototype){var owner=null;if(target){if(hasOwnProperty(target,name)){owner=target;}else if(checkPrototype){owner=_getOwner(_getObjProto$1(target),name,false);}}return owner;}function InstrumentProto(target,funcName,callbacks){if(target){return InstrumentFunc(target[strShimPrototype],funcName,callbacks,false);}return null;}function InstrumentProtos(target,funcNames,callbacks){if(target){return InstrumentFuncs(target[strShimPrototype],funcNames,callbacks,false);}return null;}function _createInstrumentHook(owner,funcName,fn,callbacks){var aiHook=fn&&fn[aiInstrumentHooks];if(!aiHook){aiHook={i:0,n:funcName,f:fn,h:[]};var newFunc=_createFunctionHook(aiHook);newFunc[aiInstrumentHooks]=aiHook;owner[funcName]=newFunc;}var theHook={id:aiHook.i,cbks:callbacks,rm:function rm(){var id=this.id;_arrLoop(aiHook.h,function(hook,idx){if(hook.id===id){aiHook.h.splice(idx,1);return 1;}});}};aiHook.i++;aiHook.h.push(theHook);return theHook;}function InstrumentFunc(target,funcName,callbacks,checkPrototype){if(checkPrototype===void 0){checkPrototype=true;}if(target&&funcName&&callbacks){var owner=_getOwner(target,funcName,checkPrototype);if(owner){var fn=owner[funcName];if(_typeof(fn)===strShimFunction){return _createInstrumentHook(owner,funcName,fn,callbacks);}}}return null;}function InstrumentFuncs(target,funcNames,callbacks,checkPrototype){if(checkPrototype===void 0){checkPrototype=true;}var hooks=null;_arrLoop(funcNames,function(funcName){var hook=InstrumentFunc(target,funcName,callbacks,checkPrototype);if(hook){if(!hooks){hooks=[];}hooks.push(hook);}});return hooks;}function InstrumentEvent(target,evtName,callbacks,checkPrototype){if(target&&evtName&&callbacks){var owner=_getOwner(target,evtName,checkPrototype)||target;if(owner){return _createInstrumentHook(owner,evtName,owner[evtName],callbacks);}}return null;}exports2.AppInsightsCore=AppInsightsCore;exports2.BaseCore=BaseCore;exports2.BaseTelemetryPlugin=BaseTelemetryPlugin;exports2.CoreUtils=CoreUtils;exports2.DiagnosticLogger=DiagnosticLogger;exports2.EventHelper=EventHelper;exports2.EventsDiscardedReason=EventsDiscardedReason;exports2.InstrumentEvent=InstrumentEvent;exports2.InstrumentFunc=InstrumentFunc;exports2.InstrumentFuncs=InstrumentFuncs;exports2.InstrumentProto=InstrumentProto;exports2.InstrumentProtos=InstrumentProtos;exports2.LoggingSeverity=LoggingSeverity;exports2.MinChannelPriorty=MinChannelPriorty;exports2.NotificationManager=NotificationManager;exports2.PerfEvent=PerfEvent;exports2.PerfManager=PerfManager;exports2.ProcessTelemetryContext=ProcessTelemetryContext;exports2.Undefined=Undefined;exports2._InternalLogMessage=_InternalLogMessage;exports2._InternalMessageId=_InternalMessageId;exports2.__getRegisteredEvents=__getRegisteredEvents;exports2._legacyCookieMgr=_legacyCookieMgr;exports2._logInternalMessage=_logInternalMessage;exports2._throwInternal=_throwInternal;exports2._warnToConsole=_warnToConsole;exports2.addEventHandler=addEventHandler;exports2.addEventListeners=addEventListeners;exports2.addPageHideEventListener=addPageHideEventListener;exports2.addPageShowEventListener=addPageShowEventListener;exports2.addPageUnloadEventListener=addPageUnloadEventListener;exports2.areCookiesSupported=areCookiesSupported;exports2.arrForEach=arrForEach;exports2.arrIndexOf=arrIndexOf;exports2.arrMap=arrMap;exports2.arrReduce=arrReduce;exports2.attachEvent=attachEvent;exports2.canUseCookies=canUseCookies;exports2.createClassFromInterface=createClassFromInterface;exports2.createCookieMgr=createCookieMgr;exports2.createEnumMap=createEnumMap;exports2.createEnumStyle=createEnumStyle;exports2.createProcessTelemetryContext=createProcessTelemetryContext;exports2.createTraceParent=createTraceParent;exports2.createUniqueNamespace=createUniqueNamespace;exports2.createUnloadHandlerContainer=createUnloadHandlerContainer;exports2.createValueMap=createValueMap;exports2.dateNow=dateNow;exports2.deepFreeze=deepFreeze;exports2.deleteCookie=deleteCookie;exports2.detachEvent=detachEvent;exports2.disableCookies=disableCookies;exports2.doPerf=doPerf;exports2.dumpObj=dumpObj;exports2.eventOff=eventOff;exports2.eventOn=eventOn;exports2.findMetaTag=findMetaTag;exports2.findNamedServerTiming=findNamedServerTiming;exports2.findW3cTraceParent=findW3cTraceParent;exports2.formatTraceParent=formatTraceParent;exports2.generateW3CId=generateW3CId;exports2.getConsole=getConsole;exports2.getCookie=getCookie;exports2.getCrypto=getCrypto;exports2.getDebugExt=getDebugExt;exports2.getDebugListener=getDebugListener;exports2.getDocument=getDocument;exports2.getExceptionName=getExceptionName;exports2.getGblPerfMgr=getGblPerfMgr;exports2.getGlobal=getGlobal;exports2.getGlobalInst=getGlobalInst;exports2.getHistory=getHistory;exports2.getIEVersion=getIEVersion;exports2.getJSON=getJSON;exports2.getLocation=getLocation;exports2.getMsCrypto=getMsCrypto;exports2.getNavigator=getNavigator;exports2.getPerformance=getPerformance;exports2.getSetValue=getSetValue;exports2.getWindow=getWindow;exports2.hasDocument=hasDocument;exports2.hasHistory=hasHistory;exports2.hasJSON=hasJSON;exports2.hasNavigator=hasNavigator;exports2.hasOwnProperty=hasOwnProperty;exports2.hasWindow=hasWindow;exports2.initializePlugins=initializePlugins;exports2.isArray=isArray;exports2.isBeaconsSupported=isBeaconsSupported;exports2.isBoolean=isBoolean;exports2.isDate=isDate;exports2.isError=isError;exports2.isFetchSupported=isFetchSupported;exports2.isFunction=isFunction;exports2.isIE=isIE;exports2.isNotNullOrUndefined=isNotNullOrUndefined;exports2.isNotTruthy=isNotTruthy;exports2.isNotUndefined=isNotUndefined;exports2.isNullOrUndefined=isNullOrUndefined;exports2.isNumber=isNumber;exports2.isObject=isObject;exports2.isReactNative=isReactNative;exports2.isSafari=isSafari;exports2.isSampledFlag=isSampledFlag;exports2.isString=isString;exports2.isSymbol=isSymbol;exports2.isTruthy=isTruthy;exports2.isTypeof=isTypeof;exports2.isUndefined=isUndefined;exports2.isValidSpanId=isValidSpanId;exports2.isValidTraceId=isValidTraceId;exports2.isValidTraceParent=isValidTraceParent;exports2.isXhrSupported=isXhrSupported;exports2.mergeEvtNamespace=mergeEvtNamespace;exports2.mwcRandom32=mwcRandom32;exports2.mwcRandomSeed=mwcRandomSeed;exports2.newGuid=newGuid;exports2.newId=newId;exports2.normalizeJsName=normalizeJsName;exports2.objCreate=objCreateFn;exports2.objDefineAccessors=objDefineAccessors;exports2.objExtend=objExtend;exports2.objForEachKey=objForEachKey;exports2.objFreeze=objFreeze;exports2.objKeys=objKeys;exports2.objSeal=objSeal;exports2.objToString=objToString;exports2.optimizeObject=optimizeObject;exports2.parseTraceParent=parseTraceParent;exports2.perfNow=perfNow;exports2.proxyAssign=proxyAssign;exports2.proxyFunctionAs=proxyFunctionAs;exports2.proxyFunctions=proxyFunctions;exports2.random32=random32;exports2.randomValue=randomValue;exports2.removeEventHandler=removeEventHandler;exports2.removeEventListeners=removeEventListeners;exports2.removePageHideEventListener=removePageHideEventListener;exports2.removePageShowEventListener=removePageShowEventListener;exports2.removePageUnloadEventListener=removePageUnloadEventListener;exports2.safeGetCookieMgr=safeGetCookieMgr;exports2.safeGetLogger=safeGetLogger;exports2.setCookie=setCookie;exports2.setEnableEnvMocks=setEnableEnvMocks;exports2.setGblPerfMgr=setGblPerfMgr;exports2.setValue=setValue;exports2.sortPlugins=sortPlugins;exports2.strContains=strContains;exports2.strEndsWith=strEndsWith;exports2.strFunction=strShimFunction;exports2.strObject=strShimObject;exports2.strPrototype=strShimPrototype;exports2.strStartsWith=strStartsWith;exports2.strTrim=strTrim;exports2.strUndefined=strShimUndefined;exports2.throwError=throwError;exports2.toISOString=toISOString;exports2.uaDisallowsSameSiteNone=uaDisallowsSameSiteNone;exports2.unloadComponents=unloadComponents;exports2.useXDomainRequest=useXDomainRequest;(function(obj,prop,descriptor){var func=Object["defineProperty"];if(func){try{return func(obj,prop,descriptor);}catch(e){}}if(descriptor&&_typeof(descriptor.value)!==void 0){obj[prop]=descriptor.value;}return obj;})(exports2,"__esModule",{value:true});});}});// client/node_modules/@microsoft/dynamicproto-js/lib/dist/node/dynamicproto-js.js
var require_dynamicproto_js=__commonJS({"client/node_modules/@microsoft/dynamicproto-js/lib/dist/node/dynamicproto-js.js":function clientNode_modulesMicrosoftDynamicprotoJsLibDistNodeDynamicprotoJsJs(exports,module2){(function(global2,factory){_typeof(exports)==="object"&&typeof module2!=="undefined"?module2.exports=factory():typeof define==="function"&&define.amd?define(factory):(global2=typeof globalThis!=="undefined"?globalThis:global2||self,global2.Microsoft=global2.Microsoft||{},global2.Microsoft["DynamicProto-JS"]=factory());})(exports,function(){"use strict";var Constructor="constructor";var Prototype="prototype";var strFunction="function";var DynInstFuncTable="_dynInstFuncs";var DynProxyTag="_isDynProxy";var DynClassName="_dynClass";var DynClassNamePrefix="_dynCls$";var DynInstChkTag="_dynInstChk";var DynAllowInstChkTag=DynInstChkTag;var DynProtoDefaultOptions="_dfOpts";var UnknownValue="_unknown_";var str__Proto="__proto__";var DynProtoBaseProto="_dyn"+str__Proto;var DynProtoCurrent="_dynInstProto";var strUseBaseInst="useBaseInst";var strSetInstFuncs="setInstFuncs";var Obj=Object;var _objGetPrototypeOf=Obj["getPrototypeOf"];var _objGetOwnProps=Obj["getOwnPropertyNames"];var _dynamicNames=0;function _hasOwnProperty(obj,prop){return obj&&Obj[Prototype].hasOwnProperty.call(obj,prop);}function _isObjectOrArrayPrototype(target){return target&&(target===Obj[Prototype]||target===Array[Prototype]);}function _isObjectArrayOrFunctionPrototype(target){return _isObjectOrArrayPrototype(target)||target===Function[Prototype];}function _getObjProto(target){var newProto;if(target){if(_objGetPrototypeOf){return _objGetPrototypeOf(target);}var curProto=target[str__Proto]||target[Prototype]||(target[Constructor]?target[Constructor][Prototype]:null);newProto=target[DynProtoBaseProto]||curProto;if(!_hasOwnProperty(target,DynProtoBaseProto)){delete target[DynProtoCurrent];newProto=target[DynProtoBaseProto]=target[DynProtoCurrent]||target[DynProtoBaseProto];target[DynProtoCurrent]=curProto;}}return newProto;}function _forEachProp(target,func){var props=[];if(_objGetOwnProps){props=_objGetOwnProps(target);}else{for(var name_1 in target){if(typeof name_1==="string"&&_hasOwnProperty(target,name_1)){props.push(name_1);}}}if(props&&props.length>0){for(var lp=0;lp<props.length;lp++){func(props[lp]);}}}function _isDynamicCandidate(target,funcName,skipOwn){return funcName!==Constructor&&_typeof(target[funcName])===strFunction&&(skipOwn||_hasOwnProperty(target,funcName));}function _throwTypeError(message){throw new TypeError("DynamicProto: "+message);}function _getInstanceFuncs(thisTarget){var instFuncs={};_forEachProp(thisTarget,function(name){if(!instFuncs[name]&&_isDynamicCandidate(thisTarget,name,false)){instFuncs[name]=thisTarget[name];}});return instFuncs;}function _hasVisited(values,value){for(var lp=values.length-1;lp>=0;lp--){if(values[lp]===value){return true;}}return false;}function _getBaseFuncs(classProto,thisTarget,instFuncs,useBaseInst){function _instFuncProxy(target,funcHost,funcName){var theFunc=funcHost[funcName];if(theFunc[DynProxyTag]&&useBaseInst){var instFuncTable=target[DynInstFuncTable]||{};if(instFuncTable[DynAllowInstChkTag]!==false){theFunc=(instFuncTable[funcHost[DynClassName]]||{})[funcName]||theFunc;}}return function(){return theFunc.apply(target,arguments);};}var baseFuncs={};_forEachProp(instFuncs,function(name){baseFuncs[name]=_instFuncProxy(thisTarget,instFuncs,name);});var baseProto=_getObjProto(classProto);var visited=[];while(baseProto&&!_isObjectArrayOrFunctionPrototype(baseProto)&&!_hasVisited(visited,baseProto)){_forEachProp(baseProto,function(name){if(!baseFuncs[name]&&_isDynamicCandidate(baseProto,name,!_objGetPrototypeOf)){baseFuncs[name]=_instFuncProxy(thisTarget,baseProto,name);}});visited.push(baseProto);baseProto=_getObjProto(baseProto);}return baseFuncs;}function _getInstFunc(target,funcName,proto,currentDynProtoProxy){var instFunc=null;if(target&&_hasOwnProperty(proto,DynClassName)){var instFuncTable=target[DynInstFuncTable]||{};instFunc=(instFuncTable[proto[DynClassName]]||{})[funcName];if(!instFunc){_throwTypeError("Missing ["+funcName+"] "+strFunction);}if(!instFunc[DynInstChkTag]&&instFuncTable[DynAllowInstChkTag]!==false){var canAddInst=!_hasOwnProperty(target,funcName);var objProto=_getObjProto(target);var visited=[];while(canAddInst&&objProto&&!_isObjectArrayOrFunctionPrototype(objProto)&&!_hasVisited(visited,objProto)){var protoFunc=objProto[funcName];if(protoFunc){canAddInst=protoFunc===currentDynProtoProxy;break;}visited.push(objProto);objProto=_getObjProto(objProto);}try{if(canAddInst){target[funcName]=instFunc;}instFunc[DynInstChkTag]=1;}catch(e){instFuncTable[DynAllowInstChkTag]=false;}}}return instFunc;}function _getProtoFunc(funcName,proto,currentDynProtoProxy){var protoFunc=proto[funcName];if(protoFunc===currentDynProtoProxy){protoFunc=_getObjProto(proto)[funcName];}if(_typeof(protoFunc)!==strFunction){_throwTypeError("["+funcName+"] is not a "+strFunction);}return protoFunc;}function _populatePrototype(proto,className,target,baseInstFuncs,setInstanceFunc){function _createDynamicPrototype(proto2,funcName){var dynProtoProxy=function dynProtoProxy(){var instFunc=_getInstFunc(this,funcName,proto2,dynProtoProxy)||_getProtoFunc(funcName,proto2,dynProtoProxy);return instFunc.apply(this,arguments);};dynProtoProxy[DynProxyTag]=1;return dynProtoProxy;}if(!_isObjectOrArrayPrototype(proto)){var instFuncTable=target[DynInstFuncTable]=target[DynInstFuncTable]||{};var instFuncs_1=instFuncTable[className]=instFuncTable[className]||{};if(instFuncTable[DynAllowInstChkTag]!==false){instFuncTable[DynAllowInstChkTag]=!!setInstanceFunc;}_forEachProp(target,function(name){if(_isDynamicCandidate(target,name,false)&&target[name]!==baseInstFuncs[name]){instFuncs_1[name]=target[name];delete target[name];if(!_hasOwnProperty(proto,name)||proto[name]&&!proto[name][DynProxyTag]){proto[name]=_createDynamicPrototype(proto,name);}}});}}function _checkPrototype(classProto,thisTarget){if(_objGetPrototypeOf){var visited=[];var thisProto=_getObjProto(thisTarget);while(thisProto&&!_isObjectArrayOrFunctionPrototype(thisProto)&&!_hasVisited(visited,thisProto)){if(thisProto===classProto){return true;}visited.push(thisProto);thisProto=_getObjProto(thisProto);}return false;}return true;}function _getObjName(target,unknownValue){if(_hasOwnProperty(target,Prototype)){return target.name||unknownValue||UnknownValue;}return((target||{})[Constructor]||{}).name||unknownValue||UnknownValue;}function dynamicProto(theClass,target,delegateFunc,options){if(!_hasOwnProperty(theClass,Prototype)){_throwTypeError("theClass is an invalid class definition.");}var classProto=theClass[Prototype];if(!_checkPrototype(classProto,target)){_throwTypeError("["+_getObjName(theClass)+"] is not in class hierarchy of ["+_getObjName(target)+"]");}var className=null;if(_hasOwnProperty(classProto,DynClassName)){className=classProto[DynClassName];}else{className=DynClassNamePrefix+_getObjName(theClass,"_")+"$"+_dynamicNames;_dynamicNames++;classProto[DynClassName]=className;}var perfOptions=dynamicProto[DynProtoDefaultOptions];var useBaseInst=!!perfOptions[strUseBaseInst];if(useBaseInst&&options&&options[strUseBaseInst]!==void 0){useBaseInst=!!options[strUseBaseInst];}var instFuncs=_getInstanceFuncs(target);var baseFuncs=_getBaseFuncs(classProto,target,instFuncs,useBaseInst);delegateFunc(target,baseFuncs);var setInstanceFunc=!!_objGetPrototypeOf&&!!perfOptions[strSetInstFuncs];if(setInstanceFunc&&options){setInstanceFunc=!!options[strSetInstFuncs];}_populatePrototype(classProto,className,target,instFuncs,setInstanceFunc!==false);}var perfDefaults={setInstFuncs:true,useBaseInst:true};dynamicProto[DynProtoDefaultOptions]=perfDefaults;return dynamicProto;});}});// client/node_modules/@microsoft/1ds-core-js/dist/ms.core.js
var require_ms_core=__commonJS({"client/node_modules/@microsoft/1ds-core-js/dist/ms.core.js":function clientNode_modulesMicrosoft1dsCoreJsDistMsCoreJs(exports,module2){(function(global2,factory){_typeof(exports)==="object"&&typeof module2!=="undefined"?factory(exports,require_applicationinsights_shims(),require_applicationinsights_core_js(),require_dynamicproto_js()):typeof define==="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/applicationinsights-core-js","@microsoft/dynamicproto-js"],factory):(global2=typeof globalThis!=="undefined"?globalThis:global2||self,factory(global2.oneDS=global2.oneDS||{},global2.applicationinsightsShims,global2.applicationinsightsCoreJs,global2.dynamicProto));})(exports,function(exports2,applicationinsightsShims,applicationinsightsCoreJs,dynamicProto){"use strict";function _interopDefaultLegacy(e){return e&&_typeof(e)==="object"&&"default"in e?e["default"]:e;}var dynamicProto__default=/* @__PURE__ */_interopDefaultLegacy(dynamicProto);var ValueKind=applicationinsightsCoreJs.createEnumStyle({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32});var EventLatency=applicationinsightsCoreJs.createEnumStyle({Normal:1,CostDeferred:2,RealTime:3,Immediate:4});var EventPropertyType=applicationinsightsCoreJs.createEnumStyle({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9});var EventPersistence=applicationinsightsCoreJs.createEnumStyle({Normal:1,Critical:2});var TraceLevel=applicationinsightsCoreJs.createEnumStyle({NONE:0,ERROR:1,WARNING:2,INFORMATION:3});var _ExtendedInternalMessageId=applicationinsightsCoreJs.objFreeze(applicationinsightsShims.__assignFn(applicationinsightsShims.__assignFn({},applicationinsightsCoreJs._InternalMessageId),applicationinsightsCoreJs.createEnumStyle({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})));var _a;var Version="3.2.3";var FullVersionString="1DS-Web-JS-"+Version;var strDisabledPropertyName="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";var strWithCredentials="withCredentials";var strTimeout="timeout";var _fieldTypeEventPropMap=(_a={},_a[0]=0,_a[2]=6,_a[1]=1,_a[3]=7,_a[4096|2]=6,_a[4096|1]=1,_a[4096|3]=7,_a);var uInt8ArraySupported=null;var isDocumentObjectAvailable=Boolean(applicationinsightsCoreJs.getDocument());var isWindowObjectAvailable=Boolean(applicationinsightsCoreJs.getWindow());function isValueAssigned(value){return!(value===""||applicationinsightsCoreJs.isNullOrUndefined(value));}function getTenantId(apiKey){if(apiKey){var indexTenantId=apiKey.indexOf("-");if(indexTenantId>-1){return apiKey.substring(0,indexTenantId);}}return"";}function isUint8ArrayAvailable(){if(uInt8ArraySupported===null){uInt8ArraySupported=!applicationinsightsCoreJs.isUndefined(Uint8Array)&&!isSafariOrFirefox()&&!applicationinsightsCoreJs.isReactNative();}return uInt8ArraySupported;}function isLatency(value){if(value&&applicationinsightsCoreJs.isNumber(value)&&value>=1&&value<=4){return true;}return false;}function sanitizeProperty(name,property,stringifyObjects){if(!property&&!isValueAssigned(property)||typeof name!=="string"){return null;}var propType=_typeof(property);if(propType==="string"||propType==="number"||propType==="boolean"||applicationinsightsCoreJs.isArray(property)){property={value:property};}else if(propType==="object"&&!property.hasOwnProperty("value")){property={value:stringifyObjects?JSON.stringify(property):property};}else if(applicationinsightsCoreJs.isNullOrUndefined(property.value)||property.value===""||!applicationinsightsCoreJs.isString(property.value)&&!applicationinsightsCoreJs.isNumber(property.value)&&!applicationinsightsCoreJs.isBoolean(property.value)&&!applicationinsightsCoreJs.isArray(property.value)){return null;}if(applicationinsightsCoreJs.isArray(property.value)&&!isArrayValid(property.value)){return null;}if(!applicationinsightsCoreJs.isNullOrUndefined(property.kind)){if(applicationinsightsCoreJs.isArray(property.value)||!isValueKind(property.kind)){return null;}property.value=property.value.toString();}return property;}function getCommonSchemaMetaData(value,kind,type){var encodedTypeValue=-1;if(!applicationinsightsCoreJs.isUndefined(value)){if(kind>0){if(kind===32){encodedTypeValue=1<<13;}else if(kind<=13){encodedTypeValue=kind<<5;}}if(isDataType(type)){if(encodedTypeValue===-1){encodedTypeValue=0;}encodedTypeValue|=type;}else{var propType=_fieldTypeEventPropMap[getFieldValueType(value)]||-1;if(encodedTypeValue!==-1&&propType!==-1){encodedTypeValue|=propType;}else if(propType===6){encodedTypeValue=propType;}}}return encodedTypeValue;}function disableCookies(){applicationinsightsCoreJs.safeGetCookieMgr(null).setEnabled(false);}function setCookie(name,value,days){if(applicationinsightsCoreJs.areCookiesSupported(null)){applicationinsightsCoreJs.safeGetCookieMgr(null).set(name,value,days*86400,null,"/");}}function deleteCookie(name){if(applicationinsightsCoreJs.areCookiesSupported(null)){applicationinsightsCoreJs.safeGetCookieMgr(null).del(name);}}function getCookie(name){if(applicationinsightsCoreJs.areCookiesSupported(null)){return getCookieValue(applicationinsightsCoreJs.safeGetCookieMgr(null),name);}return"";}function getCookieValue(cookieMgr,name,decode){if(decode===void 0){decode=true;}var cookieValue;if(cookieMgr){cookieValue=cookieMgr.get(name);if(decode&&cookieValue&&decodeURIComponent){cookieValue=decodeURIComponent(cookieValue);}}return cookieValue||"";}function createGuid(style){if(style===void 0){style="D";}var theGuid=applicationinsightsCoreJs.newGuid();if(style==="B"){theGuid="{"+theGuid+"}";}else if(style==="P"){theGuid="("+theGuid+")";}else if(style==="N"){theGuid=theGuid.replace(/-/g,"");}return theGuid;}function extend(obj,obj2,obj3,obj4,obj5){var extended={};var deep=false;var i=0;var length=arguments.length;var objProto=Object[applicationinsightsCoreJs.strPrototype];var theArgs=arguments;if(objProto.toString.call(theArgs[0])==="[object Boolean]"){deep=theArgs[0];i++;}for(;i<length;i++){var obj=theArgs[i];applicationinsightsCoreJs.objForEachKey(obj,function(prop,value){if(deep&&value&&applicationinsightsCoreJs.isObject(value)){if(applicationinsightsCoreJs.isArray(value)){extended[prop]=extended[prop]||[];applicationinsightsCoreJs.arrForEach(value,function(arrayValue,arrayIndex){if(arrayValue&&applicationinsightsCoreJs.isObject(arrayValue)){extended[prop][arrayIndex]=extend(true,extended[prop][arrayIndex],arrayValue);}else{extended[prop][arrayIndex]=arrayValue;}});}else{extended[prop]=extend(true,extended[prop],value);}}else{extended[prop]=value;}});}return extended;}var getTime=applicationinsightsCoreJs.perfNow;function isValueKind(value){if(value===0||value>0&&value<=13||value===32){return true;}return false;}function isDataType(value){if(value>=0&&value<=9){return true;}return false;}function isSafariOrFirefox(){var nav=applicationinsightsCoreJs.getNavigator();if(!applicationinsightsCoreJs.isUndefined(nav)&&nav.userAgent){var ua=nav.userAgent.toLowerCase();if((ua.indexOf("safari")>=0||ua.indexOf("firefox")>=0)&&ua.indexOf("chrome")<0){return true;}}return false;}function isArrayValid(value){return value.length>0;}function setProcessTelemetryTimings(event,identifier){var evt=event;evt.timings=evt.timings||{};evt.timings.processTelemetryStart=evt.timings.processTelemetryStart||{};evt.timings.processTelemetryStart[identifier]=getTime();}function getFieldValueType(value){var theType=0;if(value!==null&&value!==void 0){var objType=_typeof(value);if(objType==="string"){theType=1;}else if(objType==="number"){theType=2;}else if(objType==="boolean"){theType=3;}else if(objType===applicationinsightsShims.strShimObject){theType=4;if(applicationinsightsCoreJs.isArray(value)){theType=4096;if(value.length>0){theType|=getFieldValueType(value[0]);}}else if(applicationinsightsCoreJs.hasOwnProperty(value,"value")){theType=8192|getFieldValueType(value.value);}}}return theType;}var Utils={Version:Version,FullVersionString:FullVersionString,strUndefined:applicationinsightsCoreJs.strUndefined,strObject:applicationinsightsCoreJs.strObject,Undefined:applicationinsightsCoreJs.strUndefined,arrForEach:applicationinsightsCoreJs.arrForEach,arrIndexOf:applicationinsightsCoreJs.arrIndexOf,arrMap:applicationinsightsCoreJs.arrMap,arrReduce:applicationinsightsCoreJs.arrReduce,objKeys:applicationinsightsCoreJs.objKeys,toISOString:applicationinsightsCoreJs.toISOString,isReactNative:applicationinsightsCoreJs.isReactNative,isString:applicationinsightsCoreJs.isString,isNumber:applicationinsightsCoreJs.isNumber,isBoolean:applicationinsightsCoreJs.isBoolean,isFunction:applicationinsightsCoreJs.isFunction,isArray:applicationinsightsCoreJs.isArray,isObject:applicationinsightsCoreJs.isObject,strTrim:applicationinsightsCoreJs.strTrim,isDocumentObjectAvailable:isDocumentObjectAvailable,isWindowObjectAvailable:isWindowObjectAvailable,isValueAssigned:isValueAssigned,getTenantId:getTenantId,isBeaconsSupported:applicationinsightsCoreJs.isBeaconsSupported,isUint8ArrayAvailable:isUint8ArrayAvailable,isLatency:isLatency,sanitizeProperty:sanitizeProperty,getISOString:applicationinsightsCoreJs.toISOString,useXDomainRequest:applicationinsightsCoreJs.useXDomainRequest,getCommonSchemaMetaData:getCommonSchemaMetaData,cookieAvailable:applicationinsightsCoreJs.areCookiesSupported,disallowsSameSiteNone:applicationinsightsCoreJs.uaDisallowsSameSiteNone,setCookie:setCookie,deleteCookie:deleteCookie,getCookie:getCookie,createGuid:createGuid,extend:extend,getTime:getTime,isValueKind:isValueKind,isArrayValid:isArrayValid,objDefineAccessors:applicationinsightsCoreJs.objDefineAccessors,addPageUnloadEventListener:applicationinsightsCoreJs.addPageUnloadEventListener,setProcessTelemetryTimings:setProcessTelemetryTimings,addEventHandler:applicationinsightsCoreJs.addEventHandler,getFieldValueType:getFieldValueType,strEndsWith:applicationinsightsCoreJs.strEndsWith,objForEachKey:applicationinsightsCoreJs.objForEachKey};var CoreUtils={_canUseCookies:void 0,isTypeof:applicationinsightsCoreJs.isTypeof,isUndefined:applicationinsightsCoreJs.isUndefined,isNullOrUndefined:applicationinsightsCoreJs.isNullOrUndefined,hasOwnProperty:applicationinsightsCoreJs.hasOwnProperty,isFunction:applicationinsightsCoreJs.isFunction,isObject:applicationinsightsCoreJs.isObject,isDate:applicationinsightsCoreJs.isDate,isArray:applicationinsightsCoreJs.isArray,isError:applicationinsightsCoreJs.isError,isString:applicationinsightsCoreJs.isString,isNumber:applicationinsightsCoreJs.isNumber,isBoolean:applicationinsightsCoreJs.isBoolean,toISOString:applicationinsightsCoreJs.toISOString,arrForEach:applicationinsightsCoreJs.arrForEach,arrIndexOf:applicationinsightsCoreJs.arrIndexOf,arrMap:applicationinsightsCoreJs.arrMap,arrReduce:applicationinsightsCoreJs.arrReduce,strTrim:applicationinsightsCoreJs.strTrim,objCreate:applicationinsightsShims.objCreateFn,objKeys:applicationinsightsCoreJs.objKeys,objDefineAccessors:applicationinsightsCoreJs.objDefineAccessors,addEventHandler:applicationinsightsCoreJs.addEventHandler,dateNow:applicationinsightsCoreJs.dateNow,isIE:applicationinsightsCoreJs.isIE,disableCookies:disableCookies,newGuid:applicationinsightsCoreJs.newGuid,perfNow:applicationinsightsCoreJs.perfNow,newId:applicationinsightsCoreJs.newId,randomValue:applicationinsightsCoreJs.randomValue,random32:applicationinsightsCoreJs.random32,mwcRandomSeed:applicationinsightsCoreJs.mwcRandomSeed,mwcRandom32:applicationinsightsCoreJs.mwcRandom32,generateW3CId:applicationinsightsCoreJs.generateW3CId};function isChromium(){return!!applicationinsightsCoreJs.getGlobalInst("chrome");}function openXhr(method,urlString,withCredentials,disabled,isSync,timeout){if(disabled===void 0){disabled=false;}if(isSync===void 0){isSync=false;}function _wrapSetXhrProp(xhr2,prop,value){try{xhr2[prop]=value;}catch(e){}}var xhr=new XMLHttpRequest();if(disabled){_wrapSetXhrProp(xhr,strDisabledPropertyName,disabled);}if(withCredentials){_wrapSetXhrProp(xhr,strWithCredentials,withCredentials);}xhr.open(method,urlString,!isSync);if(withCredentials){_wrapSetXhrProp(xhr,strWithCredentials,withCredentials);}if(!isSync&&timeout){_wrapSetXhrProp(xhr,strTimeout,timeout);}return xhr;}var PropVersion="version";var properties="properties";var AppInsightsCore=function(_super){applicationinsightsShims.__extendsFn(AppInsightsCore2,_super);function AppInsightsCore2(){var _this=_super.call(this)||this;_this.pluginVersionStringArr=[];_this.pluginVersionString="";dynamicProto__default(AppInsightsCore2,_this,function(_self,_base){if(!_self.logger||!_self.logger.queue){_self.logger=new applicationinsightsCoreJs.DiagnosticLogger({loggingLevelConsole:1});}_self.initialize=function(config,extensions3,logger,notificationManager){applicationinsightsCoreJs.doPerf(_self,function(){return"AppInsightsCore.initialize";},function(){if(config){if(!config.endpointUrl){config.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/";}var propertyStorageOverride=config.propertyStorageOverride;if(propertyStorageOverride&&(!propertyStorageOverride.getProperty||!propertyStorageOverride.setProperty)){throw new Error("Invalid property storage override passed.");}if(config.channels){applicationinsightsCoreJs.arrForEach(config.channels,function(channels){if(channels){applicationinsightsCoreJs.arrForEach(channels,function(channel){if(channel.identifier&&channel.version){var ver=channel.identifier+"="+channel.version;_self.pluginVersionStringArr.push(ver);}});}});}}_self.getWParam=function(){return typeof document!=="undefined"?0:-1;};if(extensions3){applicationinsightsCoreJs.arrForEach(extensions3,function(ext){if(ext&&ext.identifier&&ext.version){var ver=ext.identifier+"="+ext.version;_self.pluginVersionStringArr.push(ver);}});}_self.pluginVersionString=_self.pluginVersionStringArr.join(";");try{_base.initialize(config,extensions3,logger,notificationManager);_self.pollInternalLogs("InternalLog");}catch(e){var logger_1=_self.logger;var message=applicationinsightsCoreJs.dumpObj(e);if(message.indexOf("channels")!==-1){message+="\n - Channels must be provided through config.channels only!";}logger_1.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+message);}},function(){return{config:config,extensions:extensions3,logger:logger,notificationManager:notificationManager};});};_self.track=function(item){applicationinsightsCoreJs.doPerf(_self,function(){return"AppInsightsCore.track";},function(){var telemetryItem=item;if(telemetryItem){telemetryItem.timings=telemetryItem.timings||{};telemetryItem.timings.trackStart=getTime();if(!isLatency(telemetryItem.latency)){telemetryItem.latency=1;}var itemExt=telemetryItem.ext=telemetryItem.ext||{};itemExt.sdk=itemExt.sdk||{};itemExt.sdk.ver=FullVersionString;var baseData=telemetryItem.baseData=telemetryItem.baseData||{};if(!baseData[properties]){baseData[properties]={};}var itemProperties=baseData[properties];if(!itemProperties[PropVersion]){itemProperties[PropVersion]="";}if(_self.pluginVersionString!==""){itemProperties[PropVersion]=_self.pluginVersionString;}}_base.track(telemetryItem);},function(){return{item:item};},!item.sync);};});return _this;}return AppInsightsCore2;}(applicationinsightsCoreJs.AppInsightsCore);var BaseCore=function(_super){applicationinsightsShims.__extendsFn(BaseCore2,_super);function BaseCore2(){var _this=_super.call(this)||this;dynamicProto__default(BaseCore2,_this,function(_self,_base){_self.initialize=function(config,extensions3,logger,notificationManager){if(config&&!config.endpointUrl){config.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/";}_self.getWParam=function(){return isDocumentObjectAvailable?0:-1;};try{_base.initialize(config,extensions3,logger,notificationManager);}catch(e){applicationinsightsCoreJs._throwInternal(_self.logger,1,514,"Initialization Failed: "+applicationinsightsCoreJs.dumpObj(e)+"\n - Note: Channels must be provided through config.channels only");}};_self.track=function(item){var telemetryItem=item;if(telemetryItem){var ext=telemetryItem.ext=telemetryItem.ext||{};ext.sdk=ext.sdk||{};ext.sdk.ver=FullVersionString;}_base.track(telemetryItem);};});return _this;}return BaseCore2;}(applicationinsightsCoreJs.BaseCore);var _isFunction=applicationinsightsCoreJs.isFunction;function _createPromiseAllOnResolvedFunction(values,index,resolvedCallback){return function(value){values[index]=value;resolvedCallback();};}var ESPromise=function(){function ESPromise2(resolverFunc){var _state=0;var _settledValue=null;var _queue=[];dynamicProto__default(ESPromise2,this,function(_this){_this.then=function(onResolved,onRejected){return new ESPromise2(function(resolve,reject){_enqueue(onResolved,onRejected,resolve,reject);});};_this["catch"]=function(onRejected){return _this.then(null,onRejected);};});function _enqueue(onResolved,onRejected,resolve,reject){_queue.push(function(){var value;try{if(_state===1){value=_isFunction(onResolved)?onResolved(_settledValue):_settledValue;}else{value=_isFunction(onRejected)?onRejected(_settledValue):_settledValue;}if(value instanceof ESPromise2){value.then(resolve,reject);}else if(_state===2&&!_isFunction(onRejected)){reject(value);}else{resolve(value);}}catch(error){reject(error);return;}});if(_state!==0){_processQueue();}}function _processQueue(){if(_queue.length>0){var pending_1=_queue.slice();_queue=[];setTimeout(function(){for(var i=0,len=pending_1.length;i<len;++i){try{pending_1[i]();}catch(e){}}},0);}}function _resolve(value){if(_state===0){_settledValue=value;_state=1;_processQueue();}}function _reject(reason){if(_state===0){_settledValue=reason;_state=2;_processQueue();}}(function _initialize(){if(!_isFunction(resolverFunc)){throw new TypeError("ESPromise: resolvedFunc argument is not a Function");}try{resolverFunc(_resolve,_reject);}catch(error){_reject(error);}})();}ESPromise2.resolve=function(value){if(value instanceof ESPromise2){return value;}else if(value&&_isFunction(value.then)){return new ESPromise2(function(resolve,reject){try{value.then(resolve,reject);}catch(error){reject(error);}});}return new ESPromise2(function(resolve){resolve(value);});};ESPromise2.reject=function(reason){return new ESPromise2(function(resolve,reject){reject(reason);});};ESPromise2.all=function(iterable){if(!iterable||!iterable.length){return;}return new ESPromise2(function(resolve,reject){try{var values_1=[];var pending_2=0;for(var lp=0;lp<iterable.length;lp++){var item=iterable[lp];if(item&&_isFunction(item.then)){pending_2++;item.then(_createPromiseAllOnResolvedFunction(values_1,lp,function(){if(--pending_2===0){resolve(values_1);}}),reject);}else{values_1[lp]=item;}}if(pending_2===0){setTimeout(function(){resolve(values_1);},0);}}catch(error){reject(error);}});};ESPromise2.race=function(iterable){return new ESPromise2(function(resolve,reject){if(!iterable||!iterable.length){return;}try{var _loop_1=function _loop_1(lp2){var item=iterable[lp2];if(item&&_isFunction(item.then)){item.then(resolve,reject);}else{setTimeout(function(){resolve(item);},0);}};for(var lp=0;lp<iterable.length;lp++){_loop_1(lp);}}catch(error){reject(error);}});};return ESPromise2;}();var LazyRejectPeriod=6e5;var _schedulerId=0;var _running=[];var _waiting=[];var _timedOut=[];function _getTime(){return new Date().getTime();}var ESPromiseScheduler=function(){function ESPromiseScheduler2(name,diagLog){var _promiseId=0;var _scheduledName=(name||"<unnamed>")+"."+_schedulerId;_schedulerId++;dynamicProto__default(ESPromiseScheduler2,this,function(_this){var _lastEvent=null;var _eventCount=0;_this.scheduleEvent=function(startEventAction,eventName,timeout){var uniqueId=_scheduledName+"."+_eventCount;_eventCount++;if(eventName){uniqueId+="-("+eventName+")";}var uniqueEventId=uniqueId+"{"+_promiseId+"}";_promiseId++;var newScheduledEvent={evt:null,tm:_getTime(),id:uniqueEventId,isRunning:false,isAborted:false};if(!_lastEvent){newScheduledEvent.evt=_startWaitingEvent(newScheduledEvent);}else{newScheduledEvent.evt=_waitForPreviousEvent(newScheduledEvent,_lastEvent);}_lastEvent=newScheduledEvent;_lastEvent.evt._schId=uniqueEventId;return newScheduledEvent.evt;function _abortAndRemoveOldEvents(eventQueue){var now=_getTime();var expired=now-LazyRejectPeriod;var len=eventQueue.length;var lp=0;while(lp<len){var evt=eventQueue[lp];if(evt&&evt.tm<expired){var message=null;if(evt.abort){message="Aborting ["+evt.id+"] due to Excessive runtime ("+(now-evt.tm)+" ms)";evt.abort(message);}else{message="Removing ["+evt.id+"] due to Excessive runtime ("+(now-evt.tm)+" ms)";}_warnLog(message);eventQueue.splice(lp,1);len--;}else{lp++;}}}function _cleanup(eventId,completed){var toQueue=false;var removed=_removeQueuedEvent(_running,eventId);if(!removed){removed=_removeQueuedEvent(_timedOut,eventId);toQueue=true;}if(removed){if(removed.to){clearTimeout(removed.to);removed.to=null;}var tm=_getTime()-removed.tm;if(completed){if(!toQueue){_debugLog("Promise ["+eventId+"] Complete -- "+tm+" ms");}else{_warnLog("Timed out event ["+eventId+"] finally complete -- "+tm+" ms");}}else{_timedOut.push(removed);_warnLog("Event ["+eventId+"] Timed out and removed -- "+tm+" ms");}}else{_debugLog("Failed to remove ["+eventId+"] from running queue");}if(_lastEvent&&_lastEvent.id===eventId){_lastEvent=null;}_abortAndRemoveOldEvents(_running);_abortAndRemoveOldEvents(_waiting);_abortAndRemoveOldEvents(_timedOut);}function _removeScheduledEvent(eventId,callback){return function(value){_cleanup(eventId,true);callback&&callback(value);return value;};}function _waitForFinalResult(eventId,startResult,schEventResolve,schEventReject){startResult.then(function(value){if(value instanceof ESPromise){_debugLog("Event ["+eventId+"] returned a promise -- waiting");_waitForFinalResult(eventId,value,schEventResolve,schEventReject);return value;}else{return _removeScheduledEvent(eventId,schEventResolve)(value);}},_removeScheduledEvent(eventId,schEventReject));}function _createScheduledEvent(eventDetails,startEvent){var eventId=eventDetails.id;return new ESPromise(function(schEventResolve,schEventReject){_debugLog("Event ["+eventId+"] Starting -- waited for "+(eventDetails.wTm||"--")+" ms");eventDetails.isRunning=true;eventDetails.abort=function(message){eventDetails.abort=null;eventDetails.isAborted=true;_cleanup(eventId,false);schEventReject(new Error(message));};var startResult=startEvent(eventId);if(startResult instanceof ESPromise){if(timeout){eventDetails.to=setTimeout(function(){_cleanup(eventId,false);schEventReject(new Error("Timed out after ["+timeout+"] ms"));},timeout);}_waitForFinalResult(eventId,startResult,function(theResult){_debugLog("Event ["+eventId+"] Resolving after "+(_getTime()-eventDetails.tm)+" ms");schEventResolve(theResult);},schEventReject);}else{_debugLog("Promise ["+eventId+"] Auto completed as the start action did not return a promise");schEventResolve();}});}function _startWaitingEvent(eventDetails){var now=_getTime();eventDetails.wTm=now-eventDetails.tm;eventDetails.tm=now;if(eventDetails.isAborted){return ESPromise.reject(new Error("["+uniqueId+"] was aborted"));}_running.push(eventDetails);return _createScheduledEvent(eventDetails,startEventAction);}function _waitForPreviousEvent(eventDetails,waitForEvent){var waitEvent=new ESPromise(function(waitResolve,waitReject){var runTime=_getTime()-waitForEvent.tm;var prevId=waitForEvent.id;_debugLog("["+uniqueId+"] is waiting for ["+prevId+":"+runTime+" ms] to complete before starting -- ["+_waiting.length+"] waiting and ["+_running.length+"] running");eventDetails.abort=function(message){eventDetails.abort=null;_removeQueuedEvent(_waiting,uniqueId);eventDetails.isAborted=true;waitReject(new Error(message));};waitForEvent.evt.then(function(value){_removeQueuedEvent(_waiting,uniqueId);_startWaitingEvent(eventDetails).then(waitResolve,waitReject);},function(reason){_removeQueuedEvent(_waiting,uniqueId);_startWaitingEvent(eventDetails).then(waitResolve,waitReject);});});_waiting.push(eventDetails);return waitEvent;}};function _removeQueuedEvent(queue,eventId){for(var lp=0;lp<queue.length;lp++){if(queue[lp].id===eventId){return queue.splice(lp,1)[0];}}return null;}});function _debugLog(message){var global2=applicationinsightsCoreJs.getGlobal();if(global2&&global2["QUnit"]){console&&console.log("ESPromiseScheduler["+_scheduledName+"] "+message);}}function _warnLog(message){diagLog&&diagLog.warnToConsole("ESPromiseScheduler["+_scheduledName+"] "+message);}}ESPromiseScheduler2.incomplete=function(){return _running;};ESPromiseScheduler2.waitingToStart=function(){return _waiting;};return ESPromiseScheduler2;}();var ValueSanitizer=function(){function ValueSanitizer2(fieldSanitizerProvider){var _self=this;var _sanitizerMap={};var _sanitizers=[];var _fieldSanitizers=[];if(fieldSanitizerProvider){_fieldSanitizers.push(fieldSanitizerProvider);}function _getFieldSanitizer(path,name){var result;var fieldLookup=_sanitizerMap[path];if(fieldLookup){result=fieldLookup[name];}if(!result&&result!==null){if(applicationinsightsCoreJs.isString(path)&&applicationinsightsCoreJs.isString(name)){if(_fieldSanitizers.length>0){for(var lp=0;lp<_fieldSanitizers.length;lp++){if(_fieldSanitizers[lp].handleField(path,name)){result={canHandle:true,fieldHandler:_fieldSanitizers[lp]};break;}}}else if(_sanitizers.length===0){result={canHandle:true};}}if(!result&&result!==null){result=null;for(var lp=0;lp<_sanitizers.length;lp++){if(_sanitizers[lp].handleField(path,name)){result={canHandle:true,handler:_sanitizers[lp],fieldHandler:null};break;}}}if(!fieldLookup){fieldLookup=_sanitizerMap[path]={};}fieldLookup[name]=result;}return result;}_self.addSanitizer=function(newSanitizer){if(newSanitizer){_sanitizers.push(newSanitizer);_sanitizerMap={};}};_self.addFieldSanitizer=function(fieldSanitizer){if(fieldSanitizer){_fieldSanitizers.push(fieldSanitizer);_sanitizerMap={};}};_self.handleField=function(path,name){var mapValue=_getFieldSanitizer(path,name);return mapValue?mapValue.canHandle:false;};_self.value=function(path,name,value,stringifyObjects){var mapValue=_getFieldSanitizer(path,name);if(mapValue&&mapValue.canHandle){if(!mapValue||!mapValue.canHandle){return null;}if(mapValue.handler){return mapValue.handler.value(path,name,value,stringifyObjects);}if(!applicationinsightsCoreJs.isString(name)||applicationinsightsCoreJs.isNullOrUndefined(value)||value===""){return null;}var property=null;var fieldType=getFieldValueType(value);if((fieldType&8192)===8192){var subType=fieldType&~8192;property=value;if(!isValueAssigned(property.value)||subType!==1&&subType!==2&&subType!==3&&(subType&4096)!==4096){return null;}}else if(fieldType===1||fieldType===2||fieldType===3||(fieldType&4096)===4096){property=_convertToProperty(path,name,value);}else if(fieldType===4){property=_convertToProperty(path,name,!!stringifyObjects?JSON.stringify(value):value);}if(property){return _handleProperty(mapValue,path,name,fieldType,property,stringifyObjects);}}return null;};_self.property=function(path,name,property,stringifyObjects){var mapValue=_getFieldSanitizer(path,name);if(!mapValue||!mapValue.canHandle){return null;}if(!applicationinsightsCoreJs.isString(name)||applicationinsightsCoreJs.isNullOrUndefined(property)||!isValueAssigned(property.value)){return null;}var fieldType=getFieldValueType(property.value);if(fieldType===0){return null;}return _handleProperty(mapValue,path,name,fieldType,property,stringifyObjects);};function _handleProperty(mapValue,path,name,fieldType,property,stringifyObjects){if(mapValue.handler){return mapValue.handler.property(path,name,property,stringifyObjects);}if(!applicationinsightsCoreJs.isNullOrUndefined(property.kind)){if((fieldType&4096)===4096||!isValueKind(property.kind)){return null;}property.value=property.value.toString();}return _callFieldSanitizer(mapValue.fieldHandler,path,name,fieldType,property);}function _convertToProperty(path,name,value){if(isValueAssigned(value)){return{value:value};}return null;}function _callFieldSanitizer(fieldProvider,path,name,theType,property){if(property&&fieldProvider){var sanitizer=fieldProvider.getSanitizer(path,name,theType,property.kind,property.propertyType);if(sanitizer){if(theType===4){var newValue_1={};var propValue=property.value;applicationinsightsCoreJs.objForEachKey(propValue,function(propKey,theValue){var newPath=path+"."+name;if(isValueAssigned(theValue)){var newProp=_convertToProperty(newPath,propKey,theValue);newProp=_callFieldSanitizer(fieldProvider,newPath,propKey,getFieldValueType(theValue),newProp);if(newProp){newValue_1[propKey]=newProp.value;}}});property.value=newValue_1;}else{var details={path:path,name:name,type:theType,prop:property,sanitizer:_self};property=sanitizer.call(_self,details);}}}return property;}}ValueSanitizer2.getFieldType=getFieldValueType;return ValueSanitizer2;}();exports2.BaseTelemetryPlugin=applicationinsightsCoreJs.BaseTelemetryPlugin;exports2.DiagnosticLogger=applicationinsightsCoreJs.DiagnosticLogger;exports2.EventHelper=applicationinsightsCoreJs.EventHelper;exports2.EventsDiscardedReason=applicationinsightsCoreJs.EventsDiscardedReason;exports2.InternalAppInsightsCore=applicationinsightsCoreJs.AppInsightsCore;exports2.InternalBaseCore=applicationinsightsCoreJs.BaseCore;exports2.LoggingSeverity=applicationinsightsCoreJs.LoggingSeverity;exports2.MinChannelPriorty=applicationinsightsCoreJs.MinChannelPriorty;exports2.NotificationManager=applicationinsightsCoreJs.NotificationManager;exports2.PerfEvent=applicationinsightsCoreJs.PerfEvent;exports2.PerfManager=applicationinsightsCoreJs.PerfManager;exports2.ProcessTelemetryContext=applicationinsightsCoreJs.ProcessTelemetryContext;exports2.Undefined=applicationinsightsCoreJs.strUndefined;exports2._InternalLogMessage=applicationinsightsCoreJs._InternalLogMessage;exports2._InternalMessageId=applicationinsightsCoreJs._InternalMessageId;exports2.__getRegisteredEvents=applicationinsightsCoreJs.__getRegisteredEvents;exports2._throwInternal=applicationinsightsCoreJs._throwInternal;exports2.addEventHandler=applicationinsightsCoreJs.addEventHandler;exports2.addEventListeners=applicationinsightsCoreJs.addEventListeners;exports2.addPageHideEventListener=applicationinsightsCoreJs.addPageHideEventListener;exports2.addPageShowEventListener=applicationinsightsCoreJs.addPageShowEventListener;exports2.addPageUnloadEventListener=applicationinsightsCoreJs.addPageUnloadEventListener;exports2.areCookiesSupported=applicationinsightsCoreJs.areCookiesSupported;exports2.arrForEach=applicationinsightsCoreJs.arrForEach;exports2.arrIndexOf=applicationinsightsCoreJs.arrIndexOf;exports2.arrMap=applicationinsightsCoreJs.arrMap;exports2.arrReduce=applicationinsightsCoreJs.arrReduce;exports2.attachEvent=applicationinsightsCoreJs.attachEvent;exports2.cookieAvailable=applicationinsightsCoreJs.areCookiesSupported;exports2.createCookieMgr=applicationinsightsCoreJs.createCookieMgr;exports2.createEnumStyle=applicationinsightsCoreJs.createEnumStyle;exports2.createProcessTelemetryContext=applicationinsightsCoreJs.createProcessTelemetryContext;exports2.createTraceParent=applicationinsightsCoreJs.createTraceParent;exports2.createUniqueNamespace=applicationinsightsCoreJs.createUniqueNamespace;exports2.createUnloadHandlerContainer=applicationinsightsCoreJs.createUnloadHandlerContainer;exports2.dateNow=applicationinsightsCoreJs.dateNow;exports2.detachEvent=applicationinsightsCoreJs.detachEvent;exports2.disallowsSameSiteNone=applicationinsightsCoreJs.uaDisallowsSameSiteNone;exports2.doPerf=applicationinsightsCoreJs.doPerf;exports2.dumpObj=applicationinsightsCoreJs.dumpObj;exports2.eventOff=applicationinsightsCoreJs.eventOff;exports2.eventOn=applicationinsightsCoreJs.eventOn;exports2.findW3cTraceParent=applicationinsightsCoreJs.findW3cTraceParent;exports2.formatTraceParent=applicationinsightsCoreJs.formatTraceParent;exports2.generateW3CId=applicationinsightsCoreJs.generateW3CId;exports2.getConsole=applicationinsightsCoreJs.getConsole;exports2.getCrypto=applicationinsightsCoreJs.getCrypto;exports2.getDocument=applicationinsightsCoreJs.getDocument;exports2.getExceptionName=applicationinsightsCoreJs.getExceptionName;exports2.getGlobal=applicationinsightsCoreJs.getGlobal;exports2.getGlobalInst=applicationinsightsCoreJs.getGlobalInst;exports2.getHistory=applicationinsightsCoreJs.getHistory;exports2.getIEVersion=applicationinsightsCoreJs.getIEVersion;exports2.getISOString=applicationinsightsCoreJs.toISOString;exports2.getJSON=applicationinsightsCoreJs.getJSON;exports2.getLocation=applicationinsightsCoreJs.getLocation;exports2.getMsCrypto=applicationinsightsCoreJs.getMsCrypto;exports2.getNavigator=applicationinsightsCoreJs.getNavigator;exports2.getPerformance=applicationinsightsCoreJs.getPerformance;exports2.getSetValue=applicationinsightsCoreJs.getSetValue;exports2.getWindow=applicationinsightsCoreJs.getWindow;exports2.hasDocument=applicationinsightsCoreJs.hasDocument;exports2.hasHistory=applicationinsightsCoreJs.hasHistory;exports2.hasJSON=applicationinsightsCoreJs.hasJSON;exports2.hasNavigator=applicationinsightsCoreJs.hasNavigator;exports2.hasOwnProperty=applicationinsightsCoreJs.hasOwnProperty;exports2.hasWindow=applicationinsightsCoreJs.hasWindow;exports2.isArray=applicationinsightsCoreJs.isArray;exports2.isBeaconsSupported=applicationinsightsCoreJs.isBeaconsSupported;exports2.isBoolean=applicationinsightsCoreJs.isBoolean;exports2.isDate=applicationinsightsCoreJs.isDate;exports2.isError=applicationinsightsCoreJs.isError;exports2.isFetchSupported=applicationinsightsCoreJs.isFetchSupported;exports2.isFunction=applicationinsightsCoreJs.isFunction;exports2.isIE=applicationinsightsCoreJs.isIE;exports2.isNotTruthy=applicationinsightsCoreJs.isNotTruthy;exports2.isNullOrUndefined=applicationinsightsCoreJs.isNullOrUndefined;exports2.isNumber=applicationinsightsCoreJs.isNumber;exports2.isObject=applicationinsightsCoreJs.isObject;exports2.isReactNative=applicationinsightsCoreJs.isReactNative;exports2.isSampledFlag=applicationinsightsCoreJs.isSampledFlag;exports2.isString=applicationinsightsCoreJs.isString;exports2.isTruthy=applicationinsightsCoreJs.isTruthy;exports2.isTypeof=applicationinsightsCoreJs.isTypeof;exports2.isUndefined=applicationinsightsCoreJs.isUndefined;exports2.isValidSpanId=applicationinsightsCoreJs.isValidSpanId;exports2.isValidTraceId=applicationinsightsCoreJs.isValidTraceId;exports2.isValidTraceParent=applicationinsightsCoreJs.isValidTraceParent;exports2.isXhrSupported=applicationinsightsCoreJs.isXhrSupported;exports2.mergeEvtNamespace=applicationinsightsCoreJs.mergeEvtNamespace;exports2.newGuid=applicationinsightsCoreJs.newGuid;exports2.newId=applicationinsightsCoreJs.newId;exports2.normalizeJsName=applicationinsightsCoreJs.normalizeJsName;exports2.objCreate=applicationinsightsCoreJs.objCreate;exports2.objDefineAccessors=applicationinsightsCoreJs.objDefineAccessors;exports2.objForEachKey=applicationinsightsCoreJs.objForEachKey;exports2.objFreeze=applicationinsightsCoreJs.objFreeze;exports2.objKeys=applicationinsightsCoreJs.objKeys;exports2.objSeal=applicationinsightsCoreJs.objSeal;exports2.optimizeObject=applicationinsightsCoreJs.optimizeObject;exports2.parseTraceParent=applicationinsightsCoreJs.parseTraceParent;exports2.perfNow=applicationinsightsCoreJs.perfNow;exports2.proxyAssign=applicationinsightsCoreJs.proxyAssign;exports2.proxyFunctionAs=applicationinsightsCoreJs.proxyFunctionAs;exports2.proxyFunctions=applicationinsightsCoreJs.proxyFunctions;exports2.random32=applicationinsightsCoreJs.random32;exports2.randomValue=applicationinsightsCoreJs.randomValue;exports2.removeEventHandler=applicationinsightsCoreJs.removeEventHandler;exports2.removeEventListeners=applicationinsightsCoreJs.removeEventListeners;exports2.removePageHideEventListener=applicationinsightsCoreJs.removePageHideEventListener;exports2.removePageShowEventListener=applicationinsightsCoreJs.removePageShowEventListener;exports2.removePageUnloadEventListener=applicationinsightsCoreJs.removePageUnloadEventListener;exports2.safeGetCookieMgr=applicationinsightsCoreJs.safeGetCookieMgr;exports2.safeGetLogger=applicationinsightsCoreJs.safeGetLogger;exports2.setEnableEnvMocks=applicationinsightsCoreJs.setEnableEnvMocks;exports2.setValue=applicationinsightsCoreJs.setValue;exports2.strContains=applicationinsightsCoreJs.strContains;exports2.strEndsWith=applicationinsightsCoreJs.strEndsWith;exports2.strFunction=applicationinsightsCoreJs.strFunction;exports2.strObject=applicationinsightsCoreJs.strObject;exports2.strPrototype=applicationinsightsCoreJs.strPrototype;exports2.strStartsWith=applicationinsightsCoreJs.strStartsWith;exports2.strTrim=applicationinsightsCoreJs.strTrim;exports2.strUndefined=applicationinsightsCoreJs.strUndefined;exports2.throwError=applicationinsightsCoreJs.throwError;exports2.toISOString=applicationinsightsCoreJs.toISOString;exports2.useXDomainRequest=applicationinsightsCoreJs.useXDomainRequest;exports2.AppInsightsCore=AppInsightsCore;exports2.BaseCore=BaseCore;exports2.CoreUtils=CoreUtils;exports2.ESPromise=ESPromise;exports2.ESPromiseScheduler=ESPromiseScheduler;exports2.EventLatency=EventLatency;exports2.EventPersistence=EventPersistence;exports2.EventPropertyType=EventPropertyType;exports2.FullVersionString=FullVersionString;exports2.TraceLevel=TraceLevel;exports2.Utils=Utils;exports2.ValueKind=ValueKind;exports2.ValueSanitizer=ValueSanitizer;exports2.Version=Version;exports2._ExtendedInternalMessageId=_ExtendedInternalMessageId;exports2.createGuid=createGuid;exports2.deleteCookie=deleteCookie;exports2.disableCookies=disableCookies;exports2.extend=extend;exports2.getCommonSchemaMetaData=getCommonSchemaMetaData;exports2.getCookie=getCookie;exports2.getCookieValue=getCookieValue;exports2.getFieldValueType=getFieldValueType;exports2.getTenantId=getTenantId;exports2.getTime=getTime;exports2.isArrayValid=isArrayValid;exports2.isChromium=isChromium;exports2.isDocumentObjectAvailable=isDocumentObjectAvailable;exports2.isLatency=isLatency;exports2.isUint8ArrayAvailable=isUint8ArrayAvailable;exports2.isValueAssigned=isValueAssigned;exports2.isValueKind=isValueKind;exports2.isWindowObjectAvailable=isWindowObjectAvailable;exports2.openXhr=openXhr;exports2.sanitizeProperty=sanitizeProperty;exports2.setCookie=setCookie;exports2.setProcessTelemetryTimings=setProcessTelemetryTimings;(function(obj,prop,descriptor){var func=Object["defineProperty"];if(func){try{return func(obj,prop,descriptor);}catch(e){}}if(descriptor&&_typeof(descriptor.value)!==void 0){obj[prop]=descriptor.value;}return obj;})(exports2,"__esModule",{value:true});});}});// client/node_modules/@microsoft/1ds-post-js/dist/ms.post.js
var require_ms_post=__commonJS({"client/node_modules/@microsoft/1ds-post-js/dist/ms.post.js":function clientNode_modulesMicrosoft1dsPostJsDistMsPostJs(exports,module2){(function(global2,factory){_typeof(exports)==="object"&&typeof module2!=="undefined"?factory(exports,require_applicationinsights_shims(),require_dynamicproto_js(),require_ms_core()):typeof define==="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/dynamicproto-js","@microsoft/1ds-core-js"],factory):(global2=typeof globalThis!=="undefined"?globalThis:global2||self,factory(global2.oneDS=global2.oneDS||{},global2.applicationinsightsShims,global2.dynamicProto,global2._1dsCoreJs));})(exports,function(exports2,applicationinsightsShims,dynamicProto,_1dsCoreJs){"use strict";function _interopDefaultLegacy(e){return e&&_typeof(e)==="object"&&"default"in e?e["default"]:e;}var dynamicProto__default=/* @__PURE__ */_interopDefaultLegacy(dynamicProto);var RT_PROFILE="REAL_TIME";var NRT_PROFILE="NEAR_REAL_TIME";var BE_PROFILE="BEST_EFFORT";var Method="POST";var DisabledPropertyName="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";var strDropped="drop";var strSending="send";var strRequeue="requeue";var strResponseFail="rspFail";var strOther="oth";var defaultCacheControl="no-cache, no-store";var defaultContentType="application/x-json-stream";var strCacheControl="cache-control";var strContentTypeHeader="content-type";var strKillTokensHeader="kill-tokens";var strKillDurationHeader="kill-duration";var strKillDurationSecondsHeader="kill-duration-seconds";var strTimeDeltaHeader="time-delta-millis";var strClientVersion="client-version";var strClientId="client-id";var strTimeDeltaToApply="time-delta-to-apply-millis";var strUploadTime="upload-time";var strApiKey="apikey";var strMsaDeviceTicket="AuthMsaDeviceTicket";var strAuthXToken="AuthXToken";var strNoResponseBody="NoResponseBody";var strMsfpc="msfpc";function _getEventMsfpc(theEvent){var intWeb=(theEvent.ext||{})["intweb"];if(intWeb&&_1dsCoreJs.isValueAssigned(intWeb[strMsfpc])){return intWeb[strMsfpc];}return null;}function _getMsfpc(theEvents){var msfpc=null;for(var lp=0;msfpc===null&&lp<theEvents.length;lp++){msfpc=_getEventMsfpc(theEvents[lp]);}return msfpc;}var EventBatch=function(){function EventBatch2(iKey,addEvents){var events=addEvents?[].concat(addEvents):[];var _self=this;var _msfpc=_getMsfpc(events);_self.iKey=function(){return iKey;};_self.Msfpc=function(){return _msfpc||"";};_self.count=function(){return events.length;};_self.events=function(){return events;};_self.addEvent=function(theEvent){if(theEvent){events.push(theEvent);if(!_msfpc){_msfpc=_getEventMsfpc(theEvent);}return true;}return false;};_self.split=function(fromEvent,numEvents){var theEvents;if(fromEvent<events.length){var cnt=events.length-fromEvent;if(!_1dsCoreJs.isNullOrUndefined(numEvents)){cnt=numEvents<cnt?numEvents:cnt;}theEvents=events.splice(fromEvent,cnt);_msfpc=_getMsfpc(events);}return new EventBatch2(iKey,theEvents);};}EventBatch2.create=function(iKey,theEvents){return new EventBatch2(iKey,theEvents);};return EventBatch2;}();var _MAX_STRING_JOINS=20;var RequestSizeLimitBytes=3984588;var BeaconRequestSizeLimitBytes=65e3;var MaxRecordSize=2e6;var MaxBeaconRecordSize=Math.min(MaxRecordSize,BeaconRequestSizeLimitBytes);var metadata="metadata";var f="f";var rCheckDot=/\./;var Serializer=function(){function Serializer2(perfManager,valueSanitizer,stringifyObjects,enableCompoundKey){var strData="data";var strBaseData="baseData";var strExt="ext";var _checkForCompoundkey=!!enableCompoundKey;var _processSubMetaData=true;var _theSanitizer=valueSanitizer;var _isReservedCache={};dynamicProto__default(Serializer2,this,function(_self){_self.createPayload=function(retryCnt,isTeardown,isSync,useSendBeacon,sendReason,sendType){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:retryCnt,isTeardown:isTeardown,isSync:isSync,isBeacon:useSendBeacon,sendType:sendType,sendReason:sendReason};};_self.appendPayload=function(payload,theBatch,maxEventsPerBatch){var canAddEvents=payload&&theBatch&&!payload.overflow;if(canAddEvents){_1dsCoreJs.doPerf(perfManager,function(){return"Serializer:appendPayload";},function(){var theEvents=theBatch.events();var payloadBlob=payload.payloadBlob;var payloadEvents=payload.numEvents;var eventsAdded=false;var sizeExceeded=[];var failedEvts=[];var isBeaconPayload=payload.isBeacon;var requestMaxSize=isBeaconPayload?BeaconRequestSizeLimitBytes:RequestSizeLimitBytes;var recordMaxSize=isBeaconPayload?MaxBeaconRecordSize:MaxRecordSize;var lp=0;var joinCount=0;while(lp<theEvents.length){var theEvent=theEvents[lp];if(theEvent){if(payloadEvents>=maxEventsPerBatch){payload.overflow=theBatch.split(lp);break;}var eventBlob=_self.getEventBlob(theEvent);if(eventBlob&&eventBlob.length<=recordMaxSize){var blobLength=eventBlob.length;var currentSize=payloadBlob.length;if(currentSize+blobLength>requestMaxSize){payload.overflow=theBatch.split(lp);break;}if(payloadBlob){payloadBlob+="\n";}payloadBlob+=eventBlob;joinCount++;if(joinCount>_MAX_STRING_JOINS){payloadBlob.substr(0,1);joinCount=0;}eventsAdded=true;payloadEvents++;}else{if(eventBlob){sizeExceeded.push(theEvent);}else{failedEvts.push(theEvent);}theEvents.splice(lp,1);lp--;}}lp++;}if(sizeExceeded&&sizeExceeded.length>0){payload.sizeExceed.push(EventBatch.create(theBatch.iKey(),sizeExceeded));}if(failedEvts&&failedEvts.length>0){payload.failedEvts.push(EventBatch.create(theBatch.iKey(),failedEvts));}if(eventsAdded){payload.batches.push(theBatch);payload.payloadBlob=payloadBlob;payload.numEvents=payloadEvents;var apiKey=theBatch.iKey();if(_1dsCoreJs.arrIndexOf(payload.apiKeys,apiKey)===-1){payload.apiKeys.push(apiKey);}}},function(){return{payload:payload,theBatch:{iKey:theBatch.iKey(),evts:theBatch.events()},max:maxEventsPerBatch};});}return canAddEvents;};_self.getEventBlob=function(eventData){try{return _1dsCoreJs.doPerf(perfManager,function(){return"Serializer.getEventBlob";},function(){var serializedEvent={};serializedEvent.name=eventData.name;serializedEvent.time=eventData.time;serializedEvent.ver=eventData.ver;serializedEvent.iKey="o:"+_1dsCoreJs.getTenantId(eventData.iKey);var serializedExt={};var eventExt=eventData[strExt];if(eventExt){serializedEvent[strExt]=serializedExt;_1dsCoreJs.objForEachKey(eventExt,function(key,value){var data=serializedExt[key]={};_processPathKeys(value,data,"ext."+key,true,null,null,true);});}var serializedData=serializedEvent[strData]={};serializedData.baseType=eventData.baseType;var serializedBaseData=serializedData[strBaseData]={};_processPathKeys(eventData.baseData,serializedBaseData,strBaseData,false,[strBaseData],function(pathKeys,name,value){_addJSONPropertyMetaData(serializedExt,pathKeys,name,value);},_processSubMetaData);_processPathKeys(eventData.data,serializedData,strData,false,[],function(pathKeys,name,value){_addJSONPropertyMetaData(serializedExt,pathKeys,name,value);},_processSubMetaData);return JSON.stringify(serializedEvent);},function(){return{item:eventData};});}catch(e){return null;}};function _isReservedField(path,name){var result=_isReservedCache[path];if(result===void 0){if(path.length>=7){result=_1dsCoreJs.strStartsWith(path,"ext.metadata")||_1dsCoreJs.strStartsWith(path,"ext.web");}_isReservedCache[path]=result;}return result;}function _processPathKeys(srcObj,target,thePath,checkReserved,metadataPathKeys,metadataCallback,processSubKeys){_1dsCoreJs.objForEachKey(srcObj,function(key,srcValue){var prop=null;if(srcValue||_1dsCoreJs.isValueAssigned(srcValue)){var path=thePath;var name_1=key;var theMetaPathKeys=metadataPathKeys;var destObj=target;if(_checkForCompoundkey&&!checkReserved&&rCheckDot.test(key)){var subKeys=key.split(".");var keyLen=subKeys.length;if(keyLen>1){if(theMetaPathKeys){theMetaPathKeys=theMetaPathKeys.slice();}for(var lp=0;lp<keyLen-1;lp++){var subKey=subKeys[lp];destObj=destObj[subKey]=destObj[subKey]||{};path+="."+subKey;if(theMetaPathKeys){theMetaPathKeys.push(subKey);}}name_1=subKeys[keyLen-1];}}var isReserved=checkReserved&&_isReservedField(path);if(!isReserved&&_theSanitizer&&_theSanitizer.handleField(path,name_1)){prop=_theSanitizer.value(path,name_1,srcValue,stringifyObjects);}else{prop=_1dsCoreJs.sanitizeProperty(name_1,srcValue,stringifyObjects);}if(prop){var newValue=prop.value;destObj[name_1]=newValue;if(metadataCallback){metadataCallback(theMetaPathKeys,name_1,prop);}if(processSubKeys&&_typeof(newValue)==="object"&&!_1dsCoreJs.isArray(newValue)){var newPath=theMetaPathKeys;if(newPath){newPath=newPath.slice();newPath.push(name_1);}_processPathKeys(srcValue,newValue,path+"."+name_1,checkReserved,newPath,metadataCallback,processSubKeys);}}}});}});}return Serializer2;}();function _addJSONPropertyMetaData(json,propKeys,name,propertyValue){if(propertyValue&&json){var encodedTypeValue=_1dsCoreJs.getCommonSchemaMetaData(propertyValue.value,propertyValue.kind,propertyValue.propertyType);if(encodedTypeValue>-1){var metaData=json[metadata];if(!metaData){metaData=json[metadata]={f:{}};}var metaTarget=metaData[f];if(!metaTarget){metaTarget=metaData[f]={};}if(propKeys){for(var lp=0;lp<propKeys.length;lp++){var key=propKeys[lp];if(!metaTarget[key]){metaTarget[key]={f:{}};}var newTarget=metaTarget[key][f];if(!newTarget){newTarget=metaTarget[key][f]={};}metaTarget=newTarget;}}metaTarget=metaTarget[name]={};if(_1dsCoreJs.isArray(propertyValue.value)){metaTarget["a"]={t:encodedTypeValue};}else{metaTarget["t"]=encodedTypeValue;}}}}var RandomizationLowerThreshold=0.8;var RandomizationUpperThreshold=1.2;var BaseBackoff=3e3;var MaxBackoff=6e5;function retryPolicyShouldRetryForStatus(httpStatusCode){return!(httpStatusCode>=300&&httpStatusCode<500&&httpStatusCode!=408&&httpStatusCode!=429||httpStatusCode==501||httpStatusCode==505);}function retryPolicyGetMillisToBackoffForRetry(retriesSoFar){var waitDuration=0;var minBackoff=BaseBackoff*RandomizationLowerThreshold;var maxBackoff=BaseBackoff*RandomizationUpperThreshold;var randomBackoff=Math.floor(Math.random()*(maxBackoff-minBackoff))+minBackoff;waitDuration=Math.pow(2,retriesSoFar)*randomBackoff;return Math.min(waitDuration,MaxBackoff);}var SecToMsMultiplier=1e3;var KillSwitch=function(){function KillSwitch2(){var _killedTokenDictionary={};function _normalizeTenants(values){var result=[];if(values){_1dsCoreJs.arrForEach(values,function(value){result.push(_1dsCoreJs.strTrim(value));});}return result;}dynamicProto__default(KillSwitch2,this,function(_self){_self.setKillSwitchTenants=function(killTokens,killDuration){if(killTokens&&killDuration){try{var killedTokens=_normalizeTenants(killTokens.split(","));if(killDuration==="this-request-only"){return killedTokens;}var durationMs=parseInt(killDuration,10)*SecToMsMultiplier;for(var i=0;i<killedTokens.length;++i){_killedTokenDictionary[killedTokens[i]]=_1dsCoreJs.dateNow()+durationMs;}}catch(ex){return[];}}return[];};_self.isTenantKilled=function(tenantToken){var killDictionary=_killedTokenDictionary;var name=_1dsCoreJs.strTrim(tenantToken);if(killDictionary[name]!==void 0&&killDictionary[name]>_1dsCoreJs.dateNow()){return true;}delete killDictionary[name];return false;};});}return KillSwitch2;}();var ClockSkewManager=function(){function ClockSkewManager2(){var _allowRequestSending=true;var _shouldAddClockSkewHeaders=true;var _isFirstRequest=true;var _clockSkewHeaderValue="use-collector-delta";var _clockSkewSet=false;dynamicProto__default(ClockSkewManager2,this,function(_self){_self.allowRequestSending=function(){return _allowRequestSending;};_self.firstRequestSent=function(){if(_isFirstRequest){_isFirstRequest=false;if(!_clockSkewSet){_allowRequestSending=false;}}};_self.shouldAddClockSkewHeaders=function(){return _shouldAddClockSkewHeaders;};_self.getClockSkewHeaderValue=function(){return _clockSkewHeaderValue;};_self.setClockSkew=function(timeDeltaInMillis){if(!_clockSkewSet){if(timeDeltaInMillis){_clockSkewHeaderValue=timeDeltaInMillis;_shouldAddClockSkewHeaders=true;_clockSkewSet=true;}else{_shouldAddClockSkewHeaders=false;}_allowRequestSending=true;}};});}return ClockSkewManager2;}();var _a;var strSendAttempt="sendAttempt";var _noResponseQs="&"+strNoResponseBody+"=true";var _eventActionMap=(_a={},_a[1]=strRequeue,_a[100]=strRequeue,_a[200]="sent",_a[8004]=strDropped,_a[8003]=strDropped,_a);var _collectorQsHeaders={};var _collectorHeaderToQs={};function _addCollectorHeaderQsMapping(qsName,headerName,allowQs){_collectorQsHeaders[qsName]=headerName;if(allowQs!==false){_collectorHeaderToQs[headerName]=qsName;}}_addCollectorHeaderQsMapping(strMsaDeviceTicket,strMsaDeviceTicket,false);_addCollectorHeaderQsMapping(strClientVersion,strClientVersion);_addCollectorHeaderQsMapping(strClientId,"Client-Id");_addCollectorHeaderQsMapping(strApiKey,strApiKey);_addCollectorHeaderQsMapping(strTimeDeltaToApply,strTimeDeltaToApply);_addCollectorHeaderQsMapping(strUploadTime,strUploadTime);_addCollectorHeaderQsMapping(strAuthXToken,strAuthXToken);function _getResponseText(xhr){try{return xhr.responseText;}catch(e){}return"";}function _hasHeader(headers,header){var hasHeader=false;if(headers&&header){var keys=_1dsCoreJs.objKeys(headers);if(keys&&keys.length>0){var lowerHeader=header.toLowerCase();for(var lp=0;lp<keys.length;lp++){var value=keys[lp];if(value&&_1dsCoreJs.hasOwnProperty(header,value)&&value.toLowerCase()===lowerHeader){hasHeader=true;break;}}}}return hasHeader;}function _addRequestDetails(details,name,value,useHeaders){if(name&&value&&value.length>0){if(useHeaders&&_collectorQsHeaders[name]){details.hdrs[_collectorQsHeaders[name]]=value;details.useHdrs=true;}else{details.url+="&"+name+"="+value;}}}var HttpManager=function(){function HttpManager2(maxEventsPerBatch,maxConnections,maxRequestRetriesBeforeBackoff,actions,timeoutOverride){this._responseHandlers=[];var _urlString="?cors=true&"+strContentTypeHeader.toLowerCase()+"="+defaultContentType;var _killSwitch=new KillSwitch();var _paused=false;var _clockSkewManager=new ClockSkewManager();var _useBeacons=false;var _outstandingRequests=0;var _postManager;var _sendInterfaces;var _core;var _customHttpInterface=true;var _queryStringParameters=[];var _headers={};var _batchQueue=[];var _serializer=null;var _enableEventTimings=false;var _cookieMgr;var _isUnloading=false;var _useHeaders=false;var _xhrTimeout;var _disableXhrSync;dynamicProto__default(HttpManager2,this,function(_self){var _sendCredentials=true;_self.initialize=function(endpointUrl,core,postChannel,httpInterface,channelConfig){var _a2;if(!channelConfig){channelConfig={};}_urlString=endpointUrl+_urlString;_useHeaders=!_1dsCoreJs.isUndefined(channelConfig.avoidOptions)?!channelConfig.avoidOptions:true;_core=core;_cookieMgr=core.getCookieMgr();_enableEventTimings=!_core.config.disableEventTimings;var enableCompoundKey=!!_core.config.enableCompoundKey;_postManager=postChannel;var valueSanitizer=channelConfig.valueSanitizer;var stringifyObjects=channelConfig.stringifyObjects;if(!_1dsCoreJs.isUndefined(channelConfig.enableCompoundKey)){enableCompoundKey=!!channelConfig.enableCompoundKey;}_xhrTimeout=channelConfig.xhrTimeout;_disableXhrSync=channelConfig.disableXhrSync;_useBeacons=!_1dsCoreJs.isReactNative();_serializer=new Serializer(_core,valueSanitizer,stringifyObjects,enableCompoundKey);var syncHttpInterface=httpInterface;var beaconHttpInterface=channelConfig.alwaysUseXhrOverride?httpInterface:null;var fetchSyncHttpInterface=channelConfig.alwaysUseXhrOverride?httpInterface:null;if(!httpInterface){_customHttpInterface=false;var location_1=_1dsCoreJs.getLocation();if(location_1&&location_1.protocol&&location_1.protocol.toLowerCase()==="file:"){_sendCredentials=false;}var theTransports=[];if(_1dsCoreJs.isReactNative()){theTransports=[2,1];}else{theTransports=[1,2,3];}var configTransports=channelConfig.transports;if(configTransports){if(_1dsCoreJs.isNumber(configTransports)){theTransports=[configTransports].concat(theTransports);}else if(_1dsCoreJs.isArray(configTransports)){theTransports=configTransports.concat(theTransports);}}httpInterface=_getSenderInterface(theTransports,false);syncHttpInterface=_getSenderInterface(theTransports,true);if(!httpInterface){_postManager.diagLog().warnToConsole("No available transport to send events");}}_sendInterfaces=(_a2={},_a2[0]=httpInterface,_a2[1]=syncHttpInterface||_getSenderInterface([1,2,3],true),_a2[2]=beaconHttpInterface||_getSenderInterface([3,2],true)||syncHttpInterface||_getSenderInterface([1],true),_a2[3]=fetchSyncHttpInterface||_getSenderInterface([2,3],true)||syncHttpInterface||_getSenderInterface([1],true),_a2);};function _getSenderInterface(transports,syncSupport){var transportType=0;var sendPostFunc=null;var lp=0;while(sendPostFunc==null&&lp<transports.length){transportType=transports[lp];if(transportType===1){if(_1dsCoreJs.useXDomainRequest()){sendPostFunc=_xdrSendPost;}else if(_1dsCoreJs.isXhrSupported()){sendPostFunc=_xhrSendPost;}}else if(transportType===2&&_1dsCoreJs.isFetchSupported(syncSupport)){sendPostFunc=_fetchSendPost;}else if(_useBeacons&&transportType===3&&_1dsCoreJs.isBeaconsSupported()){sendPostFunc=_beaconSendPost;}lp++;}if(sendPostFunc){return{_transport:transportType,_isSync:syncSupport,sendPOST:sendPostFunc};}return null;}_self["_getDbgPlgTargets"]=function(){return[_sendInterfaces[0],_killSwitch,_serializer,_sendInterfaces];};function _xdrSendPost(payload,oncomplete,sync){var xdr=new XDomainRequest();xdr.open(Method,payload.urlString);if(payload.timeout){xdr.timeout=payload.timeout;}xdr.onload=function(){var response=_getResponseText(xdr);_doOnComplete(oncomplete,200,{},response);_handleCollectorResponse(response);};xdr.onerror=function(){_doOnComplete(oncomplete,400,{});};xdr.ontimeout=function(){_doOnComplete(oncomplete,500,{});};xdr.onprogress=function(){};if(sync){xdr.send(payload.data);}else{timeoutOverride.set(function(){xdr.send(payload.data);},0);}}function _fetchSendPost(payload,oncomplete,sync){var _a2;var theUrl=payload.urlString;var ignoreResponse=false;var responseHandled=false;var requestInit=(_a2={body:payload.data,method:Method},_a2[DisabledPropertyName]=true,_a2);if(sync){requestInit.keepalive=true;if(payload._sendReason===2){ignoreResponse=true;theUrl+=_noResponseQs;}}if(_sendCredentials){requestInit.credentials="include";}if(payload.headers&&_1dsCoreJs.objKeys(payload.headers).length>0){requestInit.headers=payload.headers;}fetch(theUrl,requestInit).then(function(response){var headerMap={};var responseText="";if(response.headers){response.headers.forEach(function(value,name){headerMap[name]=value;});}if(response.body){response.text().then(function(text){responseText=text;});}if(!responseHandled){responseHandled=true;_doOnComplete(oncomplete,response.status,headerMap,responseText);_handleCollectorResponse(responseText);}})["catch"](function(error){if(!responseHandled){responseHandled=true;_doOnComplete(oncomplete,0,{});}});if(ignoreResponse&&!responseHandled){responseHandled=true;_doOnComplete(oncomplete,200,{});}if(!responseHandled&&payload.timeout>0){timeoutOverride.set(function(){if(!responseHandled){responseHandled=true;_doOnComplete(oncomplete,500,{});}},payload.timeout);}}function _xhrSendPost(payload,oncomplete,sync){var theUrl=payload.urlString;function _appendHeader(theHeaders,xhr,name){if(!theHeaders[name]&&xhr&&xhr.getResponseHeader){var value=xhr.getResponseHeader(name);if(value){theHeaders[name]=_1dsCoreJs.strTrim(value);}}return theHeaders;}function _getAllResponseHeaders(xhr){var theHeaders={};if(!xhr.getAllResponseHeaders){theHeaders=_appendHeader(theHeaders,xhr,strTimeDeltaHeader);theHeaders=_appendHeader(theHeaders,xhr,strKillDurationHeader);theHeaders=_appendHeader(theHeaders,xhr,strKillDurationSecondsHeader);}else{theHeaders=_convertAllHeadersToMap(xhr.getAllResponseHeaders());}return theHeaders;}function xhrComplete(xhr,responseTxt){_doOnComplete(oncomplete,xhr.status,_getAllResponseHeaders(xhr),responseTxt);}if(sync&&payload.disableXhrSync){sync=false;}var xhrRequest=_1dsCoreJs.openXhr(Method,theUrl,_sendCredentials,true,sync,payload.timeout);_1dsCoreJs.objForEachKey(payload.headers,function(name,value){xhrRequest.setRequestHeader(name,value);});xhrRequest.onload=function(){var response=_getResponseText(xhrRequest);xhrComplete(xhrRequest,response);_handleCollectorResponse(response);};xhrRequest.onerror=function(){xhrComplete(xhrRequest);};xhrRequest.ontimeout=function(){xhrComplete(xhrRequest);};xhrRequest.send(payload.data);}function _doOnComplete(oncomplete,status,headers,response){try{oncomplete(status,headers,response);}catch(e){_1dsCoreJs._throwInternal(_postManager.diagLog(),2,518,_1dsCoreJs.dumpObj(e));}}function _beaconSendPost(payload,oncomplete,sync){var internalPayloadData=payload;var status=200;var thePayload=internalPayloadData._thePayload;var theUrl=payload.urlString+_noResponseQs;try{var nav_1=_1dsCoreJs.getNavigator();if(!nav_1.sendBeacon(theUrl,payload.data)){if(thePayload){var droppedBatches_1=[];_1dsCoreJs.arrForEach(thePayload.batches,function(theBatch){if(droppedBatches_1&&theBatch&&theBatch.count()>0){var theEvents=theBatch.events();for(var lp=0;lp<theEvents.length;lp++){if(!nav_1.sendBeacon(theUrl,_serializer.getEventBlob(theEvents[lp]))){droppedBatches_1.push(theBatch.split(lp));break;}}}else{droppedBatches_1.push(theBatch.split(0));}});_sendBatchesNotification(droppedBatches_1,8003,thePayload.sendType,true);}else{status=0;}}}catch(ex){_postManager.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+_1dsCoreJs.dumpObj(ex));status=0;}finally{_doOnComplete(oncomplete,status,{},"");}}function _isBeaconPayload(sendType){return sendType===2||sendType===3;}function _adjustSendType(sendType){if(_isUnloading&&_isBeaconPayload(sendType)){sendType=2;}return sendType;}_self.addQueryStringParameter=function(name,value){for(var i=0;i<_queryStringParameters.length;i++){if(_queryStringParameters[i].name===name){_queryStringParameters[i].value=value;return;}}_queryStringParameters.push({name:name,value:value});};_self.addHeader=function(name,value){_headers[name]=value;};_self.canSendRequest=function(){return _hasIdleConnection()&&_clockSkewManager.allowRequestSending();};_self.sendQueuedRequests=function(sendType,sendReason){if(_1dsCoreJs.isUndefined(sendType)){sendType=0;}if(_isUnloading){sendType=_adjustSendType(sendType);sendReason=2;}if(_canSendPayload(_batchQueue,sendType,0)){_sendBatches(_clearQueue(),0,false,sendType,sendReason||0);}};_self.isCompletelyIdle=function(){return!_paused&&_outstandingRequests===0&&_batchQueue.length===0;};_self.setUnloading=function(value){_isUnloading=value;};_self.addBatch=function(theBatch){if(theBatch&&theBatch.count()>0){if(_killSwitch.isTenantKilled(theBatch.iKey())){return false;}_batchQueue.push(theBatch);}return true;};_self.teardown=function(){if(_batchQueue.length>0){_sendBatches(_clearQueue(),0,true,2,2);}};_self.pause=function(){_paused=true;};_self.resume=function(){_paused=false;_self.sendQueuedRequests(0,4);};_self.sendSynchronousBatch=function(batch,sendType,sendReason){if(batch&&batch.count()>0){if(_1dsCoreJs.isNullOrUndefined(sendType)){sendType=1;}if(_isUnloading){sendType=_adjustSendType(sendType);sendReason=2;}_sendBatches([batch],0,false,sendType,sendReason||0);}};function _hasIdleConnection(){return!_paused&&_outstandingRequests<maxConnections;}function _clearQueue(){var theQueue=_batchQueue;_batchQueue=[];return theQueue;}function _canSendPayload(theBatches,sendType,retryCnt){var result=false;if(theBatches&&theBatches.length>0&&!_paused&&_sendInterfaces[sendType]&&_serializer){result=sendType!==0||_hasIdleConnection()&&(retryCnt>0||_clockSkewManager.allowRequestSending());}return result;}function _createDebugBatches(theBatches){var values={};if(theBatches){_1dsCoreJs.arrForEach(theBatches,function(theBatch,idx){values[idx]={iKey:theBatch.iKey(),evts:theBatch.events()};});}return values;}function _sendBatches(theBatches,retryCount,isTeardown,sendType,sendReason){if(!theBatches||theBatches.length===0){return;}if(_paused){_sendBatchesNotification(theBatches,1,sendType);return;}sendType=_adjustSendType(sendType);try{var orgBatches_1=theBatches;var isSynchronous_1=sendType!==0;_1dsCoreJs.doPerf(_core,function(){return"HttpManager:_sendBatches";},function(perfEvt){if(perfEvt){theBatches=theBatches.slice(0);}var droppedBatches=[];var thePayload=null;var serializationStart=_1dsCoreJs.getTime();var sendInterface=_sendInterfaces[sendType]||(isSynchronous_1?_sendInterfaces[1]:_sendInterfaces[0]);var isBeaconTransport=(_isUnloading||_isBeaconPayload(sendType)||sendInterface&&sendInterface._transport===3)&&_canUseSendBeaconApi();while(_canSendPayload(theBatches,sendType,retryCount)){var theBatch=theBatches.shift();if(theBatch&&theBatch.count()>0){if(!_killSwitch.isTenantKilled(theBatch.iKey())){thePayload=thePayload||_serializer.createPayload(retryCount,isTeardown,isSynchronous_1,isBeaconTransport,sendReason,sendType);if(!_serializer.appendPayload(thePayload,theBatch,maxEventsPerBatch)){_doPayloadSend(thePayload,serializationStart,_1dsCoreJs.getTime(),sendReason);serializationStart=_1dsCoreJs.getTime();theBatches=[theBatch].concat(theBatches);thePayload=null;}else if(thePayload.overflow!==null){theBatches=[thePayload.overflow].concat(theBatches);thePayload.overflow=null;_doPayloadSend(thePayload,serializationStart,_1dsCoreJs.getTime(),sendReason);serializationStart=_1dsCoreJs.getTime();thePayload=null;}}else{droppedBatches.push(theBatch);}}}if(thePayload){_doPayloadSend(thePayload,serializationStart,_1dsCoreJs.getTime(),sendReason);}if(theBatches.length>0){_batchQueue=theBatches.concat(_batchQueue);}_sendBatchesNotification(droppedBatches,8004,sendType);},function(){return{batches:_createDebugBatches(orgBatches_1),retryCount:retryCount,isTeardown:isTeardown,isSynchronous:isSynchronous_1,sendReason:sendReason,useSendBeacon:_isBeaconPayload(sendType),sendType:sendType};},!isSynchronous_1);}catch(ex){_1dsCoreJs._throwInternal(_postManager.diagLog(),2,48,"Unexpected Exception sending batch: "+_1dsCoreJs.dumpObj(ex));}}function _buildRequestDetails(thePayload,useHeaders){var requestDetails={url:_urlString,hdrs:{},useHdrs:false};if(!useHeaders){_1dsCoreJs.objForEachKey(_headers,function(name,value){if(_collectorHeaderToQs[name]){_addRequestDetails(requestDetails,_collectorHeaderToQs[name],value,false);}else{requestDetails.hdrs[name]=value;requestDetails.useHdrs=true;}});}else{requestDetails.hdrs=_1dsCoreJs.extend(requestDetails.hdrs,_headers);requestDetails.useHdrs=_1dsCoreJs.objKeys(requestDetails.hdrs).length>0;}_addRequestDetails(requestDetails,strClientId,"NO_AUTH",useHeaders);_addRequestDetails(requestDetails,strClientVersion,_1dsCoreJs.FullVersionString,useHeaders);var apiQsKeys="";_1dsCoreJs.arrForEach(thePayload.apiKeys,function(apiKey){if(apiQsKeys.length>0){apiQsKeys+=",";}apiQsKeys+=apiKey;});_addRequestDetails(requestDetails,strApiKey,apiQsKeys,useHeaders);_addRequestDetails(requestDetails,strUploadTime,_1dsCoreJs.dateNow().toString(),useHeaders);var msfpc=_getMsfpc2(thePayload);if(_1dsCoreJs.isValueAssigned(msfpc)){requestDetails.url+="&ext.intweb.msfpc="+msfpc;}if(_clockSkewManager.shouldAddClockSkewHeaders()){_addRequestDetails(requestDetails,strTimeDeltaToApply,_clockSkewManager.getClockSkewHeaderValue(),useHeaders);}if(_core.getWParam){var wParam=_core.getWParam();if(wParam>=0){requestDetails.url+="&w="+wParam;}}for(var i=0;i<_queryStringParameters.length;i++){requestDetails.url+="&"+_queryStringParameters[i].name+"="+_queryStringParameters[i].value;}return requestDetails;}function _canUseSendBeaconApi(){return!_customHttpInterface&&_useBeacons&&_1dsCoreJs.isBeaconsSupported();}function _setTimingValue(timings,name,value){timings[name]=timings[name]||{};timings[name][_postManager.identifier]=value;}function _doPayloadSend(thePayload,serializationStart,serializationCompleted,sendReason){if(thePayload&&thePayload.payloadBlob&&thePayload.payloadBlob.length>0){var useSendHook_1=!!_self.sendHook;var sendInterface_1=_sendInterfaces[thePayload.sendType];if(!_isBeaconPayload(thePayload.sendType)&&thePayload.isBeacon&&thePayload.sendReason===2){sendInterface_1=_sendInterfaces[2]||_sendInterfaces[3]||sendInterface_1;}var useHeaders_1=_useHeaders;if(thePayload.isBeacon||sendInterface_1._transport===3){useHeaders_1=false;}var requestDetails_1=_buildRequestDetails(thePayload,useHeaders_1);useHeaders_1=useHeaders_1||requestDetails_1.useHdrs;var sendEventStart_1=_1dsCoreJs.getTime();_1dsCoreJs.doPerf(_core,function(){return"HttpManager:_doPayloadSend";},function(){for(var batchLp=0;batchLp<thePayload.batches.length;batchLp++){var theBatch=thePayload.batches[batchLp];var theEvents=theBatch.events();for(var evtLp=0;evtLp<theEvents.length;evtLp++){var telemetryItem=theEvents[evtLp];if(_enableEventTimings){var timings=telemetryItem.timings=telemetryItem.timings||{};_setTimingValue(timings,"sendEventStart",sendEventStart_1);_setTimingValue(timings,"serializationStart",serializationStart);_setTimingValue(timings,"serializationCompleted",serializationCompleted);}telemetryItem[strSendAttempt]>0?telemetryItem[strSendAttempt]++:telemetryItem[strSendAttempt]=1;}}_sendBatchesNotification(thePayload.batches,1e3+(sendReason||0),thePayload.sendType,true);var orgPayloadData={data:thePayload.payloadBlob,urlString:requestDetails_1.url,headers:requestDetails_1.hdrs,_thePayload:thePayload,_sendReason:sendReason,timeout:_xhrTimeout};if(!_1dsCoreJs.isUndefined(_disableXhrSync)){orgPayloadData.disableXhrSync=!!_disableXhrSync;}if(useHeaders_1){if(!_hasHeader(orgPayloadData.headers,strCacheControl)){orgPayloadData.headers[strCacheControl]=defaultCacheControl;}if(!_hasHeader(orgPayloadData.headers,strContentTypeHeader)){orgPayloadData.headers[strContentTypeHeader]=defaultContentType;}}var sender=null;if(sendInterface_1){sender=function sender(payload){_clockSkewManager.firstRequestSent();var onComplete=function onComplete(status,headers){_retryRequestIfNeeded(status,headers,thePayload,sendReason);};var isSync=thePayload.isTeardown||thePayload.isSync;try{sendInterface_1.sendPOST(payload,onComplete,isSync);if(_self.sendListener){_self.sendListener(orgPayloadData,payload,isSync,thePayload.isBeacon);}}catch(ex){_postManager.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+_1dsCoreJs.dumpObj(ex));_doOnComplete(onComplete,0,{});}};}_1dsCoreJs.doPerf(_core,function(){return"HttpManager:_doPayloadSend.sender";},function(){if(sender){if(thePayload.sendType===0){_outstandingRequests++;}if(useSendHook_1&&!thePayload.isBeacon&&sendInterface_1._transport!==3){var hookData_1={data:orgPayloadData.data,urlString:orgPayloadData.urlString,headers:_1dsCoreJs.extend({},orgPayloadData.headers),timeout:orgPayloadData.timeout,disableXhrSync:orgPayloadData.disableXhrSync};var senderCalled_1=false;_1dsCoreJs.doPerf(_core,function(){return"HttpManager:_doPayloadSend.sendHook";},function(){try{_self.sendHook(hookData_1,function(payload){senderCalled_1=true;if(!_customHttpInterface&&!payload._thePayload){payload._thePayload=payload._thePayload||orgPayloadData._thePayload;payload._sendReason=payload._sendReason||orgPayloadData._sendReason;}sender(payload);},thePayload.isSync||thePayload.isTeardown);}catch(ex){if(!senderCalled_1){sender(orgPayloadData);}}});}else{sender(orgPayloadData);}}});},function(){return{thePayload:thePayload,serializationStart:serializationStart,serializationCompleted:serializationCompleted,sendReason:sendReason};},thePayload.isSync);}if(thePayload.sizeExceed&&thePayload.sizeExceed.length>0){_sendBatchesNotification(thePayload.sizeExceed,8003,thePayload.sendType);}if(thePayload.failedEvts&&thePayload.failedEvts.length>0){_sendBatchesNotification(thePayload.failedEvts,8002,thePayload.sendType);}}function _addEventCompletedTimings(theEvents,sendEventCompleted){if(_enableEventTimings){_1dsCoreJs.arrForEach(theEvents,function(theEvent){var timings=theEvent.timings=theEvent.timings||{};_setTimingValue(timings,"sendEventCompleted",sendEventCompleted);});}}function _retryRequestIfNeeded(status,headers,thePayload,sendReason){var reason=9e3;var droppedBatches=null;var isRetrying=false;var backOffTrans=false;try{var shouldRetry=true;if(_typeof(status)!==_1dsCoreJs.strUndefined){if(headers){_clockSkewManager.setClockSkew(headers[strTimeDeltaHeader]);var killDuration=headers[strKillDurationHeader]||headers["kill-duration-seconds"];_1dsCoreJs.arrForEach(_killSwitch.setKillSwitchTenants(headers[strKillTokensHeader],killDuration),function(killToken){_1dsCoreJs.arrForEach(thePayload.batches,function(theBatch){if(theBatch.iKey()===killToken){droppedBatches=droppedBatches||[];var removedEvents=theBatch.split(0);thePayload.numEvents-=removedEvents.count();droppedBatches.push(removedEvents);}});});}if(status==200||status==204){reason=200;return;}if(!retryPolicyShouldRetryForStatus(status)||thePayload.numEvents<=0){shouldRetry=false;}reason=9e3+status%1e3;}if(shouldRetry){reason=100;var retryCount_1=thePayload.retryCnt;if(thePayload.sendType===0){if(retryCount_1<maxRequestRetriesBeforeBackoff){isRetrying=true;_doAction(function(){if(thePayload.sendType===0){_outstandingRequests--;}_sendBatches(thePayload.batches,retryCount_1+1,thePayload.isTeardown,_isUnloading?2:thePayload.sendType,5);},_isUnloading,retryPolicyGetMillisToBackoffForRetry(retryCount_1));}else{backOffTrans=true;if(_isUnloading){reason=8001;}}}}}finally{if(!isRetrying){_clockSkewManager.setClockSkew();_handleRequestFinished(thePayload,reason,sendReason,backOffTrans);}_sendBatchesNotification(droppedBatches,8004,thePayload.sendType);}}function _handleRequestFinished(thePayload,batchReason,sendReason,backOffTrans){try{if(backOffTrans){_postManager._backOffTransmission();}if(batchReason===200){if(!backOffTrans&&!thePayload.isSync){_postManager._clearBackOff();}_addCompleteTimings(thePayload.batches);}_sendBatchesNotification(thePayload.batches,batchReason,thePayload.sendType,true);}finally{if(thePayload.sendType===0){_outstandingRequests--;if(sendReason!==5){_self.sendQueuedRequests(thePayload.sendType,sendReason);}}}}function _addCompleteTimings(theBatches){if(_enableEventTimings){var sendEventCompleted_1=_1dsCoreJs.getTime();_1dsCoreJs.arrForEach(theBatches,function(theBatch){if(theBatch&&theBatch.count()>0){_addEventCompletedTimings(theBatch.events(),sendEventCompleted_1);}});}}function _doAction(cb,isSync,interval){if(isSync){cb();}else{timeoutOverride.set(cb,interval);}}function _convertAllHeadersToMap(headersString){var headers={};if(_1dsCoreJs.isString(headersString)){var headersArray=_1dsCoreJs.strTrim(headersString).split(/[\r\n]+/);_1dsCoreJs.arrForEach(headersArray,function(headerEntry){if(headerEntry){var idx=headerEntry.indexOf(": ");if(idx!==-1){var header=_1dsCoreJs.strTrim(headerEntry.substring(0,idx)).toLowerCase();var value=_1dsCoreJs.strTrim(headerEntry.substring(idx+1));headers[header]=value;}else{headers[_1dsCoreJs.strTrim(headerEntry)]=1;}}});}return headers;}function _getMsfpc2(thePayload){for(var lp=0;lp<thePayload.batches.length;lp++){var msfpc=thePayload.batches[lp].Msfpc();if(msfpc){return encodeURIComponent(msfpc);}}return"";}function _handleCollectorResponse(responseText){var responseHandlers=_self._responseHandlers;try{for(var i=0;i<responseHandlers.length;i++){try{responseHandlers[i](responseText);}catch(e){_1dsCoreJs._throwInternal(_postManager.diagLog(),1,519,"Response handler failed: "+e);}}if(responseText){var response=JSON.parse(responseText);if(_1dsCoreJs.isValueAssigned(response.webResult)&&_1dsCoreJs.isValueAssigned(response.webResult[strMsfpc])){_cookieMgr.set("MSFPC",response.webResult[strMsfpc],365*86400);}}}catch(ex){}}function _sendBatchesNotification(theBatches,batchReason,sendType,sendSync){if(theBatches&&theBatches.length>0&&actions){var theAction_1=actions[_getNotificationAction(batchReason)];if(theAction_1){var isSyncRequest_1=sendType!==0;_1dsCoreJs.doPerf(_core,function(){return"HttpManager:_sendBatchesNotification";},function(){_doAction(function(){try{theAction_1.call(actions,theBatches,batchReason,isSyncRequest_1,sendType);}catch(e){_1dsCoreJs._throwInternal(_postManager.diagLog(),1,74,"send request notification failed: "+e);}},sendSync||isSyncRequest_1,0);},function(){return{batches:_createDebugBatches(theBatches),reason:batchReason,isSync:isSyncRequest_1,sendSync:sendSync,sendType:sendType};},!isSyncRequest_1);}}}function _getNotificationAction(reason){var action=_eventActionMap[reason];if(!_1dsCoreJs.isValueAssigned(action)){action=strOther;if(reason>=9e3&&reason<=9999){action=strResponseFail;}else if(reason>=8e3&&reason<=8999){action=strDropped;}else if(reason>=1e3&&reason<=1999){action=strSending;}}return action;}});}return HttpManager2;}();function defaultSetTimeout(callback,ms){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i];}return setTimeout(callback,ms,args);}function defaultClearTimeout(timeoutId){clearTimeout(timeoutId);}function createTimeoutWrapper(argSetTimeout,argClearTimeout){return{set:argSetTimeout||defaultSetTimeout,clear:argClearTimeout||defaultClearTimeout};}var FlushCheckTimer=0.25;var MaxNumberEventPerBatch=500;var EventsDroppedAtOneTime=20;var MaxSendAttempts=6;var MaxSyncUnloadSendAttempts=2;var MaxBackoffCount=4;var MaxConnections=2;var MaxRequestRetriesBeforeBackoff=1;var strEventsDiscarded="eventsDiscarded";var strOverrideInstrumentationKey="overrideInstrumentationKey";var strMaxEventRetryAttempts="maxEventRetryAttempts";var strMaxUnloadEventRetryAttempts="maxUnloadEventRetryAttempts";var strAddUnloadCb="addUnloadCb";var PostChannel=function(_super){applicationinsightsShims.__extendsFn(PostChannel2,_super);function PostChannel2(){var _this=_super.call(this)||this;_this.identifier="PostChannel";_this.priority=1011;_this.version="3.2.3";var _config;var _isTeardownCalled=false;var _flushCallbackQueue=[];var _flushCallbackTimerId=null;var _paused=false;var _immediateQueueSize=0;var _immediateQueueSizeLimit=500;var _queueSize=0;var _queueSizeLimit=1e4;var _profiles={};var _currentProfile=RT_PROFILE;var _scheduledTimerId=null;var _immediateTimerId=null;var _currentBackoffCount=0;var _timerCount=0;var _xhrOverride;var _httpManager;var _batchQueues={};var _autoFlushEventsLimit;var _autoFlushBatchLimit;var _delayedBatchSendLatency=-1;var _delayedBatchReason;var _optimizeObject=true;var _isPageUnloadTriggered=false;var _maxEventSendAttempts=MaxSendAttempts;var _maxUnloadEventSendAttempts=MaxSyncUnloadSendAttempts;var _evtNamespace;var _timeoutWrapper;dynamicProto__default(PostChannel2,_this,function(_self,_base){_initDefaults();_self["_getDbgPlgTargets"]=function(){return[_httpManager];};_self.initialize=function(coreConfig,core,extensions3){_1dsCoreJs.doPerf(core,function(){return"PostChannel:initialize";},function(){var extendedCore=core;_base.initialize(coreConfig,core,extensions3);try{var hasAddUnloadCb=!!core[strAddUnloadCb];_evtNamespace=_1dsCoreJs.mergeEvtNamespace(_1dsCoreJs.createUniqueNamespace(_self.identifier),core.evtNamespace&&core.evtNamespace());var ctx=_self._getTelCtx();coreConfig.extensionConfig[_self.identifier]=coreConfig.extensionConfig[_self.identifier]||{};_config=ctx.getExtCfg(_self.identifier);_timeoutWrapper=createTimeoutWrapper(_config.setTimeoutOverride,_config.clearTimeoutOverride);_optimizeObject=!_config.disableOptimizeObj&&_1dsCoreJs.isChromium();_hookWParam(extendedCore);if(_config.eventsLimitInMem>0){_queueSizeLimit=_config.eventsLimitInMem;}if(_config.immediateEventLimit>0){_immediateQueueSizeLimit=_config.immediateEventLimit;}if(_config.autoFlushEventsLimit>0){_autoFlushEventsLimit=_config.autoFlushEventsLimit;}if(_1dsCoreJs.isNumber(_config[strMaxEventRetryAttempts])){_maxEventSendAttempts=_config[strMaxEventRetryAttempts];}if(_1dsCoreJs.isNumber(_config[strMaxUnloadEventRetryAttempts])){_maxUnloadEventSendAttempts=_config[strMaxUnloadEventRetryAttempts];}_setAutoLimits();if(_config.httpXHROverride&&_config.httpXHROverride.sendPOST){_xhrOverride=_config.httpXHROverride;}if(_1dsCoreJs.isValueAssigned(coreConfig.anonCookieName)){_httpManager.addQueryStringParameter("anoncknm",coreConfig.anonCookieName);}_httpManager.sendHook=_config.payloadPreprocessor;_httpManager.sendListener=_config.payloadListener;var endpointUrl=_config.overrideEndpointUrl?_config.overrideEndpointUrl:coreConfig.endpointUrl;_self._notificationManager=coreConfig.extensionConfig.NotificationManager;_httpManager.initialize(endpointUrl,_self.core,_self,_xhrOverride,_config);var excludePageUnloadEvents=coreConfig.disablePageUnloadEvents||[];_1dsCoreJs.addPageUnloadEventListener(_handleUnloadEvents,excludePageUnloadEvents,_evtNamespace);_1dsCoreJs.addPageHideEventListener(_handleUnloadEvents,excludePageUnloadEvents,_evtNamespace);_1dsCoreJs.addPageShowEventListener(_handleShowEvents,coreConfig.disablePageShowEvents,_evtNamespace);}catch(e){_self.setInitialized(false);throw e;}},function(){return{coreConfig:coreConfig,core:core,extensions:extensions3};});};_self.processTelemetry=function(ev,itemCtx){_1dsCoreJs.setProcessTelemetryTimings(ev,_self.identifier);itemCtx=_self._getTelCtx(itemCtx);var channelConfig=itemCtx.getExtCfg(_self.identifier);var disableTelemetry=!!_config.disableTelemetry;if(channelConfig){disableTelemetry=disableTelemetry||!!channelConfig.disableTelemetry;}var event=ev;if(!disableTelemetry&&!_isTeardownCalled){if(_config[strOverrideInstrumentationKey]){event.iKey=_config[strOverrideInstrumentationKey];}if(channelConfig&&channelConfig[strOverrideInstrumentationKey]){event.iKey=channelConfig[strOverrideInstrumentationKey];}_addEventToQueues(event,true);if(_isPageUnloadTriggered){_releaseAllQueues(2,2);}else{_scheduleTimer();}}_self.processNext(event,itemCtx);};_self._doTeardown=function(unloadCtx,unloadState){_releaseAllQueues(2,2);_isTeardownCalled=true;_httpManager.teardown();_1dsCoreJs.removePageUnloadEventListener(null,_evtNamespace);_1dsCoreJs.removePageHideEventListener(null,_evtNamespace);_1dsCoreJs.removePageShowEventListener(null,_evtNamespace);_initDefaults();};function _hookWParam(extendedCore){var existingGetWParamMethod=extendedCore.getWParam;extendedCore.getWParam=function(){var wparam=0;if(_config.ignoreMc1Ms0CookieProcessing){wparam=wparam|2;}return wparam|existingGetWParamMethod();};}function _handleUnloadEvents(evt){var theEvt=evt||_1dsCoreJs.getWindow().event;if(theEvt.type!=="beforeunload"){_isPageUnloadTriggered=true;_httpManager.setUnloading(_isPageUnloadTriggered);}_releaseAllQueues(2,2);}function _handleShowEvents(evt){_isPageUnloadTriggered=false;_httpManager.setUnloading(_isPageUnloadTriggered);}function _addEventToQueues(event,append){if(!event.sendAttempt){event.sendAttempt=0;}if(!event.latency){event.latency=1;}if(event.ext&&event.ext["trace"]){delete event.ext["trace"];}if(event.ext&&event.ext["user"]&&event.ext["user"]["id"]){delete event.ext["user"]["id"];}if(_optimizeObject){event.ext=_1dsCoreJs.optimizeObject(event.ext);if(event.baseData){event.baseData=_1dsCoreJs.optimizeObject(event.baseData);}if(event.data){event.data=_1dsCoreJs.optimizeObject(event.data);}}if(event.sync){if(_currentBackoffCount||_paused){event.latency=3;event.sync=false;}else{if(_httpManager){if(_optimizeObject){event=_1dsCoreJs.optimizeObject(event);}_httpManager.sendSynchronousBatch(EventBatch.create(event.iKey,[event]),event.sync===true?1:event.sync,3);return;}}}var evtLatency=event.latency;var queueSize=_queueSize;var queueLimit=_queueSizeLimit;if(evtLatency===4){queueSize=_immediateQueueSize;queueLimit=_immediateQueueSizeLimit;}var eventDropped=false;if(queueSize<queueLimit){eventDropped=!_addEventToProperQueue(event,append);}else{var dropLatency=1;var dropNumber=EventsDroppedAtOneTime;if(evtLatency===4){dropLatency=4;dropNumber=1;}eventDropped=true;if(_dropEventWithLatencyOrLess(event.iKey,event.latency,dropLatency,dropNumber)){eventDropped=!_addEventToProperQueue(event,append);}}if(eventDropped){_notifyEvents(strEventsDiscarded,[event],_1dsCoreJs.EventsDiscardedReason.QueueFull);}}_self.setEventQueueLimits=function(eventLimit,autoFlushLimit){_queueSizeLimit=eventLimit>0?eventLimit:1e4;_autoFlushEventsLimit=autoFlushLimit>0?autoFlushLimit:0;_setAutoLimits();var doFlush=_queueSize>eventLimit;if(!doFlush&&_autoFlushBatchLimit>0){for(var latency=1;!doFlush&&latency<=3;latency++){var batchQueue=_batchQueues[latency];if(batchQueue&&batchQueue.batches){_1dsCoreJs.arrForEach(batchQueue.batches,function(theBatch){if(theBatch&&theBatch.count()>=_autoFlushBatchLimit){doFlush=true;}});}}}_performAutoFlush(true,doFlush);};_self.pause=function(){_clearScheduledTimer();_paused=true;_httpManager.pause();};_self.resume=function(){_paused=false;_httpManager.resume();_scheduleTimer();};_self.addResponseHandler=function(responseHandler){_httpManager._responseHandlers.push(responseHandler);};_self._loadTransmitProfiles=function(profiles){_resetTransmitProfiles();_1dsCoreJs.objForEachKey(profiles,function(profileName,profileValue){var profLen=profileValue.length;if(profLen>=2){var directValue=profLen>2?profileValue[2]:0;profileValue.splice(0,profLen-2);if(profileValue[1]<0){profileValue[0]=-1;}if(profileValue[1]>0&&profileValue[0]>0){var timerMultiplier=profileValue[0]/profileValue[1];profileValue[0]=Math.ceil(timerMultiplier)*profileValue[1];}if(directValue>=0&&profileValue[1]>=0&&directValue>profileValue[1]){directValue=profileValue[1];}profileValue.push(directValue);_profiles[profileName]=profileValue;}});};_self.flush=function(async,callback,sendReason){if(async===void 0){async=true;}if(!_paused){sendReason=sendReason||1;if(async){if(_flushCallbackTimerId==null){_clearScheduledTimer();_queueBatches(1,0,sendReason);_flushCallbackTimerId=_createTimer(function(){_flushCallbackTimerId=null;_flushImpl(callback,sendReason);},0);}else{_flushCallbackQueue.push(callback);}}else{var cleared=_clearScheduledTimer();_sendEventsForLatencyAndAbove(1,1,sendReason);if(callback!==null&&callback!==void 0){callback();}if(cleared){_scheduleTimer();}}}};_self.setMsaAuthTicket=function(ticket){_httpManager.addHeader(strMsaDeviceTicket,ticket);};_self.hasEvents=_hasEvents;_self._setTransmitProfile=function(profileName){if(_currentProfile!==profileName&&_profiles[profileName]!==void 0){_clearScheduledTimer();_currentProfile=profileName;_scheduleTimer();}};function _sendEventsForLatencyAndAbove(latency,sendType,sendReason){var queued=_queueBatches(latency,sendType,sendReason);_httpManager.sendQueuedRequests(sendType,sendReason);return queued;}function _hasEvents(){return _queueSize>0;}function _scheduleTimer(){if(_delayedBatchSendLatency>=0&&_queueBatches(_delayedBatchSendLatency,0,_delayedBatchReason)){_httpManager.sendQueuedRequests(0,_delayedBatchReason);}if(_immediateQueueSize>0&&!_immediateTimerId&&!_paused){var immediateTimeOut=_profiles[_currentProfile][2];if(immediateTimeOut>=0){_immediateTimerId=_createTimer(function(){_immediateTimerId=null;_sendEventsForLatencyAndAbove(4,0,1);_scheduleTimer();},immediateTimeOut);}}var timeOut=_profiles[_currentProfile][1];if(!_scheduledTimerId&&!_flushCallbackTimerId&&timeOut>=0&&!_paused){if(_hasEvents()){_scheduledTimerId=_createTimer(function(){_scheduledTimerId=null;_sendEventsForLatencyAndAbove(_timerCount===0?3:1,0,1);_timerCount++;_timerCount%=2;_scheduleTimer();},timeOut);}else{_timerCount=0;}}}_self._backOffTransmission=function(){if(_currentBackoffCount<MaxBackoffCount){_currentBackoffCount++;_clearScheduledTimer();_scheduleTimer();}};_self._clearBackOff=function(){if(_currentBackoffCount){_currentBackoffCount=0;_clearScheduledTimer();_scheduleTimer();}};function _initDefaults(){_config=null;_isTeardownCalled=false;_flushCallbackQueue=[];_flushCallbackTimerId=null;_paused=false;_immediateQueueSize=0;_immediateQueueSizeLimit=500;_queueSize=0;_queueSizeLimit=1e4;_profiles={};_currentProfile=RT_PROFILE;_scheduledTimerId=null;_immediateTimerId=null;_currentBackoffCount=0;_timerCount=0;_xhrOverride=null;_batchQueues={};_autoFlushEventsLimit=void 0;_autoFlushBatchLimit=0;_delayedBatchSendLatency=-1;_delayedBatchReason=null;_optimizeObject=true;_isPageUnloadTriggered=false;_maxEventSendAttempts=MaxSendAttempts;_maxUnloadEventSendAttempts=MaxSyncUnloadSendAttempts;_evtNamespace=null;_timeoutWrapper=createTimeoutWrapper();_httpManager=new HttpManager(MaxNumberEventPerBatch,MaxConnections,MaxRequestRetriesBeforeBackoff,{requeue:_requeueEvents,send:_sendingEvent,sent:_eventsSentEvent,drop:_eventsDropped,rspFail:_eventsResponseFail,oth:_otherEvent},_timeoutWrapper);_initializeProfiles();_clearQueues();_setAutoLimits();}function _createTimer(theTimerFunc,timeOut){if(timeOut===0&&_currentBackoffCount){timeOut=1;}var timerMultiplier=1e3;if(_currentBackoffCount){timerMultiplier=retryPolicyGetMillisToBackoffForRetry(_currentBackoffCount-1);}return _timeoutWrapper.set(theTimerFunc,timeOut*timerMultiplier);}function _clearScheduledTimer(){if(_scheduledTimerId!==null){_timeoutWrapper.clear(_scheduledTimerId);_scheduledTimerId=null;_timerCount=0;return true;}return false;}function _releaseAllQueues(sendType,sendReason){_clearScheduledTimer();if(_flushCallbackTimerId){_timeoutWrapper.clear(_flushCallbackTimerId);_flushCallbackTimerId=null;}if(!_paused){_sendEventsForLatencyAndAbove(1,sendType,sendReason);}}function _clearQueues(){_batchQueues[4]={batches:[],iKeyMap:{}};_batchQueues[3]={batches:[],iKeyMap:{}};_batchQueues[2]={batches:[],iKeyMap:{}};_batchQueues[1]={batches:[],iKeyMap:{}};}function _getEventBatch(iKey,latency,create){var batchQueue=_batchQueues[latency];if(!batchQueue){latency=1;batchQueue=_batchQueues[latency];}var eventBatch=batchQueue.iKeyMap[iKey];if(!eventBatch&&create){eventBatch=EventBatch.create(iKey);batchQueue.batches.push(eventBatch);batchQueue.iKeyMap[iKey]=eventBatch;}return eventBatch;}function _performAutoFlush(isAsync,doFlush){if(_httpManager.canSendRequest()&&!_currentBackoffCount){if(_autoFlushEventsLimit>0&&_queueSize>_autoFlushEventsLimit){doFlush=true;}if(doFlush&&_flushCallbackTimerId==null){_self.flush(isAsync,null,20);}}}function _addEventToProperQueue(event,append){if(_optimizeObject){event=_1dsCoreJs.optimizeObject(event);}var latency=event.latency;var eventBatch=_getEventBatch(event.iKey,latency,true);if(eventBatch.addEvent(event)){if(latency!==4){_queueSize++;if(append&&event.sendAttempt===0){_performAutoFlush(!event.sync,_autoFlushBatchLimit>0&&eventBatch.count()>=_autoFlushBatchLimit);}}else{_immediateQueueSize++;}return true;}return false;}function _dropEventWithLatencyOrLess(iKey,latency,currentLatency,dropNumber){while(currentLatency<=latency){var eventBatch=_getEventBatch(iKey,latency,true);if(eventBatch&&eventBatch.count()>0){var droppedEvents=eventBatch.split(0,dropNumber);var droppedCount=droppedEvents.count();if(droppedCount>0){if(currentLatency===4){_immediateQueueSize-=droppedCount;}else{_queueSize-=droppedCount;}_notifyBatchEvents(strEventsDiscarded,[droppedEvents],_1dsCoreJs.EventsDiscardedReason.QueueFull);return true;}}currentLatency++;}_resetQueueCounts();return false;}function _resetQueueCounts(){var immediateQueue=0;var normalQueue=0;var _loop_1=function _loop_1(latency2){var batchQueue=_batchQueues[latency2];if(batchQueue&&batchQueue.batches){_1dsCoreJs.arrForEach(batchQueue.batches,function(theBatch){if(latency2===4){immediateQueue+=theBatch.count();}else{normalQueue+=theBatch.count();}});}};for(var latency=1;latency<=4;latency++){_loop_1(latency);}_queueSize=normalQueue;_immediateQueueSize=immediateQueue;}function _queueBatches(latency,sendType,sendReason){var eventsQueued=false;var isAsync=sendType===0;if(!isAsync||_httpManager.canSendRequest()){_1dsCoreJs.doPerf(_self.core,function(){return"PostChannel._queueBatches";},function(){var droppedEvents=[];var latencyToProcess=4;while(latencyToProcess>=latency){var batchQueue=_batchQueues[latencyToProcess];if(batchQueue&&batchQueue.batches&&batchQueue.batches.length>0){_1dsCoreJs.arrForEach(batchQueue.batches,function(theBatch){if(!_httpManager.addBatch(theBatch)){droppedEvents=droppedEvents.concat(theBatch.events());}else{eventsQueued=eventsQueued||theBatch&&theBatch.count()>0;}if(latencyToProcess===4){_immediateQueueSize-=theBatch.count();}else{_queueSize-=theBatch.count();}});batchQueue.batches=[];batchQueue.iKeyMap={};}latencyToProcess--;}if(droppedEvents.length>0){_notifyEvents(strEventsDiscarded,droppedEvents,_1dsCoreJs.EventsDiscardedReason.KillSwitch);}if(eventsQueued&&_delayedBatchSendLatency>=latency){_delayedBatchSendLatency=-1;_delayedBatchReason=0;}},function(){return{latency:latency,sendType:sendType,sendReason:sendReason};},!isAsync);}else{_delayedBatchSendLatency=_delayedBatchSendLatency>=0?Math.min(_delayedBatchSendLatency,latency):latency;_delayedBatchReason=Math.max(_delayedBatchReason,sendReason);}return eventsQueued;}function _flushImpl(callback,sendReason){_sendEventsForLatencyAndAbove(1,0,sendReason);_resetQueueCounts();_waitForIdleManager(function(){if(callback){callback();}if(_flushCallbackQueue.length>0){_flushCallbackTimerId=_createTimer(function(){_flushCallbackTimerId=null;_flushImpl(_flushCallbackQueue.shift(),sendReason);},0);}else{_flushCallbackTimerId=null;_scheduleTimer();}});}function _waitForIdleManager(callback){if(_httpManager.isCompletelyIdle()){callback();}else{_flushCallbackTimerId=_createTimer(function(){_flushCallbackTimerId=null;_waitForIdleManager(callback);},FlushCheckTimer);}}function _resetTransmitProfiles(){_clearScheduledTimer();_initializeProfiles();_currentProfile=RT_PROFILE;_scheduleTimer();}function _initializeProfiles(){_profiles={};_profiles[RT_PROFILE]=[2,1,0];_profiles[NRT_PROFILE]=[6,3,0];_profiles[BE_PROFILE]=[18,9,0];}function _requeueEvents(batches,reason){var droppedEvents=[];var maxSendAttempts=_maxEventSendAttempts;if(_isPageUnloadTriggered){maxSendAttempts=_maxUnloadEventSendAttempts;}_1dsCoreJs.arrForEach(batches,function(theBatch){if(theBatch&&theBatch.count()>0){_1dsCoreJs.arrForEach(theBatch.events(),function(theEvent){if(theEvent){if(theEvent.sync){theEvent.latency=4;theEvent.sync=false;}if(theEvent.sendAttempt<maxSendAttempts){_1dsCoreJs.setProcessTelemetryTimings(theEvent,_self.identifier);_addEventToQueues(theEvent,false);}else{droppedEvents.push(theEvent);}}});}});if(droppedEvents.length>0){_notifyEvents(strEventsDiscarded,droppedEvents,_1dsCoreJs.EventsDiscardedReason.NonRetryableStatus);}if(_isPageUnloadTriggered){_releaseAllQueues(2,2);}}function _callNotification(evtName,theArgs){var manager=_self._notificationManager||{};var notifyFunc=manager[evtName];if(notifyFunc){try{notifyFunc.apply(manager,theArgs);}catch(e){_1dsCoreJs._throwInternal(_self.diagLog(),1,74,evtName+" notification failed: "+e);}}}function _notifyEvents(evtName,theEvents){var extraArgs=[];for(var _i=2;_i<arguments.length;_i++){extraArgs[_i-2]=arguments[_i];}if(theEvents&&theEvents.length>0){_callNotification(evtName,[theEvents].concat(extraArgs));}}function _notifyBatchEvents(evtName,batches){var extraArgs=[];for(var _i=2;_i<arguments.length;_i++){extraArgs[_i-2]=arguments[_i];}if(batches&&batches.length>0){_1dsCoreJs.arrForEach(batches,function(theBatch){if(theBatch&&theBatch.count()>0){_callNotification(evtName,[theBatch.events()].concat(extraArgs));}});}}function _sendingEvent(batches,reason,isSyncRequest){if(batches&&batches.length>0){_callNotification("eventsSendRequest",[reason>=1e3&&reason<=1999?reason-1e3:0,isSyncRequest!==true]);}}function _eventsSentEvent(batches,reason){_notifyBatchEvents("eventsSent",batches,reason);_scheduleTimer();}function _eventsDropped(batches,reason){_notifyBatchEvents(strEventsDiscarded,batches,reason>=8e3&&reason<=8999?reason-8e3:_1dsCoreJs.EventsDiscardedReason.Unknown);}function _eventsResponseFail(batches){_notifyBatchEvents(strEventsDiscarded,batches,_1dsCoreJs.EventsDiscardedReason.NonRetryableStatus);_scheduleTimer();}function _otherEvent(batches,reason){_notifyBatchEvents(strEventsDiscarded,batches,_1dsCoreJs.EventsDiscardedReason.Unknown);_scheduleTimer();}function _setAutoLimits(){if(!_config||!_config.disableAutoBatchFlushLimit){_autoFlushBatchLimit=Math.max(MaxNumberEventPerBatch*(MaxConnections+1),_queueSizeLimit/6);}else{_autoFlushBatchLimit=0;}}_1dsCoreJs.objDefineAccessors(_self,"_setTimeoutOverride",function(){return _timeoutWrapper.set;},function(value){_timeoutWrapper=createTimeoutWrapper(value,_timeoutWrapper.clear);});_1dsCoreJs.objDefineAccessors(_self,"_clearTimeoutOverride",function(){return _timeoutWrapper.clear;},function(value){_timeoutWrapper=createTimeoutWrapper(_timeoutWrapper.set,value);});});return _this;}return PostChannel2;}(_1dsCoreJs.BaseTelemetryPlugin);exports2.BE_PROFILE=BE_PROFILE;exports2.NRT_PROFILE=NRT_PROFILE;exports2.PostChannel=PostChannel;exports2.RT_PROFILE=RT_PROFILE;(function(obj,prop,descriptor){var func=Object["defineProperty"];if(func){try{return func(obj,prop,descriptor);}catch(e){}}if(descriptor&&_typeof(descriptor.value)!==void 0){obj[prop]=descriptor.value;}return obj;})(exports2,"__esModule",{value:true});});}});// client/node_modules/@vscode/extension-telemetry/lib/telemetryReporter.node.min.js
var require_telemetryReporter_node_min=__commonJS({"client/node_modules/@vscode/extension-telemetry/lib/telemetryReporter.node.min.js":function clientNode_modulesVscodeExtensionTelemetryLibTelemetryReporterNodeMinJs(exports,module2){var oA=Object.create;var Ti=Object.defineProperty;var uA=Object.defineProperties;var cA=Object.getOwnPropertyDescriptor;var lA=Object.getOwnPropertyDescriptors;var fA=Object.getOwnPropertyNames;var Op=Object.getOwnPropertySymbols;var pA=Object.getPrototypeOf;var Rp=Object.prototype.hasOwnProperty;var dA=Object.prototype.propertyIsEnumerable;var Pp=function Pp(e,t,r){return t in e?Ti(e,t,{enumerable:true,configurable:true,writable:true,value:r}):e[t]=r;};var St=function St(e,t){for(var r in t||(t={})){Rp.call(t,r)&&Pp(e,r,t[r]);}if(Op){var _iterator72=_createForOfIteratorHelper(Op(t)),_step69;try{for(_iterator72.s();!(_step69=_iterator72.n()).done;){var r=_step69.value;dA.call(t,r)&&Pp(e,r,t[r]);}}catch(err){_iterator72.e(err);}finally{_iterator72.f();}}return e;};var Np=function Np(e,t){return uA(e,lA(t));};var l=function l(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports;};};var hA=function hA(e,t){for(var r in t){Ti(e,r,{get:t[r],enumerable:true});}};var Dp=function Dp(e,t,r,n){if(t&&_typeof(t)=="object"||typeof t=="function"){var _iterator73=_createForOfIteratorHelper(fA(t)),_step70;try{var _loop6=function _loop6(){var i=_step70.value;!Rp.call(e,i)&&i!==r&&Ti(e,i,{get:function get(){return t[i];},enumerable:!(n=cA(t,i))||n.enumerable});};for(_iterator73.s();!(_step70=_iterator73.n()).done;){_loop6();}}catch(err){_iterator73.e(err);}finally{_iterator73.f();}}return e;};var nn=function nn(e,t,r){return r=e!=null?oA(pA(e)):{},Dp(t||!e||!e.__esModule?Ti(r,"default",{value:e,enumerable:true}):r,e);};var _A=function _A(e){return Dp(Ti({},"__esModule",{value:true}),e);};var _e=l(function(eM,xp){"use strict";var gA=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++){r[n-1]=arguments[n];}e.enableDebug&&console.info(e.TAG+t,r);},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++){r[n-1]=arguments[n];}e.disableWarnings||console.warn(e.TAG+t,r);},e.enableDebug=false,e.disableWarnings=false,e.disableErrors=false,e.TAG="ApplicationInsights:",e;}();xp.exports=gA;});var vu=l(function(Vt){"use strict";var an=Vt&&Vt.__assign||function(){return an=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;},an.apply(this,arguments);};Object.defineProperty(Vt,"__esModule",{value:true});Vt.AsyncScopeManager=Vt.OpenTelemetryScopeManagerWrapper=void 0;var gr=Er(),EA=require("events"),Mp=function(){function e(){}return e.prototype.active=function(){var t=this,r=gr.CorrelationContextManager.getCurrentContext();return an(an({},r),{getValue:function getValue(n){return t._activeSymbol?n===t._activeSymbol?r:false:(t._activeSymbol=n,r);},setValue:function setValue(){}});},e.prototype.with=function(t,r){var n=t.parentSpanId,i=t.name,a=e._spanToContext(t,n,i);return gr.CorrelationContextManager.runWithContext(a,r)();},e.prototype.bind=function(t){return typeof t=="function"?gr.CorrelationContextManager.wrapCallback(t):(t instanceof EA.EventEmitter&&gr.CorrelationContextManager.wrapEmitter(t),t);},e.prototype.enable=function(){return gr.CorrelationContextManager.enable(),this;},e.prototype.disable=function(){return gr.CorrelationContextManager.disable(),this;},e._spanToContext=function(t,r,n){var i=r?"|"+t.spanContext().traceId+"."+r+".":t.spanContext().traceId,a=an(an({},t.spanContext()),{traceFlags:t.spanContext().traceFlags}),s=gr.CorrelationContextManager.spanToContextObject(a,i,n);return s;},e;}();Vt.OpenTelemetryScopeManagerWrapper=Mp;Vt.AsyncScopeManager=new Mp();});var Wp=l(function(I,Qp){I=Qp.exports=N;var k;(typeof process==="undefined"?"undefined":_typeof(process))=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?k=function k(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e);}:k=function k(){};I.SEMVER_SPEC_VERSION="2.0.0";var Eu=256,Ma=Number.MAX_SAFE_INTEGER||9007199254740991,gu=16,B=I.re=[],_=I.src=[],O=0,sn=O++;_[sn]="0|[1-9]\\d*";var on=O++;_[on]="[0-9]+";var Au=O++;_[Au]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var qp=O++;_[qp]="("+_[sn]+")\\.("+_[sn]+")\\.("+_[sn]+")";var jp=O++;_[jp]="("+_[on]+")\\.("+_[on]+")\\.("+_[on]+")";var mu=O++;_[mu]="(?:"+_[sn]+"|"+_[Au]+")";var yu=O++;_[yu]="(?:"+_[on]+"|"+_[Au]+")";var Su=O++;_[Su]="(?:-("+_[mu]+"(?:\\."+_[mu]+")*))";var Iu=O++;_[Iu]="(?:-?("+_[yu]+"(?:\\."+_[yu]+")*))";var Tu=O++;_[Tu]="[0-9A-Za-z-]+";var Ii=O++;_[Ii]="(?:\\+("+_[Tu]+"(?:\\."+_[Tu]+")*))";var Cu=O++,kp="v?"+_[qp]+_[Su]+"?"+_[Ii]+"?";_[Cu]="^"+kp+"$";var bu="[v=\\s]*"+_[jp]+_[Iu]+"?"+_[Ii]+"?",Ou=O++;_[Ou]="^"+bu+"$";var ln=O++;_[ln]="((?:<|>)?=?)";var La=O++;_[La]=_[on]+"|x|X|\\*";var qa=O++;_[qa]=_[sn]+"|x|X|\\*";var mr=O++;_[mr]="[v=\\s]*("+_[qa]+")(?:\\.("+_[qa]+")(?:\\.("+_[qa]+")(?:"+_[Su]+")?"+_[Ii]+"?)?)?";var cn=O++;_[cn]="[v=\\s]*("+_[La]+")(?:\\.("+_[La]+")(?:\\.("+_[La]+")(?:"+_[Iu]+")?"+_[Ii]+"?)?)?";var Hp=O++;_[Hp]="^"+_[ln]+"\\s*"+_[mr]+"$";var Up=O++;_[Up]="^"+_[ln]+"\\s*"+_[cn]+"$";var Bp=O++;_[Bp]="(?:^|[^\\d])(\\d{1,"+gu+"})(?:\\.(\\d{1,"+gu+"}))?(?:\\.(\\d{1,"+gu+"}))?(?:$|[^\\d])";var Fa=O++;_[Fa]="(?:~>?)";var ja=O++;_[ja]="(\\s*)"+_[Fa]+"\\s+";B[ja]=new RegExp(_[ja],"g");var mA="$1~",Fp=O++;_[Fp]="^"+_[Fa]+_[mr]+"$";var Gp=O++;_[Gp]="^"+_[Fa]+_[cn]+"$";var Ga=O++;_[Ga]="(?:\\^)";var ka=O++;_[ka]="(\\s*)"+_[Ga]+"\\s+";B[ka]=new RegExp(_[ka],"g");var yA="$1^",Vp=O++;_[Vp]="^"+_[Ga]+_[mr]+"$";var $p=O++;_[$p]="^"+_[Ga]+_[cn]+"$";var Pu=O++;_[Pu]="^"+_[ln]+"\\s*("+bu+")$|^$";var Ru=O++;_[Ru]="^"+_[ln]+"\\s*("+kp+")$|^$";var Ai=O++;_[Ai]="(\\s*)"+_[ln]+"\\s*("+bu+"|"+_[mr]+")";B[Ai]=new RegExp(_[Ai],"g");var TA="$1$2$3",zp=O++;_[zp]="^\\s*("+_[mr]+")\\s+-\\s+("+_[mr]+")\\s*$";var Xp=O++;_[Xp]="^\\s*("+_[cn]+")\\s+-\\s+("+_[cn]+")\\s*$";var Kp=O++;_[Kp]="(<|>)?=?\\s*\\*";for($t=0;$t<O;$t++){k($t,_[$t]),B[$t]||(B[$t]=new RegExp(_[$t]));}var $t;I.parse=yr;function yr(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof N)return e;if(typeof e!="string"||e.length>Eu)return null;var r=t.loose?B[Ou]:B[Cu];if(!r.test(e))return null;try{return new N(e,t);}catch(_unused){return null;}}I.valid=AA;function AA(e,t){var r=yr(e,t);return r?r.version:null;}I.clean=SA;function SA(e,t){var r=yr(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null;}I.SemVer=N;function N(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof N){if(e.loose===t.loose)return e;e=e.version;}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>Eu)throw new TypeError("version is longer than "+Eu+" characters");if(!(this instanceof N))return new N(e,t);k("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?B[Ou]:B[Cu]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ma||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ma||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ma||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Ma)return i;}return n;}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format();}N.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version;};N.prototype.toString=function(){return this.version;};N.prototype.compare=function(e){return k("SemVer.compare",this.version,this.options,e),e instanceof N||(e=new N(e,this.options)),this.compareMain(e)||this.comparePre(e);};N.prototype.compareMain=function(e){return e instanceof N||(e=new N(e,this.options)),un(this.major,e.major)||un(this.minor,e.minor)||un(this.patch,e.patch);};N.prototype.comparePre=function(e){if(e instanceof N||(e=new N(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(k("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return un(r,n);}while(++t);};N.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;){typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);}r===-1&&this.prerelease.push(0);}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e);}return this.format(),this.raw=this.version,this;};I.inc=IA;function IA(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new N(e,r).inc(t,n).version;}catch(_unused2){return null;}}I.diff=CA;function CA(e,t){if(Nu(e,t))return null;var r=yr(e),n=yr(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease";}for(var s in r){if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;}return a;}I.compareIdentifiers=un;var Lp=/^[0-9]+$/;function un(e,t){var r=Lp.test(e),n=Lp.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1;}I.rcompareIdentifiers=bA;function bA(e,t){return un(t,e);}I.major=OA;function OA(e,t){return new N(e,t).major;}I.minor=PA;function PA(e,t){return new N(e,t).minor;}I.patch=RA;function RA(e,t){return new N(e,t).patch;}I.compare=It;function It(e,t,r){return new N(e,r).compare(new N(t,r));}I.compareLoose=NA;function NA(e,t){return It(e,t,true);}I.rcompare=DA;function DA(e,t,r){return It(t,e,r);}I.sort=wA;function wA(e,t){return e.sort(function(r,n){return I.compare(r,n,t);});}I.rsort=xA;function xA(e,t){return e.sort(function(r,n){return I.rcompare(r,n,t);});}I.gt=Si;function Si(e,t,r){return It(e,t,r)>0;}I.lt=Ha;function Ha(e,t,r){return It(e,t,r)<0;}I.eq=Nu;function Nu(e,t,r){return It(e,t,r)===0;}I.neq=Yp;function Yp(e,t,r){return It(e,t,r)!==0;}I.gte=Du;function Du(e,t,r){return It(e,t,r)>=0;}I.lte=wu;function wu(e,t,r){return It(e,t,r)<=0;}I.cmp=Ua;function Ua(e,t,r,n){switch(t){case"===":return _typeof(e)=="object"&&(e=e.version),_typeof(r)=="object"&&(r=r.version),e===r;case"!==":return _typeof(e)=="object"&&(e=e.version),_typeof(r)=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Nu(e,r,n);case"!=":return Yp(e,r,n);case">":return Si(e,r,n);case">=":return Du(e,r,n);case"<":return Ha(e,r,n);case"<=":return wu(e,r,n);default:throw new TypeError("Invalid operator: "+t);}}I.Comparator=Ve;function Ve(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof Ve){if(e.loose===!!t.loose)return e;e=e.value;}if(!(this instanceof Ve))return new Ve(e,t);k("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Ci?this.value="":this.value=this.operator+this.semver.version,k("comp",this);}var Ci={};Ve.prototype.parse=function(e){var t=this.options.loose?B[Pu]:B[Ru],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new N(r[2],this.options.loose):this.semver=Ci;};Ve.prototype.toString=function(){return this.value;};Ve.prototype.test=function(e){return k("Comparator.test",e,this.options.loose),this.semver===Ci?true:(typeof e=="string"&&(e=new N(e,this.options)),Ua(e,this.operator,this.semver,this.options));};Ve.prototype.intersects=function(e,t){if(!(e instanceof Ve))throw new TypeError("a Comparator is required");(!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false});var r;if(this.operator==="")return r=new W(e.value,t),Ba(this.value,r,t);if(e.operator==="")return r=new W(this.value,t),Ba(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),o=Ua(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=Ua(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&s||o||u;};I.Range=W;function W(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof W)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new W(e.raw,t);if(e instanceof Ve)return new W(e.value,t);if(!(this instanceof W))return new W(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim());},this).filter(function(r){return r.length;}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format();}W.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim();}).join("||").trim(),this.range;};W.prototype.toString=function(){return this.range;};W.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?B[Xp]:B[zp];e=e.replace(r,GA),k("hyphen replace",e),e=e.replace(B[Ai],TA),k("comparator trim",e,B[Ai]),e=e.replace(B[ja],mA),e=e.replace(B[ka],yA),e=e.split(/\s+/).join(" ");var n=t?B[Pu]:B[Ru],i=e.split(" ").map(function(a){return LA(a,this.options);},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(a){return!!a.match(n);})),i=i.map(function(a){return new Ve(a,this.options);},this),i;};W.prototype.intersects=function(e,t){if(!(e instanceof W))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(a){return n.intersects(a,t);});});});});};I.toComparators=MA;function MA(e,t){return new W(e,t).set.map(function(r){return r.map(function(n){return n.value;}).join(" ").trim().split(" ");});}function LA(e,t){return k("comp",e,t),e=kA(e,t),k("caret",e),e=qA(e,t),k("tildes",e),e=UA(e,t),k("xrange",e),e=FA(e,t),k("stars",e),e;}function Re(e){return!e||e.toLowerCase()==="x"||e==="*";}function qA(e,t){return e.trim().split(/\s+/).map(function(r){return jA(r,t);}).join(" ");}function jA(e,t){var r=t.loose?B[Gp]:B[Fp];return e.replace(r,function(n,i,a,s,o){k("tilde",e,n,i,a,s,o);var u;return Re(i)?u="":Re(a)?u=">="+i+".0.0 <"+(+i+1)+".0.0":Re(s)?u=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":o?(k("replaceTilde pr",o),u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0"):u=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0",k("tilde return",u),u;});}function kA(e,t){return e.trim().split(/\s+/).map(function(r){return HA(r,t);}).join(" ");}function HA(e,t){k("caret",e,t);var r=t.loose?B[$p]:B[Vp];return e.replace(r,function(n,i,a,s,o){k("caret",e,n,i,a,s,o);var u;return Re(i)?u="":Re(a)?u=">="+i+".0.0 <"+(+i+1)+".0.0":Re(s)?i==="0"?u=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+".0 <"+(+i+1)+".0.0":o?(k("replaceCaret pr",o),i==="0"?a==="0"?u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+a+"."+(+s+1):u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+"."+s+"-"+o+" <"+(+i+1)+".0.0"):(k("no pr"),i==="0"?a==="0"?u=">="+i+"."+a+"."+s+" <"+i+"."+a+"."+(+s+1):u=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+"."+s+" <"+(+i+1)+".0.0"),k("caret return",u),u;});}function UA(e,t){return k("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return BA(r,t);}).join(" ");}function BA(e,t){e=e.trim();var r=t.loose?B[Up]:B[Hp];return e.replace(r,function(n,i,a,s,o,u){k("xRange",e,n,i,a,s,o,u);var c=Re(a),f=c||Re(s),p=f||Re(o),d=p;return i==="="&&d&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(f&&(s=0),o=0,i===">"?(i=">=",f?(a=+a+1,s=0,o=0):(s=+s+1,o=0)):i==="<="&&(i="<",f?a=+a+1:s=+s+1),n=i+a+"."+s+"."+o):f?n=">="+a+".0.0 <"+(+a+1)+".0.0":p&&(n=">="+a+"."+s+".0 <"+a+"."+(+s+1)+".0"),k("xRange return",n),n;});}function FA(e,t){return k("replaceStars",e,t),e.trim().replace(B[Kp],"");}function GA(e,t,r,n,i,a,s,o,u,c,f,p,d){return Re(r)?t="":Re(n)?t=">="+r+".0.0":Re(i)?t=">="+r+"."+n+".0":t=">="+t,Re(u)?o="":Re(c)?o="<"+(+u+1)+".0.0":Re(f)?o="<"+u+"."+(+c+1)+".0":p?o="<="+u+"."+c+"."+f+"-"+p:o="<="+o,(t+" "+o).trim();}W.prototype.test=function(e){if(!e)return false;typeof e=="string"&&(e=new N(e,this.options));for(var t=0;t<this.set.length;t++){if(VA(this.set[t],e,this.options))return true;}return false;};function VA(e,t,r){for(var n=0;n<e.length;n++){if(!e[n].test(t))return false;}if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++){if(k(e[n].semver),e[n].semver!==Ci&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return true;}}return false;}return true;}I.satisfies=Ba;function Ba(e,t,r){try{t=new W(t,r);}catch(_unused3){return false;}return t.test(e);}I.maxSatisfying=$A;function $A(e,t,r){var n=null,i=null;try{var a=new W(t,r);}catch(_unused4){return null;}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new N(n,r));}),n;}I.minSatisfying=zA;function zA(e,t,r){var n=null,i=null;try{var a=new W(t,r);}catch(_unused5){return null;}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new N(n,r));}),n;}I.minVersion=XA;function XA(e,t){e=new W(e,t);var r=new N("0.0.0");if(e.test(r)||(r=new N("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(a){var s=new N(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Si(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator);}});}return r&&e.test(r)?r:null;}I.validRange=KA;function KA(e,t){try{return new W(e,t).range||"*";}catch(_unused6){return null;}}I.ltr=YA;function YA(e,t,r){return xu(e,t,"<",r);}I.gtr=QA;function QA(e,t,r){return xu(e,t,">",r);}I.outside=xu;function xu(e,t,r,n){e=new N(e,n),t=new W(t,n);var i,a,s,o,u;switch(r){case">":i=Si,a=wu,s=Ha,o=">",u=">=";break;case"<":i=Ha,a=Du,s=Si,o="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(Ba(e,t,n))return false;for(var c=0;c<t.set.length;++c){var f=t.set[c],p=null,d=null;if(f.forEach(function(h){h.semver===Ci&&(h=new Ve(">=0.0.0")),p=p||h,d=d||h,i(h.semver,p.semver,n)?p=h:s(h.semver,d.semver,n)&&(d=h);}),p.operator===o||p.operator===u||(!d.operator||d.operator===o)&&a(e,d.semver))return false;if(d.operator===u&&s(e,d.semver))return false;}return true;}I.prerelease=WA;function WA(e,t){var r=yr(e,t);return r&&r.prerelease.length?r.prerelease:null;}I.intersects=ZA;function ZA(e,t,r){return e=new W(e,r),t=new W(t,r),e.intersects(t);}I.coerce=JA;function JA(e){if(e instanceof N)return e;if(typeof e!="string")return null;var t=e.match(B[Bp]);return t==null?null:yr(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"));}});var Mu=l(function(Va){"use strict";Object.defineProperty(Va,"__esModule",{value:true});Va.makePatchingRequire=void 0;var eS=require("path"),tS=Wp(),Jp=require("module"),rS=Object.keys(process.binding("natives")),Zp=Jp.prototype.require;function nS(e){var t={};return function(n){var i=Zp.apply(this,arguments);if(e[n]){var a=Jp._resolveFilename(n,this);if(t.hasOwnProperty(a))return t[a];var s=void 0;if(rS.indexOf(n)<0)try{s=Zp.call(this,eS.join(n,"package.json")).version;}catch(_unused7){return i;}else s=process.version.substring(1);var o=s.indexOf("-");o>=0&&(s=s.substring(0,o));for(var u=i,c=0,f=e[n];c<f.length;c++){var p=f[c];tS.satisfies(s,p.versionSpecifier)&&(u=p.patch(u,a));}return t[a]=u;}return i;};}Va.makePatchingRequire=nS;});var ed=l(function(nM,iS){iS.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"};});var oe=l(function(fn){"use strict";Object.defineProperty(fn,"__esModule",{value:true});fn.channel=fn.makePatchingRequire=void 0;var aS=Mu(),sS=Mu();Object.defineProperty(fn,"makePatchingRequire",{enumerable:true,get:function get(){return sS.makePatchingRequire;}});var td=function td(e){return true;},oS=function(){function e(){this.version=ed().version,this.subscribers={},this.contextPreservationFunction=function(t){return t;},this.knownPatches={},this.currentlyPublishing=false;}return e.prototype.shouldPublish=function(t){var r=this.subscribers[t];return r?r.some(function(n){var i=n.filter;return!i||i(false);}):false;},e.prototype.publish=function(t,r){if(!this.currentlyPublishing){var n=this.subscribers[t];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=true,n.forEach(function(a){var s=a.listener,o=a.filter;try{o&&o(true)&&s(i);}catch(_unused8){}}),this.currentlyPublishing=false;}}},e.prototype.subscribe=function(t,r,n){n===void 0&&(n=td),this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push({listener:r,filter:n});},e.prototype.unsubscribe=function(t,r,n){n===void 0&&(n=td);var i=this.subscribers[t];if(i){for(var a=0;a<i.length;++a){if(i[a].listener===r&&i[a].filter===n)return i.splice(a,1),true;}}return false;},e.prototype.reset=function(){var t=this;this.subscribers={},this.contextPreservationFunction=function(r){return r;},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete t.knownPatches[r];});},e.prototype.bindToContext=function(t){return this.contextPreservationFunction(t);},e.prototype.addContextPreservation=function(t){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return t(r(n));};},e.prototype.registerMonkeyPatch=function(t,r){this.knownPatches[t]||(this.knownPatches[t]=[]),this.knownPatches[t].push(r);},e.prototype.getPatchesObject=function(){return this.knownPatches;},e;}();global.diagnosticsSource||(global.diagnosticsSource=new oS(),rd=require("module"),rd.prototype.require=aS.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var rd;fn.channel=global.diagnosticsSource;});var id=l(function(nd){"use strict";Object.defineProperty(nd,"__esModule",{value:true});});var ad=l(function($a){"use strict";Object.defineProperty($a,"__esModule",{value:true});$a._globalThis=void 0;$a._globalThis=(typeof globalThis==="undefined"?"undefined":_typeof(globalThis))=="object"?globalThis:global;});var sd=l(function(Tr){"use strict";var uS=Tr&&Tr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),cS=Tr&&Tr.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&uS(t,e,r);}};Object.defineProperty(Tr,"__esModule",{value:true});cS(ad(),Tr);});var od=l(function(Ar){"use strict";var lS=Ar&&Ar.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),fS=Ar&&Ar.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&lS(t,e,r);}};Object.defineProperty(Ar,"__esModule",{value:true});fS(sd(),Ar);});var Lu=l(function(za){"use strict";Object.defineProperty(za,"__esModule",{value:true});za.VERSION=void 0;za.VERSION="1.0.3";});var ld=l(function(pn){"use strict";Object.defineProperty(pn,"__esModule",{value:true});pn.isCompatible=pn._makeCompatibilityCheck=void 0;var pS=Lu(),ud=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function cd(e){var t=new Set([e]),r=new Set(),n=e.match(ud);if(!n)return function(){return false;};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(u){return u===e;};function a(o){return r.add(o),false;}function s(o){return t.add(o),true;}return function(u){if(t.has(u))return true;if(r.has(u))return false;var c=u.match(ud);if(!c)return a(u);var f={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return f.prerelease!=null||i.major!==f.major?a(u):i.major===0?i.minor===f.minor&&i.patch<=f.patch?s(u):a(u):i.minor<=f.minor?s(u):a(u);};}pn._makeCompatibilityCheck=cd;pn.isCompatible=cd(pS.VERSION);});var dn=l(function(zt){"use strict";Object.defineProperty(zt,"__esModule",{value:true});zt.unregisterGlobal=zt.getGlobal=zt.registerGlobal=void 0;var dS=od(),bi=Lu(),hS=ld(),_S=bi.VERSION.split(".")[0],Oi=Symbol.for("opentelemetry.js.api."+_S),Pi=dS._globalThis;function vS(e,t,r,n){var i;n===void 0&&(n=false);var a=Pi[Oi]=(i=Pi[Oi])!==null&&i!==void 0?i:{version:bi.VERSION};if(!n&&a[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(s.stack||s.message),false;}if(a.version!==bi.VERSION){var s=new Error("@opentelemetry/api: All API registration versions must match");return r.error(s.stack||s.message),false;}return a[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+bi.VERSION+"."),true;}zt.registerGlobal=vS;function gS(e){var t,r,n=(t=Pi[Oi])===null||t===void 0?void 0:t.version;if(!(!n||!hS.isCompatible(n)))return(r=Pi[Oi])===null||r===void 0?void 0:r[e];}zt.getGlobal=gS;function ES(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+bi.VERSION+".");var r=Pi[Oi];r&&delete r[e];}zt.unregisterGlobal=ES;});var fd=l(function(Xa){"use strict";Object.defineProperty(Xa,"__esModule",{value:true});Xa.DiagComponentLogger=void 0;var mS=dn(),yS=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger";}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++){t[r]=arguments[r];}return Ri("debug",this._namespace,t);},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++){t[r]=arguments[r];}return Ri("error",this._namespace,t);},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++){t[r]=arguments[r];}return Ri("info",this._namespace,t);},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++){t[r]=arguments[r];}return Ri("warn",this._namespace,t);},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++){t[r]=arguments[r];}return Ri("verbose",this._namespace,t);},e;}();Xa.DiagComponentLogger=yS;function Ri(e,t,r){var n=mS.getGlobal("diag");if(!!n)return r.unshift(t),n[e].apply(n,r);}});var Ka=l(function(Ni){"use strict";Object.defineProperty(Ni,"__esModule",{value:true});Ni.DiagLogLevel=void 0;var TS;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL";})(TS=Ni.DiagLogLevel||(Ni.DiagLogLevel={}));});var pd=l(function(Ya){"use strict";Object.defineProperty(Ya,"__esModule",{value:true});Ya.createLogLevelDiagLogger=void 0;var Ct=Ka();function AS(e,t){e<Ct.DiagLogLevel.NONE?e=Ct.DiagLogLevel.NONE:e>Ct.DiagLogLevel.ALL&&(e=Ct.DiagLogLevel.ALL),t=t||{};function r(n,i){var a=t[n];return typeof a=="function"&&e>=i?a.bind(t):function(){};}return{error:r("error",Ct.DiagLogLevel.ERROR),warn:r("warn",Ct.DiagLogLevel.WARN),info:r("info",Ct.DiagLogLevel.INFO),debug:r("debug",Ct.DiagLogLevel.DEBUG),verbose:r("verbose",Ct.DiagLogLevel.VERBOSE)};}Ya.createLogLevelDiagLogger=AS;});var hn=l(function(Wa){"use strict";Object.defineProperty(Wa,"__esModule",{value:true});Wa.DiagAPI=void 0;var SS=fd(),IS=pd(),CS=Ka(),Qa=dn(),bS="diag",OS=function(){function e(){function t(n){return function(){var i=Qa.getGlobal("diag");if(!!i)return i[n].apply(i,arguments);};}var r=this;r.setLogger=function(n,i){var a,s;if(i===void 0&&(i=CS.DiagLogLevel.INFO),n===r){var o=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=o.stack)!==null&&a!==void 0?a:o.message),false;}var u=Qa.getGlobal("diag"),c=IS.createLogLevelDiagLogger(i,n);if(u){var f=(s=new Error().stack)!==null&&s!==void 0?s:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+f),c.warn("Current logger will overwrite one already registered from "+f);}return Qa.registerGlobal("diag",c,r,true);},r.disable=function(){Qa.unregisterGlobal(bS,r);},r.createComponentLogger=function(n){return new SS.DiagComponentLogger(n);},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error");}return e.instance=function(){return this._instance||(this._instance=new e()),this._instance;},e;}();Wa.DiagAPI=OS;});var dd=l(function(Za){"use strict";Object.defineProperty(Za,"__esModule",{value:true});Za.BaggageImpl=void 0;var PS=function(){function e(t){this._entries=t?new Map(t):new Map();}return e.prototype.getEntry=function(t){var r=this._entries.get(t);if(!!r)return Object.assign({},r);},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var r=t[0],n=t[1];return[r,n];});},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n;},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r;},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++){t[r]=arguments[r];}for(var n=new e(this._entries),i=0,a=t;i<a.length;i++){var s=a[i];n._entries.delete(s);}return n;},e.prototype.clear=function(){return new e();},e;}();Za.BaggageImpl=PS;});var hd=l(function(Ja){"use strict";Object.defineProperty(Ja,"__esModule",{value:true});Ja.baggageEntryMetadataSymbol=void 0;Ja.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata");});var qu=l(function(_n){"use strict";Object.defineProperty(_n,"__esModule",{value:true});_n.baggageEntryMetadataFromString=_n.createBaggage=void 0;var RS=hn(),NS=dd(),DS=hd(),wS=RS.DiagAPI.instance();function xS(e){return e===void 0&&(e={}),new NS.BaggageImpl(new Map(Object.entries(e)));}_n.createBaggage=xS;function MS(e){return typeof e!="string"&&(wS.error("Cannot create baggage metadata from unknown type: "+_typeof(e)),e=""),{__TYPE__:DS.baggageEntryMetadataSymbol,toString:function toString(){return e;}};}_n.baggageEntryMetadataFromString=MS;});var vd=l(function(_d){"use strict";Object.defineProperty(_d,"__esModule",{value:true});});var Ed=l(function(gd){"use strict";Object.defineProperty(gd,"__esModule",{value:true});});var md=l(function(es){"use strict";Object.defineProperty(es,"__esModule",{value:true});es.DiagConsoleLogger=void 0;var ju=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],LS=function(){function e(){function t(n){return function(){var i=arguments;if(console){var a=console[n];if(typeof a!="function"&&(a=console.log),typeof a=="function")return a.apply(console,i);}};}for(var r=0;r<ju.length;r++){this[ju[r].n]=t(ju[r].c);}}return e;}();es.DiagConsoleLogger=LS;});var Td=l(function(Xt){"use strict";var qS=Xt&&Xt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),yd=Xt&&Xt.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&qS(t,e,r);}};Object.defineProperty(Xt,"__esModule",{value:true});yd(md(),Xt);yd(Ka(),Xt);});var ku=l(function(vn){"use strict";Object.defineProperty(vn,"__esModule",{value:true});vn.defaultTextMapSetter=vn.defaultTextMapGetter=void 0;vn.defaultTextMapGetter={get:function get(e,t){if(e!=null)return e[t];},keys:function keys(e){return e==null?[]:Object.keys(e);}};vn.defaultTextMapSetter={set:function set(e,t,r){e!=null&&(e[t]=r);}};});var Sd=l(function(Ad){"use strict";Object.defineProperty(Ad,"__esModule",{value:true});});var Cd=l(function(Id){"use strict";Object.defineProperty(Id,"__esModule",{value:true});});var Di=l(function(gn){"use strict";Object.defineProperty(gn,"__esModule",{value:true});gn.ROOT_CONTEXT=gn.createContextKey=void 0;function jS(e){return Symbol.for(e);}gn.createContextKey=jS;var kS=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map(),r.getValue=function(n){return r._currentContext.get(n);},r.setValue=function(n,i){var a=new e(r._currentContext);return a._currentContext.set(n,i),a;},r.deleteValue=function(n){var i=new e(r._currentContext);return i._currentContext.delete(n),i;};}return e;}();gn.ROOT_CONTEXT=new kS();});var bd=l(function(En){"use strict";var HS=En&&En.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++){e[i]=t[r];}return e;};Object.defineProperty(En,"__esModule",{value:true});En.NoopContextManager=void 0;var US=Di(),BS=function(){function e(){}return e.prototype.active=function(){return US.ROOT_CONTEXT;},e.prototype.with=function(t,r,n){for(var i=[],a=3;a<arguments.length;a++){i[a-3]=arguments[a];}return r.call.apply(r,HS([n],i));},e.prototype.bind=function(t,r){return r;},e.prototype.enable=function(){return this;},e.prototype.disable=function(){return this;},e;}();En.NoopContextManager=BS;});var Bu=l(function(mn){"use strict";var FS=mn&&mn.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++){e[i]=t[r];}return e;};Object.defineProperty(mn,"__esModule",{value:true});mn.ContextAPI=void 0;var GS=bd(),Hu=dn(),Od=hn(),Uu="context",VS=new GS.NoopContextManager(),$S=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e()),this._instance;},e.prototype.setGlobalContextManager=function(t){return Hu.registerGlobal(Uu,t,Od.DiagAPI.instance());},e.prototype.active=function(){return this._getContextManager().active();},e.prototype.with=function(t,r,n){for(var i,a=[],s=3;s<arguments.length;s++){a[s-3]=arguments[s];}return(i=this._getContextManager()).with.apply(i,FS([t,r,n],a));},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r);},e.prototype._getContextManager=function(){return Hu.getGlobal(Uu)||VS;},e.prototype.disable=function(){this._getContextManager().disable(),Hu.unregisterGlobal(Uu,Od.DiagAPI.instance());},e;}();mn.ContextAPI=$S;});var Fu=l(function(wi){"use strict";Object.defineProperty(wi,"__esModule",{value:true});wi.TraceFlags=void 0;var zS;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED";})(zS=wi.TraceFlags||(wi.TraceFlags={}));});var ts=l(function(ct){"use strict";Object.defineProperty(ct,"__esModule",{value:true});ct.INVALID_SPAN_CONTEXT=ct.INVALID_TRACEID=ct.INVALID_SPANID=void 0;var XS=Fu();ct.INVALID_SPANID="0000000000000000";ct.INVALID_TRACEID="00000000000000000000000000000000";ct.INVALID_SPAN_CONTEXT={traceId:ct.INVALID_TRACEID,spanId:ct.INVALID_SPANID,traceFlags:XS.TraceFlags.NONE};});var ns=l(function(rs){"use strict";Object.defineProperty(rs,"__esModule",{value:true});rs.NonRecordingSpan=void 0;var KS=ts(),YS=function(){function e(t){t===void 0&&(t=KS.INVALID_SPAN_CONTEXT),this._spanContext=t;}return e.prototype.spanContext=function(){return this._spanContext;},e.prototype.setAttribute=function(t,r){return this;},e.prototype.setAttributes=function(t){return this;},e.prototype.addEvent=function(t,r){return this;},e.prototype.setStatus=function(t){return this;},e.prototype.updateName=function(t){return this;},e.prototype.end=function(t){},e.prototype.isRecording=function(){return false;},e.prototype.recordException=function(t,r){},e;}();rs.NonRecordingSpan=YS;});var Vu=l(function($e){"use strict";Object.defineProperty($e,"__esModule",{value:true});$e.getSpanContext=$e.setSpanContext=$e.deleteSpan=$e.setSpan=$e.getSpan=void 0;var QS=Di(),WS=ns(),Gu=QS.createContextKey("OpenTelemetry Context Key SPAN");function Pd(e){return e.getValue(Gu)||void 0;}$e.getSpan=Pd;function Rd(e,t){return e.setValue(Gu,t);}$e.setSpan=Rd;function ZS(e){return e.deleteValue(Gu);}$e.deleteSpan=ZS;function JS(e,t){return Rd(e,new WS.NonRecordingSpan(t));}$e.setSpanContext=JS;function eI(e){var t;return(t=Pd(e))===null||t===void 0?void 0:t.spanContext();}$e.getSpanContext=eI;});var is=l(function(lt){"use strict";Object.defineProperty(lt,"__esModule",{value:true});lt.wrapSpanContext=lt.isSpanContextValid=lt.isValidSpanId=lt.isValidTraceId=void 0;var Nd=ts(),tI=ns(),rI=/^([0-9a-f]{32})$/i,nI=/^[0-9a-f]{16}$/i;function Dd(e){return rI.test(e)&&e!==Nd.INVALID_TRACEID;}lt.isValidTraceId=Dd;function wd(e){return nI.test(e)&&e!==Nd.INVALID_SPANID;}lt.isValidSpanId=wd;function iI(e){return Dd(e.traceId)&&wd(e.spanId);}lt.isSpanContextValid=iI;function aI(e){return new tI.NonRecordingSpan(e);}lt.wrapSpanContext=aI;});var zu=l(function(as){"use strict";Object.defineProperty(as,"__esModule",{value:true});as.NoopTracer=void 0;var sI=Bu(),xd=Vu(),$u=ns(),oI=is(),Md=sI.ContextAPI.getInstance(),uI=function(){function e(){}return e.prototype.startSpan=function(t,r,n){var i=Boolean(r==null?void 0:r.root);if(i)return new $u.NonRecordingSpan();var a=n&&xd.getSpanContext(n);return cI(a)&&oI.isSpanContextValid(a)?new $u.NonRecordingSpan(a):new $u.NonRecordingSpan();},e.prototype.startActiveSpan=function(t,r,n,i){var a,s,o;if(!(arguments.length<2)){var _s2;arguments.length===2?o=r:arguments.length===3?(a=r,o=n):(a=r,s=n,o=i);var u=(_s2=s)!==null&&_s2!==void 0?_s2:Md.active(),c=this.startSpan(t,a,u),f=xd.setSpan(u,c);return Md.with(f,o,void 0,c);}},e;}();as.NoopTracer=uI;function cI(e){return _typeof(e)=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number";}});var Xu=l(function(ss){"use strict";Object.defineProperty(ss,"__esModule",{value:true});ss.ProxyTracer=void 0;var lI=zu(),fI=new lI.NoopTracer(),pI=function(){function e(t,r,n){this._provider=t,this.name=r,this.version=n;}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n);},e.prototype.startActiveSpan=function(t,r,n,i){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments);},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version);return t?(this._delegate=t,this._delegate):fI;},e;}();ss.ProxyTracer=pI;});var Ld=l(function(os){"use strict";Object.defineProperty(os,"__esModule",{value:true});os.NoopTracerProvider=void 0;var dI=zu(),hI=function(){function e(){}return e.prototype.getTracer=function(t,r){return new dI.NoopTracer();},e;}();os.NoopTracerProvider=hI;});var Ku=l(function(us){"use strict";Object.defineProperty(us,"__esModule",{value:true});us.ProxyTracerProvider=void 0;var _I=Xu(),vI=Ld(),gI=new vI.NoopTracerProvider(),EI=function(){function e(){}return e.prototype.getTracer=function(t,r){var n;return(n=this.getDelegateTracer(t,r))!==null&&n!==void 0?n:new _I.ProxyTracer(this,t,r);},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:gI;},e.prototype.setDelegate=function(t){this._delegate=t;},e.prototype.getDelegateTracer=function(t,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,r);},e;}();us.ProxyTracerProvider=EI;});var jd=l(function(qd){"use strict";Object.defineProperty(qd,"__esModule",{value:true});});var kd=l(function(xi){"use strict";Object.defineProperty(xi,"__esModule",{value:true});xi.SamplingDecision=void 0;var mI;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED";})(mI=xi.SamplingDecision||(xi.SamplingDecision={}));});var Ud=l(function(Hd){"use strict";Object.defineProperty(Hd,"__esModule",{value:true});});var Bd=l(function(Mi){"use strict";Object.defineProperty(Mi,"__esModule",{value:true});Mi.SpanKind=void 0;var yI;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER";})(yI=Mi.SpanKind||(Mi.SpanKind={}));});var Gd=l(function(Fd){"use strict";Object.defineProperty(Fd,"__esModule",{value:true});});var $d=l(function(Vd){"use strict";Object.defineProperty(Vd,"__esModule",{value:true});});var zd=l(function(Li){"use strict";Object.defineProperty(Li,"__esModule",{value:true});Li.SpanStatusCode=void 0;var TI;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR";})(TI=Li.SpanStatusCode||(Li.SpanStatusCode={}));});var Kd=l(function(Xd){"use strict";Object.defineProperty(Xd,"__esModule",{value:true});});var Qd=l(function(Yd){"use strict";Object.defineProperty(Yd,"__esModule",{value:true});});var Zd=l(function(Wd){"use strict";Object.defineProperty(Wd,"__esModule",{value:true});});var eh=l(function(Jd){"use strict";Object.defineProperty(Jd,"__esModule",{value:true});});var ih=l(function(cs){"use strict";Object.defineProperty(cs,"__esModule",{value:true});cs.TraceAPI=void 0;var Yu=dn(),th=Ku(),rh=is(),qi=Vu(),nh=hn(),Qu="trace",AI=function(){function e(){this._proxyTracerProvider=new th.ProxyTracerProvider(),this.wrapSpanContext=rh.wrapSpanContext,this.isSpanContextValid=rh.isSpanContextValid,this.deleteSpan=qi.deleteSpan,this.getSpan=qi.getSpan,this.getSpanContext=qi.getSpanContext,this.setSpan=qi.setSpan,this.setSpanContext=qi.setSpanContext;}return e.getInstance=function(){return this._instance||(this._instance=new e()),this._instance;},e.prototype.setGlobalTracerProvider=function(t){var r=Yu.registerGlobal(Qu,this._proxyTracerProvider,nh.DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(t),r;},e.prototype.getTracerProvider=function(){return Yu.getGlobal(Qu)||this._proxyTracerProvider;},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r);},e.prototype.disable=function(){Yu.unregisterGlobal(Qu,nh.DiagAPI.instance()),this._proxyTracerProvider=new th.ProxyTracerProvider();},e;}();cs.TraceAPI=AI;});var ah=l(function(ls){"use strict";Object.defineProperty(ls,"__esModule",{value:true});ls.NoopTextMapPropagator=void 0;var SI=function(){function e(){}return e.prototype.inject=function(t,r){},e.prototype.extract=function(t,r){return t;},e.prototype.fields=function(){return[];},e;}();ls.NoopTextMapPropagator=SI;});var sh=l(function(Kt){"use strict";Object.defineProperty(Kt,"__esModule",{value:true});Kt.deleteBaggage=Kt.setBaggage=Kt.getBaggage=void 0;var II=Di(),Wu=II.createContextKey("OpenTelemetry Baggage Key");function CI(e){return e.getValue(Wu)||void 0;}Kt.getBaggage=CI;function bI(e,t){return e.setValue(Wu,t);}Kt.setBaggage=bI;function OI(e){return e.deleteValue(Wu);}Kt.deleteBaggage=OI;});var ch=l(function(fs){"use strict";Object.defineProperty(fs,"__esModule",{value:true});fs.PropagationAPI=void 0;var Zu=dn(),PI=ah(),oh=ku(),Ju=sh(),RI=qu(),uh=hn(),ec="propagation",NI=new PI.NoopTextMapPropagator(),DI=function(){function e(){this.createBaggage=RI.createBaggage,this.getBaggage=Ju.getBaggage,this.setBaggage=Ju.setBaggage,this.deleteBaggage=Ju.deleteBaggage;}return e.getInstance=function(){return this._instance||(this._instance=new e()),this._instance;},e.prototype.setGlobalPropagator=function(t){return Zu.registerGlobal(ec,t,uh.DiagAPI.instance());},e.prototype.inject=function(t,r,n){return n===void 0&&(n=oh.defaultTextMapSetter),this._getGlobalPropagator().inject(t,r,n);},e.prototype.extract=function(t,r,n){return n===void 0&&(n=oh.defaultTextMapGetter),this._getGlobalPropagator().extract(t,r,n);},e.prototype.fields=function(){return this._getGlobalPropagator().fields();},e.prototype.disable=function(){Zu.unregisterGlobal(ec,uh.DiagAPI.instance());},e.prototype._getGlobalPropagator=function(){return Zu.getGlobal(ec)||NI;},e;}();fs.PropagationAPI=DI;});var z=l(function(y){"use strict";var wI=y&&y.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),re=y&&y.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&wI(t,e,r);}};Object.defineProperty(y,"__esModule",{value:true});y.diag=y.propagation=y.trace=y.context=y.INVALID_SPAN_CONTEXT=y.INVALID_TRACEID=y.INVALID_SPANID=y.isValidSpanId=y.isValidTraceId=y.isSpanContextValid=y.baggageEntryMetadataFromString=void 0;re(id(),y);var xI=qu();Object.defineProperty(y,"baggageEntryMetadataFromString",{enumerable:true,get:function get(){return xI.baggageEntryMetadataFromString;}});re(vd(),y);re(Ed(),y);re(Td(),y);re(ku(),y);re(Sd(),y);re(Cd(),y);re(Xu(),y);re(Ku(),y);re(jd(),y);re(kd(),y);re(Ud(),y);re(Bd(),y);re(Gd(),y);re($d(),y);re(zd(),y);re(Fu(),y);re(Kd(),y);re(Qd(),y);re(Zd(),y);var tc=is();Object.defineProperty(y,"isSpanContextValid",{enumerable:true,get:function get(){return tc.isSpanContextValid;}});Object.defineProperty(y,"isValidTraceId",{enumerable:true,get:function get(){return tc.isValidTraceId;}});Object.defineProperty(y,"isValidSpanId",{enumerable:true,get:function get(){return tc.isValidSpanId;}});var rc=ts();Object.defineProperty(y,"INVALID_SPANID",{enumerable:true,get:function get(){return rc.INVALID_SPANID;}});Object.defineProperty(y,"INVALID_TRACEID",{enumerable:true,get:function get(){return rc.INVALID_TRACEID;}});Object.defineProperty(y,"INVALID_SPAN_CONTEXT",{enumerable:true,get:function get(){return rc.INVALID_SPAN_CONTEXT;}});re(Di(),y);re(eh(),y);var MI=Bu();y.context=MI.ContextAPI.getInstance();var LI=ih();y.trace=LI.TraceAPI.getInstance();var qI=ch();y.propagation=qI.PropagationAPI.getInstance();var jI=hn();y.diag=jI.DiagAPI.instance();y.default={trace:y.trace,context:y.context,propagation:y.propagation,diag:y.diag};});var ps=l(function(Yt){"use strict";Object.defineProperty(Yt,"__esModule",{value:true});Yt.isTracingSuppressed=Yt.unsuppressTracing=Yt.suppressTracing=void 0;var kI=z(),nc=kI.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function HI(e){return e.setValue(nc,true);}Yt.suppressTracing=HI;function UI(e){return e.deleteValue(nc);}Yt.unsuppressTracing=UI;function BI(e){return e.getValue(nc)===true;}Yt.isTracingSuppressed=BI;});var ic=l(function(Ie){"use strict";Object.defineProperty(Ie,"__esModule",{value:true});Ie.BAGGAGE_MAX_TOTAL_LENGTH=Ie.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=Ie.BAGGAGE_MAX_NAME_VALUE_PAIRS=Ie.BAGGAGE_HEADER=Ie.BAGGAGE_ITEMS_SEPARATOR=Ie.BAGGAGE_PROPERTIES_SEPARATOR=Ie.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;Ie.BAGGAGE_KEY_PAIR_SEPARATOR="=";Ie.BAGGAGE_PROPERTIES_SEPARATOR=";";Ie.BAGGAGE_ITEMS_SEPARATOR=",";Ie.BAGGAGE_HEADER="baggage";Ie.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;Ie.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;Ie.BAGGAGE_MAX_TOTAL_LENGTH=8192;});var ac=l(function(rt){"use strict";Object.defineProperty(rt,"__esModule",{value:true});rt.parseKeyPairsIntoRecord=rt.parsePairKeyValue=rt.getKeyPairs=rt.serializeKeyPairs=void 0;var FI=z(),yn=ic(),GI=function GI(e){return e.reduce(function(t,r){var n="".concat(t).concat(t!==""?yn.BAGGAGE_ITEMS_SEPARATOR:"").concat(r);return n.length>yn.BAGGAGE_MAX_TOTAL_LENGTH?t:n;},"");};rt.serializeKeyPairs=GI;var VI=function VI(e){return e.getAllEntries().map(function(_ref28){var _ref29=_slicedToArray(_ref28,2),t=_ref29[0],r=_ref29[1];return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r.value));});};rt.getKeyPairs=VI;var $I=function $I(e){var t=e.split(yn.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;var r=t.shift();if(!r)return;var n=r.split(yn.BAGGAGE_KEY_PAIR_SEPARATOR);if(n.length!==2)return;var i=decodeURIComponent(n[0].trim()),a=decodeURIComponent(n[1].trim()),s;return t.length>0&&(s=FI.baggageEntryMetadataFromString(t.join(yn.BAGGAGE_PROPERTIES_SEPARATOR))),{key:i,value:a,metadata:s};};rt.parsePairKeyValue=$I;var zI=function zI(e){return typeof e!="string"||e.length===0?{}:e.split(yn.BAGGAGE_ITEMS_SEPARATOR).map(function(t){return rt.parsePairKeyValue(t);}).filter(function(t){return t!==void 0&&t.value.length>0;}).reduce(function(t,r){return t[r.key]=r.value,t;},{});};rt.parseKeyPairsIntoRecord=zI;});var lh=l(function(ds){"use strict";Object.defineProperty(ds,"__esModule",{value:true});ds.HttpBaggagePropagator=void 0;var sc=z(),XI=ps(),Tn=ic(),oc=ac(),uc=/*#__PURE__*/function(){function uc(){_classCallCheck(this,uc);}_createClass(uc,[{key:"inject",value:function inject(t,r,n){var i=sc.propagation.getBaggage(t);if(!i||XI.isTracingSuppressed(t))return;var a=oc.getKeyPairs(i).filter(function(o){return o.length<=Tn.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS;}).slice(0,Tn.BAGGAGE_MAX_NAME_VALUE_PAIRS),s=oc.serializeKeyPairs(a);s.length>0&&n.set(r,Tn.BAGGAGE_HEADER,s);}},{key:"extract",value:function extract(t,r,n){var i=n.get(r,Tn.BAGGAGE_HEADER);if(!i)return t;var a={};return i.length===0||(i.split(Tn.BAGGAGE_ITEMS_SEPARATOR).forEach(function(o){var u=oc.parsePairKeyValue(o);if(u){var c={value:u.value};u.metadata&&(c.metadata=u.metadata),a[u.key]=c;}}),Object.entries(a).length===0)?t:sc.propagation.setBaggage(t,sc.propagation.createBaggage(a));}},{key:"fields",value:function fields(){return[Tn.BAGGAGE_HEADER];}}]);return uc;}();ds.HttpBaggagePropagator=uc;});var dh=l(function(An){"use strict";Object.defineProperty(An,"__esModule",{value:true});An.isAttributeValue=An.sanitizeAttributes=void 0;function KI(e){var t={};if(e==null||_typeof(e)!="object")return t;for(var _i7=0,_Object$entries=Object.entries(e);_i7<_Object$entries.length;_i7++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i7],2),r=_Object$entries$_i[0],n=_Object$entries$_i[1];fh(n)&&(Array.isArray(n)?t[r]=n.slice():t[r]=n);}return t;}An.sanitizeAttributes=KI;function fh(e){return e==null?true:Array.isArray(e)?YI(e):ph(e);}An.isAttributeValue=fh;function YI(e){var t;var _iterator74=_createForOfIteratorHelper(e),_step71;try{for(_iterator74.s();!(_step71=_iterator74.n()).done;){var r=_step71.value;if(r!=null){if(!t){if(ph(r)){t=_typeof(r);continue;}return false;}if(_typeof(r)!==t)return false;}}}catch(err){_iterator74.e(err);}finally{_iterator74.f();}return true;}function ph(e){switch(_typeof(e)){case"number":return true;case"boolean":return true;case"string":return true;}return false;}});var cc=l(function(hs){"use strict";Object.defineProperty(hs,"__esModule",{value:true});hs.loggingErrorHandler=void 0;var QI=z();function WI(){return function(e){QI.diag.error(ZI(e));};}hs.loggingErrorHandler=WI;function ZI(e){return typeof e=="string"?e:JSON.stringify(JI(e));}function JI(e){var t={},r=e;for(;r!==null;){Object.getOwnPropertyNames(r).forEach(function(n){if(t[n])return;var i=r[n];i&&(t[n]=String(i));}),r=Object.getPrototypeOf(r);}return t;}});var lc=l(function(Sn){"use strict";Object.defineProperty(Sn,"__esModule",{value:true});Sn.globalErrorHandler=Sn.setGlobalErrorHandler=void 0;var eC=cc(),hh=eC.loggingErrorHandler();function tC(e){hh=e;}Sn.setGlobalErrorHandler=tC;var rC=function rC(e){try{hh(e);}catch(_unused9){}};Sn.globalErrorHandler=rC;});var fc=l(function(ji){"use strict";Object.defineProperty(ji,"__esModule",{value:true});ji.TracesSamplerValues=void 0;var nC;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio";})(nC=ji.TracesSamplerValues||(ji.TracesSamplerValues={}));});var pc=l(function(Sr){"use strict";Object.defineProperty(Sr,"__esModule",{value:true});Sr.parseEnvironment=Sr.DEFAULT_ENVIRONMENT=void 0;var Qt=z(),iC=fc(),aC=",",sC=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function oC(e){return sC.indexOf(e)>-1;}var uC=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function cC(e){return uC.indexOf(e)>-1;}Sr.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Qt.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:iC.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function lC(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1/0;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1/0;if(_typeof(r[e])<"u"){var a=Number(r[e]);isNaN(a)||(a<n?t[e]=n:a>i?t[e]=i:t[e]=a);}}function fC(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:aC;var i=r[e];typeof i=="string"&&(t[e]=i.split(n).map(function(a){return a.trim();}));}var pC={ALL:Qt.DiagLogLevel.ALL,VERBOSE:Qt.DiagLogLevel.VERBOSE,DEBUG:Qt.DiagLogLevel.DEBUG,INFO:Qt.DiagLogLevel.INFO,WARN:Qt.DiagLogLevel.WARN,ERROR:Qt.DiagLogLevel.ERROR,NONE:Qt.DiagLogLevel.NONE};function dC(e,t,r){var n=r[e];if(typeof n=="string"){var i=pC[n.toUpperCase()];i!=null&&(t[e]=i);}}function hC(e){var t={};for(var r in Sr.DEFAULT_ENVIRONMENT){var n=r;switch(n){case"OTEL_LOG_LEVEL":dC(n,t,e);break;default:if(oC(n))lC(n,t,e);else if(cC(n))fC(n,t,e);else{var i=e[n];_typeof(i)<"u"&&i!==null&&(t[n]=String(i));}}}return t;}Sr.parseEnvironment=hC;});var vh=l(function(_s){"use strict";Object.defineProperty(_s,"__esModule",{value:true});_s.getEnv=void 0;var _C=require("os"),_h=pc();function vC(){var e=_h.parseEnvironment(process.env);return Object.assign({HOSTNAME:_C.hostname()},_h.DEFAULT_ENVIRONMENT,e);}_s.getEnv=vC;});var gh=l(function(vs){"use strict";Object.defineProperty(vs,"__esModule",{value:true});vs.hexToBase64=void 0;function gC(e){var t=e.length,r="";for(var n=0;n<t;n+=2){var i=e.substring(n,n+2),a=parseInt(i,16);r+=String.fromCharCode(a);}return Buffer.from(r,"ascii").toString("base64");}vs.hexToBase64=gC;});var yh=l(function(Es){"use strict";Object.defineProperty(Es,"__esModule",{value:true});Es.RandomIdGenerator=void 0;var EC=8,mh=16,dc=/*#__PURE__*/_createClass(function dc(){_classCallCheck(this,dc);this.generateTraceId=Eh(mh),this.generateSpanId=Eh(EC);});Es.RandomIdGenerator=dc;var gs=Buffer.allocUnsafe(mh);function Eh(e){return function(){for(var r=0;r<e/4;r++){gs.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);}for(var _r2=0;_r2<e&&!(gs[_r2]>0);_r2++){_r2===e-1&&(gs[e-1]=1);}return gs.toString("hex",0,e);};}});var Th=l(function(ms){"use strict";Object.defineProperty(ms,"__esModule",{value:true});ms.otperformance=void 0;var mC=require("perf_hooks");ms.otperformance=mC.performance;});var Ts=l(function(ys){"use strict";Object.defineProperty(ys,"__esModule",{value:true});ys.VERSION=void 0;ys.VERSION="0.23.0";});var Ah=l(function(x){"use strict";Object.defineProperty(x,"__esModule",{value:true});x.RpcGrpcStatusCodeValues=x.MessagingOperationValues=x.MessagingDestinationKindValues=x.HttpFlavorValues=x.NetTransportValues=x.FaasInvokedProviderValues=x.FaasDocumentOperationValues=x.FaasTriggerValues=x.DbCassandraConsistencyLevelValues=x.DbSystemValues=x.SemanticAttributes=void 0;x.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var yC;(function(e){e.OTHER_SQL="other_sql",e.MSSQL="mssql",e.MYSQL="mysql",e.ORACLE="oracle",e.DB2="db2",e.POSTGRESQL="postgresql",e.REDSHIFT="redshift",e.HIVE="hive",e.CLOUDSCAPE="cloudscape",e.HSQLDB="hsqldb",e.PROGRESS="progress",e.MAXDB="maxdb",e.HANADB="hanadb",e.INGRES="ingres",e.FIRSTSQL="firstsql",e.EDB="edb",e.CACHE="cache",e.ADABAS="adabas",e.FIREBIRD="firebird",e.DERBY="derby",e.FILEMAKER="filemaker",e.INFORMIX="informix",e.INSTANTDB="instantdb",e.INTERBASE="interbase",e.MARIADB="mariadb",e.NETEZZA="netezza",e.PERVASIVE="pervasive",e.POINTBASE="pointbase",e.SQLITE="sqlite",e.SYBASE="sybase",e.TERADATA="teradata",e.VERTICA="vertica",e.H2="h2",e.COLDFUSION="coldfusion",e.CASSANDRA="cassandra",e.HBASE="hbase",e.MONGODB="mongodb",e.REDIS="redis",e.COUCHBASE="couchbase",e.COUCHDB="couchdb",e.COSMOSDB="cosmosdb",e.DYNAMODB="dynamodb",e.NEO4J="neo4j",e.GEODE="geode",e.ELASTICSEARCH="elasticsearch",e.MEMCACHED="memcached",e.COCKROACHDB="cockroachdb";})(yC=x.DbSystemValues||(x.DbSystemValues={}));var TC;(function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial";})(TC=x.DbCassandraConsistencyLevelValues||(x.DbCassandraConsistencyLevelValues={}));var AC;(function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other";})(AC=x.FaasTriggerValues||(x.FaasTriggerValues={}));var SC;(function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete";})(SC=x.FaasDocumentOperationValues||(x.FaasDocumentOperationValues={}));var IC;(function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp";})(IC=x.FaasInvokedProviderValues||(x.FaasInvokedProviderValues={}));var CC;(function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other";})(CC=x.NetTransportValues||(x.NetTransportValues={}));var bC;(function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC";})(bC=x.HttpFlavorValues||(x.HttpFlavorValues={}));var OC;(function(e){e.QUEUE="queue",e.TOPIC="topic";})(OC=x.MessagingDestinationKindValues||(x.MessagingDestinationKindValues={}));var PC;(function(e){e.RECEIVE="receive",e.PROCESS="process";})(PC=x.MessagingOperationValues||(x.MessagingOperationValues={}));var RC;(function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED";})(RC=x.RpcGrpcStatusCodeValues||(x.RpcGrpcStatusCodeValues={}));});var Sh=l(function(Ir){"use strict";var NC=Ir&&Ir.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),DC=Ir&&Ir.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&NC(t,e,r);}};Object.defineProperty(Ir,"__esModule",{value:true});DC(Ah(),Ir);});var Ih=l(function(ne){"use strict";Object.defineProperty(ne,"__esModule",{value:true});ne.TelemetrySdkLanguageValues=ne.OsTypeValues=ne.HostArchValues=ne.AwsEcsLaunchtypeValues=ne.CloudPlatformValues=ne.CloudProviderValues=ne.ResourceAttributes=void 0;ne.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var wC;(function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp";})(wC=ne.CloudProviderValues||(ne.CloudProviderValues={}));var xC;(function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine";})(xC=ne.CloudPlatformValues||(ne.CloudPlatformValues={}));var MC;(function(e){e.EC2="ec2",e.FARGATE="fargate";})(MC=ne.AwsEcsLaunchtypeValues||(ne.AwsEcsLaunchtypeValues={}));var LC;(function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86";})(LC=ne.HostArchValues||(ne.HostArchValues={}));var qC;(function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os";})(qC=ne.OsTypeValues||(ne.OsTypeValues={}));var jC;(function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs";})(jC=ne.TelemetrySdkLanguageValues||(ne.TelemetrySdkLanguageValues={}));});var Ch=l(function(Cr){"use strict";var kC=Cr&&Cr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),HC=Cr&&Cr.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&kC(t,e,r);}};Object.defineProperty(Cr,"__esModule",{value:true});HC(Ih(),Cr);});var In=l(function(Wt){"use strict";var UC=Wt&&Wt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),bh=Wt&&Wt.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&UC(t,e,r);}};Object.defineProperty(Wt,"__esModule",{value:true});bh(Sh(),Wt);bh(Ch(),Wt);});var Oh=l(function(As){"use strict";var _As$SDK_INFO;Object.defineProperty(As,"__esModule",{value:true});As.SDK_INFO=void 0;var BC=Ts(),ki=In();As.SDK_INFO=(_As$SDK_INFO={},_defineProperty(_As$SDK_INFO,ki.ResourceAttributes.TELEMETRY_SDK_NAME,"opentelemetry"),_defineProperty(_As$SDK_INFO,ki.ResourceAttributes.PROCESS_RUNTIME_NAME,"node"),_defineProperty(_As$SDK_INFO,ki.ResourceAttributes.TELEMETRY_SDK_LANGUAGE,ki.TelemetrySdkLanguageValues.NODEJS),_defineProperty(_As$SDK_INFO,ki.ResourceAttributes.TELEMETRY_SDK_VERSION,BC.VERSION),_As$SDK_INFO);});var Ph=l(function(Ss){"use strict";Object.defineProperty(Ss,"__esModule",{value:true});Ss.unrefTimer=void 0;function FC(e){e.unref();}Ss.unrefTimer=FC;});var Rh=l(function(ze){"use strict";var GC=ze&&ze.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),Cn=ze&&ze.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&GC(t,e,r);}};Object.defineProperty(ze,"__esModule",{value:true});Cn(vh(),ze);Cn(gh(),ze);Cn(yh(),ze);Cn(Th(),ze);Cn(Oh(),ze);Cn(Ph(),ze);});var hc=l(function(br){"use strict";var VC=br&&br.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),$C=br&&br.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&VC(t,e,r);}};Object.defineProperty(br,"__esModule",{value:true});$C(Rh(),br);});var wh=l(function(le){"use strict";Object.defineProperty(le,"__esModule",{value:true});le.isTimeInput=le.isTimeInputHrTime=le.hrTimeToMicroseconds=le.hrTimeToMilliseconds=le.hrTimeToNanoseconds=le.hrTimeToTimeStamp=le.hrTimeDuration=le.timeInputToHrTime=le.hrTime=void 0;var _c=hc(),vc=9,Hi=Math.pow(10,vc);function Is(e){var t=e/1e3,r=Math.trunc(t),n=Number((t-r).toFixed(vc))*Hi;return[r,n];}function Nh(){var e=_c.otperformance.timeOrigin;if(typeof e!="number"){var t=_c.otperformance;e=t.timing&&t.timing.fetchStart;}return e;}function Dh(e){var t=Is(Nh()),r=Is(typeof e=="number"?e:_c.otperformance.now()),n=t[0]+r[0],i=t[1]+r[1];return i>Hi&&(i-=Hi,n+=1),[n,i];}le.hrTime=Dh;function zC(e){if(gc(e))return e;if(typeof e=="number")return e<Nh()?Dh(e):Is(e);if(e instanceof Date)return Is(e.getTime());throw TypeError("Invalid input type");}le.timeInputToHrTime=zC;function XC(e,t){var r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=Hi),[r,n];}le.hrTimeDuration=XC;function KC(e){var t=vc,r="".concat("0".repeat(t)).concat(e[1],"Z"),n=r.substr(r.length-t-1);return new Date(e[0]*1e3).toISOString().replace("000Z",n);}le.hrTimeToTimeStamp=KC;function YC(e){return e[0]*Hi+e[1];}le.hrTimeToNanoseconds=YC;function QC(e){return Math.round(e[0]*1e3+e[1]/1e6);}le.hrTimeToMilliseconds=QC;function WC(e){return Math.round(e[0]*1e6+e[1]/1e3);}le.hrTimeToMicroseconds=WC;function gc(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number";}le.isTimeInputHrTime=gc;function ZC(e){return gc(e)||typeof e=="number"||e instanceof Date;}le.isTimeInput=ZC;});var Mh=l(function(xh){"use strict";Object.defineProperty(xh,"__esModule",{value:true});});var Lh=l(function(Ui){"use strict";Object.defineProperty(Ui,"__esModule",{value:true});Ui.ExportResultCode=void 0;var JC;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED";})(JC=Ui.ExportResultCode||(Ui.ExportResultCode={}));});var jh=l(function(Cs){"use strict";Object.defineProperty(Cs,"__esModule",{value:true});Cs.CompositePropagator=void 0;var qh=z(),Ec=/*#__PURE__*/function(){function Ec(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Ec);var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[];}).reduce(function(n,i){return n.concat(i);},[])));}_createClass(Ec,[{key:"inject",value:function inject(t,r,n){var _iterator75=_createForOfIteratorHelper(this._propagators),_step72;try{for(_iterator75.s();!(_step72=_iterator75.n()).done;){var i=_step72.value;try{i.inject(t,r,n);}catch(a){qh.diag.warn("Failed to inject with ".concat(i.constructor.name,". Err: ").concat(a.message));}}}catch(err){_iterator75.e(err);}finally{_iterator75.f();}}},{key:"extract",value:function extract(t,r,n){return this._propagators.reduce(function(i,a){try{return a.extract(i,r,n);}catch(s){qh.diag.warn("Failed to inject with ".concat(a.constructor.name,". Err: ").concat(s.message));}return i;},t);}},{key:"fields",value:function fields(){return this._fields.slice();}}]);return Ec;}();Cs.CompositePropagator=Ec;});var kh=l(function(bn){"use strict";Object.defineProperty(bn,"__esModule",{value:true});bn.validateValue=bn.validateKey=void 0;var mc="[_0-9a-z-*/]",eb="[a-z]".concat(mc,"{0,255}"),tb="[a-z0-9]".concat(mc,"{0,240}@[a-z]").concat(mc,"{0,13}"),rb=new RegExp("^(?:".concat(eb,"|").concat(tb,")$")),nb=/^[ -~]{0,255}[!-~]$/,ib=/,|=/;function ab(e){return rb.test(e);}bn.validateKey=ab;function sb(e){return nb.test(e)&&!ib.test(e);}bn.validateValue=sb;});var yc=l(function(bs){"use strict";Object.defineProperty(bs,"__esModule",{value:true});bs.TraceState=void 0;var Hh=kh(),Uh=32,ob=512,Bh=",",Fh="=",Bi=/*#__PURE__*/function(){function Bi(t){_classCallCheck(this,Bi);this._internalState=new Map(),t&&this._parse(t);}_createClass(Bi,[{key:"set",value:function set(t,r){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n;}},{key:"unset",value:function unset(t){var r=this._clone();return r._internalState.delete(t),r;}},{key:"get",value:function get(t){return this._internalState.get(t);}},{key:"serialize",value:function serialize(){var _this135=this;return this._keys().reduce(function(t,r){return t.push(r+Fh+_this135.get(r)),t;},[]).join(Bh);}},{key:"_parse",value:function _parse(t){t.length>ob||(this._internalState=t.split(Bh).reverse().reduce(function(r,n){var i=n.trim(),a=i.indexOf(Fh);if(a!==-1){var s=i.slice(0,a),o=i.slice(a+1,n.length);Hh.validateKey(s)&&Hh.validateValue(o)&&r.set(s,o);}return r;},new Map()),this._internalState.size>Uh&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Uh))));}},{key:"_keys",value:function _keys(){return Array.from(this._internalState.keys()).reverse();}},{key:"_clone",value:function _clone(){var t=new Bi();return t._internalState=new Map(this._internalState),t;}}]);return Bi;}();bs.TraceState=Bi;});var Vh=l(function(Ce){"use strict";Object.defineProperty(Ce,"__esModule",{value:true});Ce.HttpTraceContextPropagator=Ce.parseTraceParent=Ce.TRACE_STATE_HEADER=Ce.TRACE_PARENT_HEADER=void 0;var Os=z(),ub=ps(),cb=yc();Ce.TRACE_PARENT_HEADER="traceparent";Ce.TRACE_STATE_HEADER="tracestate";var lb="00",fb="(?!ff)[\\da-f]{2}",pb="(?![0]{32})[\\da-f]{32}",db="(?![0]{16})[\\da-f]{16}",hb="[\\da-f]{2}",_b=new RegExp("^\\s?(".concat(fb,")-(").concat(pb,")-(").concat(db,")-(").concat(hb,")(-.*)?\\s?$"));function Gh(e){var t=_b.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)};}Ce.parseTraceParent=Gh;var Tc=/*#__PURE__*/function(){function Tc(){_classCallCheck(this,Tc);}_createClass(Tc,[{key:"inject",value:function inject(t,r,n){var i=Os.trace.getSpanContext(t);if(!i||ub.isTracingSuppressed(t)||!Os.isSpanContextValid(i))return;var a="".concat(lb,"-").concat(i.traceId,"-").concat(i.spanId,"-0").concat(Number(i.traceFlags||Os.TraceFlags.NONE).toString(16));n.set(r,Ce.TRACE_PARENT_HEADER,a),i.traceState&&n.set(r,Ce.TRACE_STATE_HEADER,i.traceState.serialize());}},{key:"extract",value:function extract(t,r,n){var i=n.get(r,Ce.TRACE_PARENT_HEADER);if(!i)return t;var a=Array.isArray(i)?i[0]:i;if(typeof a!="string")return t;var s=Gh(a);if(!s)return t;s.isRemote=true;var o=n.get(r,Ce.TRACE_STATE_HEADER);if(o){var u=Array.isArray(o)?o.join(","):o;s.traceState=new cb.TraceState(typeof u=="string"?u:void 0);}return Os.trace.setSpanContext(t,s);}},{key:"fields",value:function fields(){return[Ce.TRACE_PARENT_HEADER,Ce.TRACE_STATE_HEADER];}}]);return Tc;}();Ce.HttpTraceContextPropagator=Tc;});var zh=l(function($h){"use strict";Object.defineProperty($h,"__esModule",{value:true});});var Xh=l(function(nt){"use strict";Object.defineProperty(nt,"__esModule",{value:true});nt.getRPCMetadata=nt.deleteRPCMetadata=nt.setRPCMetadata=nt.RPCType=void 0;var vb=z(),Ac=vb.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),gb;(function(e){e.HTTP="http";})(gb=nt.RPCType||(nt.RPCType={}));function Eb(e,t){return e.setValue(Ac,t);}nt.setRPCMetadata=Eb;function mb(e){return e.deleteValue(Ac);}nt.deleteRPCMetadata=mb;function yb(e){return e.getValue(Ac);}nt.getRPCMetadata=yb;});var Ic=l(function(Ps){"use strict";Object.defineProperty(Ps,"__esModule",{value:true});Ps.AlwaysOffSampler=void 0;var Tb=z(),Sc=/*#__PURE__*/function(){function Sc(){_classCallCheck(this,Sc);}_createClass(Sc,[{key:"shouldSample",value:function shouldSample(){return{decision:Tb.SamplingDecision.NOT_RECORD};}},{key:"toString",value:function toString(){return"AlwaysOffSampler";}}]);return Sc;}();Ps.AlwaysOffSampler=Sc;});var bc=l(function(Rs){"use strict";Object.defineProperty(Rs,"__esModule",{value:true});Rs.AlwaysOnSampler=void 0;var Ab=z(),Cc=/*#__PURE__*/function(){function Cc(){_classCallCheck(this,Cc);}_createClass(Cc,[{key:"shouldSample",value:function shouldSample(){return{decision:Ab.SamplingDecision.RECORD_AND_SAMPLED};}},{key:"toString",value:function toString(){return"AlwaysOnSampler";}}]);return Cc;}();Rs.AlwaysOnSampler=Cc;});var Yh=l(function(Ds){"use strict";Object.defineProperty(Ds,"__esModule",{value:true});Ds.ParentBasedSampler=void 0;var Ns=z(),Sb=lc(),Kh=Ic(),Oc=bc(),Pc=/*#__PURE__*/function(){function Pc(t){_classCallCheck(this,Pc);var r,n,i,a;this._root=t.root,this._root||(Sb.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Oc.AlwaysOnSampler()),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new Oc.AlwaysOnSampler(),this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new Kh.AlwaysOffSampler(),this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new Oc.AlwaysOnSampler(),this._localParentNotSampled=(a=t.localParentNotSampled)!==null&&a!==void 0?a:new Kh.AlwaysOffSampler();}_createClass(Pc,[{key:"shouldSample",value:function shouldSample(t,r,n,i,a,s){var o=Ns.trace.getSpanContext(t);return!o||!Ns.isSpanContextValid(o)?this._root.shouldSample(t,r,n,i,a,s):o.isRemote?o.traceFlags&Ns.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,a,s):this._remoteParentNotSampled.shouldSample(t,r,n,i,a,s):o.traceFlags&Ns.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,a,s):this._localParentNotSampled.shouldSample(t,r,n,i,a,s);}},{key:"toString",value:function toString(){return"ParentBased{root=".concat(this._root.toString(),", remoteParentSampled=").concat(this._remoteParentSampled.toString(),", remoteParentNotSampled=").concat(this._remoteParentNotSampled.toString(),", localParentSampled=").concat(this._localParentSampled.toString(),", localParentNotSampled=").concat(this._localParentNotSampled.toString(),"}");}}]);return Pc;}();Ds.ParentBasedSampler=Pc;});var Qh=l(function(ws){"use strict";Object.defineProperty(ws,"__esModule",{value:true});ws.TraceIdRatioBasedSampler=void 0;var Rc=z(),Nc=/*#__PURE__*/function(){function Nc(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;_classCallCheck(this,Nc);this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295);}_createClass(Nc,[{key:"shouldSample",value:function shouldSample(t,r){return{decision:Rc.isValidTraceId(r)&&this._accumulate(r)<this._upperBound?Rc.SamplingDecision.RECORD_AND_SAMPLED:Rc.SamplingDecision.NOT_RECORD};}},{key:"toString",value:function toString(){return"TraceIdRatioBased{".concat(this._ratio,"}");}},{key:"_normalize",value:function _normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t;}},{key:"_accumulate",value:function _accumulate(t){var r=0;for(var n=0;n<t.length/8;n++){var i=n*8,a=parseInt(t.slice(i,i+8),16);r=(r^a)>>>0;}return r;}}]);return Nc;}();ws.TraceIdRatioBasedSampler=Nc;});var Zh=l(function(On){"use strict";Object.defineProperty(On,"__esModule",{value:true});On.isUrlIgnored=On.urlMatches=void 0;function Wh(e,t){return typeof t=="string"?e===t:t.test(e);}On.urlMatches=Wh;function Ib(e,t){if(!t)return false;var _iterator76=_createForOfIteratorHelper(t),_step73;try{for(_iterator76.s();!(_step73=_iterator76.n()).done;){var r=_step73.value;if(Wh(e,r))return true;}}catch(err){_iterator76.e(err);}finally{_iterator76.f();}return false;}On.isUrlIgnored=Ib;});var Jh=l(function(xs){"use strict";Object.defineProperty(xs,"__esModule",{value:true});xs.isWrapped=void 0;function Cb(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===true;}xs.isWrapped=Cb;});var Xe=l(function(M){"use strict";var bb=M&&M.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),Y=M&&M.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&bb(t,e,r);}};Object.defineProperty(M,"__esModule",{value:true});M.baggageUtils=void 0;Y(lh(),M);Y(dh(),M);Y(lc(),M);Y(cc(),M);Y(wh(),M);Y(Mh(),M);Y(Lh(),M);Y(Ts(),M);M.baggageUtils=ac();Y(hc(),M);Y(jh(),M);Y(Vh(),M);Y(zh(),M);Y(Xh(),M);Y(Ic(),M);Y(bc(),M);Y(Yh(),M);Y(Qh(),M);Y(ps(),M);Y(yc(),M);Y(pc(),M);Y(fc(),M);Y(Zh(),M);Y(Jh(),M);Y(Ts(),M);});var e_=l(function(Ms){"use strict";Object.defineProperty(Ms,"__esModule",{value:true});Ms.ExceptionEventName=void 0;Ms.ExceptionEventName="exception";});var wc=l(function(Ls){"use strict";Object.defineProperty(Ls,"__esModule",{value:true});Ls.Span=void 0;var Zt=z(),ft=Xe(),Or=In(),Ob=e_(),Dc=/*#__PURE__*/function(){function Dc(t,r,n,i,a,s){var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:[];var u=arguments.length>7&&arguments[7]!==undefined?arguments[7]:ft.hrTime();_classCallCheck(this,Dc);this.attributes={},this.links=[],this.events=[],this.status={code:Zt.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=false,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=a,this.links=o,this.startTime=ft.timeInputToHrTime(u),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r);}_createClass(Dc,[{key:"spanContext",value:function spanContext(){return this._spanContext;}},{key:"setAttribute",value:function setAttribute(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(Zt.diag.warn("Invalid attribute key: ".concat(t)),this):ft.isAttributeValue(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this:(this.attributes[t]=r,this):(Zt.diag.warn("Invalid attribute value set for key: ".concat(t)),this);}},{key:"setAttributes",value:function setAttributes(t){for(var _i8=0,_Object$entries2=Object.entries(t);_i8<_Object$entries2.length;_i8++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i8],2),r=_Object$entries2$_i[0],n=_Object$entries2$_i[1];this.setAttribute(r,n);}return this;}},{key:"addEvent",value:function addEvent(t,r,n){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(Zt.diag.warn("Dropping extra events."),this.events.shift()),ft.isTimeInput(r)&&(_typeof(n)>"u"&&(n=r),r=void 0),_typeof(n)>"u"&&(n=ft.hrTime()),this.events.push({name:t,attributes:r,time:ft.timeInputToHrTime(n)}),this);}},{key:"setStatus",value:function setStatus(t){return this._isSpanEnded()?this:(this.status=t,this);}},{key:"updateName",value:function updateName(t){return this._isSpanEnded()?this:(this.name=t,this);}},{key:"end",value:function end(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:ft.hrTime();if(this._isSpanEnded()){Zt.diag.error("You can only call end() on a span once.");return;}this._ended=true,this.endTime=ft.timeInputToHrTime(t),this._duration=ft.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&Zt.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this);}},{key:"isRecording",value:function isRecording(){return this._ended===false;}},{key:"recordException",value:function recordException(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ft.hrTime();var n={};typeof t=="string"?n[Or.SemanticAttributes.EXCEPTION_MESSAGE]=t:t&&(t.code?n[Or.SemanticAttributes.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[Or.SemanticAttributes.EXCEPTION_TYPE]=t.name),t.message&&(n[Or.SemanticAttributes.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[Or.SemanticAttributes.EXCEPTION_STACKTRACE]=t.stack)),n[Or.SemanticAttributes.EXCEPTION_TYPE]||n[Or.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(Ob.ExceptionEventName,n,r):Zt.diag.warn("Failed to record an exception ".concat(t));}},{key:"duration",get:function get(){return this._duration;}},{key:"ended",get:function get(){return this._ended;}},{key:"_isSpanEnded",value:function _isSpanEnded(){return this._ended&&Zt.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended;}}]);return Dc;}();Ls.Span=Dc;});var xc=l(function(Rn){"use strict";Object.defineProperty(Rn,"__esModule",{value:true});Rn.buildSamplerFromEnv=Rn.DEFAULT_CONFIG=void 0;var qs=z(),ie=Xe(),Pb=ie.getEnv(),Rb=ie.TracesSamplerValues.AlwaysOn;Rn.DEFAULT_CONFIG={sampler:r_(Pb),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:ie.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:ie.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:ie.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function r_(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:ie.getEnv();switch(e.OTEL_TRACES_SAMPLER){case ie.TracesSamplerValues.AlwaysOn:return new ie.AlwaysOnSampler();case ie.TracesSamplerValues.AlwaysOff:return new ie.AlwaysOffSampler();case ie.TracesSamplerValues.ParentBasedAlwaysOn:return new ie.ParentBasedSampler({root:new ie.AlwaysOnSampler()});case ie.TracesSamplerValues.ParentBasedAlwaysOff:return new ie.ParentBasedSampler({root:new ie.AlwaysOffSampler()});case ie.TracesSamplerValues.TraceIdRatio:return new ie.TraceIdRatioBasedSampler(t_(e));case ie.TracesSamplerValues.ParentBasedTraceIdRatio:return new ie.ParentBasedSampler({root:new ie.TraceIdRatioBasedSampler(t_(e))});default:return qs.diag.error("OTEL_TRACES_SAMPLER value \"".concat(e.OTEL_TRACES_SAMPLER," invalid, defaulting to ").concat(Rb,"\".")),new ie.AlwaysOnSampler();}}Rn.buildSamplerFromEnv=r_;var Pn=1;function t_(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return qs.diag.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ".concat(Pn,".")),Pn;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(qs.diag.error("OTEL_TRACES_SAMPLER_ARG=".concat(e.OTEL_TRACES_SAMPLER_ARG," was given, but it is invalid, defaulting to ").concat(Pn,".")),Pn):t<0||t>1?(qs.diag.error("OTEL_TRACES_SAMPLER_ARG=".concat(e.OTEL_TRACES_SAMPLER_ARG," was given, but it is out of range ([0..1]), defaulting to ").concat(Pn,".")),Pn):t;}});var n_=l(function(js){"use strict";Object.defineProperty(js,"__esModule",{value:true});js.mergeConfig=void 0;var Mc=xc();function Nb(e){var t={sampler:Mc.buildSamplerFromEnv()},r=Object.assign({},Mc.DEFAULT_CONFIG,t,e);return r.spanLimits=Object.assign({},Mc.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),r;}js.mergeConfig=Nb;});var i_=l(function(ks){"use strict";Object.defineProperty(ks,"__esModule",{value:true});ks.Tracer=void 0;var ve=z(),Lc=Xe(),Db=wc(),wb=n_(),qc=/*#__PURE__*/function(){function qc(t,r,n){_classCallCheck(this,qc);this._tracerProvider=n;var i=wb.mergeConfig(r);this._sampler=i.sampler,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new Lc.RandomIdGenerator(),this.resource=n.resource,this.instrumentationLibrary=t;}_createClass(qc,[{key:"startSpan",value:function startSpan(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:ve.context.active();var i,a;if(Lc.isTracingSuppressed(n))return ve.diag.debug("Instrumentation suppressed, returning Noop Span"),ve.trace.wrapSpanContext(ve.INVALID_SPAN_CONTEXT);var s=xb(r,n),o=this._idGenerator.generateSpanId(),u,c,f;!s||!ve.trace.isSpanContextValid(s)?u=this._idGenerator.generateTraceId():(u=s.traceId,c=s.traceState,f=s.spanId);var p=(i=r.kind)!==null&&i!==void 0?i:ve.SpanKind.INTERNAL,d=(a=r.links)!==null&&a!==void 0?a:[],h=Lc.sanitizeAttributes(r.attributes),E=this._sampler.shouldSample(r.root?ve.trace.setSpanContext(n,ve.INVALID_SPAN_CONTEXT):n,u,t,p,h,d),A=E.decision===ve.SamplingDecision.RECORD_AND_SAMPLED?ve.TraceFlags.SAMPLED:ve.TraceFlags.NONE,j={traceId:u,spanId:o,traceFlags:A,traceState:c};if(E.decision===ve.SamplingDecision.NOT_RECORD)return ve.diag.debug("Recording is off, propagating context in a non-recording span"),ve.trace.wrapSpanContext(j);var se=new Db.Span(this,n,t,j,p,f,d,r.startTime);return se.setAttributes(Object.assign(h,E.attributes)),se;}},{key:"startActiveSpan",value:function startActiveSpan(t,r,n,i){var _s3;var a,s,o;if(arguments.length<2)return;arguments.length===2?o=r:arguments.length===3?(a=r,o=n):(a=r,s=n,o=i);var u=(_s3=s)!==null&&_s3!==void 0?_s3:ve.context.active(),c=this.startSpan(t,a,u),f=ve.trace.setSpan(u,c);return ve.context.with(f,o,void 0,c);}},{key:"getSpanLimits",value:function getSpanLimits(){return this._spanLimits;}},{key:"getActiveSpanProcessor",value:function getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor();}}]);return qc;}();ks.Tracer=qc;function xb(e,t){if(!e.root)return ve.trace.getSpanContext(t);}});var a_=l(function(Hs){"use strict";Object.defineProperty(Hs,"__esModule",{value:true});Hs.defaultServiceName=void 0;function Mb(){return"unknown_service:".concat(process.argv0);}Hs.defaultServiceName=Mb;});var o_=l(function(Us){"use strict";Object.defineProperty(Us,"__esModule",{value:true});Us.detectResources=void 0;var s_=kc(),jc=z(),Lb=require("util"),qb=/*#__PURE__*/function(){var _ref30=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee36(){var e,t,r,_args37=arguments;return regeneratorRuntime.wrap(function _callee36$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:e=_args37.length>0&&_args37[0]!==undefined?_args37[0]:{};t=Object.assign(e);_context36.next=4;return Promise.all((t.detectors||[]).map(/*#__PURE__*/function(){var _ref31=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee35(n){var i;return regeneratorRuntime.wrap(function _callee35$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:_context35.prev=0;_context35.next=3;return n.detect(t);case 3:i=_context35.sent;return _context35.abrupt("return",(jc.diag.debug("".concat(n.constructor.name," found resource."),i),i));case 7:_context35.prev=7;_context35.t0=_context35["catch"](0);return _context35.abrupt("return",(jc.diag.debug("".concat(n.constructor.name," failed: ").concat(_context35.t0.message)),s_.Resource.empty()));case 10:case"end":return _context35.stop();}}},_callee35,null,[[0,7]]);}));return function(_x36){return _ref31.apply(this,arguments);};}()));case 4:r=_context36.sent;return _context36.abrupt("return",(jb(r),r.reduce(function(n,i){return n.merge(i);},s_.Resource.empty())));case 6:case"end":return _context36.stop();}}},_callee36);}));return function qb(){return _ref30.apply(this,arguments);};}();Us.detectResources=qb;var jb=function jb(e){e.forEach(function(t){if(Object.keys(t.attributes).length>0){var r=Lb.inspect(t.attributes,{depth:2,breakLength:1/0,sorted:true,compact:false});jc.diag.verbose(r);}});};});var u_=l(function(Bs){"use strict";Object.defineProperty(Bs,"__esModule",{value:true});Bs.envDetector=void 0;var kb=z(),Hb=Xe(),Ub=In(),Bb=Fs(),Hc=/*#__PURE__*/function(){function Hc(){_classCallCheck(this,Hc);this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters.";}_createClass(Hc,[{key:"detect",value:function(){var _detect=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee37(t){var r,n,i,a,s;return regeneratorRuntime.wrap(function _callee37$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:r={},n=Hb.getEnv(),i=n.OTEL_RESOURCE_ATTRIBUTES,a=n.OTEL_SERVICE_NAME;if(i)try{s=this._parseResourceAttributes(i);Object.assign(r,s);}catch(s){kb.diag.debug("EnvDetector failed: ".concat(s.message));}return _context37.abrupt("return",(a&&(r[Ub.ResourceAttributes.SERVICE_NAME]=a),new Bb.Resource(r)));case 3:case"end":return _context37.stop();}}},_callee37,this);}));function detect(_x37){return _detect.apply(this,arguments);}return detect;}()},{key:"_parseResourceAttributes",value:function _parseResourceAttributes(t){if(!t)return{};var r={},n=t.split(this._COMMA_SEPARATOR,-1);var _iterator77=_createForOfIteratorHelper(n),_step74;try{for(_iterator77.s();!(_step74=_iterator77.n()).done;){var i=_step74.value;var a=i.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(a.length!==2)continue;var _a3=_slicedToArray(a,2),s=_a3[0],o=_a3[1];if(s=s.trim(),o=o.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(s))throw new Error("Attribute key ".concat(this._ERROR_MESSAGE_INVALID_CHARS));if(!this._isValid(o))throw new Error("Attribute value ".concat(this._ERROR_MESSAGE_INVALID_VALUE));r[s]=o;}}catch(err){_iterator77.e(err);}finally{_iterator77.f();}return r;}},{key:"_isValid",value:function _isValid(t){return t.length<=this._MAX_LENGTH&&this._isPrintableString(t);}},{key:"_isPrintableString",value:function _isPrintableString(t){for(var r=0;r<t.length;r++){var n=t.charAt(r);if(n<=" "||n>="~")return false;}return true;}},{key:"_isValidAndNotEmpty",value:function _isValidAndNotEmpty(t){return t.length>0&&this._isValid(t);}}]);return Hc;}();Bs.envDetector=new Hc();});var l_=l(function(Gs){"use strict";Object.defineProperty(Gs,"__esModule",{value:true});Gs.processDetector=void 0;var Fb=z(),Jt=In(),c_=Fs(),Uc=/*#__PURE__*/function(){function Uc(){_classCallCheck(this,Uc);}_createClass(Uc,[{key:"detect",value:function(){var _detect2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee38(t){var _r3;var r;return regeneratorRuntime.wrap(function _callee38$(_context38){while(1){switch(_context38.prev=_context38.next){case 0:r=(_r3={},_defineProperty(_r3,Jt.ResourceAttributes.PROCESS_PID,process.pid),_defineProperty(_r3,Jt.ResourceAttributes.PROCESS_EXECUTABLE_NAME,process.title||""),_defineProperty(_r3,Jt.ResourceAttributes.PROCESS_COMMAND,process.argv[1]||""),_defineProperty(_r3,Jt.ResourceAttributes.PROCESS_COMMAND_LINE,process.argv.join(" ")||""),_r3);return _context38.abrupt("return",this._getResourceAttributes(r,t));case 2:case"end":return _context38.stop();}}},_callee38,this);}));function detect(_x38){return _detect2.apply(this,arguments);}return detect;}()},{key:"_getResourceAttributes",value:function _getResourceAttributes(t,r){return t[Jt.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||t[Jt.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||t[Jt.ResourceAttributes.PROCESS_COMMAND]===""||t[Jt.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(Fb.diag.debug("ProcessDetector failed: Unable to find required process resources. "),c_.Resource.empty()):new c_.Resource(Object.assign({},t));}}]);return Uc;}();Gs.processDetector=new Uc();});var p_=l(function(er){"use strict";var Gb=er&&er.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),f_=er&&er.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Gb(t,e,r);}};Object.defineProperty(er,"__esModule",{value:true});f_(u_(),er);f_(l_(),er);});var d_=l(function(bt){"use strict";var Vb=bt&&bt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),Bc=bt&&bt.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Vb(t,e,r);}};Object.defineProperty(bt,"__esModule",{value:true});Bc(a_(),bt);Bc(o_(),bt);Bc(p_(),bt);});var Fc=l(function(Pr){"use strict";var $b=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),zb=Pr&&Pr.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&$b(t,e,r);}};Object.defineProperty(Pr,"__esModule",{value:true});zb(d_(),Pr);});var kc=l(function(Vs){"use strict";Object.defineProperty(Vs,"__esModule",{value:true});Vs.Resource=void 0;var Rr=In(),Gc=Xe(),Xb=Fc(),Ot=/*#__PURE__*/function(){function Ot(t){_classCallCheck(this,Ot);this.attributes=t;}_createClass(Ot,[{key:"merge",value:function merge(t){if(!t||!Object.keys(t.attributes).length)return this;var r=Object.assign({},this.attributes,t.attributes);return new Ot(r);}}],[{key:"empty",value:function empty(){return Ot.EMPTY;}},{key:"default",value:function _default(){var _Ot;return new Ot((_Ot={},_defineProperty(_Ot,Rr.ResourceAttributes.SERVICE_NAME,Xb.defaultServiceName()),_defineProperty(_Ot,Rr.ResourceAttributes.TELEMETRY_SDK_LANGUAGE,Gc.SDK_INFO[Rr.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]),_defineProperty(_Ot,Rr.ResourceAttributes.TELEMETRY_SDK_NAME,Gc.SDK_INFO[Rr.ResourceAttributes.TELEMETRY_SDK_NAME]),_defineProperty(_Ot,Rr.ResourceAttributes.TELEMETRY_SDK_VERSION,Gc.SDK_INFO[Rr.ResourceAttributes.TELEMETRY_SDK_VERSION]),_Ot));}}]);return Ot;}();Vs.Resource=Ot;Ot.EMPTY=new Ot({});});var __=l(function(h_){"use strict";Object.defineProperty(h_,"__esModule",{value:true});});var g_=l(function(v_){"use strict";Object.defineProperty(v_,"__esModule",{value:true});});var Fs=l(function(pt){"use strict";var Kb=pt&&pt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),$s=pt&&pt.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Kb(t,e,r);}};Object.defineProperty(pt,"__esModule",{value:true});$s(kc(),pt);$s(Fc(),pt);$s(__(),pt);$s(g_(),pt);});var E_=l(function(zs){"use strict";Object.defineProperty(zs,"__esModule",{value:true});zs.MultiSpanProcessor=void 0;var Yb=Xe(),Vc=/*#__PURE__*/function(){function Vc(t){_classCallCheck(this,Vc);this._spanProcessors=t;}_createClass(Vc,[{key:"forceFlush",value:function forceFlush(){var t=[];var _iterator78=_createForOfIteratorHelper(this._spanProcessors),_step75;try{for(_iterator78.s();!(_step75=_iterator78.n()).done;){var r=_step75.value;t.push(r.forceFlush());}}catch(err){_iterator78.e(err);}finally{_iterator78.f();}return new Promise(function(r){Promise.all(t).then(function(){r();}).catch(function(n){Yb.globalErrorHandler(n||new Error("MultiSpanProcessor: forceFlush failed")),r();});});}},{key:"onStart",value:function onStart(t,r){var _iterator79=_createForOfIteratorHelper(this._spanProcessors),_step76;try{for(_iterator79.s();!(_step76=_iterator79.n()).done;){var n=_step76.value;n.onStart(t,r);}}catch(err){_iterator79.e(err);}finally{_iterator79.f();}}},{key:"onEnd",value:function onEnd(t){var _iterator80=_createForOfIteratorHelper(this._spanProcessors),_step77;try{for(_iterator80.s();!(_step77=_iterator80.n()).done;){var r=_step77.value;r.onEnd(t);}}catch(err){_iterator80.e(err);}finally{_iterator80.f();}}},{key:"shutdown",value:function shutdown(){var t=[];var _iterator81=_createForOfIteratorHelper(this._spanProcessors),_step78;try{for(_iterator81.s();!(_step78=_iterator81.n()).done;){var r=_step78.value;t.push(r.shutdown());}}catch(err){_iterator81.e(err);}finally{_iterator81.f();}return new Promise(function(r,n){Promise.all(t).then(function(){r();},n);});}}]);return Vc;}();zs.MultiSpanProcessor=Vc;});var zc=l(function(Xs){"use strict";Object.defineProperty(Xs,"__esModule",{value:true});Xs.NoopSpanProcessor=void 0;var $c=/*#__PURE__*/function(){function $c(){_classCallCheck(this,$c);}_createClass($c,[{key:"onStart",value:function onStart(t,r){}},{key:"onEnd",value:function onEnd(t){}},{key:"shutdown",value:function shutdown(){return Promise.resolve();}},{key:"forceFlush",value:function forceFlush(){return Promise.resolve();}}]);return $c;}();Xs.NoopSpanProcessor=$c;});var X_=l(function(Fi,Nn){var Qb=200,P_="__lodash_hash_undefined__",Wb=800,Zb=16,R_=9007199254740991,N_="[object Arguments]",Jb="[object Array]",eO="[object AsyncFunction]",tO="[object Boolean]",rO="[object Date]",nO="[object Error]",D_="[object Function]",iO="[object GeneratorFunction]",aO="[object Map]",sO="[object Number]",oO="[object Null]",w_="[object Object]",uO="[object Proxy]",cO="[object RegExp]",lO="[object Set]",fO="[object String]",pO="[object Undefined]",dO="[object WeakMap]",hO="[object ArrayBuffer]",_O="[object DataView]",vO="[object Float32Array]",gO="[object Float64Array]",EO="[object Int8Array]",mO="[object Int16Array]",yO="[object Int32Array]",TO="[object Uint8Array]",AO="[object Uint8ClampedArray]",SO="[object Uint16Array]",IO="[object Uint32Array]",CO=/[\\^$.*+?()[\]{}|]/g,bO=/^\[object .+?Constructor\]$/,OO=/^(?:0|[1-9]\d*)$/,X={};X[vO]=X[gO]=X[EO]=X[mO]=X[yO]=X[TO]=X[AO]=X[SO]=X[IO]=true;X[N_]=X[Jb]=X[hO]=X[tO]=X[_O]=X[rO]=X[nO]=X[D_]=X[aO]=X[sO]=X[w_]=X[cO]=X[lO]=X[fO]=X[dO]=false;var x_=(typeof global==="undefined"?"undefined":_typeof(global))=="object"&&global&&global.Object===Object&&global,PO=(typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self&&self.Object===Object&&self,$i=x_||PO||Function("return this")(),M_=_typeof(Fi)=="object"&&Fi&&!Fi.nodeType&&Fi,Gi=M_&&_typeof(Nn)=="object"&&Nn&&!Nn.nodeType&&Nn,L_=Gi&&Gi.exports===M_,Xc=L_&&x_.process,m_=function(){try{var e=Gi&&Gi.require&&Gi.require("util").types;return e||Xc&&Xc.binding&&Xc.binding("util");}catch(_unused10){}}(),y_=m_&&m_.isTypedArray;function RO(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2]);}return e.apply(t,r);}function NO(e,t){for(var r=-1,n=Array(e);++r<e;){n[r]=t(r);}return n;}function DO(e){return function(t){return e(t);};}function wO(e,t){return e==null?void 0:e[t];}function xO(e,t){return function(r){return e(t(r));};}var MO=Array.prototype,LO=Function.prototype,Qs=Object.prototype,Kc=$i["__core-js_shared__"],Ws=LO.toString,Pt=Qs.hasOwnProperty,T_=function(){var e=/[^.]+$/.exec(Kc&&Kc.keys&&Kc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:"";}(),q_=Qs.toString,qO=Ws.call(Object),jO=RegExp("^"+Ws.call(Pt).replace(CO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ks=L_?$i.Buffer:void 0,A_=$i.Symbol,S_=$i.Uint8Array,I_=Ks?Ks.allocUnsafe:void 0,j_=xO(Object.getPrototypeOf,Object),C_=Object.create,kO=Qs.propertyIsEnumerable,HO=MO.splice,Nr=A_?A_.toStringTag:void 0,Ys=function(){try{var e=el(Object,"defineProperty");return e({},"",{}),e;}catch(_unused11){}}(),UO=Ks?Ks.isBuffer:void 0,b_=Math.max,BO=Date.now,k_=el($i,"Map"),Vi=el(Object,"create"),FO=function(){function e(){}return function(t){if(!wr(t))return{};if(C_)return C_(t);e.prototype=t;var r=new e();return e.prototype=void 0,r;};}();function Dr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1]);}}function GO(){this.__data__=Vi?Vi(null):{},this.size=0;}function VO(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t;}function $O(e){var t=this.__data__;if(Vi){var r=t[e];return r===P_?void 0:r;}return Pt.call(t,e)?t[e]:void 0;}function zO(e){var t=this.__data__;return Vi?t[e]!==void 0:Pt.call(t,e);}function XO(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Vi&&t===void 0?P_:t,this;}Dr.prototype.clear=GO;Dr.prototype.delete=VO;Dr.prototype.get=$O;Dr.prototype.has=zO;Dr.prototype.set=XO;function Rt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1]);}}function KO(){this.__data__=[],this.size=0;}function YO(e){var t=this.__data__,r=Zs(t,e);if(r<0)return false;var n=t.length-1;return r==n?t.pop():HO.call(t,r,1),--this.size,true;}function QO(e){var t=this.__data__,r=Zs(t,e);return r<0?void 0:t[r][1];}function WO(e){return Zs(this.__data__,e)>-1;}function ZO(e,t){var r=this.__data__,n=Zs(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this;}Rt.prototype.clear=KO;Rt.prototype.delete=YO;Rt.prototype.get=QO;Rt.prototype.has=WO;Rt.prototype.set=ZO;function Dn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1]);}}function JO(){this.size=0,this.__data__={hash:new Dr(),map:new(k_||Rt)(),string:new Dr()};}function e0(e){var t=eo(this,e).delete(e);return this.size-=t?1:0,t;}function t0(e){return eo(this,e).get(e);}function r0(e){return eo(this,e).has(e);}function n0(e,t){var r=eo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this;}Dn.prototype.clear=JO;Dn.prototype.delete=e0;Dn.prototype.get=t0;Dn.prototype.has=r0;Dn.prototype.set=n0;function wn(e){var t=this.__data__=new Rt(e);this.size=t.size;}function i0(){this.__data__=new Rt(),this.size=0;}function a0(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r;}function s0(e){return this.__data__.get(e);}function o0(e){return this.__data__.has(e);}function u0(e,t){var r=this.__data__;if(r instanceof Rt){var n=r.__data__;if(!k_||n.length<Qb-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Dn(n);}return r.set(e,t),this.size=r.size,this;}wn.prototype.clear=i0;wn.prototype.delete=a0;wn.prototype.get=s0;wn.prototype.has=o0;wn.prototype.set=u0;function c0(e,t){var r=Zc(e),n=!r&&Wc(e),i=!r&&!n&&F_(e),a=!r&&!n&&!i&&V_(e),s=r||n||i||a,o=s?NO(e.length,String):[],u=o.length;for(var c in e){(t||Pt.call(e,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||U_(c,u)))&&o.push(c);}return o;}function Yc(e,t,r){(r!==void 0&&!to(e[t],r)||r===void 0&&!(t in e))&&Jc(e,t,r);}function l0(e,t,r){var n=e[t];(!(Pt.call(e,t)&&to(n,r))||r===void 0&&!(t in e))&&Jc(e,t,r);}function Zs(e,t){for(var r=e.length;r--;){if(to(e[r][0],t))return r;}return-1;}function Jc(e,t,r){t=="__proto__"&&Ys?Ys(e,t,{configurable:true,enumerable:true,value:r,writable:true}):e[t]=r;}var f0=I0();function Js(e){return e==null?e===void 0?pO:oO:Nr&&Nr in Object(e)?C0(e):D0(e);}function O_(e){return zi(e)&&Js(e)==N_;}function p0(e){if(!wr(e)||R0(e))return false;var t=rl(e)?jO:bO;return t.test(L0(e));}function d0(e){return zi(e)&&G_(e.length)&&!!X[Js(e)];}function h0(e){if(!wr(e))return N0(e);var t=B_(e),r=[];for(var n in e){n=="constructor"&&(t||!Pt.call(e,n))||r.push(n);}return r;}function H_(e,t,r,n,i){e!==t&&f0(t,function(a,s){if(i||(i=new wn()),wr(a))_0(e,t,s,r,H_,n,i);else{var o=n?n(Qc(e,s),a,s+"",e,t,i):void 0;o===void 0&&(o=a),Yc(e,s,o);}},$_);}function _0(e,t,r,n,i,a,s){var o=Qc(e,r),u=Qc(t,r),c=s.get(u);if(c){Yc(e,r,c);return;}var f=a?a(o,u,r+"",e,t,s):void 0,p=f===void 0;if(p){var d=Zc(u),h=!d&&F_(u),E=!d&&!h&&V_(u);f=u,d||h||E?Zc(o)?f=o:q0(o)?f=T0(o):h?(p=false,f=E0(u,true)):E?(p=false,f=y0(u,true)):f=[]:j0(u)||Wc(u)?(f=o,Wc(o)?f=k0(o):(!wr(o)||rl(o))&&(f=b0(u))):p=false;}p&&(s.set(u,f),i(f,u,n,a,s),s.delete(u)),Yc(e,r,f);}function v0(e,t){return x0(w0(e,t,z_),e+"");}var g0=Ys?function(e,t){return Ys(e,"toString",{configurable:true,enumerable:false,value:U0(t),writable:true});}:z_;function E0(e,t){if(t)return e.slice();var r=e.length,n=I_?I_(r):new e.constructor(r);return e.copy(n),n;}function m0(e){var t=new e.constructor(e.byteLength);return new S_(t).set(new S_(e)),t;}function y0(e,t){var r=t?m0(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length);}function T0(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;){t[r]=e[r];}return t;}function A0(e,t,r,n){var i=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var o=t[a],u=n?n(r[o],e[o],o,r,e):void 0;u===void 0&&(u=e[o]),i?Jc(r,o,u):l0(r,o,u);}return r;}function S0(e){return v0(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,s&&O0(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var o=r[n];o&&e(t,o,n,a);}return t;});}function I0(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),o=s.length;o--;){var u=s[e?o:++i];if(r(a[u],u,a)===false)break;}return t;};}function eo(e,t){var r=e.__data__;return P0(t)?r[typeof t=="string"?"string":"hash"]:r.map;}function el(e,t){var r=wO(e,t);return p0(r)?r:void 0;}function C0(e){var t=Pt.call(e,Nr),r=e[Nr];try{e[Nr]=void 0;var n=true;}catch(_unused12){}var i=q_.call(e);return n&&(t?e[Nr]=r:delete e[Nr]),i;}function b0(e){return typeof e.constructor=="function"&&!B_(e)?FO(j_(e)):{};}function U_(e,t){var _t2;var r=_typeof(e);return t=(_t2=t)!==null&&_t2!==void 0?_t2:R_,!!t&&(r=="number"||r!="symbol"&&OO.test(e))&&e>-1&&e%1==0&&e<t;}function O0(e,t,r){if(!wr(r))return false;var n=_typeof(t);return(n=="number"?tl(r)&&U_(t,r.length):n=="string"&&t in r)?to(r[t],e):false;}function P0(e){var t=_typeof(e);return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null;}function R0(e){return!!T_&&T_ in e;}function B_(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Qs;return e===r;}function N0(e){var t=[];if(e!=null)for(var r in Object(e)){t.push(r);}return t;}function D0(e){return q_.call(e);}function w0(e,t,r){return t=b_(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=b_(n.length-t,0),s=Array(a);++i<a;){s[i]=n[t+i];}i=-1;for(var o=Array(t+1);++i<t;){o[i]=n[i];}return o[t]=r(s),RO(e,this,o);};}function Qc(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t];}var x0=M0(g0);function M0(e){var t=0,r=0;return function(){var n=BO(),i=Zb-(n-r);if(r=n,i>0){if(++t>=Wb)return arguments[0];}else t=0;return e.apply(void 0,arguments);};}function L0(e){if(e!=null){try{return Ws.call(e);}catch(_unused13){}try{return e+"";}catch(_unused14){}}return"";}function to(e,t){return e===t||e!==e&&t!==t;}var Wc=O_(function(){return arguments;}())?O_:function(e){return zi(e)&&Pt.call(e,"callee")&&!kO.call(e,"callee");},Zc=Array.isArray;function tl(e){return e!=null&&G_(e.length)&&!rl(e);}function q0(e){return zi(e)&&tl(e);}var F_=UO||B0;function rl(e){if(!wr(e))return false;var t=Js(e);return t==D_||t==iO||t==eO||t==uO;}function G_(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=R_;}function wr(e){var t=_typeof(e);return e!=null&&(t=="object"||t=="function");}function zi(e){return e!=null&&_typeof(e)=="object";}function j0(e){if(!zi(e)||Js(e)!=w_)return false;var t=j_(e);if(t===null)return true;var r=Pt.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Ws.call(r)==qO;}var V_=y_?DO(y_):d0;function k0(e){return A0(e,$_(e));}function $_(e){return tl(e)?c0(e,true):h0(e);}var H0=S0(function(e,t,r){H_(e,t,r);});function U0(e){return function(){return e;};}function z_(e){return e;}function B0(){return false;}Nn.exports=H0;});var Y_=l(function(ro){"use strict";Object.defineProperty(ro,"__esModule",{value:true});ro.BatchSpanProcessorBase=void 0;var K_=z(),Xi=Xe(),nl=/*#__PURE__*/function(){function nl(t,r){_classCallCheck(this,nl);this._exporter=t,this._finishedSpans=[],this._isShutdown=false,this._shuttingDownPromise=Promise.resolve();var n=Xi.getEnv();this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT;}_createClass(nl,[{key:"forceFlush",value:function forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll();}},{key:"onStart",value:function onStart(t){}},{key:"onEnd",value:function onEnd(t){this._isShutdown||this._addToBuffer(t);}},{key:"shutdown",value:function shutdown(){var _this136=this;return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=true,this._shuttingDownPromise=new Promise(function(t,r){Promise.resolve().then(function(){return _this136.onShutdown();}).then(function(){return _this136._flushAll();}).then(function(){return _this136._exporter.shutdown();}).then(t).catch(function(n){r(n);});}),this._shuttingDownPromise);}},{key:"_addToBuffer",value:function _addToBuffer(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer());}},{key:"_flushAll",value:function _flushAll(){var _this137=this;return new Promise(function(t,r){var n=[],i=Math.ceil(_this137._finishedSpans.length/_this137._maxExportBatchSize);for(var a=0,s=i;a<s;a++){n.push(_this137._flushOneBatch());}Promise.all(n).then(function(){t();}).catch(r);});}},{key:"_flushOneBatch",value:function _flushOneBatch(){var _this138=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(t,r){var n=setTimeout(function(){r(new Error("Timeout"));},_this138._exportTimeoutMillis);K_.context.with(Xi.suppressTracing(K_.context.active()),function(){_this138._exporter.export(_this138._finishedSpans.splice(0,_this138._maxExportBatchSize),function(i){var a;clearTimeout(n),i.code===Xi.ExportResultCode.SUCCESS?t():r((a=i.error)!==null&&a!==void 0?a:new Error("BatchSpanProcessor: span export failed"));});});});}},{key:"_maybeStartTimer",value:function _maybeStartTimer(){var _this139=this;this._timer===void 0&&(this._timer=setTimeout(function(){_this139._flushOneBatch().then(function(){_this139._finishedSpans.length>0&&(_this139._clearTimer(),_this139._maybeStartTimer());}).catch(function(t){Xi.globalErrorHandler(t);});},this._scheduledDelayMillis),Xi.unrefTimer(this._timer));}},{key:"_clearTimer",value:function _clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0);}}]);return nl;}();ro.BatchSpanProcessorBase=nl;});var Q_=l(function(no){"use strict";Object.defineProperty(no,"__esModule",{value:true});no.BatchSpanProcessor=void 0;var F0=Y_(),il=/*#__PURE__*/function(_F0$BatchSpanProcesso){_inherits(il,_F0$BatchSpanProcesso);var _super92=_createSuper(il);function il(){_classCallCheck(this,il);return _super92.apply(this,arguments);}_createClass(il,[{key:"onShutdown",value:function onShutdown(){}}]);return il;}(F0.BatchSpanProcessorBase);no.BatchSpanProcessor=il;});var W_=l(function(xr){"use strict";var G0=xr&&xr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),V0=xr&&xr.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&G0(t,e,r);}};Object.defineProperty(xr,"__esModule",{value:true});V0(Q_(),xr);});var al=l(function(Mr){"use strict";var $0=Mr&&Mr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),z0=Mr&&Mr.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&$0(t,e,r);}};Object.defineProperty(Mr,"__esModule",{value:true});z0(W_(),Mr);});var J_=l(function(Lr){"use strict";Object.defineProperty(Lr,"__esModule",{value:true});Lr.BasicTracerProvider=Lr.ForceFlushState=void 0;var xn=z(),Ki=Xe(),Z_=Fs(),X0=sl(),K0=xc(),Y0=E_(),Q0=zc(),W0=X_(),Z0=al(),Mn;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved";})(Mn=Lr.ForceFlushState||(Lr.ForceFlushState={}));var tr=/*#__PURE__*/function(){function tr(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,tr);var r;this._registeredSpanProcessors=[],this._tracers=new Map();var n=W0({},K0.DEFAULT_CONFIG,t);this.resource=(r=n.resource)!==null&&r!==void 0?r:Z_.Resource.empty(),this.resource=Z_.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var a=new Z0.BatchSpanProcessor(i);this.activeSpanProcessor=a;}else this.activeSpanProcessor=new Q0.NoopSpanProcessor();}_createClass(tr,[{key:"getTracer",value:function getTracer(t,r){var n="".concat(t,"@").concat(r||"");return this._tracers.has(n)||this._tracers.set(n,new X0.Tracer({name:t,version:r},this._config,this)),this._tracers.get(n);}},{key:"addSpanProcessor",value:function addSpanProcessor(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return xn.diag.error("Error while trying to shutdown current span processor",r);}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new Y0.MultiSpanProcessor(this._registeredSpanProcessors);}},{key:"getActiveSpanProcessor",value:function getActiveSpanProcessor(){return this.activeSpanProcessor;}},{key:"register",value:function register(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};xn.trace.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&xn.context.setGlobalContextManager(t.contextManager),t.propagator&&xn.propagation.setGlobalPropagator(t.propagator);}},{key:"forceFlush",value:function forceFlush(){var t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var a,s=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of ".concat(t," ms"))),a=Mn.timeout;},t);n.forceFlush().then(function(){clearTimeout(s),a!==Mn.timeout&&(a=Mn.resolved,i(a));}).catch(function(o){clearTimeout(s),a=Mn.error,i(o);});});});return new Promise(function(n,i){Promise.all(r).then(function(a){var s=a.filter(function(o){return o!==Mn.resolved;});s.length>0?i(s):n();}).catch(function(a){return i([a]);});});}},{key:"shutdown",value:function shutdown(){return this.activeSpanProcessor.shutdown();}},{key:"_getPropagator",value:function _getPropagator(t){var r;return(r=tr._registeredPropagators.get(t))===null||r===void 0?void 0:r();}},{key:"_getSpanExporter",value:function _getSpanExporter(t){var r;return(r=tr._registeredExporters.get(t))===null||r===void 0?void 0:r();}},{key:"_buildPropagatorFromEnv",value:function _buildPropagatorFromEnv(){var _this140=this;var t=Array.from(new Set(Ki.getEnv().OTEL_PROPAGATORS)),n=t.map(function(i){var a=_this140._getPropagator(i);return a||xn.diag.warn("Propagator \"".concat(i,"\" requested through environment variable is unavailable.")),a;}).reduce(function(i,a){return a&&i.push(a),i;},[]);if(n.length!==0)return t.length===1?n[0]:new Ki.CompositePropagator({propagators:n});}},{key:"_buildExporterFromEnv",value:function _buildExporterFromEnv(){var t=Ki.getEnv().OTEL_TRACES_EXPORTER;if(t==="none")return;var r=this._getSpanExporter(t);return r||xn.diag.error("Exporter \"".concat(t,"\" requested through environment variable is unavailable.")),r;}}]);return tr;}();Lr.BasicTracerProvider=tr;tr._registeredPropagators=new Map([["tracecontext",function(){return new Ki.HttpTraceContextPropagator();}],["baggage",function(){return new Ki.HttpBaggagePropagator();}]]);tr._registeredExporters=new Map();});var ev=l(function(io){"use strict";Object.defineProperty(io,"__esModule",{value:true});io.ConsoleSpanExporter=void 0;var ol=Xe(),ul=/*#__PURE__*/function(){function ul(){_classCallCheck(this,ul);}_createClass(ul,[{key:"export",value:function _export(t,r){return this._sendSpans(t,r);}},{key:"shutdown",value:function shutdown(){return this._sendSpans([]),Promise.resolve();}},{key:"_exportInfo",value:function _exportInfo(t){return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:ol.hrTimeToMicroseconds(t.startTime),duration:ol.hrTimeToMicroseconds(t.duration),attributes:t.attributes,status:t.status,events:t.events};}},{key:"_sendSpans",value:function _sendSpans(t,r){var _iterator82=_createForOfIteratorHelper(t),_step79;try{for(_iterator82.s();!(_step79=_iterator82.n()).done;){var n=_step79.value;console.log(this._exportInfo(n));}}catch(err){_iterator82.e(err);}finally{_iterator82.f();}if(r)return r({code:ol.ExportResultCode.SUCCESS});}}]);return ul;}();io.ConsoleSpanExporter=ul;});var rv=l(function(ao){"use strict";Object.defineProperty(ao,"__esModule",{value:true});ao.InMemorySpanExporter=void 0;var tv=Xe(),cl=/*#__PURE__*/function(){function cl(){_classCallCheck(this,cl);this._finishedSpans=[],this._stopped=false;}_createClass(cl,[{key:"export",value:function _export(t,r){var _this$_finishedSpans;if(this._stopped)return r({code:tv.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});(_this$_finishedSpans=this._finishedSpans).push.apply(_this$_finishedSpans,_toConsumableArray(t)),setTimeout(function(){return r({code:tv.ExportResultCode.SUCCESS});},0);}},{key:"shutdown",value:function shutdown(){return this._stopped=true,this._finishedSpans=[],Promise.resolve();}},{key:"reset",value:function reset(){this._finishedSpans=[];}},{key:"getFinishedSpans",value:function getFinishedSpans(){return this._finishedSpans;}}]);return cl;}();ao.InMemorySpanExporter=cl;});var iv=l(function(nv){"use strict";Object.defineProperty(nv,"__esModule",{value:true});});var sv=l(function(so){"use strict";Object.defineProperty(so,"__esModule",{value:true});so.SimpleSpanProcessor=void 0;var av=z(),ll=Xe(),fl=/*#__PURE__*/function(){function fl(t){_classCallCheck(this,fl);this._exporter=t,this._isShutdown=false,this._shuttingDownPromise=Promise.resolve();}_createClass(fl,[{key:"forceFlush",value:function forceFlush(){return Promise.resolve();}},{key:"onStart",value:function onStart(t){}},{key:"onEnd",value:function onEnd(t){var _this141=this;this._isShutdown||av.context.with(ll.suppressTracing(av.context.active()),function(){_this141._exporter.export([t],function(r){var n;r.code!==ll.ExportResultCode.SUCCESS&&ll.globalErrorHandler((n=r.error)!==null&&n!==void 0?n:new Error("SimpleSpanProcessor: span export failed (status ".concat(r,")")));});});}},{key:"shutdown",value:function shutdown(){var _this142=this;return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=true,this._shuttingDownPromise=new Promise(function(t,r){Promise.resolve().then(function(){return _this142._exporter.shutdown();}).then(t).catch(function(n){r(n);});}),this._shuttingDownPromise);}}]);return fl;}();so.SimpleSpanProcessor=fl;});var uv=l(function(ov){"use strict";Object.defineProperty(ov,"__esModule",{value:true});});var lv=l(function(cv){"use strict";Object.defineProperty(cv,"__esModule",{value:true});});var pv=l(function(fv){"use strict";Object.defineProperty(fv,"__esModule",{value:true});});var hv=l(function(dv){"use strict";Object.defineProperty(dv,"__esModule",{value:true});});var sl=l(function(de){"use strict";var J0=de&&de.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),He=de&&de.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&J0(t,e,r);}};Object.defineProperty(de,"__esModule",{value:true});He(i_(),de);He(J_(),de);He(al(),de);He(ev(),de);He(rv(),de);He(iv(),de);He(sv(),de);He(uv(),de);He(zc(),de);He(wc(),de);He(lv(),de);He(pv(),de);He(hv(),de);});var gv=l(function(dt){"use strict";Object.defineProperty(dt,"__esModule",{value:true});dt.enable=dt.azureCoreTracing=dt.AzureMonitorSymbol=void 0;var vv=oe();dt.AzureMonitorSymbol="Azure_Monitor_Tracer";var _v=false,eP=function eP(e){if(_v)return e;try{var t=sl(),r=z(),n=new t.BasicTracerProvider(),i=n.getTracer("applicationinsights tracer"),a=e.setTracer;e.setTracer=function(s){var o=s.startSpan;s.startSpan=function(u,c,f){var p=o.call(this,u,c,f),d=p.end;return p.end=function(){var h=d.apply(this,arguments);return vv.channel.publish("azure-coretracing",p),h;},p;},s[dt.AzureMonitorSymbol]=true,a.call(this,s);},r.trace.getSpan(r.context.active()),e.setTracer(i),_v=true;}catch(_unused15){}return e;};dt.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:eP};function tP(){vv.channel.registerMonkeyPatch("@azure/core-tracing",dt.azureCoreTracing);}dt.enable=tP;});var mv=l(function(qr){"use strict";Object.defineProperty(qr,"__esModule",{value:true});qr.enable=qr.bunyan=void 0;var Ev=oe(),rP=function rP(e){var t=e.prototype._emit;return e.prototype._emit=function(r,n){var i=t.apply(this,arguments);if(!n){var a=i;a||(a=t.call(this,r,true)),Ev.channel.publish("bunyan",{level:r.level,result:a});}return i;},e;};qr.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:rP};function nP(){Ev.channel.registerMonkeyPatch("bunyan",qr.bunyan);}qr.enable=nP;});var Tv=l(function(jr){"use strict";Object.defineProperty(jr,"__esModule",{value:true});jr.enable=jr.console=void 0;var pl=oe(),yv=require("stream"),iP=function iP(e){var t=new yv.Writable(),r=new yv.Writable();t.write=function(c){if(!c)return true;var f=c.toString();return pl.channel.publish("console",{message:f}),true;},r.write=function(c){if(!c)return true;var f=c.toString();return pl.channel.publish("console",{message:f,stderr:true}),true;};for(var n=new e.Console(t,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],a=function a(c){var f=e[c];f&&(e[c]=function(){if(n[c])try{n[c].apply(n,arguments);}catch(_unused16){}return f.apply(e,arguments);});},s=0,o=i;s<o.length;s++){var u=o[s];a(u);}return e;};jr.console={versionSpecifier:">= 4.0.0",patch:iP};function aP(){pl.channel.registerMonkeyPatch("console",jr.console),require("console");}jr.enable=aP;});var Av=l(function(kr){"use strict";Object.defineProperty(kr,"__esModule",{value:true});kr.enable=kr.mongoCore=void 0;var dl=oe(),sP=function sP(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var n=t.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var o=typeof arguments[1]=="function"?1:2;return typeof arguments[o]=="function"&&(arguments[o]=dl.channel.bindToContext(arguments[o])),i.apply(this,arguments);};var a=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=dl.channel.bindToContext(arguments[1])),a.apply(this,arguments);},n;},e;};kr.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:sP};function oP(){dl.channel.registerMonkeyPatch("mongodb-core",kr.mongoCore);}kr.enable=oP;});var Sv=l(function(Ne){"use strict";var Ln=Ne&&Ne.__assign||function(){return Ln=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;},Ln.apply(this,arguments);};Object.defineProperty(Ne,"__esModule",{value:true});Ne.enable=Ne.mongo330=Ne.mongo3=Ne.mongo2=void 0;var be=oe(),uP=function uP(e){var t=e.instrument({operationIdGenerator:{next:function next(){return be.channel.bindToContext(function(n){return n();});}}}),r={};return t.on("started",function(n){r[n.requestId]||(r[n.requestId]=Ln(Ln({},n),{time:new Date()}));}),t.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return be.channel.publish("mongodb",{startedData:i,event:n,succeeded:true});}):be.channel.publish("mongodb",{startedData:i,event:n,succeeded:true});}),t.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return be.channel.publish("mongodb",{startedData:i,event:n,succeeded:false});}):be.channel.publish("mongodb",{startedData:i,event:n,succeeded:false});}),e;},cP=function cP(e){var t=e.instrument(),r={},n={};return t.on("started",function(i){r[i.requestId]||(n[i.requestId]=be.channel.bindToContext(function(a){return a();}),r[i.requestId]=Ln(Ln({},i),{time:new Date()}));}),t.on("succeeded",function(i){var a=r[i.requestId];a&&delete r[i.requestId],_typeof(i)=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return be.channel.publish("mongodb",{startedData:a,event:i,succeeded:true});}),delete n[i.requestId]);}),t.on("failed",function(i){var a=r[i.requestId];a&&delete r[i.requestId],_typeof(i)=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return be.channel.publish("mongodb",{startedData:a,event:i,succeeded:false});}),delete n[i.requestId]);}),e;},lP=function lP(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var n=t.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var o=typeof arguments[1]=="function"?1:2;return typeof arguments[o]=="function"&&(arguments[o]=be.channel.bindToContext(arguments[o])),i.apply(this,arguments);};var a=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=be.channel.bindToContext(arguments[1])),a.apply(this,arguments);},n;},e;},fP=function fP(e){lP(e);var t=e.instrument(),r={},n={};return t.on("started",function(i){r[i.requestId]||(n[i.requestId]=be.channel.bindToContext(function(a){return a();}),r[i.requestId]=i);}),t.on("succeeded",function(i){var a=r[i.requestId];a&&delete r[i.requestId],_typeof(i)=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return be.channel.publish("mongodb",{startedData:a,event:i,succeeded:true});}),delete n[i.requestId]);}),t.on("failed",function(i){var a=r[i.requestId];a&&delete r[i.requestId],_typeof(i)=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return be.channel.publish("mongodb",{startedData:a,event:i,succeeded:false});}),delete n[i.requestId]);}),e;};Ne.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:uP};Ne.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:cP};Ne.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:fP};function pP(){be.channel.registerMonkeyPatch("mongodb",Ne.mongo2),be.channel.registerMonkeyPatch("mongodb",Ne.mongo3),be.channel.registerMonkeyPatch("mongodb",Ne.mongo330);}Ne.enable=pP;});var Cv=l(function(Hr){"use strict";Object.defineProperty(Hr,"__esModule",{value:true});Hr.enable=Hr.mysql=void 0;var oo=oe(),Iv=require("path"),dP=function dP(e,t){var r=function r(u,c){return function(f,p){var d=u[f];d&&(u[f]=function(){for(var E=arguments.length-1,A=arguments.length-1;A>=0;--A){if(typeof arguments[A]=="function"){E=A;break;}else if(_typeof(arguments[A])<"u")break;}var j=arguments[E],se={result:null,startTime:null,startDate:null};typeof j=="function"&&(p?(se.startTime=process.hrtime(),se.startDate=new Date(),arguments[E]=oo.channel.bindToContext(p(se,j))):arguments[E]=oo.channel.bindToContext(j));var Ae=d.apply(this,arguments);return se.result=Ae,Ae;});};},n=function n(u,c){return r(u.prototype,c+".prototype");},i=["connect","changeUser","ping","statistics","end"],a=require(Iv.dirname(t)+"/lib/Connection");i.forEach(function(u){return n(a,"Connection")(u);}),r(a,"Connection")("createQuery",function(u,c){return function(f){var p=process.hrtime(u.startTime),d=p[0]*1e3+p[1]/1e6|0;oo.channel.publish("mysql",{query:u.result,callbackArgs:arguments,err:f,duration:d,time:u.startDate}),c.apply(this,arguments);};});var s=["_enqueueCallback"],o=require(Iv.dirname(t)+"/lib/Pool");return s.forEach(function(u){return n(o,"Pool")(u);}),e;};Hr.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:dP};function hP(){oo.channel.registerMonkeyPatch("mysql",Hr.mysql);}Hr.enable=hP;});var Ov=l(function(Ur){"use strict";Object.defineProperty(Ur,"__esModule",{value:true});Ur.enable=Ur.postgresPool1=void 0;var bv=oe();function _P(e){var t=e.prototype.connect;return e.prototype.connect=function(n){return n&&(arguments[0]=bv.channel.bindToContext(n)),t.apply(this,arguments);},e;}Ur.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:_P};function vP(){bv.channel.registerMonkeyPatch("pg-pool",Ur.postgresPool1);}Ur.enable=vP;});var Rv=l(function(ht){"use strict";Object.defineProperty(ht,"__esModule",{value:true});ht.enable=ht.postgres7=ht.postgres6=void 0;var qn=oe(),Pv=require("events");function gP(e,t){var r=e.Client.prototype.query,n="__diagnosticOriginalFunc";return e.Client.prototype.query=function(a,s,o){var u={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date()},c=process.hrtime(),f;function p(d){d&&d[n]&&(d=d[n]);var h=qn.channel.bindToContext(function(E,A){var j=process.hrtime(c);if(u.result=A&&{rowCount:A.rowCount,command:A.command},u.error=E,u.duration=Math.ceil(j[0]*1e3+j[1]/1e6),qn.channel.publish("postgres",u),E){if(d)return d.apply(this,arguments);f&&f instanceof Pv.EventEmitter&&f.emit("error",E);}else d&&d.apply(this,arguments);});try{return Object.defineProperty(h,n,{value:d}),h;}catch(_unused17){return d;}}try{typeof a=="string"?s instanceof Array?(u.query.preparable={text:a,args:s},o=p(o)):(u.query.text=a,o?o=p(o):s=p(s)):(typeof a.name=="string"?u.query.plan=a.name:a.values instanceof Array?u.query.preparable={text:a.text,args:a.values}:u.query.text=a.text,o?o=p(o):s?s=p(s):a.callback=p(a.callback));}catch(_unused18){return r.apply(this,arguments);}return arguments[0]=a,arguments[1]=s,arguments[2]=o,arguments.length=arguments.length>3?arguments.length:3,f=r.apply(this,arguments),f;},e;}function EP(e,t){var r=e.Client.prototype.query,n="__diagnosticOriginalFunc";return e.Client.prototype.query=function(a,s,o){var u=this,c=!!o,f={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date()},p=process.hrtime(),d;function h(E){E&&E[n]&&(E=E[n]);var A=qn.channel.bindToContext(function(j,se){var Ae=process.hrtime(p);if(f.result=se&&{rowCount:se.rowCount,command:se.command},f.error=j,f.duration=Math.ceil(Ae[0]*1e3+Ae[1]/1e6),qn.channel.publish("postgres",f),j){if(E)return E.apply(this,arguments);d&&d instanceof Pv.EventEmitter&&d.emit("error",j);}else E&&E.apply(this,arguments);});try{return Object.defineProperty(A,n,{value:E}),A;}catch(_unused19){return E;}}try{typeof a=="string"?s instanceof Array?(f.query.preparable={text:a,args:s},c=typeof o=="function",o=c?h(o):o):(f.query.text=a,o?(c=typeof o=="function",o=c?h(o):o):(c=typeof s=="function",s=c?h(s):s)):(typeof a.name=="string"?f.query.plan=a.name:a.values instanceof Array?f.query.preparable={text:a.text,args:a.values}:f.query.text=a.text,o?(c=typeof o=="function",o=h(o)):s?(c=typeof s=="function",s=c?h(s):s):(c=typeof a.callback=="function",a.callback=c?h(a.callback):a.callback));}catch(_unused20){return r.apply(this,arguments);}return arguments[0]=a,arguments[1]=s,arguments[2]=o,arguments.length=arguments.length>3?arguments.length:3,d=r.apply(this,arguments),c?d:d.then(function(E){return h()(void 0,E),new u._Promise(function(A,j){A(E);});}).catch(function(E){return h()(E,void 0),new u._Promise(function(A,j){j(E);});});},e;}ht.postgres6={versionSpecifier:"6.*",patch:gP};ht.postgres7={versionSpecifier:">=7.* <=8.*",patch:EP};function mP(){qn.channel.registerMonkeyPatch("pg",ht.postgres6),qn.channel.registerMonkeyPatch("pg",ht.postgres7);}ht.enable=mP;});var Nv=l(function(Br){"use strict";Object.defineProperty(Br,"__esModule",{value:true});Br.enable=Br.redis=void 0;var hl=oe(),yP=function yP(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,a=process.hrtime(),s=new Date();r.callback=hl.channel.bindToContext(function(o,u){var c=process.hrtime(a),f=c[0]*1e3+c[1]/1e6|0;hl.channel.publish("redis",{duration:f,address:i,commandObj:r,err:o,result:u,time:s}),typeof n=="function"&&n.apply(this,arguments);}),r.callback.pubsubBound=true;}}return t.call(this,r);},e;};Br.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:yP};function TP(){hl.channel.registerMonkeyPatch("redis",Br.redis);}Br.enable=TP;});var Dv=l(function(Nt){"use strict";var uo=Nt&&Nt.__assign||function(){return uo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;},uo.apply(this,arguments);};Object.defineProperty(Nt,"__esModule",{value:true});Nt.enable=Nt.tedious=void 0;var _l=oe(),AP=function AP(e){var t=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){function n(a){var s=process.hrtime(),o={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return _l.channel.bindToContext(function(u,c,f){var p=process.hrtime(s);o=uo(uo({},o),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!u&&{rowCount:c,rows:f},query:{text:this.parametersByName.statement.value},error:u,duration:Math.ceil(p[0]*1e3+p[1]/1e6)}),_l.channel.publish("tedious",o),a.call(this,u,c,f);});}var i=arguments[0];arguments[0].callback=n(i.callback),t.apply(this,arguments);},e;};Nt.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:AP};function SP(){_l.channel.registerMonkeyPatch("tedious",Nt.tedious);}Nt.enable=SP;});var wv=l(function(Le){"use strict";var IP=Le&&Le.__extends||function(){var _e2=function e(t,r){return _e2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e2(t,r);};return function(t,r){_e2(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),CP=Le&&Le.__rest||function(e,t){var r={};for(var n in e){Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);}if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);}return r;};Object.defineProperty(Le,"__esModule",{value:true});Le.enable=Le.winston2=Le.winston3=void 0;var co=oe(),bP=function bP(e){var t=e.Logger.prototype.log,r,n=function n(i,a,s){var o;return r===e.config.npm.levels?o="npm":r===e.config.syslog.levels?o="syslog":o="unknown",co.channel.publish("winston",{level:i,message:a,meta:s,levelKind:o}),a;};return e.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(a){return a!==n;}),this.filters.push(n)),t.apply(this,arguments);},e;},OP=function OP(e){var t=function t(s,o){var u;return s.config.npm.levels[o]!=null?u="npm":s.config.syslog.levels[o]!=null?u="syslog":u="unknown",u;},r=function(s){IP(o,s);function o(u,c){var f=s.call(this,c)||this;return f.winston=u,f;}return o.prototype.log=function(u,c){var f=u.message,p=u.level,d=u.meta,h=CP(u,["message","level","meta"]);p=typeof Symbol.for=="function"?u[Symbol.for("level")]:p,f=u instanceof Error?u:f;var E=t(this.winston,p);d=d||{};for(var A in h){h.hasOwnProperty(A)&&(d[A]=h[A]);}co.channel.publish("winston",{message:f,level:p,levelKind:E,meta:d}),c();},o;}(e.Transport);function n(){var s=arguments[0].levels||e.config.npm.levels,o;for(var u in s){s.hasOwnProperty(u)&&(o=o===void 0||s[u]>s[o]?u:o);}this.add(new r(e,{level:o}));}var i=e.createLogger;e.createLogger=function(){var o=arguments[0].levels||e.config.npm.levels,u;for(var c in o){o.hasOwnProperty(c)&&(u=u===void 0||o[c]>o[u]?c:u);}var f=i.apply(this,arguments);f.add(new r(e,{level:u}));var p=f.configure;return f.configure=function(){p.apply(this,arguments),n.apply(this,arguments);},f;};var a=e.configure;return e.configure=function(){a.apply(this,arguments),n.apply(this,arguments);},e.add(new r(e)),e;};Le.winston3={versionSpecifier:"3.x",patch:OP};Le.winston2={versionSpecifier:"2.x",patch:bP};function PP(){co.channel.registerMonkeyPatch("winston",Le.winston2),co.channel.registerMonkeyPatch("winston",Le.winston3);}Le.enable=PP;});var Vv=l(function($){"use strict";Object.defineProperty($,"__esModule",{value:true});$.enable=$.tedious=$.pgPool=$.pg=$.winston=$.redis=$.mysql=$.mongodb=$.mongodbCore=$.console=$.bunyan=$.azuresdk=void 0;var xv=gv();$.azuresdk=xv;var Mv=mv();$.bunyan=Mv;var Lv=Tv();$.console=Lv;var qv=Av();$.mongodbCore=qv;var jv=Sv();$.mongodb=jv;var kv=Cv();$.mysql=kv;var Hv=Ov();$.pgPool=Hv;var Uv=Rv();$.pg=Uv;var Bv=Nv();$.redis=Bv;var Fv=Dv();$.tedious=Fv;var Gv=wv();$.winston=Gv;function RP(){Mv.enable(),Lv.enable(),qv.enable(),jv.enable(),kv.enable(),Uv.enable(),Hv.enable(),Bv.enable(),Gv.enable(),xv.enable(),Fv.enable();}$.enable=RP;});var po=l(function(rr){"use strict";Object.defineProperty(rr,"__esModule",{value:true});rr.registerContextPreservation=rr.IsInitialized=void 0;var NP=vu(),vl=_e();rr.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var gl="DiagnosticChannel";if(rr.IsInitialized){it=Vv(),$v=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",lo=$v.split(","),El={bunyan:it.bunyan,console:it.console,mongodb:it.mongodb,mongodbCore:it.mongodbCore,mysql:it.mysql,redis:it.redis,pg:it.pg,pgPool:it.pgPool,winston:it.winston,azuresdk:it.azuresdk};for(fo in El){lo.indexOf(fo)===-1&&(El[fo].enable(),vl.info(gl,"Subscribed to "+fo+" events"));}lo.length>0&&vl.info(gl,"Some modules will not be patched",lo);}else vl.info(gl,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var it,$v,lo,El,fo;function DP(e){if(!!rr.IsInitialized){var t=oe();t.channel.addContextPreservation(e),t.channel.spanContextPropagator=NP.AsyncScopeManager;}}rr.registerContextPreservation=DP;});var jn=l(function(Nq,zv){"use strict";zv.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"};});var Ue=l(function(yl,Kv){"use strict";var nr=yl&&yl.__assign||function(){return nr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;},nr.apply(this,arguments);},wP=require("http"),Xv=require("https"),ml=require("url"),ho=require("constants"),Yi=_e(),kn=jn(),xP=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&typeof r=="string")for(var i=t+"=",a=r.split(";"),s=0;s<a.length;s++){var r=a[s];if(r=e.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,a[s].length);break;}}return n;},e.trim=function(t){return typeof t=="string"?t.replace(/^\s+|\s+$/g,""):"";},e.int32ArrayToBase64=function(t){var r=function r(o,u){return String.fromCharCode(o>>u&255);},n=function n(o){return r(o,24)+r(o,16)+r(o,8)+r(o,0);},i=t.map(n).join(""),a=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=a.toString("base64");return s.substr(0,s.indexOf("="));},e.random32=function(){return 4294967296*Math.random()|0;},e.randomu32=function(){return e.random32()+2147483648;},e.w3cTraceId=function(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++){n=e.random32(),r+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];}var a=t[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+a+r.substr(16,3)+r.substr(19,12);},e.w3cSpanId=function(){return e.w3cTraceId().substring(16);},e.isValidW3CId=function(t){return t.length===32&&t!=="00000000000000000000000000000000";},e.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]";},e.isError=function(t){return t instanceof Error;},e.isPrimitive=function(t){var r=_typeof(t);return r==="string"||r==="number"||r==="boolean";},e.isDate=function(t){return Object.prototype.toString.call(t)==="[object Date]";},e.msToTimeSpan=function(t){(isNaN(t)||t<0)&&(t=0);var r=(t/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(t/(1e3*60))%60,i=""+Math.floor(t/(1e3*60*60))%24,a=Math.floor(t/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=a>0?a+".":"";return s+i+":"+n+":"+r;},e.extractError=function(t){var r=t;return{message:t.message,code:r.code||r.id||""};},e.extractObject=function(t){return t instanceof Error?e.extractError(t):typeof t.toJSON=="function"?t.toJSON():t;},e.validateStringMap=function(t){if(_typeof(t)!="object"){Yi.info("Invalid properties dropped from payload");return;}var r={};for(var n in t){var i="",a=t[n],s=_typeof(a);if(e.isPrimitive(a))i=a.toString();else if(a===null||s==="undefined")i="";else if(s==="function"){Yi.info("key: "+n+" was function; will not serialize");continue;}else{var o=e.isArray(a)?a:e.extractObject(a);try{e.isPrimitive(o)?i=o:i=JSON.stringify(o);}catch(u){i=a.constructor.name.toString()+" (Error: "+u.message+")",Yi.info("key: "+n+", could not be serialized");}}r[n]=i.substring(0,e.MAX_PROPERTY_LENGTH);}return r;},e.canIncludeCorrelationHeader=function(t,r){var n=t&&t.config&&t.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return true;for(var i=0;i<n.length;i++){var a=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));if(a.test(ml.parse(r).hostname))return false;}return true;},e.getCorrelationContextTarget=function(t,r){var n=t.headers&&t.headers[kn.requestContextHeader];if(n)for(var i=n.split(","),a=0;a<i.length;++a){var s=i[a].split("=");if(s.length==2&&s[0]==r)return s[1];}},e.makeRequest=function(t,r,n,i){r&&r.indexOf("//")===0&&(r="https:"+r);var a=ml.parse(r),s=nr(nr({},n),{host:a.hostname,port:a.port,path:a.pathname}),o=void 0;if(a.protocol==="https:"&&(o=t.proxyHttpsUrl||void 0),a.protocol==="http:"&&(o=t.proxyHttpUrl||void 0),o){o.indexOf("//")===0&&(o="http:"+o);var u=ml.parse(o);u.protocol==="https:"?(Yi.info("Proxies that use HTTPS are not supported"),o=void 0):s=nr(nr({},s),{host:u.hostname,port:u.port||"80",path:r,headers:nr(nr({},s.headers),{Host:a.hostname})});}var c=a.protocol==="https:"&&!o;return c&&t.httpsAgent!==void 0?s.agent=t.httpsAgent:!c&&t.httpAgent!==void 0?s.agent=t.httpAgent:c&&(s.agent=e.tlsRestrictedAgent),c?Xv.request(s,i):wP.request(s,i);},e.safeIncludeCorrelationHeader=function(t,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString();}catch(a){Yi.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",a,n);}i?e.addCorrelationIdHeaderFromString(t,r,i):r.setHeader(kn.requestContextHeader,kn.requestContextSourceKey+"="+t.config.correlationId);},e.dumpObj=function(t){var r=Object.prototype.toString.call(t),n="";return r==="[object Error]"?n="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'":n=JSON.stringify(t),r+n;},e.addCorrelationIdHeaderFromString=function(t,r,n){var i=n.split(","),a=kn.requestContextSourceKey+"=",s=i.some(function(o){return o.substring(0,a.length)===a;});s||r.setHeader(kn.requestContextHeader,n+","+kn.requestContextSourceKey+"="+t.config.correlationId);},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new Xv.Agent({keepAlive:true,maxSockets:25,secureOptions:ho.SSL_OP_NO_SSLv2|ho.SSL_OP_NO_SSLv3|ho.SSL_OP_NO_TLSv1|ho.SSL_OP_NO_TLSv1_1}),e;}();Kv.exports=xP;});var Fr=l(function(Dq,Yv){"use strict";var _o=Ue(),Tl=_e(),MP=function(){function e(){}return e.queryCorrelationId=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(n)){r(e.completedLookups[n]);return;}else if(e.pendingLookups[n]){e.pendingLookups[n].push(r);return;}e.pendingLookups[n]=[r];var i=function i(){if(!!e.pendingLookups[n]){var a={method:"GET",disableAppInsightsAutoCollection:true};Tl.info(e.TAG,a);var s=_o.makeRequest(t,n,a,function(o){if(o.statusCode===200){var u="";o.setEncoding("utf-8"),o.on("data",function(c){u+=c;}),o.on("end",function(){Tl.info(e.TAG,u);var c=e.correlationIdPrefix+u;e.completedLookups[n]=c,e.pendingLookups[n]&&e.pendingLookups[n].forEach(function(f){return f(c);}),delete e.pendingLookups[n];});}else o.statusCode>=400&&o.statusCode<500?(e.completedLookups[n]=void 0,delete e.pendingLookups[n]):setTimeout(i,t.correlationIdRetryIntervalMs);});s&&(s.on("error",function(o){Tl.warn(e.TAG,o);}),s.end());}};setTimeout(i,0);},e.cancelCorrelationIdQuery=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[n];i&&(e.pendingLookups[n]=i.filter(function(a){return a!=r;}),e.pendingLookups[n].length==0&&delete e.pendingLookups[n]);},e.generateRequestId=function(t){if(t){t=t[0]=="|"?t:"|"+t,t[t.length-1]!=="."&&(t+=".");var r=(e.currentRootId++).toString(16);return e.appendSuffix(t,r,"_");}else return e.generateRootId();},e.getRootId=function(t){var r=t.indexOf(".");r<0&&(r=t.length);var n=t[0]==="|"?1:0;return t.substring(n,r);},e.generateRootId=function(){return"|"+_o.w3cTraceId()+".";},e.appendSuffix=function(t,r,n){if(t.length+r.length<e.requestIdMaxLength)return t+r+n;var i=e.requestIdMaxLength-9;if(t.length>i)for(;i>1;--i){var a=t[i-1];if(a==="."||a==="_")break;}if(i<=1)return e.generateRootId();for(r=_o.randomu32().toString(16);r.length<8;){r="0"+r;}return t.substring(0,i)+r+"#";},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=true,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=_o.randomu32(),e;}();Yv.exports=MP;});var Qi=l(function(wq,Qv){"use strict";var me=Ue(),LP=Fr(),qP=function(){function e(t,r){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&typeof t=="string"){if(t.split(",").length>1)this.traceId=me.w3cTraceId(),this.spanId=me.w3cTraceId().substr(0,16);else{var n=t.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=me.w3cTraceId(),this.spanId=me.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=me.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=me.w3cTraceId(),this.spanId=me.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=e.DEFAULT_VERSION,this.traceId=me.w3cTraceId(),this.spanId=me.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=me.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=me.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=me.w3cTraceId().substr(0,16),this.traceId=me.w3cTraceId()),this.parentId=this.getBackCompatRequestId();}}else if(r){this.parentId=r.slice();var a=LP.getRootId(r);e.isValidTraceId(a)||(this.legacyRootId=a,a=me.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=a,this.spanId=r;}else this.traceId=me.w3cTraceId(),this.spanId=me.w3cTraceId().substr(0,16);}return e.isValidTraceId=function(t){return t.match(/^[0-9a-f]{32}$/)&&t!=="00000000000000000000000000000000";},e.isValidSpanId=function(t){return t.match(/^[0-9a-f]{16}$/)&&t!=="0000000000000000";},e.formatOpenTelemetryTraceFlags=function(t){var r="0"+t.toString(16);return r.substring(r.length-2);},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+".";},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag;},e.prototype.updateSpanId=function(){this.spanId=me.w3cTraceId().substr(0,16);},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e;}();Qv.exports=qP;});var Al=l(function(xq,Wv){"use strict";var jP=function(){function e(t){this.fieldmap=[],t&&(this.fieldmap=this.parseHeader(t));}return e.prototype.toString=function(){var t=this.fieldmap;return!t||t.length==0?null:t.join(", ");},e.validateKeyChars=function(t){var r=t.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),a=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),s=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return a&&s;}else if(r.length==1)return Boolean(t.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return false;},e.prototype.parseHeader=function(t){var r=[],n={},i=t.split(",");if(i.length>32)return null;for(var a=0,s=i;a<s.length;a++){var o=s[a],u=o.trim();if(u.length!==0){var c=u.split("=");if(c.length!==2||!e.validateKeyChars(c[0])||n[c[0]])return null;n[c[0]]=true,r.push(u);}}return r;},e.strict=true,e;}();Wv.exports=jP;});var Dt=l(function(Mq,Zv){"use strict";var kP=function(){function e(){}return e;}();Zv.exports=kP;});var eg=l(function(Sl,Jv){"use strict";var HP=Sl&&Sl.__extends||function(){var _e3=function e(t,r){return _e3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e3(t,r);};return function(t,r){_e3(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),UP=Dt(),BP=function(e){HP(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r;}return t;}(UP);Jv.exports=BP;});var Il=l(function(Lq,tg){"use strict";var FP=function(){function e(){}return e;}();tg.exports=FP;});var ng=l(function(qq,rg){"use strict";var GP=function(){function e(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName";}return e;}();rg.exports=GP;});var ag=l(function(Cl,ig){"use strict";var VP=Cl&&Cl.__extends||function(){var _e4=function e(t,r){return _e4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e4(t,r);};return function(t,r){_e4(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),$P=Il(),zP=function(e){VP(t,e);function t(){return e.call(this)||this;}return t;}($P);ig.exports=zP;});var Ol=l(function(jq,sg){"use strict";var bl;(function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation";})(bl||(bl={}));sg.exports=bl;});var ug=l(function(kq,og){"use strict";var XP=Ol(),KP=function(){function e(){this.kind=XP.Measurement;}return e;}();og.exports=KP;});var lg=l(function(Hq,cg){"use strict";var YP=function(){function e(){this.ver=1,this.sampleRate=100,this.tags={};}return e;}();cg.exports=YP;});var Rl=l(function(Pl,fg){"use strict";var QP=Pl&&Pl.__extends||function(){var _e5=function e(t,r){return _e5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e5(t,r);};return function(t,r){_e5(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),WP=Dt(),ZP=function(e){QP(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r;}return t;}(WP);fg.exports=ZP;});var dg=l(function(Nl,pg){"use strict";var JP=Nl&&Nl.__extends||function(){var _e6=function e(t,r){return _e6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e6(t,r);};return function(t,r){_e6(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),eR=Dt(),tR=function(e){JP(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r;}return t;}(eR);pg.exports=tR;});var _g=l(function(Uq,hg){"use strict";var rR=function(){function e(){this.hasFullStack=true,this.parsedStack=[];}return e;}();hg.exports=rR;});var gg=l(function(Dl,vg){"use strict";var nR=Dl&&Dl.__extends||function(){var _e7=function e(t,r){return _e7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e7(t,r);};return function(t,r){_e7(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),iR=Dt(),aR=function(e){nR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r;}return t;}(iR);vg.exports=aR;});var mg=l(function(wl,Eg){"use strict";var sR=wl&&wl.__extends||function(){var _e8=function e(t,r){return _e8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e8(t,r);};return function(t,r){_e8(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),oR=Dt(),uR=function(e){sR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r;}return t;}(oR);Eg.exports=uR;});var Tg=l(function(xl,yg){"use strict";var cR=xl&&xl.__extends||function(){var _e9=function e(t,r){return _e9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e9(t,r);};return function(t,r){_e9(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),lR=Rl(),fR=function(e){cR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r;}return t;}(lR);yg.exports=fR;});var Sg=l(function(Ml,Ag){"use strict";var pR=Ml&&Ml.__extends||function(){var _e10=function e(t,r){return _e10=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e10(t,r);};return function(t,r){_e10(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),dR=Dt(),hR=function(e){pR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.success=true,r.properties={},r.measurements={},r;}return t;}(dR);Ag.exports=hR;});var Cg=l(function(Ll,Ig){"use strict";var _R=Ll&&Ll.__extends||function(){var _e11=function e(t,r){return _e11=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e11(t,r);};return function(t,r){_e11(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),vR=Dt(),gR=function(e){_R(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r;}return t;}(vR);Ig.exports=gR;});var Og=l(function(Bq,bg){"use strict";var ql;(function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical";})(ql||(ql={}));bg.exports=ql;});var Rg=l(function(Fq,Pg){"use strict";var ER=function(){function e(){}return e;}();Pg.exports=ER;});var jl=l(function(fe){"use strict";Object.defineProperty(fe,"__esModule",{value:true});fe.AvailabilityData=eg();fe.Base=Il();fe.ContextTagKeys=ng();fe.Data=ag();fe.DataPoint=ug();fe.DataPointType=Ol();fe.Domain=Dt();fe.Envelope=lg();fe.EventData=Rl();fe.ExceptionData=dg();fe.ExceptionDetails=_g();fe.MessageData=gg();fe.MetricData=mg();fe.PageViewData=Tg();fe.RemoteDependencyData=Sg();fe.RequestData=Cg();fe.SeverityLevel=Og();fe.StackFrame=Rg();});var Ng=l(function(Hn){"use strict";Object.defineProperty(Hn,"__esModule",{value:true});Hn.domainSupportsProperties=Hn.RemoteDependencyDataConstants=void 0;var Gr=jl(),mR=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e;}();Hn.RemoteDependencyDataConstants=mR;function yR(e){return"properties"in e||e instanceof Gr.EventData||e instanceof Gr.ExceptionData||e instanceof Gr.MessageData||e instanceof Gr.MetricData||e instanceof Gr.PageViewData||e instanceof Gr.RemoteDependencyData||e instanceof Gr.RequestData;}Hn.domainSupportsProperties=yR;});var wg=l(function(Dg){"use strict";Object.defineProperty(Dg,"__esModule",{value:true});});var Mg=l(function(xg){"use strict";Object.defineProperty(xg,"__esModule",{value:true});});var qg=l(function(Lg){"use strict";Object.defineProperty(Lg,"__esModule",{value:true});});var kg=l(function(jg){"use strict";Object.defineProperty(jg,"__esModule",{value:true});});var Ug=l(function(Hg){"use strict";Object.defineProperty(Hg,"__esModule",{value:true});});var Fg=l(function(Bg){"use strict";Object.defineProperty(Bg,"__esModule",{value:true});});var Vg=l(function(Gg){"use strict";Object.defineProperty(Gg,"__esModule",{value:true});});var zg=l(function($g){"use strict";Object.defineProperty($g,"__esModule",{value:true});});var Kg=l(function(Xg){"use strict";Object.defineProperty(Xg,"__esModule",{value:true});});var Qg=l(function(Yg){"use strict";Object.defineProperty(Yg,"__esModule",{value:true});});var Zg=l(function(Wg){"use strict";Object.defineProperty(Wg,"__esModule",{value:true});});var eE=l(function(Jg){"use strict";Object.defineProperty(Jg,"__esModule",{value:true});});var tE=l(function(at){"use strict";Object.defineProperty(at,"__esModule",{value:true});at.TelemetryType=at.TelemetryTypeString=at.baseTypeToTelemetryType=at.telemetryTypeToBaseType=void 0;function TR(e){switch(e){case ye.Event:return"EventData";case ye.Exception:return"ExceptionData";case ye.Trace:return"MessageData";case ye.Metric:return"MetricData";case ye.Request:return"RequestData";case ye.Dependency:return"RemoteDependencyData";case ye.Availability:return"AvailabilityData";case ye.PageView:return"PageViewData";}}at.telemetryTypeToBaseType=TR;function AR(e){switch(e){case"EventData":return ye.Event;case"ExceptionData":return ye.Exception;case"MessageData":return ye.Trace;case"MetricData":return ye.Metric;case"RequestData":return ye.Request;case"RemoteDependencyData":return ye.Dependency;case"AvailabilityData":return ye.Availability;case"PageViewData":return ye.PageView;}}at.baseTypeToTelemetryType=AR;at.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var ye;(function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency",e[e.Availability=6]="Availability",e[e.PageView=7]="PageView";})(ye=at.TelemetryType||(at.TelemetryType={}));});var rE=l(function(he){"use strict";var SR=he&&he.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),Be=he&&he.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&SR(t,e,r);}};Object.defineProperty(he,"__esModule",{value:true});Be(wg(),he);Be(Mg(),he);Be(qg(),he);Be(kg(),he);Be(Ug(),he);Be(Fg(),he);Be(Vg(),he);Be(zg(),he);Be(Kg(),he);Be(Qg(),he);Be(Zg(),he);Be(eE(),he);Be(tE(),he);});var iE=l(function(nE){"use strict";Object.defineProperty(nE,"__esModule",{value:true});});var sE=l(function(aE){"use strict";Object.defineProperty(aE,"__esModule",{value:true});});var uE=l(function(oE){"use strict";Object.defineProperty(oE,"__esModule",{value:true});});var lE=l(function(cE){"use strict";Object.defineProperty(cE,"__esModule",{value:true});});var pE=l(function(fE){"use strict";Object.defineProperty(fE,"__esModule",{value:true});});var hE=l(function(dE){"use strict";Object.defineProperty(dE,"__esModule",{value:true});});var vE=l(function(_E){"use strict";Object.defineProperty(_E,"__esModule",{value:true});});var EE=l(function(gE){"use strict";Object.defineProperty(gE,"__esModule",{value:true});});var mE=l(function(qe){"use strict";var IR=qe&&qe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),ir=qe&&qe.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&IR(t,e,r);}};Object.defineProperty(qe,"__esModule",{value:true});ir(iE(),qe);ir(sE(),qe);ir(uE(),qe);ir(lE(),qe);ir(pE(),qe);ir(hE(),qe);ir(vE(),qe);ir(EE(),qe);});var De=l(function(_t){"use strict";var CR=_t&&_t.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),vo=_t&&_t.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&CR(t,e,r);}};Object.defineProperty(_t,"__esModule",{value:true});vo(Ng(),_t);vo(jl(),_t);vo(rE(),_t);vo(mE(),_t);});var kl=l(function(_1,yE){"use strict";var bR=function(){function e(){}return e.prototype.getUrl=function(){return this.url;},e.prototype.RequestParser=function(){this.startTime=+new Date();},e.prototype._setStatus=function(t,r){var n=+new Date();this.duration=n-this.startTime,this.statusCode=t;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(_typeof(r)=="object")for(var a in r){i[a]=r[a]&&r[a].toString&&r[a].toString();}}this.properties=i;},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400;},e;}();yE.exports=bR;});var Bl=l(function(Ul,AE){"use strict";var OR=Ul&&Ul.__extends||function(){var _e12=function e(t,r){return _e12=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e12(t,r);};return function(t,r){_e12(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),go=require("url"),PR=De(),TE=Ue(),Fe=jn(),RR=kl(),ar=Fr(),NR=Al(),Hl=Qi(),DR=function(e){OR(t,e);function t(r,n){var i=e.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date(),i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i;}return t.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n);},t.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n);},t.prototype.getRequestTelemetry=function(r){var n={id:this.requestId,name:this.method+" "+go.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?n.time=r.time:this.startTime&&(n.time=new Date(this.startTime)),r){for(var i in r){n[i]||(n[i]=r[i]);}if(r.properties)for(var i in r.properties){n.properties[i]=r.properties[i];}}return n;},t.prototype.getRequestTags=function(r){var n={};for(var i in r){n[i]=r[i];}return n[t.keys.locationIp]=r[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=r[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=r[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=r[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(r),n[t.keys.operationParentId]=this.getOperationParentId(r),n[t.keys.operationId]=this.getOperationId(r),n;},t.prototype.getOperationId=function(r){return r[t.keys.operationId]||this.operationId;},t.prototype.getOperationParentId=function(r){return r[t.keys.operationParentId]||this.parentId||this.getOperationId(r);},t.prototype.getOperationName=function(r){return r[t.keys.operationName]||this.method+" "+go.parse(this.url).pathname;},t.prototype.getRequestId=function(){return this.requestId;},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader;},t.prototype.getTraceparent=function(){return this.traceparent;},t.prototype.getTracestate=function(){return this.tracestate;},t.prototype.getLegacyRootId=function(){return this.legacyRootId;},t.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=go.parse(r.url),a=i.pathname,s=i.search,o=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",u=go.format({protocol:o,host:r.headers.host,pathname:a,search:s});return u;},t.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function n(a){var s=r.exec(a);if(s)return s[0];},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i;},t.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",i=t.parseId(TE.getCookie(r,n));return i;},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId();},t.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=TE.getCorrelationContextTarget(r,Fe.requestContextSourceKey),r.headers){var i=r.headers[Fe.traceStateHeader]?r.headers[Fe.traceStateHeader].toString():null,a=r.headers[Fe.traceparentHeader]?r.headers[Fe.traceparentHeader].toString():null,s=r.headers[Fe.requestIdHeader]?r.headers[Fe.requestIdHeader].toString():null,o=r.headers[Fe.parentIdHeader]?r.headers[Fe.parentIdHeader].toString():null,u=r.headers[Fe.rootIdHeader]?r.headers[Fe.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[Fe.correlationContextHeader]?r.headers[Fe.correlationContextHeader].toString():null,ar.w3cEnabled&&(a||i)?(this.traceparent=new Hl(a?a.toString():null),this.tracestate=a&&i&&new NR(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?ar.w3cEnabled?(this.traceparent=new Hl(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=ar.generateRequestId(this.parentId),this.operationId=ar.getRootId(this.requestId)):ar.w3cEnabled?(this.traceparent=new Hl(),this.traceparent.parentId=o,this.traceparent.legacyRootId=u||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=ar.generateRequestId(u||this.parentId),this.correlationContextHeader=null,this.operationId=ar.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=ar.getRootId(this.requestId));}},t.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:"";},t.keys=new PR.ContextTagKeys(),t;}(RR);AE.exports=DR;});var HE=l(function(C,kE){C=kE.exports=D;var H;(typeof process==="undefined"?"undefined":_typeof(process))=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?H=function H(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e);}:H=function H(){};C.SEMVER_SPEC_VERSION="2.0.0";var Gl=256,Eo=Number.MAX_SAFE_INTEGER||9007199254740991,Fl=16,F=C.re=[],v=C.src=[],P=0,Un=P++;v[Un]="0|[1-9]\\d*";var Bn=P++;v[Bn]="[0-9]+";var Xl=P++;v[Xl]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var IE=P++;v[IE]="("+v[Un]+")\\.("+v[Un]+")\\.("+v[Un]+")";var CE=P++;v[CE]="("+v[Bn]+")\\.("+v[Bn]+")\\.("+v[Bn]+")";var Vl=P++;v[Vl]="(?:"+v[Un]+"|"+v[Xl]+")";var $l=P++;v[$l]="(?:"+v[Bn]+"|"+v[Xl]+")";var Kl=P++;v[Kl]="(?:-("+v[Vl]+"(?:\\."+v[Vl]+")*))";var Yl=P++;v[Yl]="(?:-?("+v[$l]+"(?:\\."+v[$l]+")*))";var zl=P++;v[zl]="[0-9A-Za-z-]+";var Ji=P++;v[Ji]="(?:\\+("+v[zl]+"(?:\\."+v[zl]+")*))";var Ql=P++,bE="v?"+v[IE]+v[Kl]+"?"+v[Ji]+"?";v[Ql]="^"+bE+"$";var Wl="[v=\\s]*"+v[CE]+v[Yl]+"?"+v[Ji]+"?",Zl=P++;v[Zl]="^"+Wl+"$";var Vn=P++;v[Vn]="((?:<|>)?=?)";var mo=P++;v[mo]=v[Bn]+"|x|X|\\*";var yo=P++;v[yo]=v[Un]+"|x|X|\\*";var Vr=P++;v[Vr]="[v=\\s]*("+v[yo]+")(?:\\.("+v[yo]+")(?:\\.("+v[yo]+")(?:"+v[Kl]+")?"+v[Ji]+"?)?)?";var Gn=P++;v[Gn]="[v=\\s]*("+v[mo]+")(?:\\.("+v[mo]+")(?:\\.("+v[mo]+")(?:"+v[Yl]+")?"+v[Ji]+"?)?)?";var OE=P++;v[OE]="^"+v[Vn]+"\\s*"+v[Vr]+"$";var PE=P++;v[PE]="^"+v[Vn]+"\\s*"+v[Gn]+"$";var RE=P++;v[RE]="(?:^|[^\\d])(\\d{1,"+Fl+"})(?:\\.(\\d{1,"+Fl+"}))?(?:\\.(\\d{1,"+Fl+"}))?(?:$|[^\\d])";var bo=P++;v[bo]="(?:~>?)";var To=P++;v[To]="(\\s*)"+v[bo]+"\\s+";F[To]=new RegExp(v[To],"g");var wR="$1~",NE=P++;v[NE]="^"+v[bo]+v[Vr]+"$";var DE=P++;v[DE]="^"+v[bo]+v[Gn]+"$";var Oo=P++;v[Oo]="(?:\\^)";var Ao=P++;v[Ao]="(\\s*)"+v[Oo]+"\\s+";F[Ao]=new RegExp(v[Ao],"g");var xR="$1^",wE=P++;v[wE]="^"+v[Oo]+v[Vr]+"$";var xE=P++;v[xE]="^"+v[Oo]+v[Gn]+"$";var Jl=P++;v[Jl]="^"+v[Vn]+"\\s*("+Wl+")$|^$";var ef=P++;v[ef]="^"+v[Vn]+"\\s*("+bE+")$|^$";var Wi=P++;v[Wi]="(\\s*)"+v[Vn]+"\\s*("+Wl+"|"+v[Vr]+")";F[Wi]=new RegExp(v[Wi],"g");var MR="$1$2$3",ME=P++;v[ME]="^\\s*("+v[Vr]+")\\s+-\\s+("+v[Vr]+")\\s*$";var LE=P++;v[LE]="^\\s*("+v[Gn]+")\\s+-\\s+("+v[Gn]+")\\s*$";var qE=P++;v[qE]="(<|>)?=?\\s*\\*";for(sr=0;sr<P;sr++){H(sr,v[sr]),F[sr]||(F[sr]=new RegExp(v[sr]));}var sr;C.parse=$r;function $r(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof D)return e;if(typeof e!="string"||e.length>Gl)return null;var r=t.loose?F[Zl]:F[Ql];if(!r.test(e))return null;try{return new D(e,t);}catch(_unused21){return null;}}C.valid=LR;function LR(e,t){var r=$r(e,t);return r?r.version:null;}C.clean=qR;function qR(e,t){var r=$r(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null;}C.SemVer=D;function D(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof D){if(e.loose===t.loose)return e;e=e.version;}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>Gl)throw new TypeError("version is longer than "+Gl+" characters");if(!(this instanceof D))return new D(e,t);H("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?F[Zl]:F[Ql]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Eo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Eo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Eo||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Eo)return i;}return n;}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format();}D.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version;};D.prototype.toString=function(){return this.version;};D.prototype.compare=function(e){return H("SemVer.compare",this.version,this.options,e),e instanceof D||(e=new D(e,this.options)),this.compareMain(e)||this.comparePre(e);};D.prototype.compareMain=function(e){return e instanceof D||(e=new D(e,this.options)),Fn(this.major,e.major)||Fn(this.minor,e.minor)||Fn(this.patch,e.patch);};D.prototype.comparePre=function(e){if(e instanceof D||(e=new D(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(H("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Fn(r,n);}while(++t);};D.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;){typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);}r===-1&&this.prerelease.push(0);}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e);}return this.format(),this.raw=this.version,this;};C.inc=jR;function jR(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new D(e,r).inc(t,n).version;}catch(_unused22){return null;}}C.diff=kR;function kR(e,t){if(tf(e,t))return null;var r=$r(e),n=$r(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease";}for(var s in r){if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;}return a;}C.compareIdentifiers=Fn;var SE=/^[0-9]+$/;function Fn(e,t){var r=SE.test(e),n=SE.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1;}C.rcompareIdentifiers=HR;function HR(e,t){return Fn(t,e);}C.major=UR;function UR(e,t){return new D(e,t).major;}C.minor=BR;function BR(e,t){return new D(e,t).minor;}C.patch=FR;function FR(e,t){return new D(e,t).patch;}C.compare=wt;function wt(e,t,r){return new D(e,r).compare(new D(t,r));}C.compareLoose=GR;function GR(e,t){return wt(e,t,true);}C.rcompare=VR;function VR(e,t,r){return wt(t,e,r);}C.sort=$R;function $R(e,t){return e.sort(function(r,n){return C.compare(r,n,t);});}C.rsort=zR;function zR(e,t){return e.sort(function(r,n){return C.rcompare(r,n,t);});}C.gt=Zi;function Zi(e,t,r){return wt(e,t,r)>0;}C.lt=So;function So(e,t,r){return wt(e,t,r)<0;}C.eq=tf;function tf(e,t,r){return wt(e,t,r)===0;}C.neq=jE;function jE(e,t,r){return wt(e,t,r)!==0;}C.gte=rf;function rf(e,t,r){return wt(e,t,r)>=0;}C.lte=nf;function nf(e,t,r){return wt(e,t,r)<=0;}C.cmp=Io;function Io(e,t,r,n){switch(t){case"===":return _typeof(e)=="object"&&(e=e.version),_typeof(r)=="object"&&(r=r.version),e===r;case"!==":return _typeof(e)=="object"&&(e=e.version),_typeof(r)=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return tf(e,r,n);case"!=":return jE(e,r,n);case">":return Zi(e,r,n);case">=":return rf(e,r,n);case"<":return So(e,r,n);case"<=":return nf(e,r,n);default:throw new TypeError("Invalid operator: "+t);}}C.Comparator=Ke;function Ke(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof Ke){if(e.loose===!!t.loose)return e;e=e.value;}if(!(this instanceof Ke))return new Ke(e,t);H("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ea?this.value="":this.value=this.operator+this.semver.version,H("comp",this);}var ea={};Ke.prototype.parse=function(e){var t=this.options.loose?F[Jl]:F[ef],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new D(r[2],this.options.loose):this.semver=ea;};Ke.prototype.toString=function(){return this.value;};Ke.prototype.test=function(e){return H("Comparator.test",e,this.options.loose),this.semver===ea?true:(typeof e=="string"&&(e=new D(e,this.options)),Io(e,this.operator,this.semver,this.options));};Ke.prototype.intersects=function(e,t){if(!(e instanceof Ke))throw new TypeError("a Comparator is required");(!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false});var r;if(this.operator==="")return r=new Z(e.value,t),Co(this.value,r,t);if(e.operator==="")return r=new Z(this.value,t),Co(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),o=Io(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=Io(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&s||o||u;};C.Range=Z;function Z(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof Z)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Z(e.raw,t);if(e instanceof Ke)return new Z(e.value,t);if(!(this instanceof Z))return new Z(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim());},this).filter(function(r){return r.length;}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format();}Z.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim();}).join("||").trim(),this.range;};Z.prototype.toString=function(){return this.range;};Z.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?F[LE]:F[ME];e=e.replace(r,rN),H("hyphen replace",e),e=e.replace(F[Wi],MR),H("comparator trim",e,F[Wi]),e=e.replace(F[To],wR),e=e.replace(F[Ao],xR),e=e.split(/\s+/).join(" ");var n=t?F[Jl]:F[ef],i=e.split(" ").map(function(a){return KR(a,this.options);},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(a){return!!a.match(n);})),i=i.map(function(a){return new Ke(a,this.options);},this),i;};Z.prototype.intersects=function(e,t){if(!(e instanceof Z))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(a){return n.intersects(a,t);});});});});};C.toComparators=XR;function XR(e,t){return new Z(e,t).set.map(function(r){return r.map(function(n){return n.value;}).join(" ").trim().split(" ");});}function KR(e,t){return H("comp",e,t),e=WR(e,t),H("caret",e),e=YR(e,t),H("tildes",e),e=JR(e,t),H("xrange",e),e=tN(e,t),H("stars",e),e;}function we(e){return!e||e.toLowerCase()==="x"||e==="*";}function YR(e,t){return e.trim().split(/\s+/).map(function(r){return QR(r,t);}).join(" ");}function QR(e,t){var r=t.loose?F[DE]:F[NE];return e.replace(r,function(n,i,a,s,o){H("tilde",e,n,i,a,s,o);var u;return we(i)?u="":we(a)?u=">="+i+".0.0 <"+(+i+1)+".0.0":we(s)?u=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":o?(H("replaceTilde pr",o),u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0"):u=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0",H("tilde return",u),u;});}function WR(e,t){return e.trim().split(/\s+/).map(function(r){return ZR(r,t);}).join(" ");}function ZR(e,t){H("caret",e,t);var r=t.loose?F[xE]:F[wE];return e.replace(r,function(n,i,a,s,o){H("caret",e,n,i,a,s,o);var u;return we(i)?u="":we(a)?u=">="+i+".0.0 <"+(+i+1)+".0.0":we(s)?i==="0"?u=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+".0 <"+(+i+1)+".0.0":o?(H("replaceCaret pr",o),i==="0"?a==="0"?u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+a+"."+(+s+1):u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+"."+s+"-"+o+" <"+(+i+1)+".0.0"):(H("no pr"),i==="0"?a==="0"?u=">="+i+"."+a+"."+s+" <"+i+"."+a+"."+(+s+1):u=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+"."+s+" <"+(+i+1)+".0.0"),H("caret return",u),u;});}function JR(e,t){return H("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return eN(r,t);}).join(" ");}function eN(e,t){e=e.trim();var r=t.loose?F[PE]:F[OE];return e.replace(r,function(n,i,a,s,o,u){H("xRange",e,n,i,a,s,o,u);var c=we(a),f=c||we(s),p=f||we(o),d=p;return i==="="&&d&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(f&&(s=0),o=0,i===">"?(i=">=",f?(a=+a+1,s=0,o=0):(s=+s+1,o=0)):i==="<="&&(i="<",f?a=+a+1:s=+s+1),n=i+a+"."+s+"."+o):f?n=">="+a+".0.0 <"+(+a+1)+".0.0":p&&(n=">="+a+"."+s+".0 <"+a+"."+(+s+1)+".0"),H("xRange return",n),n;});}function tN(e,t){return H("replaceStars",e,t),e.trim().replace(F[qE],"");}function rN(e,t,r,n,i,a,s,o,u,c,f,p,d){return we(r)?t="":we(n)?t=">="+r+".0.0":we(i)?t=">="+r+"."+n+".0":t=">="+t,we(u)?o="":we(c)?o="<"+(+u+1)+".0.0":we(f)?o="<"+u+"."+(+c+1)+".0":p?o="<="+u+"."+c+"."+f+"-"+p:o="<="+o,(t+" "+o).trim();}Z.prototype.test=function(e){if(!e)return false;typeof e=="string"&&(e=new D(e,this.options));for(var t=0;t<this.set.length;t++){if(nN(this.set[t],e,this.options))return true;}return false;};function nN(e,t,r){for(var n=0;n<e.length;n++){if(!e[n].test(t))return false;}if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++){if(H(e[n].semver),e[n].semver!==ea&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return true;}}return false;}return true;}C.satisfies=Co;function Co(e,t,r){try{t=new Z(t,r);}catch(_unused23){return false;}return t.test(e);}C.maxSatisfying=iN;function iN(e,t,r){var n=null,i=null;try{var a=new Z(t,r);}catch(_unused24){return null;}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new D(n,r));}),n;}C.minSatisfying=aN;function aN(e,t,r){var n=null,i=null;try{var a=new Z(t,r);}catch(_unused25){return null;}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new D(n,r));}),n;}C.minVersion=sN;function sN(e,t){e=new Z(e,t);var r=new D("0.0.0");if(e.test(r)||(r=new D("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(a){var s=new D(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Zi(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator);}});}return r&&e.test(r)?r:null;}C.validRange=oN;function oN(e,t){try{return new Z(e,t).range||"*";}catch(_unused26){return null;}}C.ltr=uN;function uN(e,t,r){return af(e,t,"<",r);}C.gtr=cN;function cN(e,t,r){return af(e,t,">",r);}C.outside=af;function af(e,t,r,n){e=new D(e,n),t=new Z(t,n);var i,a,s,o,u;switch(r){case">":i=Zi,a=nf,s=So,o=">",u=">=";break;case"<":i=So,a=rf,s=Zi,o="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(Co(e,t,n))return false;for(var c=0;c<t.set.length;++c){var f=t.set[c],p=null,d=null;if(f.forEach(function(h){h.semver===ea&&(h=new Ke(">=0.0.0")),p=p||h,d=d||h,i(h.semver,p.semver,n)?p=h:s(h.semver,d.semver,n)&&(d=h);}),p.operator===o||p.operator===u||(!d.operator||d.operator===o)&&a(e,d.semver))return false;if(d.operator===u&&s(e,d.semver))return false;}return true;}C.prerelease=lN;function lN(e,t){var r=$r(e,t);return r&&r.prerelease.length?r.prerelease:null;}C.intersects=fN;function fN(e,t,r){return e=new Z(e,r),t=new Z(t,r),e.intersects(t);}C.coerce=pN;function pN(e){if(e instanceof D)return e;if(typeof e!="string")return null;var t=e.match(F[RE]);return t==null?null:$r(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"));}});var Po=l(function(v1,FE){"use strict";function sf(e){return typeof e=="function";}var xe=console.error.bind(console);function ta(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:true,enumerable:n,writable:true,value:r});}function ra(e){e&&e.logger&&(sf(e.logger)?xe=e.logger:xe("new logger isn't a function, not replacing"));}function UE(e,t,r){if(!e||!e[t]){xe("no original function "+t+" to wrap");return;}if(!r){xe("no wrapper function"),xe(new Error().stack);return;}if(!sf(e[t])||!sf(r)){xe("original object and wrapper must be functions");return;}var n=e[t],i=r(n,t);return ta(i,"__original",n),ta(i,"__unwrap",function(){e[t]===i&&ta(e,t,n);}),ta(i,"__wrapped",true),ta(e,t,i),i;}function dN(e,t,r){if(e)Array.isArray(e)||(e=[e]);else{xe("must provide one or more modules to patch"),xe(new Error().stack);return;}if(!(t&&Array.isArray(t))){xe("must provide one or more functions to wrap on modules");return;}e.forEach(function(n){t.forEach(function(i){UE(n,i,r);});});}function BE(e,t){if(!e||!e[t]){xe("no function to unwrap."),xe(new Error().stack);return;}if(!e[t].__unwrap)xe("no original to unwrap to -- has "+t+" already been unwrapped?");else return e[t].__unwrap();}function hN(e,t){if(e)Array.isArray(e)||(e=[e]);else{xe("must provide one or more modules to patch"),xe(new Error().stack);return;}if(!(t&&Array.isArray(t))){xe("must provide one or more functions to unwrap on modules");return;}e.forEach(function(r){t.forEach(function(n){BE(r,n);});});}ra.wrap=UE;ra.massWrap=dN;ra.unwrap=BE;ra.massUnwrap=hN;FE.exports=ra;});var Do=l(function(g1,zE){"use strict";var VE=Po(),$n=VE.wrap,Ro=VE.unwrap,xt="wrap@before";function No(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:true,enumerable:n,writable:true,value:r});}function _N(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n],a=e[xt];if(typeof a=="function")a(i);else if(Array.isArray(a))for(var s=a.length,o=0;o<s;o++){a[o](i);}}}function $E(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r?r=[r]:r=[]),r;}function vN(e,t,r){var n=$E(e,t),i=n.filter(function(a){return r.indexOf(a)===-1;});i.length>0&&_N(e,i);}function GE(e,t){if(!!e){var r=e;if(typeof e=="function")r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++){r[n]=t(e[n]);}}return r;}}zE.exports=function(t,r,n){if(!t||!t.on||!t.addListener||!t.removeListener||!t.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(u,c){var f=$E(this,u).slice();try{var p=s.call(this,u,c);return vN(this,u,f),p;}finally{this.on.__wrapped||$n(this,"on",i),this.addListener.__wrapped||$n(this,"addListener",i);}};}function a(s){return function(u){if(!this._events||!this._events[u])return s.apply(this,arguments);var c=this._events[u];function f(p){return function(){this._events[u]=c;try{return p.apply(this,arguments);}finally{c=this._events[u],this._events[u]=GE(c,n);}};}$n(this,"removeListener",f);try{return this._events[u]=GE(c,n),s.apply(this,arguments);}finally{Ro(this,"removeListener"),this._events[u]=c;}};}t[xt]?typeof t[xt]=="function"?No(t,xt,[t[xt],r]):Array.isArray(t[xt])&&t[xt].push(r):No(t,xt,r),t.__wrapped||($n(t,"addListener",i),$n(t,"on",i),$n(t,"emit",a),No(t,"__unwrap",function(){Ro(t,"addListener"),Ro(t,"on"),Ro(t,"emit"),delete t[xt],delete t.__wrapped;}),No(t,"__wrapped",true));};});var QE=l(function(E1,YE){"use strict";var q=require("util"),Mt=require("assert"),gN=Do(),K=require("async_hooks"),na="cls@contexts",ia="error@context",J=process.env.DEBUG_CLS_HOOKED,L=-1;YE.exports={getNamespace:XE,createNamespace:EN,destroyNamespace:KE,reset:mN,ERROR_SYMBOL:ia};function Ye(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map(),this._indent=0;}Ye.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[t]=r,J){var n=" ".repeat(this._indent<0?0:this._indent);Q(n+"CONTEXT-SET KEY:"+t+"="+r+" in ns:"+this.name+" currentUid:"+L+" active:"+q.inspect(this.active,{showHidden:true,depth:2,colors:true}));}return r;};Ye.prototype.get=function(t){if(!this.active){if(J){var r=K.currentId(),n=K.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Q("".concat(i,"CONTEXT-GETTING KEY NO ACTIVE NS: (").concat(this.name,") ").concat(t,"=undefined currentUid:").concat(L," asyncHooksCurrentId:").concat(r," triggerId:").concat(n," len:").concat(this._set.length));}return;}if(J){var _r4=K.executionAsyncId(),_n2=K.triggerAsyncId(),_i9=" ".repeat(this._indent<0?0:this._indent);Q(_i9+"CONTEXT-GETTING KEY:"+t+"="+this.active[t]+" ("+this.name+") currentUid:"+L+" active:"+q.inspect(this.active,{showHidden:true,depth:2,colors:true})),Q("".concat(_i9,"CONTEXT-GETTING KEY: (").concat(this.name,") ").concat(t,"=").concat(this.active[t]," currentUid:").concat(L," asyncHooksCurrentId:").concat(_r4," triggerId:").concat(_n2," len:").concat(this._set.length," active:").concat(q.inspect(this.active)));}return this.active[t];};Ye.prototype.createContext=function(){var t=Object.create(this.active?this.active:Object.prototype);if(t._ns_name=this.name,t.id=L,J){var r=K.executionAsyncId(),n=K.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Q("".concat(i,"CONTEXT-CREATED Context: (").concat(this.name,") currentUid:").concat(L," asyncHooksCurrentId:").concat(r," triggerId:").concat(n," len:").concat(this._set.length," context:").concat(q.inspect(t,{showHidden:true,depth:2,colors:true})));}return t;};Ye.prototype.run=function(t){var r=this.createContext();this.enter(r);try{if(J){var n=K.triggerAsyncId(),i=K.executionAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);Q("".concat(a,"CONTEXT-RUN BEGIN: (").concat(this.name,") currentUid:").concat(L," triggerId:").concat(n," asyncHooksCurrentId:").concat(i," len:").concat(this._set.length," context:").concat(q.inspect(r)));}return t(r),r;}catch(n){throw n&&(n[ia]=r),n;}finally{if(J){var _n3=K.triggerAsyncId(),_i10=K.executionAsyncId(),_a4=" ".repeat(this._indent<0?0:this._indent);Q("".concat(_a4,"CONTEXT-RUN END: (").concat(this.name,") currentUid:").concat(L," triggerId:").concat(_n3," asyncHooksCurrentId:").concat(_i10," len:").concat(this._set.length," ").concat(q.inspect(r)));}this.exit(r);}};Ye.prototype.runAndReturn=function(t){var r;return this.run(function(n){r=t(n);}),r;};Ye.prototype.runPromise=function(t){var _this143=this;var r=this.createContext();this.enter(r);var n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return J&&Q("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+L+" len:"+this._set.length+" "+q.inspect(r)),n.then(function(i){return J&&Q("CONTEXT-runPromise AFTER then: ("+_this143.name+") currentUid:"+L+" len:"+_this143._set.length+" "+q.inspect(r)),_this143.exit(r),i;}).catch(function(i){throw i[ia]=r,J&&Q("CONTEXT-runPromise AFTER catch: ("+_this143.name+") currentUid:"+L+" len:"+_this143._set.length+" "+q.inspect(r)),_this143.exit(r),i;});};Ye.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());var n=this;return function(){n.enter(r);try{return t.apply(this,arguments);}catch(a){throw a&&(a[ia]=r),a;}finally{n.exit(r);}};};Ye.prototype.enter=function(t){if(Mt.ok(t,"context must be provided for entering"),J){var r=K.executionAsyncId(),n=K.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Q("".concat(i,"CONTEXT-ENTER: (").concat(this.name,") currentUid:").concat(L," triggerId:").concat(n," asyncHooksCurrentId:").concat(r," len:").concat(this._set.length," ").concat(q.inspect(t)));}this._set.push(this.active),this.active=t;};Ye.prototype.exit=function(t){if(Mt.ok(t,"context must be provided for exiting"),J){var n=K.executionAsyncId(),i=K.triggerAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);Q("".concat(a,"CONTEXT-EXIT: (").concat(this.name,") currentUid:").concat(L," triggerId:").concat(i," asyncHooksCurrentId:").concat(n," len:").concat(this._set.length," ").concat(q.inspect(t)));}if(this.active===t){Mt.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return;}var r=this._set.lastIndexOf(t);r<0?(J&&Q("??ERROR?? context exiting but not entered - ignoring: "+q.inspect(t)),Mt.ok(r>=0,"context not currently entered; can't exit. \n"+q.inspect(this)+"\n"+q.inspect(t))):(Mt.ok(r,"can't remove top context"),this._set.splice(r,1));};Ye.prototype.bindEmitter=function(t){Mt.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var r=this,n="context@"+this.name;function i(s){!s||(s[na]||(s[na]=Object.create(null)),s[na][n]={namespace:r,context:r.active});}function a(s){if(!(s&&s[na]))return s;var o=s,u=s[na];return Object.keys(u).forEach(function(c){var f=u[c];o=f.namespace.bind(o,f.context);}),o;}gN(t,i,a);};Ye.prototype.fromException=function(t){return t[ia];};function XE(e){return process.namespaces[e];}function EN(e){Mt.ok(e,"namespace must be given a name."),J&&Q("NS-CREATING NAMESPACE (".concat(e,")"));var t=new Ye(e);return t.id=L,K.createHook({init:function init(n,i,a,s){if(L=K.executionAsyncId(),t.active){if(t._contexts.set(n,t.active),J){var o=" ".repeat(t._indent<0?0:t._indent);Q("".concat(o,"INIT [").concat(i,"] (").concat(e,") asyncId:").concat(n," currentUid:").concat(L," triggerId:").concat(a," active:").concat(q.inspect(t.active,{showHidden:true,depth:2,colors:true})," resource:").concat(s));}}else if(L===0){var _o2=K.triggerAsyncId(),u=t._contexts.get(_o2);if(u){if(t._contexts.set(n,u),J){var c=" ".repeat(t._indent<0?0:t._indent);Q("".concat(c,"INIT USING CONTEXT FROM TRIGGERID [").concat(i,"] (").concat(e,") asyncId:").concat(n," currentUid:").concat(L," triggerId:").concat(_o2," active:").concat(q.inspect(t.active,{showHidden:true,depth:2,colors:true})," resource:").concat(s));}}else if(J){var _c4=" ".repeat(t._indent<0?0:t._indent);Q("".concat(_c4,"INIT MISSING CONTEXT [").concat(i,"] (").concat(e,") asyncId:").concat(n," currentUid:").concat(L," triggerId:").concat(_o2," active:").concat(q.inspect(t.active,{showHidden:true,depth:2,colors:true})," resource:").concat(s));}}if(J&&i==="PROMISE"){Q(q.inspect(s,{showHidden:true}));var _o3=s.parentId,_u2=" ".repeat(t._indent<0?0:t._indent);Q("".concat(_u2,"INIT RESOURCE-PROMISE [").concat(i,"] (").concat(e,") parentId:").concat(_o3," asyncId:").concat(n," currentUid:").concat(L," triggerId:").concat(a," active:").concat(q.inspect(t.active,{showHidden:true,depth:2,colors:true})," resource:").concat(s));}},before:function before(n){L=K.executionAsyncId();var i;if(i=t._contexts.get(n)||t._contexts.get(L),i){if(J){var a=K.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);Q("".concat(s,"BEFORE (").concat(e,") asyncId:").concat(n," currentUid:").concat(L," triggerId:").concat(a," active:").concat(q.inspect(t.active,{showHidden:true,depth:2,colors:true})," context:").concat(q.inspect(i))),t._indent+=2;}t.enter(i);}else if(J){var _a5=K.triggerAsyncId(),_s4=" ".repeat(t._indent<0?0:t._indent);Q("".concat(_s4,"BEFORE MISSING CONTEXT (").concat(e,") asyncId:").concat(n," currentUid:").concat(L," triggerId:").concat(_a5," active:").concat(q.inspect(t.active,{showHidden:true,depth:2,colors:true})," namespace._contexts:").concat(q.inspect(t._contexts,{showHidden:true,depth:2,colors:true}))),t._indent+=2;}},after:function after(n){L=K.executionAsyncId();var i;if(i=t._contexts.get(n)||t._contexts.get(L),i){if(J){var a=K.triggerAsyncId();t._indent-=2;var s=" ".repeat(t._indent<0?0:t._indent);Q("".concat(s,"AFTER (").concat(e,") asyncId:").concat(n," currentUid:").concat(L," triggerId:").concat(a," active:").concat(q.inspect(t.active,{showHidden:true,depth:2,colors:true})," context:").concat(q.inspect(i)));}t.exit(i);}else if(J){var _a6=K.triggerAsyncId();t._indent-=2;var _s5=" ".repeat(t._indent<0?0:t._indent);Q("".concat(_s5,"AFTER MISSING CONTEXT (").concat(e,") asyncId:").concat(n," currentUid:").concat(L," triggerId:").concat(_a6," active:").concat(q.inspect(t.active,{showHidden:true,depth:2,colors:true})," context:").concat(q.inspect(i)));}},destroy:function destroy(n){if(L=K.executionAsyncId(),J){var i=K.triggerAsyncId(),a=" ".repeat(t._indent<0?0:t._indent);Q("".concat(a,"DESTROY (").concat(e,") currentUid:").concat(L," asyncId:").concat(n," triggerId:").concat(i," active:").concat(q.inspect(t.active,{showHidden:true,depth:2,colors:true})," context:").concat(q.inspect(t._contexts.get(L))));}t._contexts.delete(n);}}).enable(),process.namespaces[e]=t,t;}function KE(e){var t=XE(e);Mt.ok(t,"can't delete nonexistent namespace! \""+e+'"'),Mt.ok(t.id,"don't assign to process.namespaces directly! "+q.inspect(t)),process.namespaces[e]=null;}function mN(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){KE(e);}),process.namespaces=Object.create(null);}process.namespaces={};function Q(){J&&process._rawDebug("".concat(q.format.apply(q,arguments)));}});var ZE=l(function(m1,WE){"use strict";function yN(){}WE.exports=function(){var t=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);var i=new Array(arguments.length);for(var u=0;u<arguments.length;u++){i[u]=arguments[u];}var a=i[0];if(typeof a!="function")throw new TypeError("callback is not a function");var s=new yN(),o=--r.counter;return t.init.call(s,o,0,null,null),i[0]=function(){t.pre.call(s,o);var u=true;try{a.apply(this,arguments),u=false;}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(s,o,true),t.destroy.call(null,o);});}t.post.call(s,o,false),t.destroy.call(null,o);},n.apply(process,i);};};});var em=l(function(y1,JE){"use strict";function TN(){}JE.exports=function(){var t=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=u;function a(c,f,p,d){return typeof c!="function"?d?s(p):o(p):function(){t.pre.call(f,p);try{return c.apply(this,arguments);}finally{t.post.call(f,p,false),t.destroy.call(null,p);}};}function s(c){return function(p){return t.destroy.call(null,c),p;};}function o(c){return function(p){throw t.destroy.call(null,c),p;};}function u(c,f){if(!r.enabled)return i.call(this,c,f);var p=new TN(),d=--r.counter;return t.init.call(p,d,0,null,null),i.call(this,a(c,p,d,true),a(f,p,d,false));}};});var rm=l(function(T1,tm){"use strict";var Ge=require("timers");function AN(){}function SN(){}function IN(){}var CN=new Map(),bN=new Map(),ON=new Map(),of=null,uf=false;tm.exports=function(){cf(this._hooks,this._state,"setTimeout","clearTimeout",AN,CN,true),cf(this._hooks,this._state,"setInterval","clearInterval",SN,bN,false),cf(this._hooks,this._state,"setImmediate","clearImmediate",IN,ON,true),global.setTimeout=Ge.setTimeout,global.setInterval=Ge.setInterval,global.setImmediate=Ge.setImmediate,global.clearTimeout=Ge.clearTimeout,global.clearInterval=Ge.clearInterval,global.clearImmediate=Ge.clearImmediate;};function cf(e,t,r,n,i,a,s){var o=Ge[r],u=Ge[n];Ge[r]=function(){if(!t.enabled)return o.apply(Ge,arguments);var c=new Array(arguments.length);for(var E=0;E<arguments.length;E++){c[E]=arguments[E];}var f=c[0];if(typeof f!="function")throw new TypeError('"callback" argument must be a function');var p=new i(),d=--t.counter,h;return e.init.call(p,d,0,null,null),c[0]=function(){of=h,e.pre.call(p,d);var E=true;try{f.apply(this,arguments),E=false;}finally{E&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(p,d,true),a.delete(h),e.destroy.call(null,d);});}e.post.call(p,d,false),of=null,(s||uf)&&(uf=false,a.delete(h),e.destroy.call(null,d));},h=o.apply(Ge,c),a.set(h,d),h;},Ge[n]=function(c){if(of===c&&c!==null)uf=true;else if(a.has(c)){var f=a.get(c);a.delete(c),e.destroy.call(null,f);}u.apply(Ge,arguments);};}});var lf=l(function(A1,PN){PN.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}};});var am=l(function(S1,im){"use strict";var sa=process.binding("async_wrap"),RN=sa.Providers.TIMERWRAP,nm={nextTick:ZE(),promise:em(),timers:rm()},aa=new Set();function NN(){this.enabled=false,this.counter=0;}function ff(){var e=this.initFns=[],t=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,a,s,o){if(a===RN){aa.add(i);return;}var _iterator83=_createForOfIteratorHelper(e),_step80;try{for(_iterator83.s();!(_step80=_iterator83.n()).done;){var u=_step80.value;u(i,this,a,s,o);}}catch(err){_iterator83.e(err);}finally{_iterator83.f();}},this.pre=function(i){if(!aa.has(i)){var _iterator84=_createForOfIteratorHelper(t),_step81;try{for(_iterator84.s();!(_step81=_iterator84.n()).done;){var a=_step81.value;a(i,this);}}catch(err){_iterator84.e(err);}finally{_iterator84.f();}}},this.post=function(i,a){if(!aa.has(i)){var _iterator85=_createForOfIteratorHelper(r),_step82;try{for(_iterator85.s();!(_step82=_iterator85.n()).done;){var s=_step82.value;s(i,this,a);}}catch(err){_iterator85.e(err);}finally{_iterator85.f();}}},this.destroy=function(i){if(aa.has(i)){aa.delete(i);return;}var _iterator86=_createForOfIteratorHelper(n),_step83;try{for(_iterator86.s();!(_step83=_iterator86.n()).done;){var a=_step83.value;a(i);}}catch(err){_iterator86.e(err);}finally{_iterator86.f();}};}ff.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy);};function wo(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1);}ff.prototype.remove=function(e){e.init&&wo(this.initFns,e.init),e.pre&&wo(this.preFns,e.pre),e.post&&wo(this.postFns,e.post),e.destroy&&wo(this.destroyFns,e.destroy);};function oa(){this._state=new NN(),this._hooks=new ff(),this.version=lf().version,this.providers=sa.Providers;for(var _i11=0,_Object$keys3=Object.keys(nm);_i11<_Object$keys3.length;_i11++){var e=_Object$keys3[_i11];nm[e].call(this);}process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),sa.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy});}im.exports=oa;oa.prototype.addHooks=function(e){this._hooks.add(e);};oa.prototype.removeHooks=function(e){this._hooks.remove(e);};oa.prototype.enable=function(){this._state.enabled=true,sa.enable();};oa.prototype.disable=function(){this._state.enabled=false,sa.disable();};});var pf=l(function(I1,DN){DN.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"};});var om=l(function(C1,sm){function wN(e){try{return Error.prototype.toString.call(e);}catch(t){try{return"<error: "+t+">";}catch(_unused27){return"<error>";}}}sm.exports=function(t,r){var n=[];n.push(wN(t));for(var i=0;i<r.length;i++){var a=r[i],s;try{s=a.toString();}catch(o){try{s="<error: "+o+">";}catch(_unused28){s="<error>";}}n.push("    at "+s);}return n.join("\n");};});var fm=l(function(b1,lm){var xo=om();function cm(){this.extend=new ua(),this.filter=new ua(),this.format=new ca(),this.version=pf().version;}var hf=false;cm.prototype.callSite=function e(t){t||(t={}),hf=true;var r={};Error.captureStackTrace(r,e);var n=r.stack;return hf=false,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(r,n)),t.filter&&(n=this.filter._modify(r,n)),n;};var or=new cm();function ua(){this._modifiers=[];}ua.prototype._modify=function(e,t){for(var r=0,n=this._modifiers.length;r<n;r++){t=this._modifiers[r](e,t);}return t;};ua.prototype.attach=function(e){this._modifiers.push(e);};ua.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return t===-1?false:(this._modifiers.splice(t,1),true);};function ca(){this._formater=xo,this._previous=void 0;}ca.prototype.replace=function(e){e?this._formater=e:this.restore();};ca.prototype.restore=function(){this._formater=xo,this._previous=void 0;};ca.prototype._backup=function(){this._previous=this._formater;};ca.prototype._roolback=function(){this._previous===xo?this.replace(void 0):this.replace(this._previous),this._previous=void 0;};Error.prepareStackTrace&&or.format.replace(Error.prepareStackTrace);var df=false;function um(e,t){if(hf)return t;if(df)return xo(e,t);var r=t.concat();r=or.extend._modify(e,r),r=or.filter._modify(e,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&Object.getOwnPropertyDescriptor(e,"callSite")===void 0&&(e.callSite={original:t,mutated:r}),df=true;var n=or.format._formater(e,r);return df=false,n;}Object.defineProperty(Error,"prepareStackTrace",{get:function get(){return um;},set:function set(e){e===um?or.format._roolback():(or.format._backup(),or.format.replace(e));}});function xN(){return this.stack,this.callSite;}Object.defineProperty(Error.prototype,"callSite",{get:xN,set:function set(e){Object.defineProperty(this,"callSite",{value:e,writable:true,configurable:true});},configurable:true});lm.exports=or;});var vf=l(function(O1,_f){if(global._stackChain){if(global._stackChain.version===pf().version)_f.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");}else _f.exports=global._stackChain=fm();});var pm=l(function(P1,gf){"use strict";var MN=am();if(global._asyncHook){if(global._asyncHook.version===lf().version)gf.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");}else vf().filter.attach(function(t,r){return r.filter(function(n){var i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname);});}),gf.exports=global._asyncHook=new MN();});var Em=l(function(R1,gm){"use strict";var ce=require("util"),Lt=require("assert"),LN=Do(),zn=pm(),la="cls@contexts",fa="error@context",hm=[];for(var e in zn.providers){hm[zn.providers[e]]=e;}var ae=process.env.DEBUG_CLS_HOOKED,pe=-1;gm.exports={getNamespace:_m,createNamespace:qN,destroyNamespace:vm,reset:jN,ERROR_SYMBOL:fa};function Qe(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map();}Qe.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return ae&&ue("    SETTING KEY:"+t+"="+r+" in ns:"+this.name+" uid:"+pe+" active:"+ce.inspect(this.active,true)),this.active[t]=r,r;};Qe.prototype.get=function(t){if(!this.active){ae&&ue("    GETTING KEY:"+t+"=undefined "+this.name+" uid:"+pe+" active:"+ce.inspect(this.active,true));return;}return ae&&ue("    GETTING KEY:"+t+"="+this.active[t]+" "+this.name+" uid:"+pe+" active:"+ce.inspect(this.active,true)),this.active[t];};Qe.prototype.createContext=function(){ae&&ue("   CREATING Context: "+this.name+" uid:"+pe+" len:"+this._set.length+"  active:"+ce.inspect(this.active,true,2,true));var t=Object.create(this.active?this.active:Object.prototype);return t._ns_name=this.name,t.id=pe,ae&&ue("   CREATED Context: "+this.name+" uid:"+pe+" len:"+this._set.length+"  context:"+ce.inspect(t,true,2,true)),t;};Qe.prototype.run=function(t){var r=this.createContext();this.enter(r);try{return ae&&ue(" BEFORE RUN: "+this.name+" uid:"+pe+" len:"+this._set.length+" "+ce.inspect(r)),t(r),r;}catch(n){throw n&&(n[fa]=r),n;}finally{ae&&ue(" AFTER RUN: "+this.name+" uid:"+pe+" len:"+this._set.length+" "+ce.inspect(r)),this.exit(r);}};Qe.prototype.runAndReturn=function(t){var r;return this.run(function(n){r=t(n);}),r;};Qe.prototype.runPromise=function(t){var _this144=this;var r=this.createContext();this.enter(r);var n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return ae&&ue(" BEFORE runPromise: "+this.name+" uid:"+pe+" len:"+this._set.length+" "+ce.inspect(r)),n.then(function(i){return ae&&ue(" AFTER runPromise: "+_this144.name+" uid:"+pe+" len:"+_this144._set.length+" "+ce.inspect(r)),_this144.exit(r),i;}).catch(function(i){throw i[fa]=r,ae&&ue(" AFTER runPromise: "+_this144.name+" uid:"+pe+" len:"+_this144._set.length+" "+ce.inspect(r)),_this144.exit(r),i;});};Qe.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());var n=this;return function(){n.enter(r);try{return t.apply(this,arguments);}catch(a){throw a&&(a[fa]=r),a;}finally{n.exit(r);}};};Qe.prototype.enter=function(t){Lt.ok(t,"context must be provided for entering"),ae&&ue("  ENTER "+this.name+" uid:"+pe+" len:"+this._set.length+" context: "+ce.inspect(t)),this._set.push(this.active),this.active=t;};Qe.prototype.exit=function(t){if(Lt.ok(t,"context must be provided for exiting"),ae&&ue("  EXIT "+this.name+" uid:"+pe+" len:"+this._set.length+" context: "+ce.inspect(t)),this.active===t){Lt.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return;}var r=this._set.lastIndexOf(t);r<0?(ae&&ue("??ERROR?? context exiting but not entered - ignoring: "+ce.inspect(t)),Lt.ok(r>=0,"context not currently entered; can't exit. \n"+ce.inspect(this)+"\n"+ce.inspect(t))):(Lt.ok(r,"can't remove top context"),this._set.splice(r,1));};Qe.prototype.bindEmitter=function(t){Lt.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var r=this,n="context@"+this.name;function i(s){!s||(s[la]||(s[la]=Object.create(null)),s[la][n]={namespace:r,context:r.active});}function a(s){if(!(s&&s[la]))return s;var o=s,u=s[la];return Object.keys(u).forEach(function(c){var f=u[c];o=f.namespace.bind(o,f.context);}),o;}LN(t,i,a);};Qe.prototype.fromException=function(t){return t[fa];};function _m(e){return process.namespaces[e];}function qN(e){Lt.ok(e,"namespace must be given a name."),ae&&ue("CREATING NAMESPACE "+e);var t=new Qe(e);return t.id=pe,zn.addHooks({init:function init(r,n,i,a,s){pe=r,a?(t._contexts.set(r,t._contexts.get(a)),ae&&ue("PARENTID: "+e+" uid:"+r+" parent:"+a+" provider:"+i)):t._contexts.set(pe,t.active),ae&&ue("INIT "+e+" uid:"+r+" parent:"+a+" provider:"+hm[i]+" active:"+ce.inspect(t.active,true));},pre:function pre(r,n){pe=r;var i=t._contexts.get(r);i?(ae&&ue(" PRE "+e+" uid:"+r+" handle:"+Mo(n)+" context:"+ce.inspect(i)),t.enter(i)):ae&&ue(" PRE MISSING CONTEXT "+e+" uid:"+r+" handle:"+Mo(n));},post:function post(r,n){pe=r;var i=t._contexts.get(r);i?(ae&&ue(" POST "+e+" uid:"+r+" handle:"+Mo(n)+" context:"+ce.inspect(i)),t.exit(i)):ae&&ue(" POST MISSING CONTEXT "+e+" uid:"+r+" handle:"+Mo(n));},destroy:function destroy(r){pe=r,ae&&ue("DESTROY "+e+" uid:"+r+" context:"+ce.inspect(t._contexts.get(pe))+" active:"+ce.inspect(t.active,true)),t._contexts.delete(r);}}),process.namespaces[e]=t,t;}function vm(e){var t=_m(e);Lt.ok(t,"can't delete nonexistent namespace! \""+e+'"'),Lt.ok(t.id,"don't assign to process.namespaces directly! "+ce.inspect(t)),process.namespaces[e]=null;}function jN(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){vm(e);}),process.namespaces=Object.create(null);}process.namespaces={};zn._state&&!zn._state.enabled&&zn.enable();function ue(e){process.env.DEBUG&&process._rawDebug(e);}function Mo(e){if(!e)return e;if(typeof e=="function")return e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(e.constructor&&e.constructor.name)return e.constructor.name;}if(ae){Ef=vf();for(dm in Ef.filter._modifiers){Ef.filter.deattach(dm);}}var Ef,dm;});var mm=l(function(N1,mf){"use strict";var kN=HE();process&&kN.gte(process.versions.node,"8.0.0")?mf.exports=QE():mf.exports=Em();});var qm=l(function(b,Lm){b=Lm.exports=w;var U;(typeof process==="undefined"?"undefined":_typeof(process))=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?U=function U(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e);}:U=function U(){};b.SEMVER_SPEC_VERSION="2.0.0";var Tf=256,Lo=Number.MAX_SAFE_INTEGER||9007199254740991,yf=16,G=b.re=[],g=b.src=[],R=0,Xn=R++;g[Xn]="0|[1-9]\\d*";var Kn=R++;g[Kn]="[0-9]+";var Cf=R++;g[Cf]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var Tm=R++;g[Tm]="("+g[Xn]+")\\.("+g[Xn]+")\\.("+g[Xn]+")";var Am=R++;g[Am]="("+g[Kn]+")\\.("+g[Kn]+")\\.("+g[Kn]+")";var Af=R++;g[Af]="(?:"+g[Xn]+"|"+g[Cf]+")";var Sf=R++;g[Sf]="(?:"+g[Kn]+"|"+g[Cf]+")";var bf=R++;g[bf]="(?:-("+g[Af]+"(?:\\."+g[Af]+")*))";var Of=R++;g[Of]="(?:-?("+g[Sf]+"(?:\\."+g[Sf]+")*))";var If=R++;g[If]="[0-9A-Za-z-]+";var ha=R++;g[ha]="(?:\\+("+g[If]+"(?:\\."+g[If]+")*))";var Pf=R++,Sm="v?"+g[Tm]+g[bf]+"?"+g[ha]+"?";g[Pf]="^"+Sm+"$";var Rf="[v=\\s]*"+g[Am]+g[Of]+"?"+g[ha]+"?",Nf=R++;g[Nf]="^"+Rf+"$";var Wn=R++;g[Wn]="((?:<|>)?=?)";var qo=R++;g[qo]=g[Kn]+"|x|X|\\*";var jo=R++;g[jo]=g[Xn]+"|x|X|\\*";var zr=R++;g[zr]="[v=\\s]*("+g[jo]+")(?:\\.("+g[jo]+")(?:\\.("+g[jo]+")(?:"+g[bf]+")?"+g[ha]+"?)?)?";var Qn=R++;g[Qn]="[v=\\s]*("+g[qo]+")(?:\\.("+g[qo]+")(?:\\.("+g[qo]+")(?:"+g[Of]+")?"+g[ha]+"?)?)?";var Im=R++;g[Im]="^"+g[Wn]+"\\s*"+g[zr]+"$";var Cm=R++;g[Cm]="^"+g[Wn]+"\\s*"+g[Qn]+"$";var bm=R++;g[bm]="(?:^|[^\\d])(\\d{1,"+yf+"})(?:\\.(\\d{1,"+yf+"}))?(?:\\.(\\d{1,"+yf+"}))?(?:$|[^\\d])";var Go=R++;g[Go]="(?:~>?)";var ko=R++;g[ko]="(\\s*)"+g[Go]+"\\s+";G[ko]=new RegExp(g[ko],"g");var HN="$1~",Om=R++;g[Om]="^"+g[Go]+g[zr]+"$";var Pm=R++;g[Pm]="^"+g[Go]+g[Qn]+"$";var Vo=R++;g[Vo]="(?:\\^)";var Ho=R++;g[Ho]="(\\s*)"+g[Vo]+"\\s+";G[Ho]=new RegExp(g[Ho],"g");var UN="$1^",Rm=R++;g[Rm]="^"+g[Vo]+g[zr]+"$";var Nm=R++;g[Nm]="^"+g[Vo]+g[Qn]+"$";var Df=R++;g[Df]="^"+g[Wn]+"\\s*("+Rf+")$|^$";var wf=R++;g[wf]="^"+g[Wn]+"\\s*("+Sm+")$|^$";var pa=R++;g[pa]="(\\s*)"+g[Wn]+"\\s*("+Rf+"|"+g[zr]+")";G[pa]=new RegExp(g[pa],"g");var BN="$1$2$3",Dm=R++;g[Dm]="^\\s*("+g[zr]+")\\s+-\\s+("+g[zr]+")\\s*$";var wm=R++;g[wm]="^\\s*("+g[Qn]+")\\s+-\\s+("+g[Qn]+")\\s*$";var xm=R++;g[xm]="(<|>)?=?\\s*\\*";for(ur=0;ur<R;ur++){U(ur,g[ur]),G[ur]||(G[ur]=new RegExp(g[ur]));}var ur;b.parse=Xr;function Xr(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof w)return e;if(typeof e!="string"||e.length>Tf)return null;var r=t.loose?G[Nf]:G[Pf];if(!r.test(e))return null;try{return new w(e,t);}catch(_unused29){return null;}}b.valid=FN;function FN(e,t){var r=Xr(e,t);return r?r.version:null;}b.clean=GN;function GN(e,t){var r=Xr(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null;}b.SemVer=w;function w(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof w){if(e.loose===t.loose)return e;e=e.version;}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>Tf)throw new TypeError("version is longer than "+Tf+" characters");if(!(this instanceof w))return new w(e,t);U("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?G[Nf]:G[Pf]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Lo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lo||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Lo)return i;}return n;}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format();}w.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version;};w.prototype.toString=function(){return this.version;};w.prototype.compare=function(e){return U("SemVer.compare",this.version,this.options,e),e instanceof w||(e=new w(e,this.options)),this.compareMain(e)||this.comparePre(e);};w.prototype.compareMain=function(e){return e instanceof w||(e=new w(e,this.options)),Yn(this.major,e.major)||Yn(this.minor,e.minor)||Yn(this.patch,e.patch);};w.prototype.comparePre=function(e){if(e instanceof w||(e=new w(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(U("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Yn(r,n);}while(++t);};w.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;){typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);}r===-1&&this.prerelease.push(0);}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e);}return this.format(),this.raw=this.version,this;};b.inc=VN;function VN(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new w(e,r).inc(t,n).version;}catch(_unused30){return null;}}b.diff=$N;function $N(e,t){if(xf(e,t))return null;var r=Xr(e),n=Xr(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease";}for(var s in r){if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;}return a;}b.compareIdentifiers=Yn;var ym=/^[0-9]+$/;function Yn(e,t){var r=ym.test(e),n=ym.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1;}b.rcompareIdentifiers=zN;function zN(e,t){return Yn(t,e);}b.major=XN;function XN(e,t){return new w(e,t).major;}b.minor=KN;function KN(e,t){return new w(e,t).minor;}b.patch=YN;function YN(e,t){return new w(e,t).patch;}b.compare=qt;function qt(e,t,r){return new w(e,r).compare(new w(t,r));}b.compareLoose=QN;function QN(e,t){return qt(e,t,true);}b.rcompare=WN;function WN(e,t,r){return qt(t,e,r);}b.sort=ZN;function ZN(e,t){return e.sort(function(r,n){return b.compare(r,n,t);});}b.rsort=JN;function JN(e,t){return e.sort(function(r,n){return b.rcompare(r,n,t);});}b.gt=da;function da(e,t,r){return qt(e,t,r)>0;}b.lt=Uo;function Uo(e,t,r){return qt(e,t,r)<0;}b.eq=xf;function xf(e,t,r){return qt(e,t,r)===0;}b.neq=Mm;function Mm(e,t,r){return qt(e,t,r)!==0;}b.gte=Mf;function Mf(e,t,r){return qt(e,t,r)>=0;}b.lte=Lf;function Lf(e,t,r){return qt(e,t,r)<=0;}b.cmp=Bo;function Bo(e,t,r,n){switch(t){case"===":return _typeof(e)=="object"&&(e=e.version),_typeof(r)=="object"&&(r=r.version),e===r;case"!==":return _typeof(e)=="object"&&(e=e.version),_typeof(r)=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return xf(e,r,n);case"!=":return Mm(e,r,n);case">":return da(e,r,n);case">=":return Mf(e,r,n);case"<":return Uo(e,r,n);case"<=":return Lf(e,r,n);default:throw new TypeError("Invalid operator: "+t);}}b.Comparator=We;function We(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof We){if(e.loose===!!t.loose)return e;e=e.value;}if(!(this instanceof We))return new We(e,t);U("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===_a?this.value="":this.value=this.operator+this.semver.version,U("comp",this);}var _a={};We.prototype.parse=function(e){var t=this.options.loose?G[Df]:G[wf],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new w(r[2],this.options.loose):this.semver=_a;};We.prototype.toString=function(){return this.value;};We.prototype.test=function(e){return U("Comparator.test",e,this.options.loose),this.semver===_a?true:(typeof e=="string"&&(e=new w(e,this.options)),Bo(e,this.operator,this.semver,this.options));};We.prototype.intersects=function(e,t){if(!(e instanceof We))throw new TypeError("a Comparator is required");(!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false});var r;if(this.operator==="")return r=new ee(e.value,t),Fo(this.value,r,t);if(e.operator==="")return r=new ee(this.value,t),Fo(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),o=Bo(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=Bo(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&s||o||u;};b.Range=ee;function ee(e,t){if((!t||_typeof(t)!="object")&&(t={loose:!!t,includePrerelease:false}),e instanceof ee)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ee(e.raw,t);if(e instanceof We)return new ee(e.value,t);if(!(this instanceof ee))return new ee(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim());},this).filter(function(r){return r.length;}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format();}ee.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim();}).join("||").trim(),this.range;};ee.prototype.toString=function(){return this.range;};ee.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?G[wm]:G[Dm];e=e.replace(r,cD),U("hyphen replace",e),e=e.replace(G[pa],BN),U("comparator trim",e,G[pa]),e=e.replace(G[ko],HN),e=e.replace(G[Ho],UN),e=e.split(/\s+/).join(" ");var n=t?G[Df]:G[wf],i=e.split(" ").map(function(a){return tD(a,this.options);},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(a){return!!a.match(n);})),i=i.map(function(a){return new We(a,this.options);},this),i;};ee.prototype.intersects=function(e,t){if(!(e instanceof ee))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(a){return n.intersects(a,t);});});});});};b.toComparators=eD;function eD(e,t){return new ee(e,t).set.map(function(r){return r.map(function(n){return n.value;}).join(" ").trim().split(" ");});}function tD(e,t){return U("comp",e,t),e=iD(e,t),U("caret",e),e=rD(e,t),U("tildes",e),e=sD(e,t),U("xrange",e),e=uD(e,t),U("stars",e),e;}function Me(e){return!e||e.toLowerCase()==="x"||e==="*";}function rD(e,t){return e.trim().split(/\s+/).map(function(r){return nD(r,t);}).join(" ");}function nD(e,t){var r=t.loose?G[Pm]:G[Om];return e.replace(r,function(n,i,a,s,o){U("tilde",e,n,i,a,s,o);var u;return Me(i)?u="":Me(a)?u=">="+i+".0.0 <"+(+i+1)+".0.0":Me(s)?u=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":o?(U("replaceTilde pr",o),u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0"):u=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0",U("tilde return",u),u;});}function iD(e,t){return e.trim().split(/\s+/).map(function(r){return aD(r,t);}).join(" ");}function aD(e,t){U("caret",e,t);var r=t.loose?G[Nm]:G[Rm];return e.replace(r,function(n,i,a,s,o){U("caret",e,n,i,a,s,o);var u;return Me(i)?u="":Me(a)?u=">="+i+".0.0 <"+(+i+1)+".0.0":Me(s)?i==="0"?u=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+".0 <"+(+i+1)+".0.0":o?(U("replaceCaret pr",o),i==="0"?a==="0"?u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+a+"."+(+s+1):u=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+"."+s+"-"+o+" <"+(+i+1)+".0.0"):(U("no pr"),i==="0"?a==="0"?u=">="+i+"."+a+"."+s+" <"+i+"."+a+"."+(+s+1):u=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0":u=">="+i+"."+a+"."+s+" <"+(+i+1)+".0.0"),U("caret return",u),u;});}function sD(e,t){return U("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return oD(r,t);}).join(" ");}function oD(e,t){e=e.trim();var r=t.loose?G[Cm]:G[Im];return e.replace(r,function(n,i,a,s,o,u){U("xRange",e,n,i,a,s,o,u);var c=Me(a),f=c||Me(s),p=f||Me(o),d=p;return i==="="&&d&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(f&&(s=0),o=0,i===">"?(i=">=",f?(a=+a+1,s=0,o=0):(s=+s+1,o=0)):i==="<="&&(i="<",f?a=+a+1:s=+s+1),n=i+a+"."+s+"."+o):f?n=">="+a+".0.0 <"+(+a+1)+".0.0":p&&(n=">="+a+"."+s+".0 <"+a+"."+(+s+1)+".0"),U("xRange return",n),n;});}function uD(e,t){return U("replaceStars",e,t),e.trim().replace(G[xm],"");}function cD(e,t,r,n,i,a,s,o,u,c,f,p,d){return Me(r)?t="":Me(n)?t=">="+r+".0.0":Me(i)?t=">="+r+"."+n+".0":t=">="+t,Me(u)?o="":Me(c)?o="<"+(+u+1)+".0.0":Me(f)?o="<"+u+"."+(+c+1)+".0":p?o="<="+u+"."+c+"."+f+"-"+p:o="<="+o,(t+" "+o).trim();}ee.prototype.test=function(e){if(!e)return false;typeof e=="string"&&(e=new w(e,this.options));for(var t=0;t<this.set.length;t++){if(lD(this.set[t],e,this.options))return true;}return false;};function lD(e,t,r){for(var n=0;n<e.length;n++){if(!e[n].test(t))return false;}if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++){if(U(e[n].semver),e[n].semver!==_a&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return true;}}return false;}return true;}b.satisfies=Fo;function Fo(e,t,r){try{t=new ee(t,r);}catch(_unused31){return false;}return t.test(e);}b.maxSatisfying=fD;function fD(e,t,r){var n=null,i=null;try{var a=new ee(t,r);}catch(_unused32){return null;}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new w(n,r));}),n;}b.minSatisfying=pD;function pD(e,t,r){var n=null,i=null;try{var a=new ee(t,r);}catch(_unused33){return null;}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new w(n,r));}),n;}b.minVersion=dD;function dD(e,t){e=new ee(e,t);var r=new w("0.0.0");if(e.test(r)||(r=new w("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(a){var s=new w(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||da(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator);}});}return r&&e.test(r)?r:null;}b.validRange=hD;function hD(e,t){try{return new ee(e,t).range||"*";}catch(_unused34){return null;}}b.ltr=_D;function _D(e,t,r){return qf(e,t,"<",r);}b.gtr=vD;function vD(e,t,r){return qf(e,t,">",r);}b.outside=qf;function qf(e,t,r,n){e=new w(e,n),t=new ee(t,n);var i,a,s,o,u;switch(r){case">":i=da,a=Lf,s=Uo,o=">",u=">=";break;case"<":i=Uo,a=Mf,s=da,o="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(Fo(e,t,n))return false;for(var c=0;c<t.set.length;++c){var f=t.set[c],p=null,d=null;if(f.forEach(function(h){h.semver===_a&&(h=new We(">=0.0.0")),p=p||h,d=d||h,i(h.semver,p.semver,n)?p=h:s(h.semver,d.semver,n)&&(d=h);}),p.operator===o||p.operator===u||(!d.operator||d.operator===o)&&a(e,d.semver))return false;if(d.operator===u&&s(e,d.semver))return false;}return true;}b.prerelease=gD;function gD(e,t){var r=Xr(e,t);return r&&r.prerelease.length?r.prerelease:null;}b.intersects=ED;function ED(e,t,r){return e=new ee(e,r),t=new ee(t,r),e.intersects(t);}b.coerce=mD;function mD(e){if(e instanceof w)return e;if(typeof e!="string")return null;var t=e.match(G[bm]);return t==null?null:Xr(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"));}});var Hm=l(function(D1,km){var yD=Po().wrap,kf=1<<0,Hf=1<<1,Uf=1<<2,zo=1<<3,V=[],TD=0,Oe=false,cr=[],Zn,Bf;function Ff(e,t){var r=e.length,n=t.length,i=[];if(r===0&&n===0)return i;for(var a=0;a<r;a++){i[a]=e[a];}if(n===0)return i;for(var s=0;s<n;s++){var o=true;for(a=0;a<r;a++){if(e[a].uid===t[s].uid){o=false;break;}}o&&i.push(t[s]);}return i;}process._fatalException?($o=false,Zn=function Zn(t){var r=V.length;if($o||r===0)return false;var n=false;$o=true;for(var i=0;i<r;++i){var a=V[i];if((a.flags&zo)!==0){var s=Jn&&Jn[a.uid];n=a.error(s,t)||n;}}return $o=false,cr.length>0&&(V=cr.pop()),Jn=void 0,n&&!Oe;},Bf=function Bf(t,r,n){var i=[];Oe=true;for(var a=0;a<n;++a){var s=r[a];if(i[s.uid]=s.data,(s.flags&kf)!==0){var o=s.create(s.data);o!==void 0&&(i[s.uid]=o);}}return Oe=false,function(){Jn=i,cr.push(V),V=Ff(r,V),Oe=true;for(var u=0;u<n;++u){(r[u].flags&Hf)>0&&r[u].before(this,i[r[u].uid]);}Oe=false;var c=t.apply(this,arguments);for(Oe=true,u=0;u<n;++u){(r[u].flags&Uf)>0&&r[u].after(this,i[r[u].uid]);}return Oe=false,V=cr.pop(),Jn=void 0,c;};},yD(process,"_fatalException",function(e){return function(r){return Zn(r)||e(r);};})):(jf=false,Zn=function Zn(t){if(jf)throw t;for(var r=false,n=V.length,i=0;i<n;++i){var a=V[i];(a.flags&zo)!==0&&(r=a.error(null,t)||r);}if(!r&&Oe)throw t;},Bf=function Bf(t,r,n){var i=[];Oe=true;for(var a=0;a<n;++a){var s=r[a];if(i[s.uid]=s.data,(s.flags&kf)!==0){var o=s.create(s.data);o!==void 0&&(i[s.uid]=o);}}return Oe=false,function(){var u=false,c=false;cr.push(V),V=Ff(r,V),Oe=true;for(var f=0;f<n;++f){(r[f].flags&Hf)>0&&r[f].before(this,i[r[f].uid]);}Oe=false;var p;try{p=t.apply(this,arguments);}catch(d){u=true;for(var f=0;f<n;++f){if((V[f].flags&zo)!=0)try{c=V[f].error(i[r[f].uid],d)||c;}catch(E){throw jf=true,E;}}if(!c)throw process.removeListener("uncaughtException",Zn),process._originalNextTick(function(){process.addListener("uncaughtException",Zn);}),d;}finally{if(!u||c){for(Oe=true,f=0;f<n;++f){(r[f].flags&Uf)>0&&r[f].after(this,i[r[f].uid]);}Oe=false;}V=cr.pop();}return p;};},process.addListener("uncaughtException",Zn));var $o,Jn,jf;function AD(e,t,r){Oe=true;for(var n=0;n<r;++n){var i=t[n];i.create&&i.create(i.data);}return Oe=false,function(){cr.push(V),V=Ff(t,V);var a=e.apply(this,arguments);return V=cr.pop(),a;};}function SD(e){var t=V.length;if(t===0)return e;for(var r=V.slice(),n=0;n<t;++n){if(r[n].flags>0)return Bf(e,r,t);}return AD(e,r,t);}function vt(e,t){typeof e.create=="function"&&(this.create=e.create,this.flags|=kf),typeof e.before=="function"&&(this.before=e.before,this.flags|=Hf),typeof e.after=="function"&&(this.after=e.after,this.flags|=Uf),typeof e.error=="function"&&(this.error=e.error,this.flags|=zo),this.uid=++TD,this.data=t===void 0?null:t;}vt.prototype.create=void 0;vt.prototype.before=void 0;vt.prototype.after=void 0;vt.prototype.error=void 0;vt.prototype.data=void 0;vt.prototype.uid=0;vt.prototype.flags=0;function jm(e,t){if(_typeof(e)!="object"||!e)throw new TypeError("callbacks argument must be an object");return e instanceof vt?e:new vt(e,t);}function ID(e,t){var r;e instanceof vt?r=e:r=jm(e,t);for(var n=false,i=0;i<V.length;i++){if(r===V[i]){n=true;break;}}return n||V.push(r),r;}function CD(e){for(var t=0;t<V.length;t++){if(e===V[t]){V.splice(t,1);break;}}}process.createAsyncListener=jm;process.addAsyncListener=ID;process.removeAsyncListener=CD;km.exports=SD;});var Bm=l(function(x1,Um){"use strict";Um.exports=function(e,t){return/*#__PURE__*/function(_e13){_inherits(_class,_e13);var _super93=_createSuper(_class);function _class(n){var _this145;_classCallCheck(this,_class);var i,a;_this145=_super93.call(this,o);var s=_assertThisInitialized(_this145);try{n.apply(i,a);}catch(u){a[1](u);}return _possibleConstructorReturn(_this145,s);function o(u,c){i=this,a=[f,p];function f(d){return t(s,false),u(d);}function p(d){return t(s,false),c(d);}}return _this145;}return _createClass(_class);}(e);};});var Km=l(function(){"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var $m=Po(),Ko=qm(),je=$m.wrap,lr=$m.massWrap,te=Hm(),bD=require("util"),OD=Ko.gte(process.version,"6.0.0"),$f=Ko.gte(process.version,"7.0.0"),PD=Ko.gte(process.version,"8.0.0"),RD=Ko.gte(process.version,"11.0.0"),gt=require("net");$f&&!gt._normalizeArgs?gt._normalizeArgs=function(e){if(e.length===0)return[{},null];var t=e[0],r={};_typeof(t)=="object"&&t!==null?r=t:MD(t)?r.path=t:(r.port=t,e.length>1&&typeof e[1]=="string"&&(r.host=e[1]));var n=e[e.length-1];return typeof n!="function"?[r,null]:[r,n];}:!$f&&!gt._normalizeConnectArgs&&(gt._normalizeConnectArgs=function(e){var t={};function r(i){return(i=Number(i))>=0?i:false;}_typeof(e[0])=="object"&&e[0]!==null?t=e[0]:typeof e[0]=="string"&&r(e[0])===false?t.path=e[0]:(t.port=e[0],typeof e[1]=="string"&&(t.host=e[1]));var n=e[e.length-1];return typeof n=="function"?[t,n]:[t];});"_setUpListenHandle"in gt.Server.prototype?je(gt.Server.prototype,"_setUpListenHandle",Fm):je(gt.Server.prototype,"_listen2",Fm);function Fm(e){return function(){this.on("connection",function(t){t._handle&&(t._handle.onread=te(t._handle.onread));});try{return e.apply(this,arguments);}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=te(this._handle.onconnection));}};}function zm(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=te(t._originalOnread);}}je(gt.Socket.prototype,"connect",function(e){return function(){var t;PD&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?t=arguments[0]:t=$f?gt._normalizeArgs(arguments):gt._normalizeConnectArgs(arguments),t[1]&&(t[1]=te(t[1]));var r=e.apply(this,t);return zm(this),r;};});var ND=require("http");je(ND.Agent.prototype,"addRequest",function(e){return function(t){var r=t.onSocket;return t.onSocket=te(function(n){return zm(n),r.apply(this,arguments);}),e.apply(this,arguments);};});var Gf=require("child_process");function Gm(e){Array.isArray(e.stdio)&&e.stdio.forEach(function(t){t&&t._handle&&(t._handle.onread=te(t._handle.onread),je(t._handle,"close",Yo));}),e._handle&&(e._handle.onexit=te(e._handle.onexit));}Gf.ChildProcess?je(Gf.ChildProcess.prototype,"spawn",function(e){return function(){var t=e.apply(this,arguments);return Gm(this),t;};}):lr(Gf,["execFile","fork","spawn"],function(e){return function(){var t=e.apply(this,arguments);return Gm(t),t;};});process._fatalException||(process._originalNextTick=process.nextTick);var Kf=[];process._nextDomainTick&&Kf.push("_nextDomainTick");process._tickDomainCallback&&Kf.push("_tickDomainCallback");lr(process,Kf,Et);je(process,"nextTick",Yo);var Yf=["setTimeout","setInterval"];global.setImmediate&&Yf.push("setImmediate");var Xm=require("timers"),DD=global.setTimeout===Xm.setTimeout;lr(Xm,Yf,Yo);DD&&lr(global,Yf,Yo);var zf=require("dns");lr(zf,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Et);zf.resolveNaptr&&je(zf,"resolveNaptr",Et);var Yr=require("fs");lr(Yr,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Et);Yr.lchown&&je(Yr,"lchown",Et);Yr.lchmod&&je(Yr,"lchmod",Et);Yr.ftruncate&&je(Yr,"ftruncate",Et);var va;try{va=require("zlib");}catch(_unused35){}va&&va.Deflate&&va.Deflate.prototype&&(Kr=Object.getPrototypeOf(va.Deflate.prototype),Kr._transform?je(Kr,"_transform",Et):Kr.write&&Kr.flush&&Kr.end&&lr(Kr,["write","flush","end"],Et));var Kr,Xf;try{Xf=require("crypto");}catch(_unused36){}Xf&&(Vf=["pbkdf2","randomBytes"],RD||Vf.push("pseudoRandomBytes"),lr(Xf,Vf,Et));var Vf,Xo=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";Xo&&(Vm=process.addAsyncListener({create:function create(){Xo=false;}}),global.Promise.resolve(true).then(function(){Xo=false;}),process.removeAsyncListener(Vm));var Vm;Xo&&wD();function wD(){var e=global.Promise;function t(s){if(!(this instanceof t))return e(s);if(typeof s!="function")return new e(s);var o,u,c=new e(f);c.__proto__=t.prototype;try{s.apply(o,u);}catch(p){u[1](p);}return c;function f(p,d){o=this,u=[h,E];function h(A){return n(c,false),p(A);}function E(A){return n(c,false),d(A);}}}if(bD.inherits(t,e),je(e.prototype,"then",a),e.prototype.chain&&je(e.prototype,"chain",a),OD)global.Promise=Bm()(e,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof e[s]=="function"&&(t[s]=e[s]);}),global.Promise=t;}function n(s,o){(!s.__asl_wrapper||o)&&(s.__asl_wrapper=te(i));}function i(s,o,u,c){var f;try{return f=o.call(s,u),{returnVal:f,error:false};}catch(p){return{errorVal:p,error:true};}finally{f instanceof e?c.__asl_wrapper=function(){var d=f.__asl_wrapper||i;return d.apply(this,arguments);}:n(c,true);}}function a(s){return function(){var u=this,c=s.apply(u,Array.prototype.map.call(arguments,f));return c.__asl_wrapper=function(d,h,E,A){return u.__asl_wrapper?(u.__asl_wrapper(d,function(){},null,c),c.__asl_wrapper(d,h,E,A)):i(d,h,E,A);},c;function f(p){return typeof p!="function"?p:te(function(d){var h=(u.__asl_wrapper||i)(this,p,d,c);if(h.error)throw h.errorVal;return h.returnVal;});}};}}function Et(e){var t=function t(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++){r[i]=arguments[i];}r[n]=te(arguments[n]);}return e.apply(this,r||arguments);};switch(e.length){case 1:return function(r){return arguments.length!==1?t.apply(this,arguments):(typeof r=="function"&&(r=te(r)),e.call(this,r));};case 2:return function(r,n){return arguments.length!==2?t.apply(this,arguments):(typeof n=="function"&&(n=te(n)),e.call(this,r,n));};case 3:return function(r,n,i){return arguments.length!==3?t.apply(this,arguments):(typeof i=="function"&&(i=te(i)),e.call(this,r,n,i));};case 4:return function(r,n,i,a){return arguments.length!==4?t.apply(this,arguments):(typeof a=="function"&&(a=te(a)),e.call(this,r,n,i,a));};case 5:return function(r,n,i,a,s){return arguments.length!==5?t.apply(this,arguments):(typeof s=="function"&&(s=te(s)),e.call(this,r,n,i,a,s));};case 6:return function(r,n,i,a,s,o){return arguments.length!==6?t.apply(this,arguments):(typeof o=="function"&&(o=te(o)),e.call(this,r,n,i,a,s,o));};default:return t;}}function Yo(e){var t=function t(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=te(arguments[0]);for(var n=1;n<arguments.length;n++){r[n]=arguments[n];}}return e.apply(this,r||arguments);};switch(e.length){case 1:return function(r){return arguments.length!==1?t.apply(this,arguments):(typeof r=="function"&&(r=te(r)),e.call(this,r));};case 2:return function(r,n){return arguments.length!==2?t.apply(this,arguments):(typeof r=="function"&&(r=te(r)),e.call(this,r,n));};case 3:return function(r,n,i){return arguments.length!==3?t.apply(this,arguments):(typeof r=="function"&&(r=te(r)),e.call(this,r,n,i));};case 4:return function(r,n,i,a){return arguments.length!==4?t.apply(this,arguments):(typeof r=="function"&&(r=te(r)),e.call(this,r,n,i,a));};case 5:return function(r,n,i,a,s){return arguments.length!==5?t.apply(this,arguments):(typeof r=="function"&&(r=te(r)),e.call(this,r,n,i,a,s));};case 6:return function(r,n,i,a,s,o){return arguments.length!==6?t.apply(this,arguments):(typeof r=="function"&&(r=te(r)),e.call(this,r,n,i,a,s,o));};default:return t;}}function xD(e){return(e=Number(e))>=0?e:false;}function MD(e){return typeof e=="string"&&xD(e)===false;}});var Jm=l(function(q1,Zm){"use strict";var jt=require("assert"),LD=Do(),ga="cls@contexts",Qf="error@context";process.addAsyncListener||Km();function st(e){this.name=e,this.active=null,this._set=[],this.id=null;}st.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t;};st.prototype.get=function(e){if(!!this.active)return this.active[e];};st.prototype.createContext=function(){return Object.create(this.active);};st.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t;}catch(r){throw r&&(r[Qf]=t),r;}finally{this.exit(t);}};st.prototype.runAndReturn=function(e){var t;return this.run(function(r){t=e(r);}),t;};st.prototype.bind=function(e,t){t||(this.active?t=this.active:t=this.createContext());var r=this;return function(){r.enter(t);try{return e.apply(this,arguments);}catch(n){throw n&&(n[Qf]=t),n;}finally{r.exit(t);}};};st.prototype.enter=function(e){jt.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e;};st.prototype.exit=function(e){if(jt.ok(e,"context must be provided for exiting"),this.active===e){jt.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return;}var t=this._set.lastIndexOf(e);jt.ok(t>=0,"context not currently entered; can't exit"),jt.ok(t,"can't remove top context"),this._set.splice(t,1);};st.prototype.bindEmitter=function(e){jt.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,r="context@"+this.name;function n(a){!a||(a[ga]||(a[ga]=Object.create(null)),a[ga][r]={namespace:t,context:t.active});}function i(a){if(!(a&&a[ga]))return a;var s=a,o=a[ga];return Object.keys(o).forEach(function(u){var c=o[u];s=c.namespace.bind(s,c.context);}),s;}LD(e,n,i);};st.prototype.fromException=function(e){return e[Qf];};function Ym(e){return process.namespaces[e];}function qD(e){jt.ok(e,"namespace must be given a name!");var t=new st(e);return t.id=process.addAsyncListener({create:function create(){return t.active;},before:function before(r,n){n&&t.enter(n);},after:function after(r,n){n&&t.exit(n);},error:function error(r){r&&t.exit(r);}}),process.namespaces[e]=t,t;}function Qm(e){var t=Ym(e);jt.ok(t,"can't delete nonexistent namespace!"),jt.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null;}function Wm(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){Qm(e);}),process.namespaces=Object.create(null);}process.namespaces||Wm();Zm.exports={getNamespace:Ym,createNamespace:qD,destroyNamespace:Qm,reset:Wm};});var Er=l(function(Qo){"use strict";Object.defineProperty(Qo,"__esModule",{value:true});Qo.CorrelationContextManager=void 0;var ty=_e(),jD=po(),ei=Qi(),Wf=Al(),ey=Bl(),kD=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return t===void 0?null:t;},e.generateContextObject=function(t,r,n,i,a,s){return r=r||t,this.enabled?{operation:{name:n,id:t,parentId:r,traceparent:a,tracestate:s},customProperties:new HD(i)}:null;},e.spanToContextObject=function(t,r,n){var i=new ei();return i.traceId=t.traceId,i.spanId=t.spanId,i.traceFlag=ei.formatOpenTelemetryTraceFlags(t.traceFlags)||ei.DEFAULT_TRACE_FLAG,i.parentId=r,e.generateContextObject(i.traceId,i.parentId,n,null,i);},e.runWithContext=function(t,r){var n;return e.enabled?e.session.bind(r,(n={},n[e.CONTEXT_NAME]=t,n))():r();},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t);},e.wrapCallback=function(t,r){var n;return e.enabled?e.session.bind(t,r?(n={},n[e.CONTEXT_NAME]=r,n):void 0):t;},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=false;return;}e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=true,_typeof(this.cls)>"u"&&(e.forceClsHooked===true||e.forceClsHooked===void 0&&e.shouldUseClsHooked()?this.cls=mm():this.cls=Jm()),e.session=this.cls.createNamespace("AI-CLS-Session"),jD.registerContextPreservation(function(r){return e.session.bind(r);})),this.enabled=true;}},e.startOperation=function(t,r){var n=t&&t.traceContext||null,i=t&&t.traceId?t:null,a=t&&t.headers;if(i){var s=new ei("00-"+i.traceId+"-"+i.spanId+"-01"),o=new Wf(i.traceState?i.traceState.serialize():null),u=e.generateContextObject(i.traceId,"|"+i.traceId+"."+i.spanId+".",typeof r=="string"?r:"",void 0,s,o);return u;}if(n){var s=new ei(n.traceparent),o=new Wf(n.tracestate),c=_typeof(r)=="object"?new ey(r):null,u=e.generateContextObject(s.traceId,s.parentId,typeof r=="string"?r:c.getOperationName({}),c&&c.getCorrelationContextHeader()||void 0,s,o);return u;}if(a){var s=new ei(a.traceparent?a.traceparent.toString():null),o=new Wf(a.tracestate?a.tracestate.toString():null),c=new ey(t),u=e.generateContextObject(s.traceId,s.parentId,c.getOperationName({}),c.getCorrelationContextHeader(),s,o);return u;}return ty.warn("startOperation was called with invalid arguments",arguments),null;},e.disable=function(){this.enabled=false;},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"));},e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>3||parseInt(t[0])>2&&parseInt(t[1])>2;},e.shouldUseClsHooked=function(){var t=process.versions.node.split(".");return parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=2;},e.canUseClsHooked=function(){var t=process.versions.node.split("."),r=parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=0,n=parseInt(t[0])<8||parseInt(t[0])<=8&&parseInt(t[1])<2,i=parseInt(t[0])>4||parseInt(t[0])>=4&&parseInt(t[1])>=7;return!(r&&n)&&i;},e.enabled=false,e.hasEverEnabled=false,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e;}();Qo.CorrelationContextManager=kD;var HD=function(){function e(t){this.props=[],this.addHeaderData(t);}return e.prototype.addHeaderData=function(t){var r=t?t.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]};}).concat(this.props);},e.prototype.serializeToHeader=function(){return this.props.map(function(t){return t.key+"="+t.value;}).join(", ");},e.prototype.getProperty=function(t){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===t)return n.value;}},e.prototype.setProperty=function(t,r){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(r)){ty.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+r);return;}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===t){i.value=r;return;}}this.props.push({key:t,value:r});},e.bannedCharacters=/[,=]/,e;}();});var ny=l(function(ti){"use strict";Object.defineProperty(ti,"__esModule",{value:true});ti.dispose=ti.enable=void 0;var ry=De(),Zf=oe(),Qr=[],Jf=function Jf(e){var t=e.data.message;Qr.forEach(function(r){t instanceof Error?r.trackException({exception:t}):(t.lastIndexOf("\n")==t.length-1&&(t=t.substring(0,t.length-1)),r.trackTrace({message:t,severity:e.data.stderr?ry.SeverityLevel.Warning:ry.SeverityLevel.Information}));});};function UD(e,t){e?(Qr.length===0&&Zf.channel.subscribe("console",Jf),Qr.push(t)):(Qr=Qr.filter(function(r){return r!=t;}),Qr.length===0&&Zf.channel.unsubscribe("console",Jf));}ti.enable=UD;function BD(){Zf.channel.unsubscribe("console",Jf),Qr=[];}ti.dispose=BD;});var iy=l(function(ni){"use strict";Object.defineProperty(ni,"__esModule",{value:true});ni.dispose=ni.enable=void 0;var ri=De(),ep=oe(),Wr=[],FD={10:ri.SeverityLevel.Verbose,20:ri.SeverityLevel.Verbose,30:ri.SeverityLevel.Information,40:ri.SeverityLevel.Warning,50:ri.SeverityLevel.Error,60:ri.SeverityLevel.Critical},tp=function tp(e){var t=e.data.result;Wr.forEach(function(r){var n=FD[e.data.level];t instanceof Error?r.trackException({exception:t}):r.trackTrace({message:t,severity:n});});};function GD(e,t){e?(Wr.length===0&&ep.channel.subscribe("bunyan",tp),Wr.push(t)):(Wr=Wr.filter(function(r){return r!=t;}),Wr.length===0&&ep.channel.unsubscribe("bunyan",tp));}ni.enable=GD;function VD(){ep.channel.unsubscribe("bunyan",tp),Wr=[];}ni.dispose=VD;});var ay=l(function(ii){"use strict";Object.defineProperty(ii,"__esModule",{value:true});ii.dispose=ii.enable=void 0;var Te=De(),rp=oe(),Zr=[],$D={syslog:function syslog(e){var t={emerg:Te.SeverityLevel.Critical,alert:Te.SeverityLevel.Critical,crit:Te.SeverityLevel.Critical,error:Te.SeverityLevel.Error,warning:Te.SeverityLevel.Warning,notice:Te.SeverityLevel.Information,info:Te.SeverityLevel.Information,debug:Te.SeverityLevel.Verbose};return t[e]===void 0?Te.SeverityLevel.Information:t[e];},npm:function npm(e){var t={error:Te.SeverityLevel.Error,warn:Te.SeverityLevel.Warning,info:Te.SeverityLevel.Information,verbose:Te.SeverityLevel.Verbose,debug:Te.SeverityLevel.Verbose,silly:Te.SeverityLevel.Verbose};return t[e]===void 0?Te.SeverityLevel.Information:t[e];},unknown:function unknown(e){return Te.SeverityLevel.Information;}},np=function np(e){var t=e.data.message;Zr.forEach(function(r){if(t instanceof Error)r.trackException({exception:t,properties:e.data.meta});else{var n=$D[e.data.levelKind](e.data.level);r.trackTrace({message:t,severity:n,properties:e.data.meta});}});};function zD(e,t){e?(Zr.length===0&&rp.channel.subscribe("winston",np),Zr.push(t)):(Zr=Zr.filter(function(r){return r!=t;}),Zr.length===0&&rp.channel.unsubscribe("winston",np));}ii.enable=zD;function XD(){rp.channel.unsubscribe("winston",np),Zr=[];}ii.dispose=XD;});var oy=l(function(B1,sy){"use strict";var KD=po(),YD=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this;}return e.prototype.enable=function(t,r){KD.IsInitialized&&(ny().enable(t&&r,this._client),iy().enable(t,this._client),ay().enable(t,this._client));},e.prototype.isInitialized=function(){return this._isInitialized;},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(false,false);},e._methodNames=["debug","info","log","warn","error"],e;}();sy.exports=YD;});var cy=l(function(F1,uy){"use strict";var QD=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var r=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7;}return e.prototype.isInitialized=function(){return this._isInitialized;},e.prototype.enable=function(t){var r=this;if(t){this._isInitialized=true;var n=this;if(!this._exceptionListenerHandle){var i=function i(a,s,o){o===void 0&&(o=new Error(e._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:o}),r._client.flush({isAppCrashing:true}),a&&s&&process.listeners(s).length===1&&(console.error(o),process.exit(1));};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,false,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,true,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,false,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle));}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle);},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(false),this._isInitialized=false;},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=false,e;}();uy.exports=QD;});var kt=l(function(T){"use strict";var ot;Object.defineProperty(T,"__esModule",{value:true});T.HeartBeatMetricName=T.DependencyTypeName=T.SpanAttribute=T.TelemetryTypeStringToQuickPulseDocumentType=T.TelemetryTypeStringToQuickPulseType=T.QuickPulseType=T.QuickPulseDocumentType=T.PerformanceToQuickPulseCounter=T.MetricId=T.PerformanceCounter=T.QuickPulseCounter=T.DEFAULT_LIVEMETRICS_HOST=T.DEFAULT_LIVEMETRICS_ENDPOINT=T.DEFAULT_BREEZE_ENDPOINT=void 0;T.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";T.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";T.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var Pe;(function(e){e.COMMITTED_BYTES="\\Memory\\Committed Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",e.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",e.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",e.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",e.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",e.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",e.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec";})(Pe=T.QuickPulseCounter||(T.QuickPulseCounter={}));var Wo;(function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time";})(Wo=T.PerformanceCounter||(T.PerformanceCounter={}));var WD;(function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count";})(WD=T.MetricId||(T.MetricId={}));T.PerformanceToQuickPulseCounter=(ot={},ot[Wo.PROCESSOR_TIME]=Pe.PROCESSOR_TIME,ot[Wo.REQUEST_RATE]=Pe.REQUEST_RATE,ot[Wo.REQUEST_DURATION]=Pe.REQUEST_DURATION,ot[Pe.COMMITTED_BYTES]=Pe.COMMITTED_BYTES,ot[Pe.REQUEST_FAILURE_RATE]=Pe.REQUEST_FAILURE_RATE,ot[Pe.DEPENDENCY_RATE]=Pe.DEPENDENCY_RATE,ot[Pe.DEPENDENCY_FAILURE_RATE]=Pe.DEPENDENCY_FAILURE_RATE,ot[Pe.DEPENDENCY_DURATION]=Pe.DEPENDENCY_DURATION,ot[Pe.EXCEPTION_RATE]=Pe.EXCEPTION_RATE,ot);T.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};T.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};T.TelemetryTypeStringToQuickPulseType={EventData:T.QuickPulseType.Event,ExceptionData:T.QuickPulseType.Exception,MessageData:T.QuickPulseType.Trace,MetricData:T.QuickPulseType.Metric,RequestData:T.QuickPulseType.Request,RemoteDependencyData:T.QuickPulseType.Dependency,AvailabilityData:T.QuickPulseType.Availability,PageViewData:T.QuickPulseType.PageView};T.TelemetryTypeStringToQuickPulseDocumentType={EventData:T.QuickPulseDocumentType.Event,ExceptionData:T.QuickPulseDocumentType.Exception,MessageData:T.QuickPulseDocumentType.Trace,MetricData:T.QuickPulseDocumentType.Metric,RequestData:T.QuickPulseDocumentType.Request,RemoteDependencyData:T.QuickPulseDocumentType.Dependency,AvailabilityData:T.QuickPulseDocumentType.Availability,PageViewData:T.QuickPulseDocumentType.PageView};T.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"};T.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"};T.HeartBeatMetricName="HeartBeat";});var Jo=l(function(V1,ly){"use strict";var Zo=require("os"),Ze=kt(),ZD=function(){function e(t,r,n){r===void 0&&(r=6e4),n===void 0&&(n=false),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=false,this._client=t,this._collectionInterval=r,this._enableLiveMetricsCounters=n;}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=true),t?this._handle||(this._lastCpus=Zo.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date()},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date()},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date()},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance();},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0);},e.countRequest=function(t,r){var n;if(!!e.isEnabled()){if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;e._intervalRequestExecutionTime+=n,r===false&&e._totalFailedRequestCount++,e._totalRequestCount++;}},e.countException=function(){e._totalExceptionCount++;},e.countDependency=function(t,r){var n;if(!!e.isEnabled()){if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;e._intervalDependencyExecutionTime+=n,r===false&&e._totalFailedDependencyCount++,e._totalDependencyCount++;}},e.prototype.isInitialized=function(){return this._isInitialized;},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled;},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate();},e.prototype._trackCpu=function(){var t=Zo.cpus();if(t&&t.length&&this._lastCpus&&t.length===this._lastCpus.length){for(var r=0,n=0,i=0,a=0,s=0,o=0;!!t&&o<t.length;o++){var u=t[o],c=this._lastCpus[o],f="% cpu("+o+") ",p=u.model,d=u.speed,h=u.times,E=c.times,A=h.user-E.user||0;r+=A;var j=h.sys-E.sys||0;n+=j;var se=h.nice-E.nice||0;i+=se;var Ae=h.idle-E.idle||0;a+=Ae;var At=h.irq-E.irq||0;s+=At;}var tn=void 0;if(typeof process.cpuUsage=="function"){var yi=process.cpuUsage(),rn=process.hrtime(),aA=yi.user-this._lastAppCpuUsage.user+(yi.system-this._lastAppCpuUsage.system)||0;if(_typeof(this._lastHrtime)<"u"&&this._lastHrtime.length===2){var sA=(rn[0]-this._lastHrtime[0])*1e6+(rn[1]-this._lastHrtime[1])/1e3||0;tn=100*aA/(sA*t.length);}this._lastAppCpuUsage=yi,this._lastHrtime=rn;}var _u=r+n+i+a+s||1;this._client.trackMetric({name:Ze.PerformanceCounter.PROCESSOR_TIME,value:(_u-a)/_u*100}),this._client.trackMetric({name:Ze.PerformanceCounter.PROCESS_TIME,value:tn||r/_u*100});}this._lastCpus=t;},e.prototype._trackMemory=function(){var t=Zo.freemem(),r=process.memoryUsage().rss,n=Zo.totalmem()-t;this._client.trackMetric({name:Ze.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:Ze.PerformanceCounter.AVAILABLE_BYTES,value:t}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Ze.QuickPulseCounter.COMMITTED_BYTES,value:n});},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date()},n=r.totalRequestCount-t.totalRequestCount||0,i=r.totalFailedRequestCount-t.totalFailedRequestCount||0,a=r.time-t.time,s=a/1e3,o=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,a>0){var u=n/s,c=i/s;this._client.trackMetric({name:Ze.PerformanceCounter.REQUEST_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Ze.PerformanceCounter.REQUEST_DURATION,value:o}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Ze.QuickPulseCounter.REQUEST_FAILURE_RATE,value:c});}this._lastRequests=r;},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,r={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date()},n=r.totalDependencyCount-t.totalDependencyCount||0,i=r.totalFailedDependencyCount-t.totalFailedDependencyCount||0,a=r.time-t.time,s=a/1e3,o=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,a>0){var u=n/s,c=i/s;this._client.trackMetric({name:Ze.QuickPulseCounter.DEPENDENCY_RATE,value:u}),this._client.trackMetric({name:Ze.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Ze.QuickPulseCounter.DEPENDENCY_DURATION,value:o});}this._lastDependencies=r;}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,r={totalExceptionCount:e._totalExceptionCount,time:+new Date()},n=r.totalExceptionCount-t.totalExceptionCount||0,i=r.time-t.time,a=i/1e3;if(i>0){var s=n/a;this._client.trackMetric({name:Ze.QuickPulseCounter.EXCEPTION_RATE,value:s});}this._lastExceptions=r;}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(false),this._isInitialized=false;},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e;}();ly.exports=ZD;});var fy=l(function(eu){"use strict";Object.defineProperty(eu,"__esModule",{value:true});eu.AggregatedMetricCounter=void 0;var JD=function(){function e(t){this.dimensions=t,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date(),this.lastIntervalExecutionTime=0;}return e;}();eu.AggregatedMetricCounter=JD;});var py=l(function(tu){"use strict";Object.defineProperty(tu,"__esModule",{value:true});tu.PreaggregatedMetricPropertyNames=void 0;tu.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"};});var ap=l(function(ip,dy){"use strict";var nu=ip&&ip.__assign||function(){return nu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;},nu.apply(this,arguments);},ru=kt(),ew=fy(),tw=py(),rw=function(){function e(t,r){r===void 0&&(r=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=false,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=r;}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=true),t?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics();},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0);},e.countException=function(t){if(!!e.isEnabled()){var r=e._getAggregatedCounter(t,this._exceptionCountersCollection);r.totalCount++;}},e.countTrace=function(t){if(!!e.isEnabled()){var r=e._getAggregatedCounter(t,this._traceCountersCollection);r.totalCount++;}},e.countRequest=function(t,r){if(!!e.isEnabled()){var n,i=e._getAggregatedCounter(r,this._requestCountersCollection);if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;i.intervalExecutionTime+=n,i.totalCount++;}},e.countDependency=function(t,r){if(!!e.isEnabled()){var n=e._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof t=="string")i=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")i=t;else return;n.intervalExecutionTime+=i,n.totalCount++;}},e.prototype.isInitialized=function(){return this._isInitialized;},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled;},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics();},e._getAggregatedCounter=function(t,r){for(var n=false,i=0;i<r.length;i++){if(t===r[i].dimensions)return r[i];if(Object.keys(t).length===Object.keys(r[i].dimensions).length){for(var a in t){if(t[a]!=r[i].dimensions[a]){n=true;break;}}if(!n)return r[i];n=false;}}var s=new ew.AggregatedMetricCounter(t);return r.push(s),s;},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var r=e._requestCountersCollection[t];r.time=+new Date();var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,a=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:a,count:n,aggregationInterval:i,metricType:ru.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time;}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var r=e._dependencyCountersCollection[t];r.time=+new Date();var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,a=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:a,count:n,aggregationInterval:i,metricType:ru.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time;}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var r=e._exceptionCountersCollection[t],n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:ru.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time;}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var r=e._traceCountersCollection[t],n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:ru.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time;}},e.prototype._trackPreAggregatedMetric=function(t){var r={};for(var n in t.dimensions){r[tw.PreaggregatedMetricPropertyNames[n]]=t.dimensions[n];}r=nu(nu({},r),{"_MS.MetricId":t.metricType,"_MS.AggregationIntervalMs":String(t.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:t.name,value:t.value,count:t.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i);},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(false),this._isInitialized=false;},e;}();dy.exports=rw;});var Ea=l(function(X1,gy){"use strict";var Ht=require("os"),hy=require("fs"),_y=require("path"),nw=De(),vy=_e(),iw=function(){function e(t){this.keys=new nw.ContextTagKeys(),this.tags={},this._loadApplicationContext(t),this._loadDeviceContext(),this._loadInternalContext();}return e.prototype._loadApplicationContext=function(t){if(t=t||_y.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var r=JSON.parse(hy.readFileSync(t,"utf8"));r&&typeof r.version=="string"&&(e.appVersion[t]=r.version);}catch(n){vy.info("unable to read app version: ",n);}}this.tags[this.keys.applicationVersion]=e.appVersion[t];},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=Ht&&Ht.hostname(),this.tags[this.keys.deviceOSVersion]=Ht&&Ht.type()+" "+Ht.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=Ht&&Ht.arch(),this.tags["ai.device.osPlatform"]=Ht&&Ht.platform();},e.prototype._loadInternalContext=function(){var t=_y.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(hy.readFileSync(t,"utf8"));r&&typeof r.version=="string"&&(e.sdkVersion=r.version);}catch(n){vy.info("unable to read app version: ",n);}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion;},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e;}();gy.exports=iw;});var my=l(function(op,Ey){"use strict";var aw=op&&op.__extends||function(){var _e14=function e(t,r){return _e14=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e14(t,r);};return function(t,r){_e14(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),ut=require("url"),sp=De(),sw=Ue(),ow=jn(),uw=kl(),cw=Fr(),lw=function(e){aw(t,e);function t(r,n){var i=e.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=t._getUrlFromRequestOptions(r,n),i.startTime=+new Date()),i;}return t.prototype.onError=function(r){this._setStatus(void 0,r);},t.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=sw.getCorrelationContextTarget(r,ow.requestContextTargetKey);},t.prototype.getDependencyTelemetry=function(r,n){var i=ut.parse(this.url);i.search=void 0,i.hash=void 0;var a=this.method.toUpperCase()+" "+i.pathname,s=sp.RemoteDependencyDataConstants.TYPE_HTTP,o=i.hostname;i.port&&(o+=":"+i.port),this.correlationId?(s=sp.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==cw.correlationIdPrefix&&(o+=" | "+this.correlationId)):s=sp.RemoteDependencyDataConstants.TYPE_HTTP;var u={id:n,name:a,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:o};if(r&&r.time?u.time=r.time:this.startTime&&(u.time=new Date(this.startTime)),r){for(var c in r){u[c]||(u[c]=r[c]);}if(r.properties)for(var c in r.properties){u.properties[c]=r.properties[c];}}return u;},t._getUrlFromRequestOptions=function(r,n){if(typeof r=="string"){if(r.indexOf("http://")===0||r.indexOf("https://")===0)r=ut.parse(r);else{var i=ut.parse(r);i.host==="443"?r=ut.parse("https://"+r):r=ut.parse("http://"+r);}}else{if(r&&typeof ut.URL=="function"&&r instanceof ut.URL)return ut.format(r);var a=r;r={},a&&Object.keys(a).forEach(function(u){r[u]=a[u];});}if(r.path){var s=ut.parse(r.path);r.pathname=s.pathname,r.search=s.search;}if(r.host&&r.port){var o=ut.parse("http://"+r.host);!o.port&&r.port&&(r.hostname=r.host,delete r.host);}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",ut.format(r);},t;}(uw);Ey.exports=lw;});var yy=l(function(ai){"use strict";var ma=ai&&ai.__assign||function(){return ma=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;},ma.apply(this,arguments);};Object.defineProperty(ai,"__esModule",{value:true});ai.spanToTelemetryContract=void 0;var fw=z(),ke=kt();function up(e){var t=ma({},e);return Object.keys(ke.SpanAttribute).forEach(function(r){delete t[r];}),t;}function pw(e){var t="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",r=Math.round(e._duration[0]*1e3+e._duration[1]/1e6),n=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",i=e.attributes.component?e.attributes.component.toString():"",a=i.toUpperCase()===ke.DependencyTypeName.Http||!!e.attributes[ke.SpanAttribute.HttpUrl],s=i.toLowerCase()===ke.DependencyTypeName.Grpc;if(a){var o=e.attributes[ke.SpanAttribute.HttpMethod]||"GET",u=new URL(e.attributes[ke.SpanAttribute.HttpUrl].toString()),c=e.attributes[ke.SpanAttribute.HttpHost]||u.host,f=e.attributes[ke.SpanAttribute.HttpPort]||u.port||null,p=u.pathname||"/",d=o+" "+p,h=ke.DependencyTypeName.Http,E=f?(c+":"+f).toString():c.toString(),A=u.toString(),j=e.attributes[ke.SpanAttribute.HttpStatusCode]||e.status.code||0,se=j<400;return{id:t,name:d,dependencyTypeName:h,target:E,data:A,success:se,duration:r,url:A,resultCode:String(j),properties:up(e.attributes)};}else if(s){var o=e.attributes[ke.SpanAttribute.GrpcMethod]||"rpc",Ae=e.attributes[ke.SpanAttribute.GrpcService],At=Ae?o+" "+Ae:e.name;return{id:t,duration:r,name:At,target:Ae.toString(),data:Ae.toString()||At,url:Ae.toString()||At,dependencyTypeName:ke.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:e.status.code===0,properties:up(e.attributes)};}else{var tn=e.name,yi=e.links&&e.links.map(function(rn){return{operation_Id:rn.context.traceId,id:rn.context.spanId};});return{id:t,duration:r,name:tn,target:n,data:n||tn,url:n||tn,dependencyTypeName:e.kind===fw.SpanKind.INTERNAL?ke.DependencyTypeName.InProc:i||e.name,resultCode:String(e.status.code||0),success:e.status.code===0,properties:ma(ma({},up(e.attributes)),{"_MS.links":yi||void 0})};}}ai.spanToTelemetryContract=pw;});var Sy=l(function(fr){"use strict";Object.defineProperty(fr,"__esModule",{value:true});fr.enable=fr.subscriber=void 0;var cp=z(),Ty=oe(),Ay=Qi(),dw=yy(),hw=vu(),si=[],_w=function _w(e){var t=e.data,r=dw.spanToTelemetryContract(t),n=t.spanContext(),i=new Ay();i.traceId=n.traceId,i.spanId=n.spanId,i.traceFlag=Ay.formatOpenTelemetryTraceFlags(n.traceFlags),i.parentId=t.parentSpanId?"|"+n.traceId+"."+t.parentSpanId+".":null,hw.AsyncScopeManager.with(t,function(){si.forEach(function(a){t.kind===cp.SpanKind.SERVER?a.trackRequest(r):(t.kind===cp.SpanKind.CLIENT||t.kind===cp.SpanKind.INTERNAL)&&a.trackDependency(r);});});};fr.subscriber=_w;function vw(e,t){e?(si.length===0&&Ty.channel.subscribe("azure-coretracing",fr.subscriber),si.push(t)):(si=si.filter(function(r){return r!=t;}),si.length===0&&Ty.channel.unsubscribe("azure-coretracing",fr.subscriber));}fr.enable=vw;});var Cy=l(function(pr){"use strict";Object.defineProperty(pr,"__esModule",{value:true});pr.enable=pr.subscriber=void 0;var Iy=oe(),oi=[],gw=function gw(e){e.data.event.commandName!=="ismaster"&&oi.forEach(function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"});});};pr.subscriber=gw;function Ew(e,t){e?(oi.length===0&&Iy.channel.subscribe("mongodb",pr.subscriber),oi.push(t)):(oi=oi.filter(function(r){return r!=t;}),oi.length===0&&Iy.channel.unsubscribe("mongodb",pr.subscriber));}pr.enable=Ew;});var Oy=l(function(dr){"use strict";Object.defineProperty(dr,"__esModule",{value:true});dr.enable=dr.subscriber=void 0;var by=oe(),ui=[],mw=function mw(e){ui.forEach(function(t){var r=e.data.query||{},n=r.sql||"Unknown query",i=!e.data.err,a=r._connection||{},s=a.config||{},o=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;t.trackDependency({target:o,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"});});};dr.subscriber=mw;function yw(e,t){e?(ui.length===0&&by.channel.subscribe("mysql",dr.subscriber),ui.push(t)):(ui=ui.filter(function(r){return r!=t;}),ui.length===0&&by.channel.unsubscribe("mysql",dr.subscriber));}dr.enable=yw;});var Ry=l(function(hr){"use strict";Object.defineProperty(hr,"__esModule",{value:true});hr.enable=hr.subscriber=void 0;var Py=oe(),ci=[],Tw=function Tw(e){ci.forEach(function(t){e.data.commandObj.command!=="info"&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"});});};hr.subscriber=Tw;function Aw(e,t){e?(ci.length===0&&Py.channel.subscribe("redis",hr.subscriber),ci.push(t)):(ci=ci.filter(function(r){return r!=t;}),ci.length===0&&Py.channel.unsubscribe("redis",hr.subscriber));}hr.enable=Aw;});var Dy=l(function(_r){"use strict";Object.defineProperty(_r,"__esModule",{value:true});_r.enable=_r.subscriber=void 0;var Ny=oe(),li=[],Sw=function Sw(e){li.forEach(function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!e.data.error,a=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:a,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"});});};_r.subscriber=Sw;function Iw(e,t){e?(li.length===0&&Ny.channel.subscribe("postgres",_r.subscriber),li.push(t)):(li=li.filter(function(r){return r!=t;}),li.length===0&&Ny.channel.unsubscribe("postgres",_r.subscriber));}_r.enable=Iw;});var di=l(function(pp,Ly){"use strict";var iu=pp&&pp.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++){e+=arguments[t].length;}for(var n=Array(e),i=0,t=0;t<r;t++){for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++){n[i]=a[s];}}return n;},fi=require("http"),pi=require("https"),lp=_e(),wy=Ue(),vr=jn(),Cw=my(),xy=Er(),My=Fr(),fp=Qi(),bw=po(),Ow=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;}return e.prototype.enable=function(t){this._isEnabled=t,this._isEnabled&&!this._isInitialized&&this._initialize(),bw.IsInitialized&&(Sy().enable(true,this._client),Cy().enable(t,this._client),Oy().enable(t,this._client),Ry().enable(t,this._client),Dy().enable(t,this._client));},e.prototype.isInitialized=function(){return this._isInitialized;},e.prototype._initialize=function(){var t=this;this._isInitialized=true;var r=fi.request,n=pi.request,i=function i(a,s){var o=!s[e.disableCollectionRequestOption]&&!a[e.alreadyAutoCollectedFlag];s.headers&&s.headers["user-agent"]&&s.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(o=false),a[e.alreadyAutoCollectedFlag]=true,a&&s&&o&&(xy.CorrelationContextManager.wrapEmitter(a),e.trackRequest(t._client,{options:s,request:a}));};fi.request=function(a){for(var s=[],o=1;o<arguments.length;o++){s[o-1]=arguments[o];}var u=r.call.apply(r,iu([fi,a],s));return i(u,a),u;},pi.request=function(a){for(var s=[],o=1;o<arguments.length;o++){s[o-1]=arguments[o];}var u=n.call.apply(n,iu([pi,a],s));return i(u,a),u;},fi.get=function(a){for(var s,o=[],u=1;u<arguments.length;u++){o[u-1]=arguments[u];}var c=(s=fi.request).call.apply(s,iu([fi,a],o));return c.end(),c;},pi.get=function(a){for(var s,o=[],u=1;u<arguments.length;u++){o[u-1]=arguments[u];}var c=(s=pi.request).call.apply(s,iu([pi,a],o));return c.end(),c;};},e.trackRequest=function(t,r){if(!r.options||!r.request||!t){lp.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!t);return;}var n=new Cw(r.options,r.request),i=xy.CorrelationContextManager.getCurrentContext(),a,s;if(i&&i.operation&&i.operation.traceparent&&fp.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),a=i.operation.traceparent.getBackCompatRequestId();else if(My.w3cEnabled){var o=new fp();s=o.toString(),a=o.getBackCompatRequestId();}else a=i&&i.operation&&i.operation.parentId+e.requestNumber++ +".";if(wy.canIncludeCorrelationHeader(t,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&t.config&&t.config.correlationId){var u=r.request.getHeader(vr.requestContextHeader);try{wy.safeIncludeCorrelationHeader(t,r.request,u);}catch(p){lp.warn("Request-Context header could not be set. Correlation of requests may be lost",p);}if(i&&i.operation)try{if(r.request.setHeader(vr.requestIdHeader,a),t.config.ignoreLegacyHeaders||(r.request.setHeader(vr.parentIdHeader,i.operation.id),r.request.setHeader(vr.rootIdHeader,a)),s||i.operation.traceparent)r.request.setHeader(vr.traceparentHeader,s||i.operation.traceparent.toString());else if(My.w3cEnabled){var o=new fp().toString();r.request.setHeader(vr.traceparentHeader,o);}if(i.operation.tracestate){var c=i.operation.tracestate.toString();c&&r.request.setHeader(vr.traceStateHeader,c);}var f=i.customProperties.serializeToHeader();f&&r.request.setHeader(vr.correlationContextHeader,f);}catch(p){lp.warn("Correlation headers could not be set. Correlation of requests may be lost.",p);}}r.request.on&&(r.request.on("response",function(p){n.onResponse(p);var d=n.getDependencyTelemetry(r,a);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects["http.ClientResponse"]=p,t.trackDependency(d);}),r.request.on("error",function(p){n.onError(p);var d=n.getDependencyTelemetry(r,a);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects.Error=p,t.trackDependency(d);}),r.request.on("abort",function(){n.onError(new Error());var p=n.getDependencyTelemetry(r,a);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,t.trackDependency(p);}));},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(false),this._isInitialized=false;},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e;}();Ly.exports=Ow;});var ky=l(function(ej,jy){"use strict";var Pw=require("os"),qy=kt(),Rw=Ue(),Nw=Ea(),Dw=di(),ww="http://169.254.169.254/metadata/instance/compute",xw="api-version=2017-12-01",Mw="format=json",Lw="ENETUNREACH",qw=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=false,this._client=t;}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=true),t?this._handle||(this._handle=setInterval(function(){return n.trackHeartBeat(r,function(){});},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null);},e.prototype.isInitialized=function(){return this._isInitialized;},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled;},e.prototype.trackHeartBeat=function(t,r){var n=this,i=false,a={},s=Nw.sdkVersion;a.sdk=s,a.osType=Pw.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:t&&(this._isVM===void 0?(i=true,this._getAzureComputeMetadata(t,function(){n._isVM&&Object.keys(n._vmData).length>0&&(a.azInst_vmId=n._vmData.vmId||"",a.azInst_subscriptionId=n._vmData.subscriptionId||"",a.azInst_osType=n._vmData.osType||"",n._azInst_vmId=n._vmData.vmId||"",n._azInst_subscriptionId=n._vmData.subscriptionId||"",n._azInst_osType=n._vmData.osType||""),n._client.trackMetric({name:qy.HeartBeatMetricName,value:0,properties:a}),r();})):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),i||(this._client.trackMetric({name:qy.HeartBeatMetricName,value:0,properties:a}),r());},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(false),this._isInitialized=false;},e.prototype._getAzureComputeMetadata=function(t,r){var n,i=this,a=ww+"?"+xw+"&"+Mw,s=(n={method:"GET"},n[Dw.disableCollectionRequestOption]=true,n.headers={Metadata:"True"},n),o=Rw.makeRequest(t,a,s,function(u){if(u.statusCode===200){i._isVM=true;var c="";u.on("data",function(f){c+=f;}),u.on("end",function(){i._vmData=i._isJSON(c)?JSON.parse(c):{},r();});}else r();});o&&(o.on("error",function(u){u&&u.message&&u.message.indexOf(Lw)>-1&&(i._isVM=false),r();}),o.end());},e.prototype._isJSON=function(t){try{return JSON.parse(t)&&!!t;}catch(_unused37){return false;}},e;}();jy.exports=qw;});var hp=l(function(tj,Gy){"use strict";var Hy=require("http"),Uy=require("https"),By=_e(),Fy=Ue(),jw=jn(),dp=Bl(),Ut=Er(),kw=Jo(),Hw=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;}return e.prototype.enable=function(t){this._isEnabled=t,(this._isAutoCorrelating||this._isEnabled||kw.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize());},e.prototype.useAutoCorrelation=function(t,r){t&&!this._isAutoCorrelating?Ut.CorrelationContextManager.enable(r):!t&&this._isAutoCorrelating&&Ut.CorrelationContextManager.disable(),this._isAutoCorrelating=t;},e.prototype.isInitialized=function(){return this._isInitialized;},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating;},e.prototype._generateCorrelationContext=function(t){if(!!this._isAutoCorrelating)return Ut.CorrelationContextManager.generateContextObject(t.getOperationId(this._client.context.tags),t.getRequestId(),t.getOperationName(this._client.context.tags),t.getCorrelationContextHeader(),t.getTraceparent(),t.getTracestate());},e.prototype._initialize=function(){var t=this;this._isInitialized=true;var r=function r(s){if(!!s){if(typeof s!="function")throw new Error("onRequest handler must be a function");return function(o,u){Ut.CorrelationContextManager.wrapEmitter(o),Ut.CorrelationContextManager.wrapEmitter(u);var c=o&&!o[e.alreadyAutoCollectedFlag];if(o&&c){var f=new dp(o),p=t._generateCorrelationContext(f);Ut.CorrelationContextManager.runWithContext(p,function(){t._isEnabled&&(o[e.alreadyAutoCollectedFlag]=true,e.trackRequest(t._client,{request:o,response:u},f)),typeof s=="function"&&s(o,u);});}else typeof s=="function"&&s(o,u);};}},n=function n(s){var o=s.addListener.bind(s);s.addListener=function(u,c){switch(u){case"request":case"checkContinue":return o(u,r(c));default:return o(u,c);}},s.on=s.addListener;},i=Hy.createServer;Hy.createServer=function(s,o){if(o&&typeof o=="function"){var u=i(s,r(o));return n(u),u;}else{var u=i(r(s));return n(u),u;}};var a=Uy.createServer;Uy.createServer=function(s,o){var u=a(s,r(o));return n(u),u;};},e.trackRequestSync=function(t,r){if(!r.request||!r.response||!t){By.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!t);return;}e.addResponseCorrelationIdHeader(t,r.response);var n=Ut.CorrelationContextManager.getCurrentContext(),i=new dp(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(t.context.tags)||n.operation.id,n.operation.name=i.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,r,r.duration,r.error);},e.trackRequest=function(t,r,n){if(!r.request||!r.response||!t){By.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!t);return;}var i=Ut.CorrelationContextManager.getCurrentContext(),a=n||new dp(r.request,i&&i.operation.parentId);Fy.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,r.response),i&&!n&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){e.endRequest(t,a,r,null,null);}),r.request.on&&r.request.on("error",function(s){e.endRequest(t,a,r,null,s);}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";e.endRequest(t,a,r,null,s);});},e.addResponseCorrelationIdHeader=function(t,r){if(t.config&&t.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(jw.requestContextHeader);Fy.safeIncludeCorrelationHeader(t,r,n);}},e.endRequest=function(t,r,n,i,a){a?r.onError(a,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(t.context.tags),n.tagOverrides)for(var o in n.tagOverrides){s.tagOverrides[o]=n.tagOverrides[o];}var u=r.getLegacyRootId();u&&(s.properties.ai_legacyRootId=u),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,t.trackRequest(s);},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(false),this._isInitialized=false,Ut.CorrelationContextManager.disable(),this._isAutoCorrelating=false;},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e;}();Gy.exports=Hw;});var zy=l(function(vp,$y){"use strict";var Je=vp&&vp.__assign||function(){return Je=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;},Je.apply(this,arguments);},_p=require("os"),Jr=De(),Vy=kt(),Uw=Ue(),Bw=_e(),Fw=Uw.w3cTraceId(),Gw=function(){function e(){}return e.createQuickPulseEnvelope=function(t,r,n,i){var a=_p&&typeof _p.hostname=="function"&&_p.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||a,o=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,u={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:t.length>0?t:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:Fw,MachineName:a,Instance:s,RoleName:o};return u;},e.createQuickPulseMetric=function(t){var r;return r={Name:t.name,Value:t.value,Weight:t.count||1},r;},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case Jr.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case Jr.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case Jr.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case Jr.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case Jr.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t);}return null;},e.createQuickPulseEventDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.name,i=Je(Je({},r),{Name:n});return i;},e.createQuickPulseTraceDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.severityLevel||0,i=Je(Je({},r),{Message:t.data.baseData.message,SeverityLevel:Jr.SeverityLevel[n]});return i;},e.createQuickPulseExceptionDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.exceptions,i="",a="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(u){i+=u.assembly+"\n";}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),a=n[0].message,s=n[0].typeName);var o=Je(Je({},r),{Exception:i,ExceptionMessage:a,ExceptionType:s});return o;},e.createQuickPulseRequestDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData,i=Je(Je({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i;},e.createQuickPulseDependencyDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData,i=Je(Je({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i;},e.createQuickPulseDocument=function(t){var r,n,i,a;t.data.baseType?(n=Vy.TelemetryTypeStringToQuickPulseType[t.data.baseType],r=Vy.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):Bw.warn("Document type invalid; not sending live metric document",t.data.baseType),i=t.tags[e.keys.operationId],a=e.aggregateProperties(t);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:a};return s;},e.aggregateProperties=function(t){var r=[],n=t.data.baseData.measurements||{};for(var i in n){if(n.hasOwnProperty(i)){var a=n[i],s={key:i,value:a};r.push(s);}}var o=t.data.baseData.properties||{};for(var i in o){if(o.hasOwnProperty(i)){var a=o[i],s={key:i,value:a};r.push(s);}}return r;},e.keys=new Jr.ContextTagKeys(),e;}();$y.exports=Gw;});var Ky=l(function(rj,Xy){"use strict";var Vw=function Vw(){return(Date.now()+621355968e5)*1e4;};Xy.exports={getTransmissionTime:Vw};});var Jy=l(function(ya,Zy){"use strict";var Yy=ya&&ya.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a);});}return new(r||(r=Promise))(function(a,s){function o(f){try{c(n.next(f));}catch(p){s(p);}}function u(f){try{c(n.throw(f));}catch(p){s(p);}}function c(f){f.done?a(f.value):i(f.value).then(o,u);}c((n=n.apply(e,t||[])).next());});},Qy=ya&&ya.__generator||function(e,t){var r={label:0,sent:function sent(){if(a[0]&1)throw a[1];return a[1];},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this;}),s;function o(c){return function(f){return u([c,f]);};}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;){try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:false};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue;}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break;}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break;}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break;}a[2]&&r.ops.pop(),r.trys.pop();continue;}c=t.call(e,r);}catch(f){c=[6,f],i=0;}finally{n=a=0;}}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true};}},$w=require("https"),zw=di(),Wy=_e(),Xw=Ky(),Kw=Ue(),et={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},Yw=function(){function e(t){this._config=t,this._consecutiveErrors=0;}return e.prototype.ping=function(t,r,n){var i=[{name:et.streamId,value:t.StreamId},{name:et.machineName,value:t.MachineName},{name:et.roleName,value:t.RoleName},{name:et.instanceName,value:t.Instance},{name:et.invariantVersion,value:t.InvariantVersion.toString()}];this._submitData(t,r,n,"ping",i);},e.prototype.post=function(t,r,n){return Yy(this,void 0,void 0,function(){return Qy(this,function(i){switch(i.label){case 0:return[4,this._submitData([t],r,n,"post")];case 1:return i.sent(),[2];}});});},e.prototype._submitData=function(t,r,n,i,a){return Yy(this,void 0,void 0,function(){var s,o,u,c,f,p=this;return Qy(this,function(d){return s=JSON.stringify(t),o=(c={},c[zw.disableCollectionRequestOption]=true,c.host=r&&r.length>0?r:this._config.quickPulseHost,c.method=et.method,c.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,c.headers=(f={Expect:"100-continue"},f[et.time]=Xw.getTransmissionTime(),f["Content-Type"]="application/json",f["Content-Length"]=Buffer.byteLength(s),f),c),a&&a.length>0&&a.forEach(function(h){return o.headers[h.name]=h.value;}),this._config.httpsAgent?o.agent=this._config.httpsAgent:o.agent=Kw.tlsRestrictedAgent,u=$w.request(o,function(h){if(h.statusCode==200){var E=h.headers[et.subscribed]==="true",A=h.headers[et.endpointRedirect]?h.headers[et.endpointRedirect].toString():null,j=h.headers[et.pollingIntervalHint]?parseInt(h.headers[et.pollingIntervalHint].toString()):null;p._consecutiveErrors=0,n(E,h,A,j);}else p._onError("StatusCode:"+h.statusCode+" StatusMessage:"+h.statusMessage),n();}),u.on("error",function(h){p._onError(h),n();}),u.write(s),u.end(),[2];});});},e.prototype._onError=function(t){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN===0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",Wy.warn(e.TAG,r,t)):Wy.info(e.TAG,r,t);},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e;}();Zy.exports=Yw;});var iT=l(function(Ta,nT){"use strict";var eT=Ta&&Ta.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a);});}return new(r||(r=Promise))(function(a,s){function o(f){try{c(n.next(f));}catch(p){s(p);}}function u(f){try{c(n.throw(f));}catch(p){s(p);}}function c(f){f.done?a(f.value):i(f.value).then(o,u);}c((n=n.apply(e,t||[])).next());});},tT=Ta&&Ta.__generator||function(e,t){var r={label:0,sent:function sent(){if(a[0]&1)throw a[1];return a[1];},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this;}),s;function o(c){return function(f){return u([c,f]);};}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;){try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:false};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue;}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break;}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break;}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break;}a[2]&&r.ops.pop(),r.trys.pop();continue;}c=t.call(e,r);}catch(f){c=[6,f],i=0;}finally{n=a=0;}}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true};}},rT=_e(),gp=zy(),Qw=Jy(),Ww=kt(),Zw=Ea(),Jw=function(){function e(t,r){this._isCollectingData=false,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=true,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=t,this.context=r||new Zw(),this._sender=new Qw(this.config),this._isEnabled=false;}return e.prototype.addCollector=function(t){this._collectors.push(t);},e.prototype.trackMetric=function(t){this._addMetric(t);},e.prototype.addDocument=function(t){var r=gp.telemetryEnvelopeToQuickPulseDocument(t);r&&this._documents.push(r);},e.prototype.enable=function(t){t&&!this._isEnabled?(this._isEnabled=true,this._goQuickPulse()):!t&&this._isEnabled&&(this._isEnabled=false,clearTimeout(this._handle),this._handle=void 0);},e.prototype.enableCollectors=function(t){this._collectors.forEach(function(r){r.enable(t);});},e.prototype._addMetric=function(t){var r=t.value,n=t.count||1,i=Ww.PerformanceToQuickPulseCounter[t.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=gp.createQuickPulseMetric(t),this._metrics[i].Name=i,this._metrics[i].Weight=1));},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0;},e.prototype._goQuickPulse=function(){return eT(this,void 0,void 0,function(){var t,r,n,i,a=this;return tT(this,function(s){switch(s.label){case 0:return t=Object.keys(this._metrics).map(function(o){return a._metrics[o];}),r=gp.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,i=this._isCollectingData?e.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=false,i=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2];}});});},e.prototype._ping=function(t){this._sender.ping(t,this._redirectedHost,this._quickPulseDone.bind(this));},e.prototype._post=function(t){return eT(this,void 0,void 0,function(){return tT(this,function(r){switch(r.label){case 0:return[4,this._sender.post(t,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2];}});});},e.prototype._quickPulseDone=function(t,r,n,i){t!=null?(this._isCollectingData!==t&&(rT.info("Live Metrics sending data",t),this.enableCollectors(t)),this._isCollectingData=t,n&&n.length>0&&(this._redirectedHost=n,rT.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=true):this._lastSendSucceeded=false):this._lastSendSucceeded=false;},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e;}();nT.exports=Jw;});var oT=l(function(nj,sT){"use strict";var aT=kt(),ex=function(){function e(){}return e.parse=function(t){if(!t)return{};var r=t.split(e._FIELDS_SEPARATOR),n=r.reduce(function(a,s){var o=s.split(e._FIELD_KEY_VALUE_SEPARATOR);if(o.length===2){var u=o[0].toLowerCase(),c=o[1];a[u]=c;}return a;},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix;}n.ingestionendpoint=n.ingestionendpoint||aT.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||aT.DEFAULT_LIVEMETRICS_ENDPOINT;}return n;},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e;}();sT.exports=ex;});var mp=l(function(aj,lT){"use strict";var Ep=Fr(),uT=oT(),ij=_e(),cT=kt(),tx=require("url"),rx=function(){function e(t){var r=this;this.endpointBase=cT.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],i=uT.parse(t),a=uT.parse(n),s=!i.instrumentationkey&&Object.keys(i).length>0?null:t;this.instrumentationKey=i.instrumentationkey||s||a.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(i.ingestionendpoint||a.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=false,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(o){return r.correlationId=o;},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=i.ingestionendpoint||a.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=i.liveendpoint||a.liveendpoint||process.env[e.ENV_quickPulseHost]||cT.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=tx.parse(this._quickPulseHost).host);}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function get(){return this._profileQueryEndpoint;},set:function set(t){Ep.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=t,this.correlationId=Ep.correlationIdPrefix,Ep.queryCorrelationId(this,this.setCorrelationId);},enumerable:false,configurable:true}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function get(){return this._quickPulseHost;},set:function set(t){this._quickPulseHost=t;},enumerable:false,configurable:true}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||t=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t;},e._validateInstrumentationKey=function(t){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(t);},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e;}();lT.exports=rx;});var pT=l(function(hi){"use strict";var au=hi&&hi.__assign||function(){return au=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;},au.apply(this,arguments);};Object.defineProperty(hi,"__esModule",{value:true});hi.AutoCollectNativePerformance=void 0;var fT=mp(),Aa=Ea(),nx=_e(),ix=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t;}return e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>=6;},e.prototype.enable=function(t,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),!!e.isNodeVersionCompatible()){if(e._metricsAvailable==null&&t&&!this._isInitialized)try{var a=require("applicationinsights-native-metrics");e._emitter=new a(),e._metricsAvailable=true,nx.info("Native metrics module successfully loaded!");}catch(_unused38){e._metricsAvailable=false;return;}this._isEnabled=t,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=true),this._isEnabled&&e._emitter?(e._emitter.enable(true,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics();},n),this._handle.unref())):e._emitter&&(e._emitter.enable(false),this._handle&&(clearInterval(this._handle),this._handle=void 0));}},e.prototype.dispose=function(){this.enable(false);},e.parseEnabled=function(t){var r=process.env[fT.ENV_nativeMetricsDisableAll],n=process.env[fT.ENV_nativeMetricsDisablers];if(r)return{isEnabled:false,disabledMetrics:{}};if(n){var i=n.split(","),a={};if(i.length>0)for(var s=0,o=i;s<o.length;s++){var u=o[s];a[u]=true;}return _typeof(t)=="object"?{isEnabled:true,disabledMetrics:au(au({},t),a)}:{isEnabled:t,disabledMetrics:a};}return typeof t=="boolean"?{isEnabled:t,disabledMetrics:{}}:{isEnabled:true,disabledMetrics:t};},e.prototype._trackNativeMetrics=function(){var t=true;_typeof(this._isEnabled)!="object"&&(t=this._isEnabled),t&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage());},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var r=e._emitter.getGCData();for(var n in r){var i=r[n].metrics,a=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:a,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Aa.sdkVersion,t)});}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var r=e._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",a=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Aa.sdkVersion,t)});}}},e.prototype._trackHeapUsage=function(){var t,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),a=i.heapUsed,s=i.heapTotal,o=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:a,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Aa.sdkVersion,t)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Aa.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:o-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Aa.sdkVersion,n)});}},e;}();hi.AutoCollectNativePerformance=ix;});var hT=l(function(oj,dT){"use strict";var ax=_e(),sx=function(){function e(t,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=t,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i;}return e.prototype.setUseDiskRetryCaching=function(t,r,n){this._sender.setDiskRetryMode(t,r,n);},e.prototype.send=function(t){var r=this;if(!this._isDisabled()){if(!t){ax.warn("Cannot send null/undefined telemetry");return;}if(this._buffer.push(t),this._buffer.length>=this._getBatchSize()){this.triggerSend(false);return;}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(false);},this._getBatchIntervalMs()));}},e.prototype.triggerSend=function(t,r){var n=this._buffer.length<1;n||(t?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date(),this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send");},e;}();dT.exports=sx;});var _T=l(function(su){"use strict";Object.defineProperty(su,"__esModule",{value:true});su.azureRoleEnvironmentTelemetryProcessor=void 0;function ox(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME);}su.azureRoleEnvironmentTelemetryProcessor=ox;});var ET=l(function(_i){"use strict";Object.defineProperty(_i,"__esModule",{value:true});_i.getSamplingHashCode=_i.samplingTelemetryProcessor=void 0;var vT=De();function ux(e,t){var r=e.sampleRate,n=false;return r==null||r>=100||e.data&&vT.TelemetryType.Metric===vT.baseTypeToTelemetryType(e.data.baseType)?true:(t.correlationContext&&t.correlationContext.operation?n=gT(t.correlationContext.operation.id)<r:n=Math.random()*100<r,n);}_i.samplingTelemetryProcessor=ux;function gT(e){var t=-2147483648,r=2147483647,n=5381;if(!e)return 0;for(;e.length<8;){e=e+e;}for(var i=0;i<e.length;i++){n=((n<<5)+n|0)+e.charCodeAt(i)|0;}return n=n<=t?r:Math.abs(n),n/r*100;}_i.getSamplingHashCode=gT;});var mT=l(function(ou){"use strict";Object.defineProperty(ou,"__esModule",{value:true});ou.performanceMetricsTelemetryProcessor=void 0;var yp=Jo(),Tp=De();function cx(e,t){switch(t&&t.addDocument(e),e.data.baseType){case Tp.TelemetryTypeString.Exception:yp.countException();break;case Tp.TelemetryTypeString.Request:var r=e.data.baseData;yp.countRequest(r.duration,r.success);break;case Tp.TelemetryTypeString.Dependency:var n=e.data.baseData;yp.countDependency(n.duration,n.success);break;}return true;}ou.performanceMetricsTelemetryProcessor=cx;});var yT=l(function(vi){"use strict";var mt=vi&&vi.__assign||function(){return mt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}}return e;},mt.apply(this,arguments);};Object.defineProperty(vi,"__esModule",{value:true});vi.preAggregatedMetricsTelemetryProcessor=void 0;var lx=De(),Sa=ap(),uu=De();function fx(e,t){if(Sa.isEnabled())switch(e.data.baseType){case uu.TelemetryTypeString.Exception:var r=e.data.baseData;r.properties=mt(mt({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole]};Sa.countException(n);break;case uu.TelemetryTypeString.Trace:var i=e.data.baseData;i.properties=mt(mt({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],traceSeverityLevel:lx.SeverityLevel[i.severity]};Sa.countTrace(a);break;case uu.TelemetryTypeString.Request:var s=e.data.baseData;s.properties=mt(mt({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var o={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};Sa.countRequest(s.duration,o);break;case uu.TelemetryTypeString.Dependency:var u=e.data.baseData;u.properties=mt(mt({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var c={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],dependencySuccess:u.success,dependencyType:u.type,dependencyTarget:u.target,dependencyResultCode:u.resultCode};Sa.countDependency(u.duration,c);break;}return true;}vi.preAggregatedMetricsTelemetryProcessor=fx;});var TT=l(function(yt){"use strict";var px=yt&&yt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:true,get:function get(){return t[r];}});}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),cu=yt&&yt.__exportStar||function(e,t){for(var r in e){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&px(t,e,r);}};Object.defineProperty(yt,"__esModule",{value:true});cu(_T(),yt);cu(ET(),yt);cu(mT(),yt);cu(yT(),yt);});var IT=l(function(Ia,ST){"use strict";var dx=Ia&&Ia.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a);});}return new(r||(r=Promise))(function(a,s){function o(f){try{c(n.next(f));}catch(p){s(p);}}function u(f){try{c(n.throw(f));}catch(p){s(p);}}function c(f){f.done?a(f.value):i(f.value).then(o,u);}c((n=n.apply(e,t||[])).next());});},hx=Ia&&Ia.__generator||function(e,t){var r={label:0,sent:function sent(){if(a[0]&1)throw a[1];return a[1];},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this;}),s;function o(c){return function(f){return u([c,f]);};}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;){try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:false};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue;}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break;}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break;}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break;}a[2]&&r.ops.pop(),r.trys.pop();continue;}c=t.call(e,r);}catch(f){c=[6,f],i=0;}finally{n=a=0;}}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true};}},ge=require("fs"),AT=require("os"),Bt=require("path"),_x=require("zlib"),gi=require("child_process"),Ee=_e(),vx=di(),lu=Ue(),gx=function(){function e(t,r,n){if(this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=false,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=Bt.join(AT.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=ge.existsSync(e.ICACLS_PATH);}catch(_unused39){}e.OS_PROVIDES_FILE_PROTECTION||Ee.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.");}else e.OS_PROVIDES_FILE_PROTECTION=true;}return e.prototype.setDiskRetryMode=function(t,r,n){var i=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=false,Ee.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask();},e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer);},e.prototype.send=function(t,r){return dx(this,void 0,void 0,function(){var n,i,a,s,o=this;return hx(this,function(u){return t&&(n=this._redirectedHost||this._config.endpointUrl,i={method:"POST",withCredentials:false,headers:{"Content-Type":"application/x-json-stream"}},a="",t.forEach(function(c){var f=o._stringify(c);typeof f=="string"&&(a+=f+"\n");}),a.length>0&&(a=a.substring(0,a.length-1)),s=Buffer.from?Buffer.from(a):new Buffer(a),_x.gzip(s,function(c,f){var p=f;c?(Ee.warn(c),p=s,i.headers["Content-Length"]=s.length.toString()):(i.headers["Content-Encoding"]="gzip",i.headers["Content-Length"]=f.length.toString()),Ee.info(e.TAG,i),i[vx.disableCollectionRequestOption]=true;var d=function d(E){E.setEncoding("utf-8");var A="";E.on("data",function(j){A+=j;}),E.on("end",function(){if(o._numConsecutiveFailures=0,o._enableDiskRetryMode){if(E.statusCode===200)o._resendTimer||(o._resendTimer=setTimeout(function(){o._resendTimer=null,o._sendFirstFileOnDisk();},o._resendInterval),o._resendTimer.unref());else if(o._isRetriable(E.statusCode))try{var j=JSON.parse(A),se=[];j.errors.forEach(function(At){o._isRetriable(At.statusCode)&&se.push(t[At.index]);}),se.length>0&&o._storeToDisk(se);}catch(_unused40){o._storeToDisk(t);}}if(E.statusCode===307||E.statusCode===308){if(o._numConsecutiveRedirects++,o._numConsecutiveRedirects<10){var Ae=E.headers.location?E.headers.location.toString():null;Ae&&(o._redirectedHost=Ae,o.send(t,r));}else typeof r=="function"&&r("Error sending telemetry because of circular redirects.");}else o._numConsecutiveRedirects=0,typeof r=="function"&&r(A),Ee.info(e.TAG,A),typeof o._onSuccess=="function"&&o._onSuccess(A);});},h=lu.makeRequest(o._config,n,i,d);h.on("error",function(E){if(o._numConsecutiveFailures++,!o._enableDiskRetryMode||o._numConsecutiveFailures>0&&o._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var A="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";o._enableDiskRetryMode&&(A="Ingestion endpoint could not be reached "+o._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),Ee.warn(e.TAG,A,lu.dumpObj(E));}else{var A="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";Ee.info(e.TAG,A,lu.dumpObj(E));}o._onErrorHelper(E),typeof r=="function"&&(E&&r(lu.dumpObj(E)),r("Error sending telemetry")),o._enableDiskRetryMode&&o._storeToDisk(t);}),h.write(p),h.end();})),[2];});});},e.prototype.saveOnCrash=function(t){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(t));},e.prototype._isRetriable=function(t){return t===206||t===408||t===429||t===439||t===500||t===503;},e.prototype._runICACLS=function(t,r){var n=gi.spawn(e.ICACLS_PATH,t,{windowsHide:true});n.on("error",function(i){return r(i);}),n.on("close",function(i,a){return r(i===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+i+")"));});},e.prototype._runICACLSSync=function(t){if(gi.spawnSync){var r=gi.spawnSync(e.ICACLS_PATH,t,{windowsHide:true});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")");}else throw new Error("Could not synchronously call ICACLS under current version of Node.js");},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var r=gi.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:true,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",function(i){return n+=i;}),r.on("error",function(i){return t(i,null);}),r.on("close",function(i,a){return e.ACL_IDENTITY=n&&n.trim(),t(i===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+i+")"),e.ACL_IDENTITY);});},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(gi.spawnSync){var t=gi.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:true,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(t.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY;}else throw new Error("Could not synchronously get ACL identity under current version of Node.js");},e.prototype._getACLArguments=function(t,r){return[t,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"];},e.prototype._applyACLRules=function(t,r){var n=this;if(!e.USE_ICACLS)return r(null);if(e.ACLED_DIRECTORIES[t]===void 0)e.ACLED_DIRECTORIES[t]=false,this._getACLIdentity(function(i,a){if(i)return e.ACLED_DIRECTORIES[t]=false,r(i);n._runICACLS(n._getACLArguments(t,a),function(s){return e.ACLED_DIRECTORIES[t]=!s,r(s);});});else return r(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)"));},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(e.ACLED_DIRECTORIES[t]===void 0){this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),e.ACLED_DIRECTORIES[t]=true;return;}else if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)");}},e.prototype._confirmDirExists=function(t,r){var n=this;ge.lstat(t,function(i,a){i&&i.code==="ENOENT"?ge.mkdir(t,function(s){s&&s.code!=="EEXIST"?r(s):n._applyACLRules(t,r);}):!i&&a.isDirectory()?n._applyACLRules(t,r):r(i||new Error("Path existed but was not a directory"));});},e.prototype._getShallowDirectorySize=function(t,r){ge.readdir(t,function(n,i){if(n)return r(n,-1);var a=null,s=0,o=0;if(i.length===0){r(null,0);return;}for(var u=0;u<i.length;u++){ge.stat(Bt.join(t,i[u]),function(c,f){o++,c?a=c:f.isFile()&&(s+=f.size),o===i.length&&(a?r(a,-1):r(a,s));});}});},e.prototype._getShallowDirectorySizeSync=function(t){for(var r=ge.readdirSync(t),n=0,i=0;i<r.length;i++){n+=ge.statSync(Bt.join(t,r[i])).size;}return n;},e.prototype._storeToDisk=function(t){var r=this;Ee.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(n){if(n){Ee.warn(e.TAG,"Error while checking/creating directory: "+(n&&n.message)),r._onErrorHelper(n);return;}r._getShallowDirectorySize(r._tempDir,function(i,a){if(i||a<0){Ee.warn(e.TAG,"Error while checking directory size: "+(i&&i.message)),r._onErrorHelper(i);return;}else if(a>r._maxBytesOnDisk){Ee.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+a);return;}var s=new Date().getTime()+".ai.json",o=Bt.join(r._tempDir,s);Ee.info(e.TAG,"saving data to disk at: "+o),ge.writeFile(o,r._stringify(t),{mode:384},function(u){return r._onErrorHelper(u);});});});},e.prototype._storeToDiskSync=function(t){try{Ee.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),ge.existsSync(this._tempDir)||ge.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var r=this._getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){Ee.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+r);return;}var n=new Date().getTime()+".ai.json",i=Bt.join(this._tempDir,n);Ee.info(e.TAG,"saving data before crash to disk at: "+i),ge.writeFileSync(i,t,{mode:384});}catch(a){Ee.warn(e.TAG,"Error while saving data to disk: "+(a&&a.message)),this._onErrorHelper(a);}},e.prototype._sendFirstFileOnDisk=function(){var t=this;ge.exists(this._tempDir,function(r){r&&ge.readdir(t._tempDir,function(n,i){if(n)t._onErrorHelper(n);else if(i=i.filter(function(o){return Bt.basename(o).indexOf(".ai.json")>-1;}),i.length>0){var a=i[0],s=Bt.join(t._tempDir,a);ge.readFile(s,function(o,u){o?t._onErrorHelper(o):ge.unlink(s,function(c){if(c)t._onErrorHelper(c);else try{var f=JSON.parse(u.toString());t.send(f);}catch(p){Ee.warn("Failed to read persisted file",p);}});});}});});},e.prototype._onErrorHelper=function(t){typeof this._onError=="function"&&this._onError(t);},e.prototype._stringify=function(t){try{return JSON.stringify(t);}catch(r){Ee.warn("Failed to serialize payload",r,t);}},e.prototype._fileCleanupTask=function(){var t=this;ge.exists(this._tempDir,function(r){r&&ge.readdir(t._tempDir,function(n,i){n?t._onErrorHelper(n):(i=i.filter(function(a){return Bt.basename(a).indexOf(".ai.json")>-1;}),i.length>0&&i.forEach(function(a){var s=new Date(parseInt(a.split(".ai.json")[0])),o=new Date(+new Date()-e.FILE_RETEMPTION_PERIOD)>s;if(o){var u=Bt.join(t._tempDir,a);ge.unlink(u,function(c){c&&t._onErrorHelper(c);});}}));});});},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=60*1e3,e.MAX_BYTES_ON_DISK=50*1024*1024,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=60*60*1e3,e.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=false,e.USE_ICACLS=AT.type()==="Windows_NT",e;}();ST.exports=gx;});var OT=l(function(dj,bT){"use strict";var S=De(),tt=Ue(),Ex=Er(),mx=function(){function e(){}return e.createEnvelope=function(t,r,n,i,a){var s=null;switch(r){case S.TelemetryType.Trace:s=e.createTraceData(t);break;case S.TelemetryType.Dependency:s=e.createDependencyData(t);break;case S.TelemetryType.Event:s=e.createEventData(t);break;case S.TelemetryType.Exception:s=e.createExceptionData(t);break;case S.TelemetryType.Request:s=e.createRequestData(t);break;case S.TelemetryType.Metric:s=e.createMetricData(t);break;case S.TelemetryType.Availability:s=e.createAvailabilityData(t);break;case S.TelemetryType.PageView:s=e.createPageViewData(t);break;}if(n&&S.domainSupportsProperties(s.baseData)){if(s&&s.baseData)if(!s.baseData.properties)s.baseData.properties=n;else for(var o in n){s.baseData.properties[o]||(s.baseData.properties[o]=n[o]);}s.baseData.properties=tt.validateStringMap(s.baseData.properties);}var u=a&&a.instrumentationKey||"",c=new S.Envelope();return c.data=s,c.iKey=u,c.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),c.tags=this.getTags(i,t.tagOverrides),c.time=new Date().toISOString(),c.ver=1,c.sampleRate=a?a.samplingPercentage:100,r===S.TelemetryType.Metric&&(c.sampleRate=100),c;},e.createTraceData=function(t){var r=new S.MessageData();r.message=t.message,r.properties=t.properties,isNaN(t.severity)?r.severityLevel=S.SeverityLevel.Information:r.severityLevel=t.severity;var n=new S.Data();return n.baseType=S.telemetryTypeToBaseType(S.TelemetryType.Trace),n.baseData=r,n;},e.createDependencyData=function(t){var r=new S.RemoteDependencyData();typeof t.name=="string"&&(r.name=t.name.length>1024?t.name.slice(0,1021)+"...":t.name),r.data=t.data,r.target=t.target,r.duration=tt.msToTimeSpan(t.duration),r.success=t.success,r.type=t.dependencyTypeName,r.properties=t.properties,r.resultCode=t.resultCode?t.resultCode+"":"",t.id?r.id=t.id:r.id=tt.w3cTraceId();var n=new S.Data();return n.baseType=S.telemetryTypeToBaseType(S.TelemetryType.Dependency),n.baseData=r,n;},e.createEventData=function(t){var r=new S.EventData();r.name=t.name,r.properties=t.properties,r.measurements=t.measurements;var n=new S.Data();return n.baseType=S.telemetryTypeToBaseType(S.TelemetryType.Event),n.baseData=r,n;},e.createExceptionData=function(t){var r=new S.ExceptionData();r.properties=t.properties,isNaN(t.severity)?r.severityLevel=S.SeverityLevel.Error:r.severityLevel=t.severity,r.measurements=t.measurements,r.exceptions=[];var n=t.exception.stack,i=new S.ExceptionDetails();i.message=t.exception.message,i.typeName=t.exception.name,i.parsedStack=this.parseStack(n),i.hasFullStack=tt.isArray(i.parsedStack)&&i.parsedStack.length>0,r.exceptions.push(i);var a=new S.Data();return a.baseType=S.telemetryTypeToBaseType(S.TelemetryType.Exception),a.baseData=r,a;},e.createRequestData=function(t){var r=new S.RequestData();t.id?r.id=t.id:r.id=tt.w3cTraceId(),r.name=t.name,r.url=t.url,r.source=t.source,r.duration=tt.msToTimeSpan(t.duration),r.responseCode=t.resultCode?t.resultCode+"":"",r.success=t.success,r.properties=t.properties;var n=new S.Data();return n.baseType=S.telemetryTypeToBaseType(S.TelemetryType.Request),n.baseData=r,n;},e.createMetricData=function(t){var r=new S.MetricData();r.metrics=[];var n=new S.DataPoint();n.count=isNaN(t.count)?1:t.count,n.kind=S.DataPointType.Aggregation,n.max=isNaN(t.max)?t.value:t.max,n.min=isNaN(t.min)?t.value:t.min,n.name=t.name,n.stdDev=isNaN(t.stdDev)?0:t.stdDev,n.value=t.value,r.metrics.push(n),r.properties=t.properties;var i=new S.Data();return i.baseType=S.telemetryTypeToBaseType(S.TelemetryType.Metric),i.baseData=r,i;},e.createAvailabilityData=function(t){var r=new S.AvailabilityData();t.id?r.id=t.id:r.id=tt.w3cTraceId(),r.name=t.name,r.duration=tt.msToTimeSpan(t.duration),r.success=t.success,r.runLocation=t.runLocation,r.message=t.message,r.measurements=t.measurements,r.properties=t.properties;var n=new S.Data();return n.baseType=S.telemetryTypeToBaseType(S.TelemetryType.Availability),n.baseData=r,n;},e.createPageViewData=function(t){var r=new S.PageViewData();r.name=t.name,r.duration=tt.msToTimeSpan(t.duration),r.url=t.url,r.measurements=t.measurements,r.properties=t.properties;var n=new S.Data();return n.baseType=S.telemetryTypeToBaseType(S.TelemetryType.PageView),n.baseData=r,n;},e.getTags=function(t,r){var n=Ex.CorrelationContextManager.getCurrentContext(),i={};if(t&&t.tags)for(var a in t.tags){i[a]=t.tags[a];}if(r)for(var a in r){i[a]=r[a];}return n&&(i[t.keys.operationId]=i[t.keys.operationId]||n.operation.id,i[t.keys.operationName]=i[t.keys.operationName]||n.operation.name,i[t.keys.operationParentId]=i[t.keys.operationParentId]||n.operation.parentId),i;},e.parseStack=function(t){var r=void 0;if(typeof t=="string"){var n=t.split("\n");r=[];for(var i=0,a=0,s=0;s<=n.length;s++){var o=n[s];if(CT.regex.test(o)){var u=new CT(n[s],i++);a+=u.sizeInBytes,r.push(u);}}var c=32*1024;if(a>c)for(var f=0,p=r.length-1,d=0,h=f,E=p;f<p;){var A=r[f].sizeInBytes,j=r[p].sizeInBytes;if(d+=A+j,d>c){var se=E-h+1;r.splice(h,se);break;}h=f,E=p,f++,p--;}}return r;},e;}(),CT=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=tt.trim(t);var n=t.match(e.regex);n&&n.length>=5&&(this.method=tt.trim(n[2])||this.method,this.fileName=tt.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length;}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e;}();bT.exports=mx;});var DT=l(function(hj,NT){"use strict";var yx=require("url"),Tx=mp(),Ax=Ea(),Ft=De(),Sx=hT(),fu=TT(),PT=Er(),Ix=IT(),Ap=Ue(),RT=_e(),Cx=OT(),bx=function(){function e(t){this._telemetryProcessors=[],this._enableAzureProperties=false;var r=new Tx(t);this.config=r,this.context=new Ax(),this.commonProperties={};var n=new Ix(this.config);this.channel=new Sx(function(){return r.disableAppInsights;},function(){return r.maxBatchSize;},function(){return r.maxBatchIntervalMs;},n);}return e.prototype.trackAvailability=function(t){this.track(t,Ft.TelemetryType.Availability);},e.prototype.trackPageView=function(t){this.track(t,Ft.TelemetryType.PageView);},e.prototype.trackTrace=function(t){this.track(t,Ft.TelemetryType.Trace);},e.prototype.trackMetric=function(t){this.track(t,Ft.TelemetryType.Metric);},e.prototype.trackException=function(t){t&&t.exception&&!Ap.isError(t.exception)&&(t.exception=new Error(t.exception.toString())),this.track(t,Ft.TelemetryType.Exception);},e.prototype.trackEvent=function(t){this.track(t,Ft.TelemetryType.Event);},e.prototype.trackRequest=function(t){this.track(t,Ft.TelemetryType.Request);},e.prototype.trackDependency=function(t){t&&!t.target&&t.data&&(t.target=yx.parse(t.data).host),this.track(t,Ft.TelemetryType.Dependency);},e.prototype.flush=function(t){this.channel.triggerSend(t?!!t.isAppCrashing:false,t?t.callback:void 0);},e.prototype.track=function(t,r){if(t&&Ft.telemetryTypeToBaseType(r)){var n=Cx.createEnvelope(t,r,this.commonProperties,this.context,this.config);t.time&&(n.time=t.time.toISOString()),this._enableAzureProperties&&fu.azureRoleEnvironmentTelemetryProcessor(n,this.context);var i=this.runTelemetryProcessors(n,t.contextObjects);i=i&&fu.samplingTelemetryProcessor(n,{correlationContext:PT.CorrelationContextManager.getCurrentContext()}),fu.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(fu.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n));}else RT.warn("track() requires telemetry object and telemetryType to be specified.");},e.prototype.setAutoPopulateAzureProperties=function(t){this._enableAzureProperties=t;},e.prototype.addTelemetryProcessor=function(t){this._telemetryProcessors.push(t);},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[];},e.prototype.runTelemetryProcessors=function(t,r){var n=true,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=PT.CorrelationContextManager.getCurrentContext();for(var a=0;a<i;++a){try{var s=this._telemetryProcessors[a];if(s&&s.apply(null,[t,r])===false){n=false;break;}}catch(o){n=true,RT.warn("One of telemetry processors failed, telemetry item will be sent.",o,t);}}return n&&(t&&t.tags&&(t.tags=Ap.validateStringMap(t.tags)),t&&t.data&&t.data.baseData&&t.data.baseData.properties&&(t.data.baseData.properties=Ap.validateStringMap(t.data.baseData.properties))),n;},e;}();NT.exports=bx;});var MT=l(function(Sp,xT){"use strict";var Ox=Sp&&Sp.__extends||function(){var _e15=function e(t,r){return _e15=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i;}||function(n,i){for(var a in i){Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);}},_e15(t,r);};return function(t,r){_e15(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n());};}(),Px=DT(),wT=hp(),Rx=di(),pu=_e(),Nx=function(e){Ox(t,e);function t(){return e!==null&&e.apply(this,arguments)||this;}return t.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?wT.trackRequestSync(this,r):pu.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.");},t.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&pu.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?wT.trackRequest(this,r):pu.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.");},t.prototype.trackNodeHttpDependency=function(r){r&&r.request?Rx.trackRequest(this,r):pu.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.");},t;}(Px);xT.exports=Nx;});var qT=l(function(LT){"use strict";Object.defineProperty(LT,"__esModule",{value:true});});var nA=l(function(m){"use strict";Object.defineProperty(m,"__esModule",{value:true});m.dispose=m.Configuration=m.wrapWithCorrelationContext=m.startOperation=m.getCorrelationContext=m.start=m.setup=m.liveMetricsClient=m.defaultClient=m.DistributedTracingModes=void 0;var Ip=Er(),Dx=oy(),wx=cy(),kT=Jo(),xx=ap(),Mx=ky(),Lx=di(),qx=hp(),HT=Fr(),Ca=_e(),jx=iT(),UT=pT();m.TelemetryClient=MT();m.Contracts=De();m.azureFunctionsTypes=qT();var BT;(function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C";})(BT=m.DistributedTracingModes||(m.DistributedTracingModes={}));var FT=true,GT=false,VT=true,$T=true,zT=true,XT=false,KT=true,YT=true,QT=true,Cp=true,WT,du=false,ZT=true,JT,eA=void 0,tA=void 0,ba,Oa,Pa,Ra,Na,Ei,en,Da,Tt=false,jT;function kx(e){return m.defaultClient?Ca.info("The default client is already setup"):(m.defaultClient=new m.TelemetryClient(e),ba=new Dx(m.defaultClient),Oa=new wx(m.defaultClient),Pa=new kT(m.defaultClient),Ra=new xx(m.defaultClient),Na=new Mx(m.defaultClient),en=new qx(m.defaultClient),Da=new Lx(m.defaultClient),Ei||(Ei=new UT.AutoCollectNativePerformance(m.defaultClient))),m.defaultClient&&m.defaultClient.channel&&m.defaultClient.channel.setUseDiskRetryCaching(QT,eA,tA),bp;}m.setup=kx;function rA(){return m.defaultClient?(Tt=true,ba.enable(FT,GT),Oa.enable(VT),Pa.enable($T),Ra.enable(zT),Na.enable(XT,m.defaultClient.config),Ei.enable(ZT,JT),en.useAutoCorrelation(Cp,WT),en.enable(KT),Da.enable(YT),m.liveMetricsClient&&du&&m.liveMetricsClient.enable(du)):Ca.warn("Start cannot be called before setup"),bp;}m.start=rA;function Hx(){return Cp?Ip.CorrelationContextManager.getCurrentContext():null;}m.getCorrelationContext=Hx;function Ux(e,t){return Ip.CorrelationContextManager.startOperation(e,t);}m.startOperation=Ux;function Bx(e,t){return Ip.CorrelationContextManager.wrapCallback(e,t);}m.wrapWithCorrelationContext=Bx;var bp=function(){function e(){}return e.setDistributedTracingMode=function(t){return HT.w3cEnabled=t===BT.AI_AND_W3C,e;},e.setAutoCollectConsole=function(t,r){return r===void 0&&(r=false),FT=t,GT=r,Tt&&ba.enable(t,r),e;},e.setAutoCollectExceptions=function(t){return VT=t,Tt&&Oa.enable(t),e;},e.setAutoCollectPerformance=function(t,r){r===void 0&&(r=true),$T=t;var n=UT.AutoCollectNativePerformance.parseEnabled(r);return ZT=n.isEnabled,JT=n.disabledMetrics,Tt&&(Pa.enable(t),Ei.enable(n.isEnabled,n.disabledMetrics)),e;},e.setAutoCollectPreAggregatedMetrics=function(t){return zT=t,Tt&&Ra.enable(t),e;},e.setAutoCollectHeartbeat=function(t){return XT=t,Tt&&Na.enable(t,m.defaultClient.config),e;},e.setAutoCollectRequests=function(t){return KT=t,Tt&&en.enable(t),e;},e.setAutoCollectDependencies=function(t){return YT=t,Tt&&Da.enable(t),e;},e.setAutoDependencyCorrelation=function(t,r){return Cp=t,WT=r,Tt&&en.useAutoCorrelation(t,r),e;},e.setUseDiskRetryCaching=function(t,r,n){return QT=t,eA=r,tA=n,m.defaultClient&&m.defaultClient.channel&&m.defaultClient.channel.setUseDiskRetryCaching(t,r,n),e;},e.setInternalLogging=function(t,r){return t===void 0&&(t=false),r===void 0&&(r=true),Ca.enableDebug=t,Ca.disableWarnings=!r,e;},e.setSendLiveMetrics=function(t){return t===void 0&&(t=false),m.defaultClient?(!m.liveMetricsClient&&t?(m.liveMetricsClient=new jx(m.defaultClient.config,null),jT=new kT(m.liveMetricsClient,1e3,true),m.liveMetricsClient.addCollector(jT),m.defaultClient.quickPulseClient=m.liveMetricsClient):m.liveMetricsClient&&m.liveMetricsClient.enable(t),du=t,e):(Ca.warn("Live metrics client cannot be setup without the default client"),e);},e.start=rA,e;}();m.Configuration=bp;function Fx(){HT.w3cEnabled=true,m.defaultClient=null,Tt=false,ba&&ba.dispose(),Oa&&Oa.dispose(),Pa&&Pa.dispose(),Ra&&Ra.dispose(),Na&&Na.dispose(),Ei&&Ei.dispose(),en&&en.dispose(),Da&&Da.dispose(),m.liveMetricsClient&&(m.liveMetricsClient.enable(false),du=false,m.liveMetricsClient=void 0);}m.dispose=Fx;});var zx={};hA(zx,{default:function _default(){return hu;}});module2.exports=_A(zx);var mi=nn(require("os"));var Gt=nn(require("vscode"));var iA=nn(require("https"));var Se=/*#__PURE__*/function(){function Se(t){_classCallCheck(this,Se);this.vscodeAPI=t;}_createClass(Se,[{key:"getTelemetryLevel",value:function getTelemetryLevel(){var t="telemetry",r="enableTelemetry";try{var n=this.vscodeAPI.env.telemetryConfiguration;return n.isUsageEnabled&&n.isErrorsEnabled&&n.isCrashEnabled?"on":n.isErrorsEnabled&&n.isCrashEnabled?"error":"off";}catch(_unused41){return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(t).get(r)?"on":"off";}}}],[{key:"applyReplacements",value:function applyReplacements(t,r){for(var _i12=0,_Object$keys4=Object.keys(t);_i12<_Object$keys4.length;_i12++){var n=_Object$keys4[_i12];var _iterator87=_createForOfIteratorHelper(r),_step84;try{for(_iterator87.s();!(_step84=_iterator87.n()).done;){var i=_step84.value;i.lookup.test(n)&&(i.replacementString!==void 0?t[n]=i.replacementString:delete t[n]);}}catch(err){_iterator87.e(err);}finally{_iterator87.f();}}}},{key:"shouldUseOneDataSystemSDK",value:function shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-";}},{key:"getInstance",value:function getInstance(t){return Se._instance||(Se._instance=new Se(t)),Se._instance;}}]);return Se;}();var wa=/*#__PURE__*/function(){function wa(t,r,n,i,a,s){var _this146=this;_classCallCheck(this,wa);this.extensionId=t;this.extensionVersion=r;this.telemetryAppender=n;this.osShim=i;this.vscodeAPI=a;this.firstParty=false;this.userOptIn=false;this.errorOptIn=false;this.disposables=[];this.firstParty=!!s,this.updateUserOptStatus(),a.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(a.env.onDidChangeTelemetryEnabled(function(){return _this146.updateUserOptStatus();})),this.disposables.push(a.workspace.onDidChangeConfiguration(function(){return _this146.updateUserOptStatus();}))):this.disposables.push(a.workspace.onDidChangeConfiguration(function(){return _this146.updateUserOptStatus();}));}_createClass(wa,[{key:"updateUserOptStatus",value:function updateUserOptStatus(){var t=Se.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=t==="on",this.errorOptIn=t==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender();}},{key:"cleanRemoteName",value:function cleanRemoteName(t){if(!t)return"none";var r="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(function(n){t.indexOf("".concat(n))===0&&(r=n);}),r;}},{key:"extension",get:function get(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension;}},{key:"cloneAndChange",value:function cloneAndChange(t,r){if(t===null||_typeof(t)!="object"||typeof r!="function")return t;var n={};for(var i in t){n[i]=r(i,t[i]);}return n;}},{key:"shouldSendErrorTelemetry",value:function shouldSendErrorTelemetry(){return this.errorOptIn===false?false:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):true;}},{key:"getCommonProperties",value:function getCommonProperties(){var t={};if(t["common.os"]=this.osShim.platform,t["common.nodeArch"]=this.osShim.architecture,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(t["common.vscodemachineid"]=this.vscodeAPI.env.machineId,t["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,t["common.vscodeversion"]=this.vscodeAPI.version,t["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",t["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:t["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown";}t["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName);}return t;}},{key:"anonymizeFilePaths",value:function anonymizeFilePaths(t,r){var n;if(t==null)return"";var i=[];this.vscodeAPI.env.appRoot!==""&&i.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&i.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));var a=t;if(r){var s=[];var _iterator88=_createForOfIteratorHelper(i),_step85;try{for(_iterator88.s();!(_step85=_iterator88.n()).done;){var f=_step85.value;for(;(n=f.exec(t))&&n;){s.push([n.index,f.lastIndex]);}}}catch(err){_iterator88.e(err);}finally{_iterator88.f();}var o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,u=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(a="";(n=u.exec(t))&&n;){n[0]&&!o.test(n[0])&&s.every(function(_ref32){var _ref33=_slicedToArray(_ref32,2),f=_ref33[0],p=_ref33[1];return n.index<f||n.index>=p;})&&(a+=t.substring(c,n.index)+"<REDACTED: user-file-path>",c=u.lastIndex);}c<t.length&&(a+=t.substr(c));}for(var _i14=0,_i13=i;_i14<_i13.length;_i14++){var _s6=_i13[_i14];a=a.replace(_s6,"");}return a;}},{key:"removePropertiesWithPossibleUserInfo",value:function removePropertiesWithPossibleUserInfo(t){if(_typeof(t)!="object")return;var r={};for(var _i15=0,_Object$keys5=Object.keys(t);_i15<_Object$keys5.length;_i15++){var n=_Object$keys5[_i15];var i=t[n];if(!i)continue;var a=/@[a-zA-Z0-9-.]+/,s=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,o=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;s.test(i.toLowerCase())?r[n]="<REDACTED: secret>":a.test(i)?r[n]="<REDACTED: email>":o.test(i)?r[n]="<REDACTED: token>":r[n]=i;}return r;}},{key:"telemetryLevel",get:function get(){switch(Se.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off";}}},{key:"internalSendTelemetryEvent",value:function internalSendTelemetryEvent(t,r,n,i,a){var _this147=this;if((this.userOptIn||a)&&t!==""){var _r5,_n4;if(r=St(St({},r),this.getCommonProperties()),i){var s=this.cloneAndChange(r,function(o,u){return _this147.anonymizeFilePaths(u,_this147.firstParty);});r=this.removePropertiesWithPossibleUserInfo(s);}r=(_r5=r)!==null&&_r5!==void 0?_r5:{},n=(_n4=n)!==null&&_n4!==void 0?_n4:{},t="".concat(this.extensionId,"/").concat(t),this.telemetryAppender.logEvent(t,{properties:r,measurements:n});}}},{key:"sendTelemetryEvent",value:function sendTelemetryEvent(t,r,n){this.internalSendTelemetryEvent(t,r,n,true,false);}},{key:"sendRawTelemetryEvent",value:function sendRawTelemetryEvent(t,r,n){this.internalSendTelemetryEvent(t,r,n,false,false);}},{key:"sendDangerousTelemetryEvent",value:function sendDangerousTelemetryEvent(t,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(t,r,n,i,true);}},{key:"internalSendTelemetryErrorEvent",value:function internalSendTelemetryErrorEvent(t,r,n,i,a){var _this148=this;if((this.shouldSendErrorTelemetry()||a)&&t!==""){var _r6,_n5;if(r=St(St({},r),this.getCommonProperties()),i){var s=this.cloneAndChange(r,function(o,u){return _this148.anonymizeFilePaths(u,_this148.firstParty);});r=this.removePropertiesWithPossibleUserInfo(s);}r=(_r6=r)!==null&&_r6!==void 0?_r6:{},n=(_n5=n)!==null&&_n5!==void 0?_n5:{},t="".concat(this.extensionId,"/").concat(t),this.telemetryAppender.logEvent(t,{properties:r,measurements:n});}}},{key:"sendTelemetryErrorEvent",value:function sendTelemetryErrorEvent(t,r,n){this.internalSendTelemetryErrorEvent(t,r,n,true,false);}},{key:"sendDangerousTelemetryErrorEvent",value:function sendDangerousTelemetryErrorEvent(t,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(t,r,n,i,true);}},{key:"internalSendTelemetryException",value:function internalSendTelemetryException(t,r,n,i,a){var _this149=this;if((this.shouldSendErrorTelemetry()||a)&&t){var _r7,_n6;if(r=St(St({},r),this.getCommonProperties()),i){var s=this.cloneAndChange(r,function(o,u){return _this149.anonymizeFilePaths(u,_this149.firstParty);});t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),r=this.removePropertiesWithPossibleUserInfo(s);}r=(_r7=r)!==null&&_r7!==void 0?_r7:{},n=(_n6=n)!==null&&_n6!==void 0?_n6:{},this.telemetryAppender.logException(t,{properties:r,measurements:n});}}},{key:"sendTelemetryException",value:function sendTelemetryException(t,r,n){this.internalSendTelemetryException(t,r,n,true,false);}},{key:"sendDangerousTelemetryException",value:function sendDangerousTelemetryException(t,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(t,r,n,i,true);}},{key:"dispose",value:function dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(function(t){return t.dispose();}));}}]);return wa;}();var xa=/*#__PURE__*/function(){function xa(t,r){_classCallCheck(this,xa);this._instantiationStatus=0;this._eventQueue=[];this._exceptionQueue=[];this._clientFactory=r,this._key=t;}_createClass(xa,[{key:"logEvent",value:function logEvent(t,r){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:t,data:r});return;}this._telemetryClient.logEvent(t,r);}},{key:"logException",value:function logException(t,r){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:t,data:r});return;}this._telemetryClient.logException(t,r);}},{key:"flush",value:function(){var _flush=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee39(){return regeneratorRuntime.wrap(function _callee39$(_context39){while(1){switch(_context39.prev=_context39.next){case 0:_context39.t0=this._telemetryClient;if(!_context39.t0){_context39.next=5;break;}_context39.next=4;return this._telemetryClient.flush();case 4:this._telemetryClient=void 0;case 5:case"end":return _context39.stop();}}},_callee39,this);}));function flush(){return _flush.apply(this,arguments);}return flush;}()},{key:"_flushQueues",value:function _flushQueues(){var _this150=this;this._eventQueue.forEach(function(_ref34){var t=_ref34.eventName,r=_ref34.data;return _this150.logEvent(t,r);}),this._eventQueue=[],this._exceptionQueue.forEach(function(_ref35){var t=_ref35.exception,r=_ref35.data;return _this150.logException(t,r);}),this._exceptionQueue=[];}},{key:"instantiateAppender",value:function instantiateAppender(){var _this151=this;this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(function(t){_this151._telemetryClient=t,_this151._instantiationStatus=2,_this151._flushQueues();}).catch(function(t){console.error(t),_this151._instantiationStatus=2;}));}}]);return xa;}();var vA=/*#__PURE__*/function(){var _ref36=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee40(e,t,r){var n,i,a,s,o,f,c;return regeneratorRuntime.wrap(function _callee40$(_context40){while(1){switch(_context40.prev=_context40.next){case 0:_context40.next=2;return Promise.resolve().then(function(){return __toModule(require_ms_core());});case 2:n=_context40.sent;_context40.next=5;return Promise.resolve().then(function(){return __toModule(require_ms_post());});case 5:i=_context40.sent;a=new n.AppInsightsCore();s=new i.PostChannel();o={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:true,disableDbgExt:true,disableInstrumentationKeyValidation:true,channels:[[s]]};if(r){o.extensionConfig={};f={alwaysUseXhrOverride:true,httpXHROverride:r};o.extensionConfig[s.identifier]=f;}c=t.workspace.getConfiguration("telemetry").get("internalTesting");return _context40.abrupt("return",(a.initialize(o,[]),a.addTelemetryInitializer(function(f){var _f$ext,_f$ext$utc;!c||(f.ext=(_f$ext=f.ext)!==null&&_f$ext!==void 0?_f$ext:{},f.ext.utc=(_f$ext$utc=f.ext.utc)!==null&&_f$ext$utc!==void 0?_f$ext$utc:{},f.ext.utc.flags=8462029);}),a));case 12:case"end":return _context40.stop();}}},_callee40);}));return function vA(_x39,_x40,_x41){return _ref36.apply(this,arguments);};}();var wp=/*#__PURE__*/function(){var _ref37=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee42(e,t,r){var n;return regeneratorRuntime.wrap(function _callee42$(_context42){while(1){switch(_context42.prev=_context42.next){case 0:_context42.next=2;return vA(e,t,r);case 2:n=_context42.sent;return _context42.abrupt("return",{logEvent:function logEvent(a,s){try{n==null||n.track({name:a,baseData:{name:a,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}});}catch(o){throw new Error("Failed to log event to app insights!\n"+o.message);}},logException:function logException(a,s){throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking");},flush:function(){var _flush2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee41(){return regeneratorRuntime.wrap(function _callee41$(_context41){while(1){switch(_context41.prev=_context41.next){case 0:_context41.prev=0;n==null||n.unload();_context41.next=7;break;case 4:_context41.prev=4;_context41.t0=_context41["catch"](0);throw new Error("Failed to flush app insights!\n"+_context41.t0.message);case 7:case"end":return _context41.stop();}}},_callee41,null,[[0,4]]);}));function flush(){return _flush2.apply(this,arguments);}return flush;}()});case 4:case"end":return _context42.stop();}}},_callee42);}));return function wp(_x42,_x43,_x44){return _ref37.apply(this,arguments);};}();var Gx=/*#__PURE__*/function(){var _ref38=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee44(e,t){var r,i;return regeneratorRuntime.wrap(function _callee44$(_context44){while(1){switch(_context44.prev=_context44.next){case 0:_context44.prev=0;process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";_context44.next=4;return Promise.resolve().then(function(){return nn(nA());});case 4:i=_context44.sent;i.defaultClient?(r=new i.TelemetryClient(e),r.channel.setUseDiskRetryCaching(true)):(i.setup(e).setAutoCollectRequests(false).setAutoCollectPerformance(false).setAutoCollectExceptions(false).setAutoCollectDependencies(false).setAutoDependencyCorrelation(false).setAutoCollectConsole(false).setAutoCollectHeartbeat(false).setUseDiskRetryCaching(true).start(),r=i.defaultClient),Gt&&Gt.env&&(r.context.tags[r.context.keys.userId]=Gt.env.machineId,r.context.tags[r.context.keys.sessionId]=Gt.env.sessionId,r.context.tags[r.context.keys.cloudRole]=Gt.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=Gt.env.appName),e&&e.indexOf("AIF-")===0&&(r.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1");_context44.next=11;break;case 8:_context44.prev=8;_context44.t0=_context44["catch"](0);return _context44.abrupt("return",Promise.reject("Failed to initialize app insights!\n"+_context44.t0.message));case 11:return _context44.abrupt("return",(t!=null&&t.length&&Vx(r,t),{logEvent:function logEvent(i,a){try{r==null||r.trackEvent({name:i,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements});}catch(s){throw new Error("Failed to log event to app insights!\n"+s.message);}},logException:function logException(i,a){try{r==null||r.trackException({exception:i,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements});}catch(s){throw new Error("Failed to log exception to app insights!\n"+s.message);}},flush:function(){var _flush3=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee43(){return regeneratorRuntime.wrap(function _callee43$(_context43){while(1){switch(_context43.prev=_context43.next){case 0:_context43.prev=0;r==null||r.flush();_context43.next=7;break;case 4:_context43.prev=4;_context43.t0=_context43["catch"](0);throw new Error("Failed to flush app insights!\n"+_context43.t0.message);case 7:case"end":return _context43.stop();}}},_callee43,null,[[0,4]]);}));function flush(){return _flush3.apply(this,arguments);}return flush;}()}));case 12:case"end":return _context44.stop();}}},_callee44,null,[[0,8]]);}));return function Gx(_x45,_x46){return _ref38.apply(this,arguments);};}();function Vx(e,t){e.addTelemetryProcessor(function(r){return Array.isArray(r.tags)?r.tags.forEach(function(n){return Se.applyReplacements(n,t);}):r.tags&&Se.applyReplacements(r.tags,t),r.data.baseData&&Se.applyReplacements(r.data.baseData,t),true;});}function $x(){return{sendPOST:function sendPOST(t,r){var n={method:"POST",headers:Np(St({},t.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(t.data)})};try{var i=iA.request(t.urlString,n,function(a){a.on("data",function(s){var _a$statusCode;r((_a$statusCode=a.statusCode)!==null&&_a$statusCode!==void 0?_a$statusCode:200,a.headers,s.toString());}),a.on("error",function(){r(0,{});});});i.write(t.data),i.end();}catch(_unused42){r(0,{});}}};}var hu=/*#__PURE__*/function(_wa){_inherits(hu,_wa);var _super94=_createSuper(hu);function hu(t,r,n,i,a){var _this152;_classCallCheck(this,hu);var s=function s(u){return Gx(u,a);};Se.shouldUseOneDataSystemSDK(n)&&(s=function s(u){return wp(u,Gt,$x());});var o=new xa(n,s);n&&(n.indexOf("AIF-")===0||Se.shouldUseOneDataSystemSDK(n))&&(i=true),_this152=_super94.call(this,t,r,o,{release:mi.release(),platform:mi.platform(),architecture:mi.arch()},Gt,i);return _this152;}return _createClass(hu);}(wa);}});// client/src/node/main.ts
__export(exports,{activate:function activate(){return _activate;}});var vscode3=__toModule(require("vscode"));var import_node=__toModule(require_node3());// client/src/common/client.ts
var vscode2=__toModule(require("vscode"));var import_vscode_languageclient=__toModule(require_main4());// client/src/common/supportedLanguages.ts
var vscode=__toModule(require("vscode"));// shared/common/initOptions.ts
var LanguageInfo=/*#__PURE__*/_createClass(function LanguageInfo(languageId,wasmUri,suffixes,queries,suppressedBy){_classCallCheck(this,LanguageInfo);this.languageId=languageId;this.wasmUri=wasmUri;this.suffixes=suffixes;this.queries=queries;this.suppressedBy=suppressedBy;});// client/src/common/supportedLanguages.ts
function validateAnycodeLanguage(lang){if(typeof lang.grammarPath!=="string"){return false;}if(typeof lang.languageId!=="string"){return false;}if(!Array.isArray(lang.extensions)){return false;}if(!lang.queryPaths||_typeof(lang.queryPaths)!=="object"){return false;}if(lang.suppressedBy&&!Array.isArray(lang.suppressedBy)){return false;}return true;}var SupportedLanguages=/*#__PURE__*/function(){function SupportedLanguages(_log){var _this153=this;_classCallCheck(this,SupportedLanguages);this._log=_log;this._onDidChange=new vscode.EventEmitter();this.onDidChange=this._onDidChange.event;this._disposable=vscode.Disposable.from(vscode.extensions.onDidChange(this._reset,this),vscode.workspace.onDidChangeConfiguration(function(e){if(e.affectsConfiguration("anycode.language")){_this153._reset();}}));}_createClass(SupportedLanguages,[{key:"dispose",value:function dispose(){this._onDidChange.dispose();this._disposable.dispose();}},{key:"_reset",value:function _reset(){this._tuples=void 0;this._onDidChange.fire(this);}},{key:"getSupportedLanguages",value:function(){var _getSupportedLanguages=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee45(){var _this154=this;var languageInfos,_iterator89,_step86,_loop7,_ret2;return regeneratorRuntime.wrap(function _callee45$(_context45){while(1){switch(_context45.prev=_context45.next){case 0:if(this._tuples){_context45.next=23;break;}_context45.next=3;return this._readLanguageInfos();case 3:languageInfos=_context45.sent;this._tuples=new Map();_iterator89=_createForOfIteratorHelper(languageInfos.values());_context45.prev=6;_loop7=function _loop7(){var info=_step86.value;var config=vscode.workspace.getConfiguration("anycode",{languageId:info.languageId});var featureConfig=_objectSpread({},config.get("language.features"));var empty=Object.keys(featureConfig).every(function(key){return!featureConfig[key];});if(empty){_this154._log.appendLine("[CONFIG] ignoring ".concat(info.languageId," because configuration IS EMPTY"));return"continue";}if(info.suppressedBy){var inspectConfig=config.inspect("language.features");var explicitlyEnabled=(inspectConfig===null||inspectConfig===void 0?void 0:inspectConfig.globalLanguageValue)||(inspectConfig===null||inspectConfig===void 0?void 0:inspectConfig.workspaceLanguageValue)||(inspectConfig===null||inspectConfig===void 0?void 0:inspectConfig.workspaceFolderLanguageValue);if(!explicitlyEnabled&&info.suppressedBy.some(function(id){return vscode.extensions.getExtension(id,true);})){_this154._log.appendLine("[CONFIG] ignoring ".concat(info.languageId," because it is SUPPRESSED by any of [").concat(info.suppressedBy.join(", "),"]"));return"continue";}}_this154._tuples.set(info,featureConfig);};_iterator89.s();case 9:if((_step86=_iterator89.n()).done){_context45.next=15;break;}_ret2=_loop7();if(!(_ret2==="continue")){_context45.next=13;break;}return _context45.abrupt("continue",13);case 13:_context45.next=9;break;case 15:_context45.next=20;break;case 17:_context45.prev=17;_context45.t0=_context45["catch"](6);_iterator89.e(_context45.t0);case 20:_context45.prev=20;_iterator89.f();return _context45.finish(20);case 23:return _context45.abrupt("return",this._tuples);case 24:case"end":return _context45.stop();}}},_callee45,this,[[6,17,20,23]]);}));function getSupportedLanguages(){return _getSupportedLanguages.apply(this,arguments);}return getSupportedLanguages;}()},{key:"getSupportedLanguagesAsSelector",value:function(){var _getSupportedLanguagesAsSelector=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee46(){var infos;return regeneratorRuntime.wrap(function _callee46$(_context46){while(1){switch(_context46.prev=_context46.next){case 0:_context46.next=2;return this.getSupportedLanguages();case 2:infos=_context46.sent;return _context46.abrupt("return",Array.from(infos.keys()).map(function(info){return info.languageId;}));case 4:case"end":return _context46.stop();}}},_callee46,this);}));function getSupportedLanguagesAsSelector(){return _getSupportedLanguagesAsSelector.apply(this,arguments);}return getSupportedLanguagesAsSelector;}()},{key:"_readLanguageInfos",value:function(){var _readLanguageInfos2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee47(){var result,isWebWorker,_iterator90,_step87,_extension$packageJSO,extension,languages2,_iterator91,_step88,lang,queries,grammarUri,info;return regeneratorRuntime.wrap(function _callee47$(_context47){while(1){switch(_context47.prev=_context47.next){case 0:result=new Map();isWebWorker="importScripts"in globalThis;_iterator90=_createForOfIteratorHelper(vscode.extensions.allAcrossExtensionHosts);_context47.prev=3;_iterator90.s();case 5:if((_step87=_iterator90.n()).done){_context47.next=57;break;}extension=_step87.value;languages2=(_extension$packageJSO=extension.packageJSON.contributes)===null||_extension$packageJSO===void 0?void 0:_extension$packageJSO["anycodeLanguages"];if(languages2){_context47.next=10;break;}return _context47.abrupt("continue",55);case 10:if(!Array.isArray(languages2)){languages2=[languages2];}_iterator91=_createForOfIteratorHelper(languages2);_context47.prev=12;_iterator91.s();case 14:if((_step88=_iterator91.n()).done){_context47.next=47;break;}lang=_step88.value;if(validateAnycodeLanguage(lang)){_context47.next=19;break;}console.warn("INVALID anycode-language contribution from ".concat(extension.id),lang);return _context47.abrupt("continue",45);case 19:if(!(extension.extensionUri.scheme==="vscode-remote")){_context47.next=22;break;}console.warn("UNSUPPORTED extension location from ".concat(extension.id),extension.extensionUri.toString());return _context47.abrupt("continue",45);case 22:queries=void 0;_context47.prev=23;_context47.next=26;return SupportedLanguages._readQueryPath(extension,lang.queryPaths);case 26:queries=_context47.sent;_context47.next=33;break;case 29:_context47.prev=29;_context47.t0=_context47["catch"](23);console.warn("INVALID anycode-language queryPaths from ".concat(extension.id),_context47.t0);return _context47.abrupt("continue",45);case 33:grammarUri=vscode.Uri.joinPath(extension.extensionUri,lang.grammarPath);_context47.prev=34;vscode.workspace.fs.stat(grammarUri);_context47.next=42;break;case 38:_context47.prev=38;_context47.t1=_context47["catch"](34);console.warn("INVALID anycode-language grammerPath from ".concat(extension.id),_context47.t1);return _context47.abrupt("continue",45);case 42:info=new LanguageInfo(lang.languageId,isWebWorker?grammarUri.toString():grammarUri.fsPath,lang.extensions,queries,lang.suppressedBy);if(result.has(info.languageId)){console.info("extension ".concat(extension.id," OVERWRITES language info for ").concat(info.languageId));}result.set(info.languageId,info);case 45:_context47.next=14;break;case 47:_context47.next=52;break;case 49:_context47.prev=49;_context47.t2=_context47["catch"](12);_iterator91.e(_context47.t2);case 52:_context47.prev=52;_iterator91.f();return _context47.finish(52);case 55:_context47.next=5;break;case 57:_context47.next=62;break;case 59:_context47.prev=59;_context47.t3=_context47["catch"](3);_iterator90.e(_context47.t3);case 62:_context47.prev=62;_iterator90.f();return _context47.finish(62);case 65:return _context47.abrupt("return",result);case 66:case"end":return _context47.stop();}}},_callee47,null,[[3,59,62,65],[12,49,52,55],[23,29],[34,38]]);}));function _readLanguageInfos(){return _readLanguageInfos2.apply(this,arguments);}return _readLanguageInfos;}()}],[{key:"_readQueryPath",value:function(){var _readQueryPath2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee48(extension,paths){var decoder,result;return regeneratorRuntime.wrap(function _callee48$(_context48){while(1){switch(_context48.prev=_context48.next){case 0:decoder=new TextDecoder();result={};if(!paths.comments){_context48.next=8;break;}_context48.t0=decoder;_context48.next=6;return vscode.workspace.fs.readFile(vscode.Uri.joinPath(extension.extensionUri,paths.comments));case 6:_context48.t1=_context48.sent;result.comments=_context48.t0.decode.call(_context48.t0,_context48.t1);case 8:if(!paths.folding){_context48.next=14;break;}_context48.t2=decoder;_context48.next=12;return vscode.workspace.fs.readFile(vscode.Uri.joinPath(extension.extensionUri,paths.folding));case 12:_context48.t3=_context48.sent;result.folding=_context48.t2.decode.call(_context48.t2,_context48.t3);case 14:if(!paths.identifiers){_context48.next=20;break;}_context48.t4=decoder;_context48.next=18;return vscode.workspace.fs.readFile(vscode.Uri.joinPath(extension.extensionUri,paths.identifiers));case 18:_context48.t5=_context48.sent;result.identifiers=_context48.t4.decode.call(_context48.t4,_context48.t5);case 20:if(!paths.locals){_context48.next=26;break;}_context48.t6=decoder;_context48.next=24;return vscode.workspace.fs.readFile(vscode.Uri.joinPath(extension.extensionUri,paths.locals));case 24:_context48.t7=_context48.sent;result.locals=_context48.t6.decode.call(_context48.t6,_context48.t7);case 26:if(!paths.outline){_context48.next=32;break;}_context48.t8=decoder;_context48.next=30;return vscode.workspace.fs.readFile(vscode.Uri.joinPath(extension.extensionUri,paths.outline));case 30:_context48.t9=_context48.sent;result.outline=_context48.t8.decode.call(_context48.t8,_context48.t9);case 32:if(!paths.references){_context48.next=38;break;}_context48.t10=decoder;_context48.next=36;return vscode.workspace.fs.readFile(vscode.Uri.joinPath(extension.extensionUri,paths.references));case 36:_context48.t11=_context48.sent;result.references=_context48.t10.decode.call(_context48.t10,_context48.t11);case 38:return _context48.abrupt("return",result);case 39:case"end":return _context48.stop();}}},_callee48);}));function _readQueryPath(_x47,_x48){return _readQueryPath2.apply(this,arguments);}return _readQueryPath;}()}]);return SupportedLanguages;}();// client/src/common/client.ts
var import_extension_telemetry=__toModule(require_telemetryReporter_node_min());// shared/common/messages.ts
var CustomMessages;(function(CustomMessages2){CustomMessages2["QueueInit"]="queue/init";CustomMessages2["QueueUnleash"]="queue/unleash";CustomMessages2["FileRead"]="file/read";})(CustomMessages||(CustomMessages={}));// client/src/common/client.ts
function startClient(_x49,_x50){return _startClient.apply(this,arguments);}function _startClient(){_startClient=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee51(factory,context){var channel,telemetry,supportedLanguages,serverHandles,startServer,stopServers,_stopServers;return regeneratorRuntime.wrap(function _callee51$(_context51){while(1){switch(_context51.prev=_context51.next){case 0:_stopServers=function _stopServers3(){_stopServers=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee50(){var oldHandles,result,_iterator92,_step89,item;return regeneratorRuntime.wrap(function _callee50$(_context50){while(1){switch(_context50.prev=_context50.next){case 0:oldHandles=serverHandles.slice(0);serverHandles=[];_context50.next=4;return Promise.allSettled(oldHandles);case 4:result=_context50.sent;_iterator92=_createForOfIteratorHelper(result);try{for(_iterator92.s();!(_step89=_iterator92.n()).done;){item=_step89.value;if(item.status==="fulfilled"){item.value.dispose();}}}catch(err){_iterator92.e(err);}finally{_iterator92.f();}case 7:case"end":return _context50.stop();}}},_callee50);}));return _stopServers.apply(this,arguments);};stopServers=function _stopServers2(){return _stopServers.apply(this,arguments);};startServer=function _startServer3(){serverHandles.push(_startServer(factory,context,supportedLanguages,telemetry,channel));};channel=vscode2.window.createOutputChannel("anycode");telemetry=new import_extension_telemetry.default(context.extension.id,context.extension.packageJSON["version"],context.extension.packageJSON["aiKey"]);supportedLanguages=new SupportedLanguages(channel);serverHandles=[];startServer();context.subscriptions.push(channel);context.subscriptions.push(supportedLanguages);context.subscriptions.push(supportedLanguages.onDidChange(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee49(){return regeneratorRuntime.wrap(function _callee49$(_context49){while(1){switch(_context49.prev=_context49.next){case 0:_context49.next=2;return stopServers();case 2:startServer();case 3:case"end":return _context49.stop();}}},_callee49);}))));context.subscriptions.push(new vscode2.Disposable(stopServers));case 12:case"end":return _context51.stop();}}},_callee51);}));return _startClient.apply(this,arguments);}function _showStatusAndInfo(selector,showCommandHint,disposables){var statusItem=vscode2.languages.createLanguageStatusItem("info",selector);disposables.push(statusItem);statusItem.severity=vscode2.LanguageStatusSeverity.Warning;statusItem.text="Partial Mode";if(showCommandHint){statusItem.detail="Language support is inaccurate in this context. $(lightbulb-autofix) Did not index all files because search [indexing is disabled](command:remoteHub.enableIndexing).";}else{statusItem.detail="Language support is inaccurate in this context, results may be imprecise and incomplete.";}statusItem.command={title:"Learn More",command:"vscode.open",arguments:[vscode2.Uri.parse("https://aka.ms/vscode-anycode")]};}function _startServer(_x51,_x52,_x53,_x54,_x55){return _startServer2.apply(this,arguments);}function _startServer2(){_startServer2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee54(factory,context,supportedLanguagesInfo,telemetry,log){var _vscode2$workspace$ge,_vscode2$workspace$ge2;var supportedLanguages,documentSelector,_sendFeatureTelementry,disposables,databaseName,findAndSearchSuffixes,_iterator93,_step90,_step90$value,info,config,langPattern,watcher,treeSitterWasmUri,initializationOptions,clientOptions,client,exclude,size,init;return regeneratorRuntime.wrap(function _callee54$(_context54){while(1){switch(_context54.prev=_context54.next){case 0:_sendFeatureTelementry=function _sendFeatureTelementr(name,language){telemetry.sendTelemetryEvent("feature",{name:name,language:language});};_context54.next=3;return supportedLanguagesInfo.getSupportedLanguages();case 3:supportedLanguages=_context54.sent;_context54.next=6;return supportedLanguagesInfo.getSupportedLanguagesAsSelector();case 6:documentSelector=_context54.sent;if(!(documentSelector.length===0)){_context54.next=10;break;}log.appendLine("[anycode] NO supported languages, no server needed");return _context54.abrupt("return",new vscode2.Disposable(function(){}));case 10:disposables=[];databaseName=context.workspaceState.get("dbName","anycode_".concat(Math.random().toString(32).slice(2)));context.workspaceState.update("dbName",databaseName);findAndSearchSuffixes=[];_iterator93=_createForOfIteratorHelper(supportedLanguages);try{for(_iterator93.s();!(_step90=_iterator93.n()).done;){_step90$value=_slicedToArray(_step90.value,2),info=_step90$value[0],config=_step90$value[1];if(config.workspaceSymbols||config.references||config.definitions){findAndSearchSuffixes.push(info.suffixes);}}}catch(err){_iterator93.e(err);}finally{_iterator93.f();}langPattern="**/*.{".concat(findAndSearchSuffixes.join(","),"}");watcher=vscode2.workspace.createFileSystemWatcher(langPattern);disposables.push(watcher);treeSitterWasmUri=vscode2.Uri.joinPath(context.extensionUri,"./server/node_modules/web-tree-sitter/tree-sitter.wasm");initializationOptions={treeSitterWasmUri:"importScripts"in globalThis?treeSitterWasmUri.toString():treeSitterWasmUri.fsPath,supportedLanguages:Array.from(supportedLanguages.entries()),databaseName:databaseName};clientOptions={outputChannel:log,revealOutputChannelOn:import_vscode_languageclient.RevealOutputChannelOn.Never,documentSelector:documentSelector,synchronize:{fileEvents:watcher},initializationOptions:initializationOptions,middleware:{provideWorkspaceSymbols:function provideWorkspaceSymbols(query,token,next){_sendFeatureTelementry("workspaceSymbols","");return next(query,token);},provideDefinition:function provideDefinition(document2,position,token,next){_sendFeatureTelementry("definition",document2.languageId);return next(document2,position,token);},provideReferences:function provideReferences(document2,position,options,token,next){_sendFeatureTelementry("references",document2.languageId);return next(document2,position,options,token);},provideDocumentHighlights:function provideDocumentHighlights(document2,position,token,next){_sendFeatureTelementry("documentHighlights",document2.languageId);return next(document2,position,token);},provideCompletionItem:function provideCompletionItem(document2,position,context2,token,next){_sendFeatureTelementry("completions",document2.languageId);return next(document2,position,context2,token);}}};client=factory.createLanguageClient("anycode","anycode",clientOptions);disposables.push(client.start());disposables.push(new vscode2.Disposable(function(){return factory.destoryLanguageClient(client);}));_context54.next=27;return client.onReady();case 27:exclude="{".concat([].concat(_toConsumableArray(Object.keys((_vscode2$workspace$ge=vscode2.workspace.getConfiguration("search",null).get("exclude"))!==null&&_vscode2$workspace$ge!==void 0?_vscode2$workspace$ge:{})),_toConsumableArray(Object.keys((_vscode2$workspace$ge2=vscode2.workspace.getConfiguration("files",null).get("exclude"))!==null&&_vscode2$workspace$ge2!==void 0?_vscode2$workspace$ge2:{}))).join(","),"}");size=Math.max(0,vscode2.workspace.getConfiguration("anycode").get("symbolIndexSize",500));init=Promise.resolve(vscode2.workspace.findFiles(langPattern,exclude).then(/*#__PURE__*/function(){var _ref41=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee52(all){var hasWorkspaceContents,uris,t1,suffixesByLangId,_iterator94,_step91,_step91$value,lang,handleTextDocument,listener;return regeneratorRuntime.wrap(function _callee52$(_context52){while(1){switch(_context52.prev=_context52.next){case 0:hasWorkspaceContents=0;if(!(all.length>50)){_context52.next=7;break;}_context52.next=4;return _canInitWithoutLimits();case 4:if(!_context52.sent){_context52.next=7;break;}size=Number.MAX_SAFE_INTEGER;hasWorkspaceContents=1;case 7:uris=all.slice(0,size);log.appendLine("[INDEX] using ".concat(uris.length," of ").concat(all.length," files for ").concat(langPattern));t1=performance.now();_context52.next=12;return client.sendRequest(CustomMessages.QueueInit,uris.map(String));case 12:telemetry.sendTelemetryEvent("init",void 0,{numOfFiles:all.length,indexSize:uris.length,hasWorkspaceContents:hasWorkspaceContents,duration:performance.now()-t1});suffixesByLangId=new Map();_iterator94=_createForOfIteratorHelper(supportedLanguages);try{for(_iterator94.s();!(_step91=_iterator94.n()).done;){_step91$value=_slicedToArray(_step91.value,1),lang=_step91$value[0];suffixesByLangId.set(lang.languageId,lang.suffixes);}}catch(err){_iterator94.e(err);}finally{_iterator94.f();}handleTextDocument=function handleTextDocument(doc){var suffixes=suffixesByLangId.get(doc.languageId);if(!suffixes){return;}suffixesByLangId.delete(doc.languageId);var initLang=client.sendRequest(CustomMessages.QueueUnleash,suffixes);var initCancel=new Promise(function(resolve){return disposables.push(new vscode2.Disposable(resolve));});vscode2.window.withProgress({location:vscode2.ProgressLocation.Window,title:"Updating Index for '".concat(doc.languageId,"'...")},function(){return Promise.race([initLang,initCancel]);});if(suffixesByLangId.size===0){listener.dispose();}};listener=vscode2.workspace.onDidOpenTextDocument(handleTextDocument);disposables.push(listener);vscode2.workspace.textDocuments.forEach(handleTextDocument);_showStatusAndInfo(documentSelector,!hasWorkspaceContents&&_isRemoteHubWorkspace(),disposables);case 21:case"end":return _context52.stop();}}},_callee52);}));return function(_x57){return _ref41.apply(this,arguments);};}()));client.onRequest(CustomMessages.FileRead,/*#__PURE__*/function(){var _ref42=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee53(raw){var uri,doc,data,stat;return regeneratorRuntime.wrap(function _callee53$(_context53){while(1){switch(_context53.prev=_context53.next){case 0:uri=vscode2.Uri.parse(raw);if(!(uri.scheme==="vscode-notebook-cell")){_context53.next=13;break;}_context53.prev=2;_context53.next=5;return vscode2.workspace.openTextDocument(uri);case 5:doc=_context53.sent;return _context53.abrupt("return",Array.from(new TextEncoder().encode(doc.getText())));case 9:_context53.prev=9;_context53.t0=_context53["catch"](2);console.warn(_context53.t0);return _context53.abrupt("return",[]);case 13:if(!(vscode2.workspace.fs.isWritableFileSystem(uri.scheme)===void 0)){_context53.next=15;break;}return _context53.abrupt("return",[]);case 15:_context53.prev=15;_context53.next=18;return vscode2.workspace.fs.stat(uri);case 18:stat=_context53.sent;if(!(stat.size>Math.pow(1024,2))){_context53.next=24;break;}console.warn("IGNORING \"".concat(uri.toString(),"\" because it is too large (").concat(stat.size,"bytes)"));data=[];_context53.next=29;break;case 24:_context53.t1=Array;_context53.next=27;return vscode2.workspace.fs.readFile(uri);case 27:_context53.t2=_context53.sent;data=_context53.t1.from.call(_context53.t1,_context53.t2);case 29:return _context53.abrupt("return",data);case 32:_context53.prev=32;_context53.t3=_context53["catch"](15);console.warn(_context53.t3);return _context53.abrupt("return",[]);case 36:case"end":return _context53.stop();}}},_callee53,null,[[2,9],[15,32]]);}));return function(_x58){return _ref42.apply(this,arguments);};}());return _context54.abrupt("return",new vscode2.Disposable(function(){return disposables.forEach(function(d){return d.dispose();});}));case 32:case"end":return _context54.stop();}}},_callee54);}));return _startServer2.apply(this,arguments);}function _getRemoteHubExtension(){var _ref39,_vscode2$extensions$g;var remoteHub=(_ref39=(_vscode2$extensions$g=vscode2.extensions.getExtension("ms-vscode.remote-repositories",true))!==null&&_vscode2$extensions$g!==void 0?_vscode2$extensions$g:vscode2.extensions.getExtension("GitHub.remoteHub",true))!==null&&_ref39!==void 0?_ref39:vscode2.extensions.getExtension("GitHub.remoteHub-insiders",true);return remoteHub;}function _isRemoteHubWorkspace(){var _vscode2$workspace$wo,_vscode2$workspace$wo2;if(!_getRemoteHubExtension()){return false;}return(_vscode2$workspace$wo=(_vscode2$workspace$wo2=vscode2.workspace.workspaceFolders)===null||_vscode2$workspace$wo2===void 0?void 0:_vscode2$workspace$wo2.every(function(folder){return folder.uri.scheme==="vscode-vfs";}))!==null&&_vscode2$workspace$wo!==void 0?_vscode2$workspace$wo:false;}function _canInitWithoutLimits(){return _canInitWithoutLimits2.apply(this,arguments);}// client/src/node/main.ts
function _canInitWithoutLimits2(){_canInitWithoutLimits2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee55(){var remoteFolders,remoteHub,remoteHubApi,_iterator95,_step92,folder;return regeneratorRuntime.wrap(function _callee55$(_context55){while(1){switch(_context55.prev=_context55.next){case 0:if(vscode2.workspace.workspaceFolders){_context55.next=2;break;}return _context55.abrupt("return",false);case 2:remoteFolders=vscode2.workspace.workspaceFolders.filter(function(folder){return folder.uri.scheme==="vscode-vfs";});if(!(remoteFolders.length===0)){_context55.next=5;break;}return _context55.abrupt("return",true);case 5:remoteHub=_getRemoteHubExtension();_context55.next=8;return remoteHub===null||remoteHub===void 0?void 0:remoteHub.activate();case 8:remoteHubApi=_context55.sent;if(!(typeof(remoteHubApi===null||remoteHubApi===void 0?void 0:remoteHubApi.loadWorkspaceContents)!=="function")){_context55.next=11;break;}return _context55.abrupt("return",false);case 11:_iterator95=_createForOfIteratorHelper(remoteFolders);_context55.prev=12;_iterator95.s();case 14:if((_step92=_iterator95.n()).done){_context55.next=22;break;}folder=_step92.value;_context55.next=18;return remoteHubApi.loadWorkspaceContents(folder.uri);case 18:if(_context55.sent){_context55.next=20;break;}return _context55.abrupt("return",false);case 20:_context55.next=14;break;case 22:_context55.next=27;break;case 24:_context55.prev=24;_context55.t0=_context55["catch"](12);_iterator95.e(_context55.t0);case 27:_context55.prev=27;_iterator95.f();return _context55.finish(27);case 30:return _context55.abrupt("return",true);case 31:case"end":return _context55.stop();}}},_callee55,null,[[12,24,27,30]]);}));return _canInitWithoutLimits2.apply(this,arguments);}function _activate(_x56){return _activate2.apply(this,arguments);}// Annotate the CommonJS export names for ESM import in node:
function _activate2(){_activate2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee58(context){var factory;return regeneratorRuntime.wrap(function _callee58$(_context58){while(1){switch(_context58.prev=_context58.next){case 0:factory=new(/*#__PURE__*/function(){function _class2(){_classCallCheck(this,_class2);}_createClass(_class2,[{key:"createLanguageClient",value:function createLanguageClient(id,name,clientOptions){var serverModule=vscode3.Uri.joinPath(context.extensionUri,"dist/anycode.server.node.js").fsPath;var debugOptions={execArgv:["--nolazy","--inspect="+(7e3+Math.round(Math.random()*999))]};var serverOptions={run:{module:serverModule,transport:import_node.TransportKind.ipc},debug:{module:serverModule,transport:import_node.TransportKind.ipc,options:debugOptions}};var client=new import_node.LanguageClient(id,serverOptions,clientOptions);client.onReady().then(function(){var persistUri=context.storageUri&&vscode3.Uri.joinPath(context.storageUri,"anycode.db");var encoder=new TextEncoder();var decoder=new TextDecoder();client.onRequest("persisted/read",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee56(){var data;return regeneratorRuntime.wrap(function _callee56$(_context56){while(1){switch(_context56.prev=_context56.next){case 0:if(persistUri){_context56.next=2;break;}return _context56.abrupt("return","");case 2:_context56.prev=2;_context56.next=5;return vscode3.workspace.fs.readFile(persistUri);case 5:data=_context56.sent;return _context56.abrupt("return",decoder.decode(data));case 9:_context56.prev=9;_context56.t0=_context56["catch"](2);return _context56.abrupt("return","");case 12:case"end":return _context56.stop();}}},_callee56,null,[[2,9]]);})));client.onRequest("persisted/write",/*#__PURE__*/function(){var _ref44=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee57(json){var data;return regeneratorRuntime.wrap(function _callee57$(_context57){while(1){switch(_context57.prev=_context57.next){case 0:if(!persistUri){_context57.next=4;break;}data=encoder.encode(json);_context57.next=4;return vscode3.workspace.fs.writeFile(persistUri,new Uint8Array(data));case 4:case"end":return _context57.stop();}}},_callee57);}));return function(_x59){return _ref44.apply(this,arguments);};}());});return client;}},{key:"destoryLanguageClient",value:function destoryLanguageClient(client){if(client instanceof import_node.LanguageClient){client.stop();}}}]);return _class2;}())();return _context58.abrupt("return",startClient(factory,context));case 2:case"end":return _context58.stop();}}},_callee58);}));return _activate2.apply(this,arguments);}0&&(module.exports={activate:_activate});/*!
 * 1DS JS SDK Core, 3.2.3
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */ /*!
 * 1DS JS SDK POST plugin, 3.2.3
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */ /*!
 * Application Insights JavaScript SDK - Core, 2.8.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */ /*!
 * Microsoft Application Insights JavaScript SDK - Shim functions, 2.0.1
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */ /*!
 * Microsoft Dynamic Proto Utility, 1.1.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */